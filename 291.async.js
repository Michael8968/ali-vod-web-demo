(self.webpackChunkaliplayerreactdemo=self.webpackChunkaliplayerreactdemo||[]).push([[291],{92929:function(){"use strict"},17326:function(module,__unused_webpack_exports,__webpack_require__){(function(S){module.exports=S()})(function(){var define,module,exports;return function S(m,W,v){function h(o,t){if(!W[o]){if(!m[o]){var e=void 0;if(!t&&e)return require(o,!0);if(p)return p(o,!0);throw(t=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",t}e=W[o]={exports:{}},m[o][0].call(e.exports,function(n){return h(m[o][1][n]||n)},e,e.exports,S,m,W,v)}return W[o].exports}for(var p=void 0,l=0;l<v.length;l++)h(v[l]);return h}({1:[function(S,m,W){var v,h,p=Object.defineProperty,l=Object.defineProperties,o=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(ue,he,ye)=>he in ue?p(ue,he,{enumerable:!0,configurable:!0,writable:!0,value:ye}):ue[he]=ye,s=(ue,he)=>{for(var ye in he=he||{})e.call(he,ye)&&r(ue,ye,he[ye]);if(t)for(var ye of t(he))n.call(he,ye)&&r(ue,ye,he[ye]);return ue},g=(ue,he,ye)=>(r(ue,typeof he!="symbol"?he+"":he,ye),ye),c=(Object.defineProperties(W,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),{exports:{}}),u={exports:{}};function f(){var ue,he,ye;return h||(h=1,Date.now=Date.now||function(){return new Date().getTime()},ue=Date.now(),ye={noop:he=function(){},warn:(()=>{var X=typeof console=="object"?console.warn:he;try{var I={warn:X};I.warn.call(I)}catch(N){return he}return X})(),key:"__bl",selfErrKey:"ARMS_SDK_ERROR",selfErrPage:"ARMSSDK",win:typeof window=="object"&&window.document?window:void 0,regionMap:{cn:"https://arms-retcode.aliyuncs.com/r.png?",sg:"https://arms-retcode-sg.aliyuncs.com/r.png?",sg_2:"https://retcode-sg-lazada.arms.aliyuncs.com/r.png?",daily:"http://arms-retcode-daily.alibaba.net/r.png?",daily_2:"https://arms-retcode-daily.alibaba.net/r.png?",daily_3:"http://arms-retcode-daily.aliyun.test/r.png?",us:"https://retcode-us-west-1.arms.aliyuncs.com/r.png?",tw:"https://arms-retcode.orientalgame.com.tw/r.png?",tw_sg:"https://arms-retcode-sg.orientalgame.com.tw/r.png?",hz_finance:"https://arms-retcode-hz-finance.aliyuncs.com/r.png?"},defaultImgUrl:"https://arms-retcode.aliyuncs.com/r.png?",createObject:function(X){var I;return Object.create?Object.create(X):((I=function(){}).prototype=X,new I)},each:function(X,I){var N=0,A=X.length;if(this.T(X,"Array"))for(;N<A&&I.call(X[N],X[N],N)!==!1;N++);else for(N in X)if(I.call(X[N],X[N],N)===!1)break;return X},safetyCall:function(X,I,N){if(typeof X!="function")return N;try{return X.apply(this,I)}catch(A){return N}},T:function(X,I){return X=Object.prototype.toString.call(X).substring(8).replace("]",""),I?X===I:X},duration:function(){var X=Date;try{performance&&this.T(performance.now,"Function")&&(X=performance)}catch(N){X=Date}var I=X.now();return function(){return Math.round(X.now()-I)}},filterByRule:function(){var X,I,N,A,V,te=[].slice.call(arguments),J=te.length;return J<2?te[0]:(X=te[J-1],(I=te[0])?X?(A=(N=this).T(X),V=te.slice(0,J-1),A==="Function"?N.safetyCall(X,V,I):A==="Array"?(this.each(X,function(ne){V[0]=I=N.filterByRule.apply(N,[].concat(V,ne))}),I):A==="Object"?I.replace(X.rule,X.target||""):I.replace(X,"")):I:"")},ignoreByRule:function(X,I){if(!X||!I)return!1;if((this.isString(I)||I.source||this.T(I)==="Function")&&(I=[I]),!this.isArray(I))return this.warn("[arms] invalid rules of ignore config, (list of) String/RegExp/Funcitons are available"),!1;for(var N,A=[],V=0,te=I.length;V<te;V++)if(N=I[V],this.isString(N))A.push(N.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"));else if(N&&N.source)A.push(N.source);else if(N&&this.T(N)==="Function"&&this.safetyCall(N,[X],!1)===!0)return!0;var J=new RegExp(A.join("|"),"i");return!!(A.length&&J.test&&J.test(X))},J:function(X){if(!X||typeof X!="string")return X;var I=null;try{I=JSON.parse(X)}catch(N){}return I},pick:function(X){return X===1||Math.ceil(Math.random()*X)===1},verifyConfig:function(X){var I,N;return"sample"in X&&(1<=(N=0<(N=(N=I=X.sample)&&/^\d+(\.\d+)?%$/.test(I)?parseInt(100/parseFloat(I)):N)&&N<1?parseInt(1/N):N)&&N<=100?X.sample=N:delete X.sample),X},on:function(X,I,N,A,V){return X.addEventListener?(V=V||!1,X.addEventListener(I,function te(J){A&&X.removeEventListener(I,te,V),N.call(this,J)},V)):X.attachEvent&&X.attachEvent("on"+I,function te(J){A&&X.detachEvent("on"+I,te),N.call(this,J)}),this},off:function(X,I,N){return N&&(X.removeEventListener?X.removeEventListener(I,N):X.detachEvent&&X.detachEvent(I,N)),this},delay:function(X,I){return I===-1?(X(),null):setTimeout(X,I||0)},ext:function(X){for(var I=1,N=arguments.length;I<N;I++){var A,V=arguments[I];for(A in V)Object.prototype.hasOwnProperty.call(V,A)&&(X[A]=V[A])}return X},sub:function(X,I){var N={};return this.each(X,function(A,V){I.indexOf(V)!==-1&&(N[V]=A)}),N},uu:function(){for(var X,I,N=20,A=new Array(N),V=Date.now().toString(36).split("");0<N--;)I=(X=36*Math.random()|0).toString(36),A[N]=X%3?I:I.toUpperCase();for(var te=0;te<8;te++)A.splice(3*te+2,0,V[te]);return A.join("")},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(X){var I=16*Math.random()|0;return(X==="x"?I:3&I|8).toString(16)})},seq:function(){return(ue++).toString(36)},decode:function(X){try{X=decodeURIComponent(X)}catch(I){}return X},encode:function(X,I){try{X=I?encodeURIComponent(X).replace(/\(/g,"%28").replace(/\)/g,"%29"):encodeURIComponent(X)}catch(N){}return X},serialize:function(X){var I,N=[];for(I in X=X||{})Object.prototype.hasOwnProperty.call(X,I)&&X[I]!==void 0&&N.push(I+"="+this.encode(X[I],I==="msg"));return N.join("&")},checkAPI:function(X,I){var N;return!(!X||typeof X!="string"||(!(N=/arms-retcode[\w-]*\.aliyuncs/.test(X))&&I?/(alicdn\.com)|(mmstat\.com)/.test(X):N))},checkAutoError:function(X){return!(!X||!X.message||/failed[\w\s]+fetch/i.test(X.message))},cutUrlSearch:function(X){return X&&typeof X=="string"?X.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):""},removeUrlSearch:function(X){return X&&typeof X=="string"?X.replace(/\?.*$/,""):""},createFakeToString:function(X){return function(){return X+"() { [native code] }"}},checkSameOrigin:function(X,I){var N;return!(!I||!X||(N="//"+I.split("/")[2],X!==I&&X.slice(0,I.length+1)!==I+"/"&&X!==N&&X.slice(0,N.length+1)!==N+"/"&&/^(\/\/|http:|https:).*/.test(X)))},getRandIP:function(){for(var X=[],I=0;I<4;I++){var N=Math.floor(256*Math.random());X[I]=(15<N?"":"0")+N.toString(16)}return X.join("").replace(/^0/,"1")},getSortNum:function(X){return X?1e3<=(X+=1)&&X<=9999?X:X<1e3?X+1e3:X%1e4+1e3:1e3},getRandNum:function(X){return!X||typeof X!="string"||X.length<5?this.getNum(5):X.substring(X.length-5)},getNum:function(X){for(var I=[],N=0;N<X;N++){var A=Math.floor(16*Math.random());I[N]=A.toString(16)}return I.join("")},getCurDomain:function(){return location&&location.hostname||""},getSrcType:function(X,I){var N=location&&location.host||"";if(!N)return"";var A=new URL(X).host;if(A===N)return"self";for(var V=0;V<I.length;V+=1)if(A.includes(I[V]))return"cdn";return"others"},parseFetchHeaders:function(X){if(!X)return{};var I={};try{if(typeof X.keys=="function")for(var N=X.keys(),A=N.next();!A.done;){var V=A.value;I[V]=X.get(V),A=N.next()}else I=X}catch(te){I={}}return I},parseXhrHeaders:function(X){if(!X&&typeof X!="string")return{};var I={};try{I=X.split(`\r
`).reduce(function(N,A){return A=A.split(": "),N[A[0]]=A[1],N},{})}catch(N){I={}}return I},getQuerys:function(X){if(!X)return"";var I,N,A,V={};try{var te=[];if(0<(te=0<=X.indexOf("?")?X.substring(X.indexOf("?")+1,X.length).split("&"):te).length)for(var J in te)N=(I=te[J].split("="))[0],A=I[1],V[N]=A}catch(ne){V={}}return V},getURL:function(X){if(!X)return null;var I={},V=X.length,N=X.indexOf("://");if(N<0)return null;I.protocol=X.substring(0,N+1);var te=X.indexOf("#"),A=X.indexOf("?"),V=(te<0&&(te=V),A<0&&(A=te),I.search=X.substring(A,te).substring(0,1e3),X.substring(N+3,A)),te=V.indexOf("/");return te<0&&(te=V.length),I.domain=V.substring(0,te).split(":")[0],I.path=V.substring(te,V.length).substring(0,1e3),I},getResType:function(X,A){if(-1<["script","img","other"].indexOf(X))return X;if(-1<["video"].indexOf(X))return"media";if(-1<["document","iframe"].indexOf(X))return"doc";var A=A?this.getURL(A):null,N=A&&A.path?A.path.lastIndexOf("."):-1,A=(0<N?A.path.substr(N+1):"").toLowerCase();if(A){if(-1<["eot","woff","woff2","ttf"].indexOf(A))return"font";if(A==="css")return"css";if(A==="js")return"script"}return-1<["fetch","xmlhttprequest","beacon"].indexOf(X)?"api":"others"},areInOrder:function(){for(var X=1;X<arguments.length;X+=1)if(arguments[X]<arguments[X-1])return!1;return!0},getFetchSnapshot:function(X,I,N){try{var A=(X&&typeof X[0]!="string"?X[0].url:X[0])||"",V=(X&&typeof X[0]!="string"?X[0]:X[1])||{},te=V.method.toUpperCase()==="POST"?V.body:this.getQuerys(A),J={originApi:A,method:V.method||"unknown",params:te,response:I||"",reqHeaders:this.parseFetchHeaders(V.headers||null),resHeaders:this.parseFetchHeaders(N)},ne=JSON&&JSON.stringify(J)||"{}"}catch(de){ne="{}"}return ne},getXhrSnapshot:function(X,I,N){if(!X||!I||!N)return{};var A,V;try{var te="";N.responseType===""||N.responseType==="text"?te=N.responseText:N.responseType==="document"&&(te=N.responseXML),A={originApi:X,method:I,params:this.getQuerys(X),response:te,reqHeaders:{},resHeaders:this.parseXhrHeaders(typeof N.getAllResponseHeaders=="function"&&N.getAllResponseHeaders()||"")},V=JSON&&JSON.stringify(A)||"{}"}catch(J){V="{}"}return V},isRobot:function(){var X=["nuhk","googlebot/","googlebot-image","yammybot","openbot","slurp","msnbot","ask jeeves/teoma","ia_archiver","baiduspider","bingbot/","adsbot"];if(navigator&&typeof navigator.userAgent=="string")try{for(var I=navigator.userAgent.toLowerCase(),N=0;N<X.length;N++){var A=X[N];if(0<=I.lastIndexOf(A))return!0}}catch(V){this.warn("[arms] useragent parse error")}return!1},isFunction:function(X){return typeof X=="function"},isPlainObject:function(X){return Object.prototype.toString.call(X)==="[object Object]"},isString:function(X){return Object.prototype.toString.call(X)==="[object String]"},isArray:function(X){return Object.prototype.toString.call(X)==="[object Array]"},joinRegExp:function(X){for(var I,N=[],A=0,V=X.length;A<V;A++)I=X[A],this.isString(I)?N.push(I.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):I&&I.source&&N.push(I.source);return new RegExp(N.join("|"),"i")},reWriteMethod:function(X,I,N){var A;X!==null&&(A=X[I],X[I]=N(A))},checkSDKError:function(X,I){return!(!X&&!I||!new RegExp(this.selfErrKey,"i").test(X)&&!this.ignoreByRule(I,[/retcode.alicdn.com\/retcode\/bl.js/,/g.alicdn.com\/retcode\/cloud-sdk\/bl.js/,/laz-g-cdn.alicdn.com\/retcode\/cloud-sdk\/bl.js/,/local.taobao.com:8880\/build\/bl/]))},sdkError:function(X){return{msg:X,message:this.selfErrKey}},dealParam:function(X,I,N){var A={};try{A=this.isPlainObject(X)?this.ext({key:X.key||"default",val:X.val||X.value||N},X,{begin:Date.now()}):{key:X||"default",val:I||N,begin:Date.now()}}catch(V){this.warn("[retcode] baseLog error: "+V)}return A}},v=ye),v}var y,d,a,_,b={exports:{}},E={exports:{}};function T(){var ue,he,ye,X,I,N;return a||(a=1,ue=f(),d||(d=1,N=f(),y=function(A,V,te){typeof A=="object"&&(A=N.serialize(A)),window&&window.navigator&&typeof window.navigator.sendBeacon=="function"?window.navigator.sendBeacon(V+A+(te?"&post_res=":""),te||"&post_res="):N.warn("[arms] navigator.sendBeacon not surported")}),he=y,ye="aokcdqn3ly@e629dabd48a9933",X=function(A,V){var te,J,ne;if(V.t!=="error"||!(te=A.requestQueue[0])||te.t!=="error"||V.msg!==te.msg)return V.t==="behavior"?0<(J=A.requestQueue&&A.requestQueue.length)&&A.requestQueue[J-1].t==="behavior"?(ne=V.behavior||[],A.requestQueue[J-1].behavior.concat(ne)):A.requestQueue.push(V):A.requestQueue.unshift(V),A.onReady(function(){A.requestTimmer=ue.delay(function(){A.clear()},A.requestQueue[0]&&A.requestQueue[0].t==="error"?3e3:-1)}),!0;V.times=te.times+1,A.requestQueue[0]=V},(I=function(A){return this.ver="1.8.36-beta.12",this._conf=ue.ext({},I.dftCon),this.sampleCache={},this.requestQueue=[],this.selfQueue=[],this.sdkFlag=!0,this.hash=ue.seq(),this.resetPageview(),this.setConfig(A),this.rip=ue.getRandIP(),this.record=999,this["EagleEye-TraceID"]=this.getTraceId()["EagleEye-TraceID"],this._common={},this}).dftCon={sample:1,pvSample:1,tag:"",imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",region:null,ignore:{ignoreUrls:[],ignoreApis:[],ignoreErrors:[/^Script error\.?$/],ignoreResErrors:[],ignoreResources:[/\/(bl|wl)(.debug)?.js$/]},release:void 0,environment:"prod",beforeReport:null,parseTraceId:null},I.prototype={constructor:I,onReady:function(A){return A()},getPage:function(){var A=this._conf.page;return ue.safetyCall(A,[],A+"")},setPage:function(){},setConfig:function(A){A&&typeof A=="object"&&(ue.verifyConfig(A),A=this.setImgUrl(A),this._conf=ue.ext({},this._conf,A))},setImgUrl:function(A){var V=A.region,te=A.imgUrl;return V?(V=ue.regionMap[V],A.imgUrl=V||ue.defaultImgUrl):te&&(A.imgUrl=te),A},checkImgUrl:function(){return!0},sendRequest:function(){},sendBeacon:function(A,V,te){he(A,V||this.getConfig("imgUrl"),te)},postData:function(){},commonInfo:function(){return{}},setCommonInfo:function(A){A&&typeof A=="object"&&(this._common=ue.ext({},this._common,A))},resetPageview:function(){this.pageview=ue.uu(),this.sBegin=Date.now()},getUsername:function(){if(!this.username){var A=this._conf,A=A&&A.setUsername;if(typeof A=="function")try{var V=A();typeof V=="string"&&(V=V.substr(0,40),this.username=V)}catch(te){ue.warn("[arms] setUsername fail",te)}}return this.username},getTraceId:function(){var te=this.rip,A=Date.now(),V=ue.getSortNum(this.record),te=te+A+V+ue.getRandNum(this._conf.pid);return this["EagleEye-TraceID"]=te,this.record=V,{"EagleEye-TraceID":te}},getUberTraceId:function(A){var J=this.rip,ne=Date.now(),V=ue.getSortNum(this.record),te=ue.getRandNum(this._conf.pid),J=J+ne+V+ue.getNum(2)+te,ne=J.substring(0,16);return A=A?"1":"0",J[0]==="0"&&(J[0]="1"),J[16]==="0"&&(J[16]="1"),{"uber-trace-id":J+":"+ne+":0:"+A,traceId:J}},getB3TraceId:function(A){var J=this.rip,ne=Date.now(),V=ue.getSortNum(this.record),te=ue.getRandNum(this._conf.pid),J=J+ne+V+ue.getNum(2)+te,ne=J.substring(0,16);return A=A?"1":"0",J[0]==="0"&&(J[0]="1"),J[16]==="0"&&(J[16]="1"),{b3:J+"-"+ne+"-"+A+"-0","X-B3-TraceId":J,"X-B3-ParentSpanId":"0","X-B3-SpanId":ne,"X-B3-Sampled":A}},getPageviewId:function(){return{"EagleEye-SessionID":this.pageview}},getConfig:function(A){return A?this._conf[A]:ue.ext({},this._conf)},sampling:function(A){return A===1||(typeof this.sampleCache[A]=="boolean"||(this.sampleCache[A]=ue.pick(A)),this.sampleCache[A])},clear:function(A){var V;clearTimeout(this.requestTimmer),this.requestTimmer=null;for(var te,J=this._conf&&typeof this._conf.sendRequest=="function";V=this.requestQueue.pop();)V.t==="res"?this.postData(V,"res"):V.t==="error"?this.postData(V,"err"):V.t==="api"?this.postData(V,"apiSnapshot"):V.t==="behavior"?this.postData(V,"behavior"):V.t==="health"&&!J&&window&&window.navigator&&typeof window.navigator.sendBeacon=="function"?this.sendBeacon(V):V.t==="resource"&&!J&&window&&window.navigator&&typeof window.navigator.sendBeacon=="function"?(te=JSON.stringify({resource:V.resource}),delete V.resource,this.sendBeacon(V,null,te)):V.t==="resource"?this.postData(V,"resource"):this.sendRequest(V);return A&&this.clearSelf(),this},clearSelf:function(){var A;for(clearTimeout(this.Timmer),this.Timmer=null;A=this.selfQueue.pop();)this.postData(A,"err");return this},_lg:function(A,V,te,J){var ne=this,de=ne._conf,ge=ne.getPage(),ve=de.ignore||{},ce=ve.ignoreErrors,se=ve.ignoreResErrors,me=ve.ignoreUrls,ve=ve.ignoreApis;if(ne._isRobot||ue.ignoreByRule(ge,me)||ue.ignoreByRule(ue.decode(ge),me)||A==="error"&&(ue.ignoreByRule(V.msg,ce)||ue.ignoreByRule(ue.decode(V.msg),ce))||A==="resourceError"&&(ue.ignoreByRule(V.src,se)||ue.ignoreByRule(ue.decode(V.src),se))||A==="api"&&(ue.ignoreByRule(V.api,ve)||ue.ignoreByRule(ue.decode(V.api),ve))||!ne.checkImgUrl(de.imgUrl)||!V||de.disabled||!de.pid||J===0)return ne;if(me=V.dl,delete V.dl,V=ue.ext({t:A,times:1,page:ge,tag:de.tag||"",release:de.release||"",environment:de.environment,begin:Date.now(),c1:de.c1,c2:de.c2,c3:de.c3},V,ne.commonInfo(),ne._common,{pid:de.pid,_v:ne.ver,pv_id:ne.pageview,username:ne.getUsername(),sampling:te||1,dl:me,z:ue.seq()}),ue.T(de.beforeReport)==="Function")try{if(!(V=de.beforeReport(V)))return ne}catch(Se){return ne}return J!==1&&te&&!ne.sampling(te)?ne:X(ne,V)},_self:function(A,V,te){var J=this,ne=J._conf;if(A!=="error"||!J.checkImgUrl(ne.imgUrl)||!V||ne.disabled||!ne.pid||te&&!J.sampling(te))return J;if(V=ue.ext({t:A,times:1,page:ue.selfErrPage,tag:ne.pid,begin:Date.now()},V,{pid:ye,_v:J.ver,sampling:te||1,z:ue.seq()}),A=J.selfQueue[0],A){A.times++;try{A.err&&V.err&&A.err.msg_raw&&V.err.msg_raw&&A.err.msg_raw.split("&").indexOf(V.err.msg_raw)<0&&A.err.msg_raw.length<1e3&&(A.err.msg_raw+="&"+V.err.msg_raw)}catch(de){}}else J.selfQueue.unshift(V),J.onReady(function(){J.sdkFlag&&(J.sdkFlag=!1,J.Timmer=ue.delay(function(){J.clearSelf()},1e4))})},custom:function(A,V){var te,J;return A&&typeof A=="object"&&(te=!1,J={begin:Date.now()},ue.each(A,function(ne,de){return(te=de&&de.length<=20)||ue.warn("[retcode] invalid key: "+de),J["x-"+de]=ne,te}),te)?this._lg("custom",J,V||1):this}},E.exports=I),E.exports}var k,P={exports:{}},w,D,U,M={exports:{}};function O(){var ue;return U||(U=1,ue=f(),D=function(he,ye){function X(ne,de,ge){var ce;ne!==null&&(ce=ne[de],ne[de]=ge(ce))}function I(ne,de){return function(ge){if(ge&&ge!==J){var ce;J=ge;try{ce=ge.target}catch(se){ce="<unknown>"}ce.length!==0&&(ge={type:"ui.".concat(ne),data:{message:(se=>{if(!se||se.nodeType!==1)return"";for(var me=se||null,ve=[],Se=0,G=0,K="";me&&Se++<5&&!((K=(ee=>{var pe,_e,we,Ae,Re=[];if(!ee||typeof ee.tagName!="string")return"";if(Re.push(ee.tagName.toLowerCase()),typeof ee.id=="string"&&Re.push("#".concat(ee.id)),typeof(pe=ee.className)=="string")for(_e=pe.split(/\s+/),xe=0;xe<_e.length;xe++)Re.push(".".concat(_e[xe]));for(var Le=["type","name","title","alt","data-arms-attr"],xe=0;xe<Le.length;xe++)typeof(Ae=ee.getAttribute(we=Le[xe]))=="string"&&Re.push("[".concat(we,'="').concat(Ae,'"]'));return Re.join("")})(me))==="html"||1<Se&&80<=G+3*ve.length+K.length);)ve.push(K),G+=K.length,me=me.parentNode;return ve.reverse().join(" > ")})(ce)},timestamp:Date.now()},ne==="click"?A&&A.addBehavior(ge):ne==="keypress"&&(te||A&&A.addBehavior(ge),clearTimeout(te),te=setTimeout(function(){te=void 0},100)))}}}var N=[],A=null,V=ye&&ye.location&&ye.location.href,te=void 0,J=null;ue.ext(he.prototype,{addBehavior:function(ne){if(this.getConfig("behavior")&&ne&&typeof ne=="object"){var de={},ge=ne.data||{};if(ne.type)de=ge;else{if(typeof ge.name!="string"||typeof ge.message!="string")return;de.name=ge.name.substr(0,20),de.message=ge.message.substr(0,200)}return de.message&&(de.message=ue.encode(de.message)),ge={type:ne.type||"custom",data:de||{},timestamp:ne.timestamp||Date.now(),page:ne.page||ye&&ye.location&&ye.location.pathname},N.push(ge),N=N.slice(-100)}},getBehavior:function(){return N||[]},setBehavior:function(ne){return N=ne||N},reportBehavior:function(ne){var de=this;de.getConfig("behavior")&&(de.sendBhTimer&&(clearTimeout(de.sendBhTimer),de.sendBhTimer=void 0),de.sendBhTimer=setTimeout(function(){N&&0<N.length&&(de.behavior(N),N=[],de.sendBhTimer=void 0,ne)&&typeof ne=="function"&&ne()},0))},initBehavior:function(){if(!this.hasInitBehavior&&!A){try{document&&document.referrer&&document.location&&(K=document.referrer,ee=document.location.href,K!=="")&&(V=ee,A)&&A.addBehavior({type:"navigation",data:{from:K,to:ee}}),ye&&ye.document&&ye.document.addEventListener&&(ye.document.addEventListener("click",I("click"),!1),ye.document.addEventListener("keypress",I("keypress"),!1)),Se=(Se=ye&&ye.chrome)&&Se.app&&Se.app.runtime,G="history"in ye&&!!ye.history.pushState&&!!ye.history.replaceState,!Se&&G&&(me=function(pe,_e){A&&A.addBehavior({type:"navigation",data:{from:pe,to:_e}}),V=_e},ve=ye.onpopstate,ye.onpopstate=function(){for(var pe=arguments.length,_e=new Array(pe),we=0;we<pe;we++)_e[we]=arguments[we];var Ae=ye.location.href;if(me(V,Ae),ve)return ve.apply(this,_e)},X(ye.history,"pushState",Se=function(pe){return function(){for(var _e=arguments.length,we=new Array(_e),Ae=0;Ae<_e;Ae++)we[Ae]=arguments[Ae];var Re=2<we.length?we[2]:void 0;return Re&&me(V,String(Re)),pe.apply(this,we)}}),X(ye.history,"replaceState",Se));var ne=this.getConfig("enableConsole");if(ne){var de=ne;if(ye&&ye.console){var ge=["debug","info","warn","log","error","assert"];ue.isArray(de)&&(ge=de);for(var ce=0;ce<ge.length;ce++){var se=ge[ce];se&&ue.isString(se)&&ye.console[se]&&typeof ye.console[se]=="function"&&X(ye.console,se,function(pe){var _e=se;return function(){for(var we=arguments.length,Ae=new Array(we),Re=0;Re<we;Re++)Ae[Re]=arguments[Re];if(A&&A.addBehavior({type:"console",data:{level:_e,message:Ae}}),_e==="error")for(var Le=0;Le<Ae.length;Le++){var xe=Ae[Le];xe&&xe.message&&xe.stack&&A&&A.errorHandler(new ErrorEvent("error",{error:xe,message:xe.message}))}pe&&Function.prototype.apply.call(pe,ye.console,Ae)}})}}}}catch(pe){ue.warn("[arms] error in initBehavior",pe)}(A=this).hasInitBehavior=!0}var me,ve,Se,G,K,ee;return this}})}),D}var B,j,H,R,L,C,z,ie,Z,q,x,F,Y,re,le,ae,Q,oe={};function fe(){return B||(B=1,oe.TIMING_KEYS=["startTime","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","","domInteractive","","domContentLoadedEventEnd","","loadEventStart","","msFirstPaint","secureConnectionStart","redirectStart","redirectEnd"]),oe}function be(){return z||(z=1,C=function(ue,he,ye){function X(K,ee,pe,_e,we){if(ee===void 0){var Ae;if(!G[K]){Re=new RegExp(K+"=([^;]+)");try{Ae=Re.exec(ye.cookie)}catch(Le){return J.warn("[retcode] can not get cookie:",Le),null}Ae&&(G[K]=Ae[1])}return G[K]}var Re=K+"="+ee;Re+="; path=/",pe&&(Re+="; max-age="+pe);try{return ye.cookie=Re,!!ye.cookie}catch(Le){return J.warn("[retcode] can not set cookie: ",Le),!1}}function I(K){return(K=K._conf.uid||X("_nk_")||X("_bl_uid"))||(K=J.uu(),X("_bl_uid",K,15552e3))?K:null}var N,A,V,te,J=f(),ne=(H||(H=1,V=f(),te=fe().TIMING_KEYS,j=function(){var K,ee,pe,_e=V.win||{},we=_e.performance;return we&&typeof we=="object"&&typeof we.getEntriesByType=="function"?(K={},ee=we.timing||{},pe=we.getEntriesByType("resource")||[],K.begin=ee[te[1]]||Date.now(),typeof _e.PerformanceNavigationTiming=="function"&&(_e=we.getEntriesByType("navigation")[0])&&(ee=_e),V.each({dom:[10,8],load:[14,1]},function(xe,Re){var Le=ee[te[xe[1]]],xe=ee[te[xe[0]]];0<Le&&0<xe&&0<=(xe=Math.round(xe-Le))&&xe<6e5&&(K[Re]=xe)}),K.res=JSON.stringify(pe),K):null}),j),de=(L||(L=1,N=f(),A=fe().TIMING_KEYS,R=function(){var K,ee,pe,_e,we,Ae=N.win||{},Re=Ae.performance;return Re&&typeof Re=="object"?(K={},ee=Re.timing||{},pe=Date.now(),_e=1,typeof Ae.PerformanceNavigationTiming=="function"&&(we=Re.getEntriesByType("navigation")[0])&&(ee=we,_e=2),N.each({dns:[3,2],tcp:[5,4],ssl:[5,17],ttfb:[7,6],trans:[8,7],dom:[10,8],res:[14,12],firstbyte:[7,2],fpt:[8,1],tti:[10,1],ready:[12,1],load:[14,1]},function(Ve,xe){var Ue=ee[A[Ve[1]]],Ve=ee[A[Ve[0]]];(_e===2||0<Ue&&0<Ve)&&0<=(Ve=Math.round(Ve-Ue))&&Ve<6e5&&(K[xe]=Ve)}),we=Ae.navigator.connection,Ae=Re.navigation||{},K.ct=we?we.effectiveType||we.type:"",(Re=999<(Re=we&&(we.downlink||we.downlinkMax||we.bandwidth)||null)?999:Re)&&(K.bandwidth=Re),K.navtype=Ae.type===1?"Reload":"Other",_e===1&&0<ee[A[16]]&&0<ee[A[1]]&&0<=(we=ee[A[16]]-ee[A[1]])&&we<36e5&&(K.fpt=we),_e===1&&0<ee[A[1]]?K.begin=ee[A[1]]:K.begin=_e===2&&0<K.load?pe-K.load:pe,K):null}),R),ge=null,ce=ye.documentElement,se=he.innerWidth||ce.clientWidth||ye.body.clientWidth,me=he.innerHeight||ce.clientHeight||ye.body.clientHeight,ve=he.navigator.connection,Se={sr:screen.width+"x"+screen.height,vp:se+"x"+me,ct:ve?ve.effectiveType||ve.type:""},G={};return J.ext(ue.prototype,{activeErrHandler:function(K){return ge&&!K||(ge=this),this},errorHandler:function(K){if(K){var ee,pe=K.type;pe==="error"?!(ee=K.target||K.srcElement)||!ee.tagName||K.message||K.filename||K.lineno||K.colno?this.error(K.error||{message:K.message},K):this.resourceErrorHandler(K):pe==="unhandledrejection"&&J.T(K.reason,"Error")&&J.checkAutoError(K.reason)&&this.error(K.reason);try{this.getConfig("behavior")&&this.reportBehavior&&this.reportBehavior()}catch(_e){}}return this},resourceErrorHandler:function(K){var ee=this,pe=K.target||K.srcElement;try{var _e=ee.getSrc(pe),we=typeof pe.tagName=="string"?pe.tagName.toLowerCase():"",Ae=ee.getXPath(pe,5),Re=J.getURL(_e),Le={src:_e&&_e.substring(0,1e3),node_name:we,xpath:Ae,res_type:J.getResType(we,_e),res_name:Re.path,domain:Re.domain};return ee._conf.enableResource&&ee.fixResourceStatus&&K.timeStamp&&ee.fixResourceStatus({src:_e,node_name:we,res_type:J.getResType(we,_e),timeStamp:K.timeStamp,domain:Re.domain}),ee._lg("resourceError",Le),ee}catch(xe){return J.warn("[ARMS] resourceErrorHandler error :",xe),ee}},getSrc:function(K){var ee,pe,_e=K.src||K.href;try{_e||(ee=(typeof K.tagName=="string"?K.tagName.toLowerCase():"")==="object",pe=K.getAttribute("classid")&&K.getAttribute("classid").toLowerCase()==="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"||K.getAttribute("type")==="application/x-shockwave-flash",_e=(_e=ee&&pe?K.getAttribute("data")||K.getAttribute("codebase"):_e)||K.outerHTML||K.innerHTML)}catch(we){_e=""}return _e},getXPath:function(K,ee){var _e=K.id?"#"+K.id:"",pe=typeof K.className=="string"?"."+K.className.split(" ").join("."):"",_e=(typeof K.tagName=="string"?K.tagName.toLowerCase():"")+_e+pe;return K.parentNode&&K.parentNode.tagName&&ee-1!=0?this.getXPath(K.parentNode,ee-1)+" > "+_e:_e},sendPerformance:function(K){var ee=this;ee.onReady(function(){var pe=de();pe&&pe.load&&0<pe.load&&(pe.page=ee.getPage(!0),(pe=K?J.ext(pe,K):pe).autoSend=!0,ee.performance(pe))})},sendResources:function(K){var ee=this;ee.onReady(function(){var pe=ne();pe&&pe.load&&0<pe.load&&(pe.load&&pe.load<=2e3||pe.load&&pe.load<=8e3&&.05<Math.random()||(pe.page=ee.getPage(!0),pe.dl=location.href,K&&(pe=J.ext(pe,K)),ee._lg("res",pe,ee.getConfig("sample"))))})},sendPV:function(){var K=this;K.onReady(function(){pe=I(K),ee=he.devicePixelRatio||1;var ee,pe={uid:pe,dt:ye.title,dl:location.href,dr:ye.referrer,dpr:ee.toFixed(2),de:(ye.characterSet||ye.defaultCharset||"").toLowerCase(),ul:ce.lang,begin:Date.now()};pe.uid&&K._lg("pv",pe,K.getConfig("pvSample"))})},commonInfo:function(){return Se.uid=I(this),Se.sid=(K=>{if(K.session)return K.session;var ee;try{if(typeof window=="object"&&typeof sessionStorage=="object"&&typeof sessionStorage.getItem=="function")return typeof(ee=sessionStorage.getItem("_bl_sid"))=="string"?K.session=ee:(ee=J.uu(),K.session=ee,typeof sessionStorage.setItem=="function"&&sessionStorage.setItem("_bl_sid",ee)),ee}catch(pe){J.warn("[ARMS] getSid error :",pe)}return K.session=ee=J.uu(),ee})(this),Se},handleUnload:function(K){var ee=Date.now();if(ee-this._lastUnload<200)return this;this._lastUnload=ee,this.sendHealth(K),this.speedCache&&(this._lg("speed",this.speedCache),this.speedCache=null,clearTimeout(this.speedTimmer)),this._conf&&this._conf.enableResource&&this.resourceComboReport(),this.clear(!0)},bindHashChange:function(K){var ee=this;if(!K^ee.hashChangeHandler)return ee;K?(ee.hackHistoryState(),ee.hashChangeHandler=function(pe){var _e=ee._conf.parseHash(location.hash);_e&&ee.setPage(_e,pe!==!1)},ee.stateChangeHandler=function(pe){pe=ee._conf.parseHash(pe.detail),pe&&ee.setPage(pe)},J.on(he,"hashchange",ee.hashChangeHandler),J.on(he,"historystatechange",ee.stateChangeHandler),ee.hashChangeHandler(!1)):(J.off(he,"hashchange",ee.hashChangeHandler),J.off(he,"historystatechange",ee.stateChangeHandler),ee.hashChangeHandler=null,ee.stateChangeHandler=null)},initHandler:function(){var K,ee=this;return ee.hasInitHandler||(K=ee._conf,J.on(he,"beforeunload",function(){ee.handleUnload(0)}),ee.bindHashChange(K.enableSPA),ee.activeErrHandler(!1),ee.hasInitHandler=!0),ee}}),J.on(he,"error",function(K){ge&&ge.errorHandler(K)},!1,!0).on(he,"unhandledrejection",function(K){ge&&ge.errorHandler(K)}),ue}),C}function Ee(){var ue,he;return Z||(Z=1,ue=f(),he=500,ie=function(ye,X,I){var N=X.innerHeight||0,A=[],V=null,te=0;ue.ext(ye.prototype,{initFmpObserver:function(J){var ne=this;if(!ne._conf||!ne._conf.useFmp)return null;if(!X.MutationObserver)return ue.warn("[retcode] first meaningful paint can not be retrieved"),ne.sendPerformance(),null;ue.on(X,"beforeunload",function(){ne.endObserving(0,!0)});var de=X.MutationObserver;return(V=new de(function(){var ge,ce,se;ge=ne._startTime,ge=Date.now()-ge,(se=I.querySelector("body"))?(ce=0,ce+=function me(ve,Se,G){var K=0,ee=ve.tagName;if(ee!=="SCRIPT"&&ee!=="STYLE"&&ee!=="META"&&ee!=="HEAD"){if(0<(ee=ve.children?ve.children.length:0))for(var pe=ve.children,_e=ee-1;0<=_e;_e--)K+=me(pe[_e],Se+1,0<K);if(K<=0&&!G&&!(ve.getBoundingClientRect&&ve.getBoundingClientRect().top<N))return 0;K+=1+.5*Se}return K}(se,1,!1),A.push({score:ce,t:ge})):A.push({score:0,t:ge})})).observe(document,{childList:!0,subtree:!0}),te=1,ne.onReady(function(){ne.endObserving(J)}),V},endObserving:function(J,ne){var de=this;if(V&&te)if(de.fmpTimmer&&(clearTimeout(de.fmpTimmer),de.fmpTimmer=null),ne||!((me,ve)=>(me=Date.now()-me,!(ve<me||me-(A&&A.length&&A[A.length-1].t||0)>2*he)))(de._startTime,J)){V.disconnect(),te=0,A=function me(ve){for(var Se=1;Se<ve.length;Se++)if(ve[Se].score<ve[Se-1].score)return ve.splice(Se,1),me(ve);return ve}(A);for(var ge,ce=null,se=1;se<A.length;se++)A[se].t>=A[se-1].t&&(ge=A[se].score-A[se-1].score,!ce||ce.rate<=ge)&&(ce={t:A[se].t,rate:ge});ce&&0<ce.t&&ce.t<36e5?de.sendPerformance({fmp:ce.t}):de.sendPerformance()}else de.fmpTimmer=ue.delay(function(){de.endObserving(J)},he)}})}),ie}function Pe(){return x||(x=1,q=function(ue,he){function ye(ne,de,ge,ce,se,me,ve,Se,G,K,ee,pe,_e){se=X.J(se)||null,(de=X.safetyCall(de,[se,ce],null))&&(se=de.code||me,ce=!("success"in de)||de.success,ne.api(ge,ce,ve,se,de.msg,Se,G,K,ce?{}:ee,N,pe,_e))}var X=f(),I=null,N=X.getCurDomain(),A="fetch",V="__oFetch_",te="__oXMLHttpRequest_",J="XMLHttpRequest";return X.ext(ue.prototype,{removeHook:function(ne,de){return I&&(de||this===I)&&(he[V]&&(he[A]=he[V],delete he[V]),he[te]&&(he[J]=he[te],delete he[te]),I=null),this},addHook:function(ne){return!ne&&I||(I||(typeof he[A]=="function"&&(se=he[A],he[V]=se,he[A]=function(me,ve){var Se=arguments.length===1?[me]:Array.apply(null,arguments),G=I;if(!G||!G.api||ve&&(ve.method==="HEAD"||ve.mode==="no-cors"))return se.apply(he,Se);ve=ve||{};var K=Date.now(),ee=G._conf,pe=X.duration(),_e=we=(me&&typeof me!="string"?me.url:me)||"",we=X.cutUrlSearch(we),Re=(ee.ignore||{}).ignoreApis,Ae=ee.parseTraceId;if(!X.checkAPI(we,!0)||X.ignoreByRule(we,Re))return se.apply(he,Se);we=X.filterByRule(we,_e,ee.ignoreApiPath||ee.apiHelper);var Re=ee.enableLinkTrace,Le="",xe="",Ue=G.getConfig("pid"),Ve=null,Ze=G.getConfig("sample"),at=G.getConfig("linkType"),Ke=1;if(Ze&&!G.sampling(Ze)&&(Ke=0),Re){Ze="";try{Ze=location.origin||location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch(et){Ze=""}var Ie,Re=X.checkSameOrigin(_e,Ze);if(G.getConfig("enableApiCors")||Re)if(me&&typeof me!="string")try{if(Se[0].headers&&typeof Se[0].headers.get=="function"&&typeof Se[0].headers.append=="function")switch(at){case"arms":var We=Se[0].headers.get("EagleEye-TraceID"),Ge=Se[0].headers.get("EagleEye-SessionID"),nt=Se[0].headers.get("EagleEye-pAppName");We?Le=We:(Le=G.getTraceId()["EagleEye-TraceID"],Se[0].headers.append("EagleEye-TraceID",Le)),Ge?xe=Ge:(xe=G.getPageviewId()["EagleEye-SessionID"],Se[0].headers.append("EagleEye-SessionID",xe)),nt||Se[0].headers.append("EagleEye-pAppName",Ue);break;case"b3":var Fe,st=Se[0].headers.get("X-B3-TraceId"),Le=st||(Fe=G.getB3TraceId(Ke),Se[0].headers.append("X-B3-TraceId",Fe["X-B3-TraceId"]),Se[0].headers.append("X-B3-ParentSpanId",Fe["X-B3-ParentSpanId"]),Se[0].headers.append("X-B3-SpanId",Fe["X-B3-SpanId"]),Se[0].headers.append("X-B3-Sampled",Fe["X-B3-Sampled"]),Se[0].headers.append("X-Request-ID",X.guid()),Fe["X-B3-TraceId"]),xe=G.pageview;break;default:var lt=Se[0].headers.get("uber-trace-id");Le=lt?lt.split(":")[0]:(lt=G.getUberTraceId(Ke),Se[0].headers.append("uber-trace-id",lt["uber-trace-id"]),lt.traceId),xe=G.pageview}}catch(et){X.warn(`[retcode] fetch failed to set header, exception is :
`+et)}else switch(ve.headers=ve.headers||{},at){case"arms":ve.headers["EagleEye-TraceID"]?Le=ve.headers["EagleEye-TraceID"]:(Le=G.getTraceId()["EagleEye-TraceID"],ve.headers["EagleEye-TraceID"]=Le),ve.headers["EagleEye-SessionID"]?xe=ve.headers["EagleEye-SessionID"]:(xe=G.getPageviewId()["EagleEye-SessionID"],ve.headers["EagleEye-SessionID"]=xe),ve.headers["EagleEye-pAppName"]||(ve.headers["EagleEye-pAppName"]=Ue);break;case"b3":Le=ve.headers["X-B3-TraceId"]||(Ie=G.getB3TraceId(Ke),ve.headers["X-B3-TraceId"]=Ie["X-B3-TraceId"],ve.headers["X-B3-ParentSpanId"]=Ie["X-B3-ParentSpanId"],ve.headers["X-B3-SpanId"]=Ie["X-B3-SpanId"],ve.headers["X-B3-Sampled"]=Ie["X-B3-Sampled"],ve.headers["X-Request-ID"]=X.guid(),Ie["X-B3-TraceId"]),xe=G.getPageviewId()["EagleEye-SessionID"];break;default:Le=ve.headers["uber-trace-id"]?ve.headers["uber-trace-id"].split(":")[0]:(Ie=G.getUberTraceId(Ke),ve.headers["uber-trace-id"]=Ie["uber-trace-id"],Ie.traceId),xe=G.getPageviewId()["EagleEye-SessionID"]}}return se.apply(he,Se).then(function(rt){if(!G||!G.api)return rt;try{if(rt&&typeof rt.clone=="function"){var et=rt.clone(),ut=et.headers;if(ut&&typeof ut.get=="function"){var pt,ht=ut.get("content-type");if(ht&&!/(text)|(json)/.test(ht))return rt;Le||typeof(pt=X.parseFetchHeaders(ut))=="object"&&pt["eagleeye-traceid"]&&(Le=pt["eagleeye-traceid"],Ve="response")}var ft=pe();et.text().then(function(ct){!Le&&X.isFunction(Ae)&&(dt=Ae(et,ct))&&X.isString(dt)&&(Le=dt);var dt=X.getFetchSnapshot(Se,ct,ut);et.ok?ye(G,ee.parseResponse,we,_e,ct,et.status||200,ft,K,Le,xe,dt,Ve,Ke):(G.api(we,!1,ft,et.status||404,et.statusText,K,Le,xe,dt,N,Ve,Ke),ee.enableResource&&I.fixResourceStatus&&I.fixResourceStatus({src:et.url,res_type:"api"}))})}return rt}catch(ct){return X.warn("[ARMS] fetch response error :",ct),rt}}).catch(function(rt){var et;throw G&&G.api&&(et=pe(),G.api(we,!1,et,rt.name||"Error",rt.message,K,Le,xe,{},N),ee.enableResource)&&I.fixResourceStatus&&I.fixResourceStatus({src:_e,res_type:"api"}),rt})},he[A].toString=X.createFakeToString(A)),typeof he[J]=="function"&&(ge=he[J],he[te]=ge,(ce=function(me){var ve,Se,G,K,ee,pe,_e,we,Ae,Re,Le,xe,Ue,Ve,Ze,at,Ke,Ie=new ge(me),We=I;return We&&We.api&&Ie.addEventListener&&(ee=Ie.send,pe=Ie.open,_e=Ie.setRequestHeader,we=We._conf,Ae=(we.ignore||{}).ignoreApis,Re=we.parseTraceId,Le=We.getConfig("enableLinkTrace"),Ve=Ue=xe="",Ze=null,me=We.getConfig("sample"),at=We.getConfig("linkType"),Ke=1,me&&!We.sampling(me)&&(Ke=0),Ie.open=function(Ge,nt){if(de=Ge,Ge=arguments.length===1?[Ge]:Array.apply(null,arguments),pe.apply(Ie,Ge),K=nt||"",G=X.cutUrlSearch(K),Ge=!X.checkAPI(G,!0)||X.ignoreByRule(G,Ae),G=G?X.filterByRule(G,K,we.ignoreApiPath||we.apiHelper):"",!Ge&&Le){nt="";try{nt=location.origin||location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch(st){nt=""}if(Ge=X.checkSameOrigin(K,nt),(We.getConfig("enableApiCors")||Ge)&&_e&&typeof _e=="function")switch(at){case"arms":xe=We.getTraceId()["EagleEye-TraceID"],_e.apply(Ie,["EagleEye-TraceID",xe]),Ue=We.getPageviewId()["EagleEye-SessionID"],_e.apply(Ie,["EagleEye-SessionID",Ue]),Ve=We.getConfig("pid"),_e.apply(Ie,["EagleEye-pAppName",Ve]);break;case"b3":var Fe=We.getB3TraceId(Ke);_e.apply(Ie,["X-B3-TraceId",Fe["X-B3-TraceId"]]),_e.apply(Ie,["X-B3-ParentSpanId",Fe["X-B3-ParentSpanId"]]),_e.apply(Ie,["X-B3-SpanId",Fe["X-B3-SpanId"]]),_e.apply(Ie,["X-B3-Sampled",Fe["X-B3-Sampled"]]),_e.apply(Ie,["X-Request-ID",X.guid()]),xe=Fe["X-B3-TraceId"],Ue=We.getPageviewId()["EagleEye-SessionID"];break;default:Fe=We.getUberTraceId(Ke),_e.apply(Ie,["uber-trace-id",Fe["uber-trace-id"]]),xe=Fe.traceId,Ue=We.getPageviewId()["EagleEye-SessionID"]}}},Ie.send=function(){ve=Date.now(),Se=X.duration();var Ge=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);ee.apply(Ie,Ge)},X.on(Ie,"readystatechange",function(){if(G&&Ie.readyState===4){var Ge=Se(),nt=X.getXhrSnapshot(K,de,Ie);if(xe||typeof(Fe=X.parseXhrHeaders(typeof Ie.getAllResponseHeaders=="function"&&Ie.getAllResponseHeaders()||""))=="object"&&Fe["eagleeye-traceid"]&&(xe=Fe["eagleeye-traceid"],Ze="response"),!xe&&X.isFunction(Re)&&(Fe=Re(Ie))&&X.isString(Fe)&&(xe=Fe),200<=Ie.status&&Ie.status<=299){var Fe=Ie.status||200;if(typeof Ie.getResponseHeader=="function"){var st=Ie.getResponseHeader("Content-Type");if(st&&!/(text)|(json)/.test(st))return}Ie.responseType&&Ie.responseType!=="text"?We.api(G,!0,Ge,Fe,"",ve,xe,Ue,{},N,Ze,Ke):ye(We,we.parseResponse,G,K,Ie.responseText,Fe,Ge,ve,xe,Ue,nt,Ze,Ke)}else We.api(G,!1,Ge,Ie.status||"FAILED",Ie.statusText,ve,xe,Ue,nt,N,Ze,Ke),we.enableResource&&I.fixResourceStatus&&I.fixResourceStatus({src:Ie.responseURL||K,res_type:"api"})}})),Ie}).prototype=ge.prototype,X.each(Object.keys(ge),function(me){ce[me]=ge[me]}),he[J]=ce,he[J].toString=X.createFakeToString(J))),I=this),this;var de,ge,ce,se},initHook:function(){return this.hasInitHook||(this.getConfig("disableHook")||this.addHook(),this.hasInitHook=!0),this}}),ue}),q}function je(){return Y||(Y=1,F=function(ue,he){function ye(V,te){var J;he.CustomEvent?J=new CustomEvent(V,{detail:te}):((J=A.createEvent("HTMLEvents")).initEvent(V,!1,!0),J.detail=te),he.dispatchEvent(J)}function X(V){var te=N[V];typeof te=="function"&&(N[V]=function(ce,ne,de){var ce=arguments.length===1?[ce]:Array.apply(null,arguments),ge=location.href,ce=te.apply(N,ce);if(de&&typeof de=="string"&&de!==ge)try{var se=ge.split("#"),me=de.split("#"),ve=I.cutUrlSearch(se[0]),Se=I.cutUrlSearch(me[0]),G=se[1]&&se[1].replace(/^\/?(.*)/,"$1"),K=me[1]&&me[1].replace(/^\/?(.*)/,"$1");G!==K?ye("historystatechange",K):ve!==Se&&ye("historystatechange",Se)}catch(ee){I.warn("[retcode] error in "+V+": "+ee)}return ce},N[V].toString=I.createFakeToString(V))}var I=f(),N=he.history||{},A=he.document;I.ext(ue.prototype,{hackHistoryState:function(){return this.hasHackedHistoryState||(X("pushState"),X("replaceState"),this.hasHackedHistoryState=!0),this}})}),F}function ze(){var ue,he;return le||(le=1,ue=f(),he=fe().TIMING_KEYS,re=function(ye,X){var I="_resource-"+Date.now(),N="_resource_error-"+Date.now();ue.ext(ye.prototype,{initResource:function(){var A,V=this,te=X.performance,J=X.PerformanceObserver;return V[N]||(V[N]=new WeakMap),te&&J&&typeof te=="object"&&typeof te.getEntriesByType=="function"?(A=te.getEntriesByType("resource")||[],setTimeout(function(){V.setResource(A)},10),new J(function(ne){setTimeout(function(){V.setResource(ne.getEntries())},10)}).observe({entryTypes:["resource"]}),this.onReady(function(){setTimeout(V.resourceComboReport.bind(V),5e3)}),V):null},setResource:function(A){var V=this._conf,te=this[N];if(ue.isArray(A)&&A.length){this[I]||(this[I]={});for(var J=this[I],ne=0,de=A.length;ne<de;ne+=1){var ge,ce=A[ne];ue.checkAPI(ce.name,!1)&&(ce=((se,me,ve)=>{if(se instanceof X.PerformanceResourceTiming&&se.initiatorType){var Se,G,K,ee,pe,_e,we,Ae,Re,Le=ue.getResType(se.initiatorType,se.name),xe=me.resourceTypes||[],Ue=(me.ignore||{}).ignoreResources;if(Le&&xe.includes(Le)&&!ue.ignoreByRule(se.name,Ue)&&!ue.ignoreByRule(ue.decode(se.name),Ue))return xe=se[he[0]],Ue=se[he[1]],Se=se[he[2]],G=se[he[3]],K=se[he[4]],ee=se[he[5]],pe=se[he[6]],_e=se[he[7]],we=se[he[8]],Ae=se[he[18]],Re=se[he[19]],(ve.has(se)||ue.areInOrder(xe,Ue,Se,G,K,ee,pe,_e,we)&&!(_e<xe))&&ue.areInOrder(xe,Ae=Ae<xe?xe:Ae,Re=Re<xe?Ue:Re,Ue)?{domain:ue.getURL(se.name).domain,res_type:Le,src_type:ue.getSrcType(se.name,me.cdnHostList),success:1,size:Math.round(se.decodedBodySize),duration:Math.round(se.duration),timeStamp:se.responseEnd,timing:se}:void 0}})(ce,V,te))&&((ge=ce.res_type+"-"+ce.domain)in J||(J[ge]=[]),J[ge].push(ce))}return this}},fixResourceStatus:function(A){var V,te,J=X.performance;return J&&typeof J.getEntriesByName=="function"?(V=this[N],A.src&&ue.checkAPI(A.src,!1)&&(te=A.timeStamp||J.now(),J=J.getEntriesByName(A.src,"resource"),ue.each(J,function(ne){V.has(ne)||te-ne.responseEnd<100&&V.set(ne,{success:0})})),this):null},resourceComboReport:function(){var A,V,te=this[I]||{},J=this._conf.resourceSlow||2e3,ne=this[N],de=(this[I]={},Object.keys(te));de.length!==0&&(A=[],ue.each(de,function(ce){var ce=te[ce],se={domain:"",res_type:"",src_type:"",size:0,duration:0,count:0,err_count:0,err_duration:0,slow_count:0,slow_duration:0,timings:[]};ue.each(ce,function(me){var ve=me.timing||{},Se=ne.get(me.timing),Se=Se?Se.success:1,G=me.duration>J?1:0;se.domain=me.domain,se.res_type=me.res_type,se.src_type=me.src_type,se.count+=1,se.duration+=me.duration,se.size+=me.size,Se||(se.err_count+=1,se.err_duration+=me.duration),G&&(se.slow_count+=1,se.slow_duration+=me.duration);try{var K=JSON.parse(JSON.stringify(ve));K.success=Se,K.resourceSlow=J,K.isSlow=G,se.timings.push(K)}catch(ee){}}),se.count&&(se.size=Math.round(se.size/se.count),se.duration=Math.round(se.duration/se.count)),se.slow_count&&(se.slow_duration=Math.round(se.slow_duration/se.slow_count)),se.err_count&&(se.err_duration=Math.round(se.err_duration/se.err_count)),20<se.timings.length&&(se.timings.sort(function(me,ve){return ve.duration-me.duration}),se.timings.length=20),se.timings=encodeURIComponent(JSON.stringify(se.timings)),A.push(se)}),de={_combo:1,resource:JSON.stringify(A)},V=X.navigator.connection,de.ct=V?V.effectiveType||V.type:"",(V=999<(V=V&&(V.downlink||V.downlinkMax||V.bandwidth)||null)?999:V)&&(de.bandwidth=V),this._lg("resource",de,this.getConfig("sample")))}})}),re}function Ye(){var ue,he,ye,X,I,N,A,V,te,J,ne,de,ge,ce,se,me,ve,Se;return ae||(ae=1,ue=f(),_||(_=1,ce=f(),se=T(),me=["api","success","time","code","msg","trace","traceId","begin","pv_id","sid","seq","domain","flag","apiSnapshot","tag","c1","c2","c3"],ve=function(G){var K=(G.key||"default").split("::");return 1<K.length?ce.ext(G,{group:K[0],key:K[1]}):ce.ext(G,{group:"default_group",key:K[0]})},(Se=function(G){var K;se.call(this,G);try{K=typeof performance=="object"?performance.timing.fetchStart:Date.now()}catch(ee){K=Date.now()}return this._startTime=K,this}).prototype=ce.createObject(se.prototype),ce.ext(se.dftCon,{startTime:null}),ce.ext(Se.prototype,{constructor:Se,_super:se,sum:function(G,K,ee){try{var pe=ce.dealParam(G,K,1);return this._lg("sum",ve(pe),ee)}catch(_e){ce.warn("[retcode] can not get parseStatData: "+_e)}},avg:function(G,K,ee){try{var pe=ce.dealParam(G,K,0);return this._lg("avg",ve(pe),ee)}catch(_e){ce.warn("[retcode] can not get parseStatData: "+_e)}},percent:function(G,K,ee,pe){try{return this._lg("percent",ve({key:G,subkey:K,val:ee||0,begin:Date.now()}),pe)}catch(_e){ce.warn("[retcode] can not get parseStatData: "+_e)}},msg:function(G,K){if(G&&!(180<G.length))return this.custom({msg:G},K)},error:function(G,K){if(!G)return ce.warn("[retcode] invalid param e: "+G),this;arguments.length===1?(typeof G=="string"&&(G={message:G},K={}),typeof G=="object"&&(K=G=G.error||G)):(typeof G=="string"&&(G={message:G}),typeof K!="object"&&(K={}));var ee,pe=G.name||"CustomError",_e=G.message||"",we=G.stack||"",Ae=(K=K||{},typeof location=="object"&&typeof location.href=="string"&&location.href.substring(0,500)||"");if(ce.checkSDKError(_e,K.filename))return ee=G.msg||G.message,ce.ignoreByRule(ee,Ve=/^Script error\.?$/)||ce.ignoreByRule(ce.decode(ee),Ve)?this:(ee={msg:ce.selfErrKey,err:{msg_raw:ce.encode(G.msg||G.message)}},this._self("error",ee,1));for(var Re={begin:Date.now(),cate:pe,msg:_e&&_e.substring(0,1e3),stack:we&&we.substring(0,1e3),file:ce.removeUrlSearch(K.filename||""),line:K.lineno||"",col:K.colno||"",err:{msg_raw:ce.encode(_e),stack_raw:ce.encode(we)},dl:Ae},Le=["tag","c1","c2","c3"],xe=0;xe<Le.length;xe++){var Ue=Le[xe];K[Ue]&&(Re[Ue]=K[Ue])}var Ve=(this.getConfig("ignore")||{}).ignoreErrors;return ce.ignoreByRule(Re.msg,Ve)||ce.ignoreByRule(ce.decode(Re.msg),Ve)?this:(this.beforeSend&&this.beforeSend("error",Re),this._lg("error",Re,1))},behavior:function(G){if(G)return G=typeof G=="object"&&G.behavior?G:{behavior:G},this.beforeSend&&this.beforeSend("behavior",G),this._lg("behavior",G,1)},api:function(G,K,ee,pe,_e,we,Ae,Re,Le,xe,Ue,Ve,Ze,at,Ke,Ie){return G?(G=typeof G=="string"?{api:G,success:K,time:ee,code:pe,msg:_e,begin:we,traceId:Ae,pv_id:Re,apiSnapshot:Le,domain:xe,flag:Ve,tag:Ze,c1:at,c2:Ke,c3:Ie}:ce.sub(G,me),ce.checkAPI(G.api,!0)?(G.code=G.code||"",K=G.msg||"",K=typeof K=="string"?K.substring(0,1e3):K,G.msg=K,G.success=G.success?1:0,G.time=+G.time,G.begin=G.begin,G.traceId=G.traceId||"",G.pv_id=G.pv_id||"",G.domain=G.domain||"",G.flag=G.flag,G.dl=typeof location=="object"&&typeof location.href=="string"&&location.href.substring(0,500)||"",G.apiSnapshot&&(typeof G.apiSnapshot=="object"&&(G.apiSnapshot=JSON.stringify(G.apiSnapshot)),typeof G.apiSnapshot!="string"&&delete G.apiSnapshot,2e3<G.apiSnapshot.length)&&(G.apiSnapshot=G.apiSnapshot.substring(0,2e3)),Ue&&(G.traceOrigin=Ue),!G.api||isNaN(G.time)?(ce.warn("[retcode] invalid time or api"),this):(ee=(this.getConfig("ignore")||{}).ignoreApis,ce.ignoreByRule(G.api,ee)||ce.ignoreByRule(ce.decode(G.api),ee)||G.time<0?this:(this.beforeSend&&this.beforeSend("api",G),this._lg("api",G,G.success&&this.getConfig("sample"),G.flag)))):this):(ce.warn("[retcode] api is null"),this)},speed:function(G,K,ee){var pe=this,_e=this.getConfig("startTime")||this._startTime;return/^s(\d|1[0])$/.test(G)?(K=typeof K!="number"?Date.now()-_e:_e<=K?K-_e:K,pe.speedCache=pe.speedCache||{},pe.speedCache[G]=K,pe.speedCache.begin=_e,clearTimeout(pe.speedTimmer),pe.speedTimmer=setTimeout(function(){ee||(pe.speedCache.page=pe.getPage(!0)),pe._lg("speed",pe.speedCache),pe.speedCache=null},5e3)):ce.warn("[retcode] invalid point: "+G),pe},performance:function(G){if(G&&typeof G=="object"&&!this.hasSendPerf){var K,ee={},pe={},_e=this.getConfig("autoSendPerf");if(G.autoSend&&_e)return pe=ce.ext(this.perfData||{},G),this.hasSendPerf=!0,this._lg("perf",pe,this.getConfig("sample"));if(G.autoSend&&!_e)return delete G.autoSend,this.perfData?(pe=ce.ext(this.perfData||{},G),this.hasSendPerf=!0,this._lg("perf",pe,this.getConfig("sample"))):void(this.perfData=G);for(K in G)!/^t([1-9]|1[0])$/.test(K)&&K!=="ctti"&&K!=="cfpt"||(ee[K]=G[K]);if(G.autoSend===!0||!_e&&this.perfData)return G.autoSend!==!0&&_e===!1&&this.perfData?(ee=ce.ext(this.perfData||{},ee),this.hasSendPerf=!0,this._lg("perf",ee,this.getConfig("sample"))):void 0;this.perfData=ce.ext(this.perfData||{},ee)}},resource:function(G,K){if(!G||!ce.isPlainObject(G))return ce.warn("[arms] invalid param data: "+G),this;var ee,pe=Object.keys(G),_e=["begin","dom","load","res","dl"],we=!1;for(ee in _e)if(pe.indexOf(_e[ee])<0){we=!0;break}return we?(ce.warn("[arms] lack param data: "+G),this):(G={begin:G.begin||Date.now(),dom:G.dom||"",load:G.load||"",res:ce.isArray(G.res)?JSON.stringify(G.res):JSON.stringify([]),dl:G.dl||""},this._lg("res",G,K))},event:function(G,K){if(typeof G=="object"&&G&&G.key){var ee,pe={},_e=["key","success","time","c1","c2","c3"];for(ee in G)-1<_e.indexOf(ee)&&(pe[ee]=G[ee]);pe.success=G.success===!1?0:1,this._lg("event",pe,K)}}}),Se._super=se,(Se._root=se).Reporter=Se,b.exports=Se),he=b.exports,k||(k=1,ne=f(),de=typeof window=="object"?window:{},ge=typeof(ge=de.__oFetch_||de.fetch)=="function"?ge:void 0,P.exports=function(G,_e){var ee,pe=-1,_e=(typeof G=="object"&&(pe=G.z,G=ne.serialize(G)),_e+G);if(ge)return ge(_e,{method:"HEAD",mode:"no-cors"}).catch(ne.noop);de.document&&de.document.createElement&&((G=de[ee="__request_hold_"+pe]=new Image).onload=G.onerror=function(){de[ee]=void 0},G.src=_e)}),ye=P.exports,w||(w=1,te=f(),Se=typeof window=="object"?window:{},J=typeof(J=Se.__oXMLHttpRequest_||Se.XMLHttpRequest)=="function"?J:void 0,M.exports=function(G,K){try{var ee=new J;ee.open("POST",K,!0),ee.setRequestHeader("Content-Type","text/plain"),ee.send(JSON.stringify(G))}catch(pe){te.warn(`[retcode] Failed to log, exception is :
`+pe)}}),X=M.exports,I=ue.win,N=I.document,A=/^(error|api|speed|sum|avg|percent|custom|msg|setPage|setConfig|behavior|performance)$/,(V=function(G){var K=this;return he.call(K,G),K._initialPage=G.page&&ue.safetyCall(G.page,[],G.page+"")||null,K._isRobot=ue.isRobot(),K._health={errcount:0,apisucc:0,apifail:0},!(K.beforeSend=function(ee,pe){ee==="error"?K._health.errcount++:ee==="api"&&K._health[pe.success?"apisucc":"apifail"]++})!==G.enableInstanceAutoSend&&(K.initHandler(),K.initHook(),K.initFmpObserver(1e4),K._conf&&K._conf.behavior&&typeof K.initBehavior=="function"&&K.initBehavior(),K._conf)&&K._conf.enableResource&&typeof K.initResource=="function"&&K.initResource(),Object.defineProperty&&I.addEventListener&&Object.defineProperty(K,"pipe",{set:K.sendPipe}),K}).prototype=ue.createObject(he.prototype),ue.ext(he._root.dftCon,{uid:null,setUsername:null,ignoreUrlPath:null,ignoreApiPath:null,urlHelper:[{rule:/\/([a-z\-_]+)?\d{2,20}/g,target:"/$1**"},/\/$/],resourceHelper:[],apiHelper:{rule:/\/([a-z\-_]+)?\d{2,20}/g,target:"/$1**"},ignoreUrlCase:!0,imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",cdnHostList:[],resourceTypes:["css","script","img","font"],resourceSlow:2e3,disableHook:!1,autoSendPv:!0,autoSendPerf:!0,enableSPA:!1,enableLinkTrace:!1,linkType:"arms",enableApiCors:!1,sendResource:!0,behavior:!0,enableConsole:!1,parseHash:function(G){return(G?ue.cutUrlSearch(G.replace(/^#\/?/,"")):"")||"[index]"},parseResponse:function(G){var K;return G&&typeof G=="object"?(K=G.code,typeof(G=G.msg||G.message||G.subMsg||G.errorMsg||G.ret||G.errorResponse||"")=="object"&&(K=K||G.code,G=G.msg||G.message||G.info||G.ret||JSON.stringify(G)),{msg:G,code:K,success:!0}):{}}}),ue.ext(V.prototype,{constructor:V,_super:he,onReady:function(G){var K=this;if(K.hasReady)return G();N.readyState==="complete"?(K.hasReady=!0,G()):ue.on(I,"load",function(){K.hasReady=!0,G()},!0)},getPage:function(G){var K=this._conf,ee=K.page,pe=location,_e=pe.host+pe.pathname;return ee&&!G?ue.safetyCall(ee,[],ee+""):this._initialPage||ue.filterByRule(K.ignoreUrlCase?_e.toLowerCase():_e,pe.href,K.ignoreUrlPath||K.urlHelper)},setPage:function(G,K){var ee=this,pe=ee.prevPage;if(K!==!1){if(!G||G===pe)return ee;ee.prevPage=G,clearTimeout(ee.sendPVTimmer),ee.handleUnload(1),ee.resetPageview(),ee.sendPVTimmer=setTimeout(function(){ee.sendPV()},10)}else ee.prevPage=G;return ee._conf.page=G,ee},setConfig:function(G,K){var ee;G&&typeof G=="object"&&(ue.verifyConfig(G),G=this.setImgUrl(G),ee=this._conf,this._conf=ue.ext({},ee,G),K||((K="disableHook")in G&&ee[K]!==G[K]&&(G[K]?this.removeHook():this.addHook()),(K="enableSPA")in G&&ee[K]!==G[K]&&this.bindHashChange(G[K])))},sendRequest:function(G){ye(G,this.getConfig("imgUrl"))},postData:function(G,pe){var ee={},pe=(ee[pe]=G[pe],delete G[pe],"");typeof G=="object"&&(pe=ue.serialize(G)),X(ee,this.getConfig("imgUrl")+pe+"&post_res=")},sendPipe:function(G){var K,ee=this;if(!G||!G.length)return ee;try{return ue.T(G[0])==="Array"?ue.each(G,function(pe){return ee.sendPipe(pe)}):ue.T(G)==="Array"&&(K=G.shift(),A.test(K))?void ee[K].apply(ee,G):ee}catch(pe){return ue.warn("[retcode] error in sendPipe",pe),ee}},sendHealth:function(){var G=ue.ext({},this._health),K=(G.healthy=0<G.errcount?0:1,G.begin=Date.now(),G.begin-this.sBegin);G.stay=K,this._lg("health",G,1),this._health={errcount:0,apisucc:0,apifail:0}},createInstance:function(G){G=ue.ext({pid:this._conf.pid},G);var K=this.__proto__.constructor(G);return G.page&&K.sendPV(),K}}),O()(V,I),be()(V,I,N),Ee()(V,I,N),Pe()(V,I),je()(V,I),ze()(V,I),V._super=he,V._root=he._root,he.Browser=V,u.exports=V),u.exports}var it={getArmsLogger:function(){return Q||(Q=1,he=window,ye=he.BrowserLogger=Ye(),X=f().key,I="__hasInitBlSdk",ye.singleton=function(V,te){return he[I]?he[X]:ue(V,te)},ye.createExtraInstance=function(te){te&&typeof te=="object"&&te.enableInstanceAutoSend!==!0&&(te.enableInstanceAutoSend=!1);var te=new ye(te),J=te._conf;return J.enableInstanceAutoSend&&(J.autoSendPv!==!1&&te.sendPV(),J&&J.useFmp||te.sendPerformance(),J)&&J.sendResource&&te.sendResources(),te},typeof window=="object"&&window.navigator&&he[X]&&(ye.bl=he[I]?he[X]:(N={},A=[],X in he&&(N=he[X].config||{},A=he[X].pipe||[]),ue(N,A))),c.exports=ye),c.exports;function ue(V,te){return V=he[X]=new ye(V),V.sendPipe(te),te=V._conf,te.autoSendPv!==!1&&V.sendPV(),te&&te.useFmp||V.sendPerformance(),te&&te.sendResource&&V.sendResources(),he[I]=!0,V}var he,ye,X,I,N,A}};let Te="https://arms-retcode.aliyuncs.com/r.png?",ke="https://arms-retcode-sg.aliyuncs.com/r.png?",Ce="https://retcode-us-west-1.arms.aliyuncs.com/r.png?",De="e1iftji1w7@7ec1cef2cc88733",Oe="e1iftji1w7@10a06d1ec260adc",qe="e1iftji1w7@10a06d1ec260adc",Ne={cn:{reportUrl:Te,pid:De},"cn-hangzhou":{reportUrl:Te,pid:De},sg:{reportUrl:ke,pid:Oe},"ap-southeast-1":{reportUrl:ke,pid:Oe},usw:{reportUrl:Ce,pid:qe},"us-west-1":{reportUrl:Ce,pid:qe}},Xe=ue=>ue!==null&&typeof ue=="object",$e=ue=>Object.prototype.toString.call(ue).slice(8,-1),ot=ue=>!!Object.isExtensible(ue)&&$e(ue)==="Object";function Je(ue,he){if(typeof ue=="string"&&(he=ue.indexOf(he),!(he<0)))return(ue=ue.indexOf(`
`))<0||he<ue}function He(ue,he,ye){{if(typeof ue=="function")return V=ue,te=he+1,J=ye,Reflect.get(V,"__v_skip")===!0?V:(ne={MediaboxWrapperFunctionApply(de,ge,ce){let se;try{se=Reflect.apply(de,ge,ce)}catch(me){throw J(me),me}return He(se,te,J)},MediaboxWrapperFunctionGet(de,ge){var ce=Object.getOwnPropertyDescriptor(de,ge);return!ce||ce.writable||ce.configurable?He(de[ge],te,J):de[ge]},MediaboxWrapperClassConstructor(de,ge){let ce;try{ce=new de(...ge)}catch(se){throw J(se),se}return He(ce,te,J)}},Object.defineProperty(V,"__v_skip",{configurable:!0,enumerable:!1,writable:!1,value:!0}),new Proxy(V,{apply:ne.MediaboxWrapperFunctionApply,get:ne.MediaboxWrapperFunctionGet,construct:ne.MediaboxWrapperClassConstructor}));if(ue instanceof Promise)return ue.then(de=>He(de,he+1,ye)).catch(de=>(ye(de),Promise.reject(de)));if(Array.isArray(ue))ue.forEach((de,ge)=>{ue[ge]=He(de,he+1,ye)});else if(Xe(ue)&&ot(ue)){V=ue;var X=he+1,I=ye,N;if(Reflect.get(V,"__v_skip")===!0)return V;let de=[],ge=typeof Object.getOwnPropertyDescriptors=="function"?Object.getOwnPropertyDescriptors((A=Object.getPrototypeOf(V))!=null?A:{}):{};for(N of Object.keys(ge))ge[N].get&&de.push(N);var A={MediaboxWrapperObjectGetter(ce,se){if(typeof se=="string"&&-1<de.indexOf(se)){let ve;try{ve=ce[se]}catch(Se){throw I(Se),Se}return He(ve,X,I)}var me;return!(10<X)&&(!(me=Reflect.getOwnPropertyDescriptor(ce,se))||me.writable||me.configurable)?He(ce[se],X,I):ce[se]},MediaboxWrapperObjectSetter(ce,se,me){return ce[se]=He(me,X,I),!0}};return Object.defineProperty(V,"__v_skip",{configurable:!0,enumerable:!1,writable:!1,value:!0}),new Proxy(V,{get:A.MediaboxWrapperObjectGetter,set:A.MediaboxWrapperObjectSetter})}return ue}var V,te,J,ne}function tt(ue){return typeof ue=="string"&&(-1<ue.indexOf("g.alicdn.com/apsara-media-")||-1<ue.indexOf("g.alicdn.com/thor-server")||-1<ue.indexOf("MediaboxWrapper"))}class Qe extends Error{constructor(he){super(he),this.name="MQTError"}}let Me=1;class Be{constructor(he){var ye,X;g(this,"armsLogger"),g(this,"isReady",!1),g(this,"isDestroyed",!1),g(this,"options"),g(this,"queue",[]),g(this,"marker"),g(this,"helper",{MediaboxWrapperQueue(I){return new Qe(I)},MediaboxWrapperInitiative(I){return new Qe(I)}}),this.options=(X=s({},he),he={region:he.deferRegionSet?void 0:(ye=he.region)!=null?ye:"cn",env:(ye=he.env)!=null?ye:"prod"},l(X,o(he))),this.marker=`-${Me++}-`,this.initArmsLogger()}static get version(){return"0.27.0"}initArmsLogger(he){var{region:ye,env:X,disabled:I}=this.options;if(!I&&!this.armsLogger){if(he&&!ye)throw new Error("region is required");if(ye){if(!Ne[ye])throw new Error(`region ${ye} is not supported`);I=it.getArmsLogger(),this.armsLogger=I.createExtraInstance({enableInstanceAutoSend:!0,pid:Ne[ye].pid,tag:this.options.businessName,release:this.options.businessName+"_"+this.options.version,imgUrl:Ne[ye].reportUrl,behavior:!0,sample:1,disableHook:!0,environment:X,beforeReport:N=>{var A;if(!(this.isDestroyed||Je(N.stack,this.marker)||N.t!=="pv"&&N.t!=="error"&&N.t!=="health")){if(N.c1=(A=this.options.cid)!=null?A:window.location.host,N.c2=Be.version,this.options.customData&&(N.c3=new URLSearchParams(this.options.customData).toString()),N.t!=="error")return N;if(typeof(A=N.file)=="string"&&(-1<A.indexOf("g.alicdn.com/apsara-media-")||-1<A.indexOf("g.alicdn.com/thor-server"))||tt(N.stack)){let V=N;return this.options.beforeSend&&(V=this.options.beforeSend(N)),this.isReady?V:(V&&this.queue.push(V),!1)}}return!1}})}}}wrap(he){return this.options.disabled||typeof Proxy=="undefined"?he:He(he,0,ye=>{var X,I;ye instanceof Error&&typeof ye.stack=="string"&&tt(ye.stack)&&((X=this.armsLogger)!=null&&X.error(ye),ye.stack=(X=ye.stack,ye=this.marker,typeof X!="string"?ye:Je(X,ye)?X:(I=X.indexOf(`
`))<0?""+X+ye:""+X.slice(0,I)+ye+X.slice(I)))})}updateOptions(he){this.options=s(s({},this.options),he)}setReady(){this.initArmsLogger(!0),this.isReady=!0,this.queue.length&&this.queue.forEach(he=>{var ye;(ye=this.armsLogger)!=null&&ye.error(this.helper.MediaboxWrapperQueue(he.msg),{filename:he.file,lineno:he.line,colno:he.col})})}report(he,ye){var X;(X=this.armsLogger)!=null&&X.error(this.helper.MediaboxWrapperInitiative(he),ye)}destroy(){this.isDestroyed=!0}}W.MediaboxQualityTracer=Be,W.default=Be},{}],2:[function(S,m,W){var v=S("@aliyun-sls/web-types");function h(I,N,A){Object.defineProperty(I,N,{writable:!0,enumerable:!0,configurable:!0,value:A})}function p(I,N,A){try{return I.apply(N,A)}catch(V){}}function l(){}var o=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,g=(I,N,A)=>N in I?o(I,N,{enumerable:!0,configurable:!0,writable:!0,value:A}):I[N]=A;function c(I){return typeof I=="number"}function u(I,N){return+I.toFixed(N)}function f(I){return I?(parseInt(I,10)^16*Math.random()>>parseInt(I,10)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,f)}function y(I=20){for(var N,A,V=new Array(I),te=Date.now().toString(36).split("");0<I--;)A=(N=36*Math.random()|0).toString(36),V[I]=N%3?A:A.toUpperCase();for(var J=0;J<8;J++)V.splice(3*J+2,0,te[J]);return V.join("")}function d(I,N){return(...A)=>{try{return I(...A)}catch(V){console.error(N,V)}}}function a(I){let N;return N=I.host.startsWith("http://")||I.host.startsWith("https://")?I.host+"/logstores/"+I.logstore+(I.stsPlugin?"":"/track?APIVersion=0.6.0"):"https://"+I.project+"."+I.host+"/logstores/"+I.logstore+(I.stsPlugin?"":"/track?APIVersion=0.6.0")}let _=/^(?:([^:\/?#]+):\/\/)?((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?)?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n)*))?/i;function b(I,N,...A){return!(N==null||!Array.isArray(N))&&N.some(V=>{if(typeof V=="function")try{return V(I,...A)}catch(te){return console.error("user function callback threw an error:",te),!1}return typeof V=="string"?I.includes(V):Object.prototype.toString.call(V)==="[object RegExp]"&&V.test(I)})}function E(I){var N=Date.now()-performance.now();return N>D()?Math.round(N+I):P(I)}function T(){return Date.now()}function k(){return performance.now()}function P(I){return Math.round(D()+I)}let w;function D(){return w=w===void 0?performance.timing.navigationStart:w}let U="?";function M(I,N){let A;N=N===void 0?0:+N;try{if(A=(V=>{var te=B(V,"stacktrace");if(te){var J=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,ne=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,de=te.split(`
`),ge=[];let ce;for(let se=0;se<de.length;se+=2){let me;J.exec(de[se])?(ce=J.exec(de[se]),me={args:[],column:void 0,func:ce[3],line:+ce[1],url:ce[2]}):ne.exec(de[se])&&(ce=ne.exec(de[se]),me={args:ce[5]?ce[5].split(","):[],column:+ce[2],func:ce[3]||ce[4],line:+ce[1],url:ce[6]}),me&&(!me.func&&me.line&&(me.func=U),me.context=[de[se+1]],ge.push(me))}if(ge.length)return{stack:ge,message:B(V,"message"),name:B(V,"name")}}})(I))return A}catch(V){}try{if(A=(V=>{var te=B(V,"stack");if(te){var J=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ne=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,de=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;let Se;var ge=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,ce=/\((\S*)(?::(\d+))(?::(\d+))\)/,se=te.split(`
`),me=[];let G,K,ee;for(let pe=0,_e=se.length;pe<_e;pe+=1){if(J.exec(se[pe])){var ve=(K=J.exec(se[pe]))[2]&&K[2].indexOf("native")===0;Se=K[2]&&K[2].indexOf("eval")===0,G=ce.exec(K[2]),Se&&G&&(K[2]=G[1],K[3]=G[2],K[4]=G[3]),ee={args:ve?[K[2]]:[],column:K[4]?+K[4]:void 0,func:K[1]||U,line:K[3]?+K[3]:void 0,url:ve?void 0:K[2]}}else if(de.exec(se[pe]))K=de.exec(se[pe]),ee={args:[],column:K[4]?+K[4]:void 0,func:K[1]||U,line:+K[3],url:K[2]};else{if(!ne.exec(se[pe]))continue;K=ne.exec(se[pe]),Se=K[3]&&-1<K[3].indexOf(" > eval"),G=ge.exec(K[3]),Se&&G?(K[3]=G[1],K[4]=G[2],K[5]=void 0):pe!==0||K[5]||V.columnNumber===void 0||(me[0].column=V.columnNumber+1),ee={args:K[2]?K[2].split(","):[],column:K[5]?+K[5]:void 0,func:K[1]||U,line:K[4]?+K[4]:void 0,url:K[3]}}!ee.func&&ee.line&&(ee.func=U),me.push(ee)}if(me.length)return{stack:me,message:B(V,"message"),name:B(V,"name")}}})(I))return A}catch(V){}try{if(A=(V=>{var te=B(V,"message");if(te){var J=te.split(`
`);if(!(J.length<4)){var ne,de,ge=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,ce=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,se=/^\s*Line (\d+) of function script\s*$/i,me=[],ve=window&&window.document&&window.document.getElementsByTagName("script"),Se=[];let G;for(ne in ve)((K,ee)=>Object.prototype.hasOwnProperty.call(K,ee))(ve,ne)&&!ve[ne].src&&Se.push(ve[ne]);for(let K=2;K<J.length;K+=2){let ee;ge.exec(J[K])?(G=ge.exec(J[K]),ee={args:[],column:void 0,func:G[3],line:+G[1],url:G[2]}):ce.exec(J[K])?(G=ce.exec(J[K]),ee={args:[],column:void 0,func:G[4],line:+G[1],url:G[3]}):se.exec(J[K])&&(G=se.exec(J[K]),de=window.location.href.replace(/#.*$/,""),ee={url:de,args:[],column:void 0,func:"",line:+G[1]}),ee&&(ee.func||(ee.func=U),ee.context=[J[K+1]],me.push(ee))}if(me.length)return{stack:me,message:J[0],name:B(V,"name")}}}})(I))return A}catch(V){}try{if(A=O(I,1+N))return A}catch(V){}return{message:B(I,"message"),name:B(I,"name"),stack:[]}}function O(I,N){var A,V,te=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,J=[],ne={};let de=!1;for(let ge=O.caller;ge&&!de;ge=ge.caller)ge!==M&&(V={args:[],column:void 0,func:U,line:void 0,url:void 0},A=te.exec(ge.toString()),ge.name?V.func=ge.name:A&&(V.func=A[1]),V.func===void 0&&(V.func=A?A.input.substring(0,A.input.indexOf("{")):void 0),ne[ge.toString()]?de=!0:ne[ge.toString()]=!0,J.push(V));return N&&J.splice(0,N),N={stack:J,message:B(I,"message"),name:B(I,"name")},((ge,ce,se)=>{if((ce={url:ce,line:se?+se:void 0}).url&&ce.line){if(ge.incomplete=!1,se=ge.stack,0<se.length&&se[0].url===ce.url){if(se[0].line===ce.line)return;if(!se[0].line&&se[0].func===ce.func)return se[0].line=ce.line,se[0].context=ce.context}se.unshift(ce),ge.partial=!0}else ge.incomplete=!0})(N,B(I,"sourceURL")||B(I,"fileName"),B(I,"line")||B(I,"lineNumber")),N}function B(I,N){return typeof I=="object"&&I&&N in I&&typeof(I=I[N])=="string"?I:void 0}function j(I,N,A){function V(){return J.apply(this,arguments)}let te=I[N],J=A(te);return I[N]=V,{stop:()=>{I[N]===V?I[N]=te:J=te}}}function H(I,N,{before:A,after:V}){return j(I,N,te=>function(){var J=arguments;let ne;return A&&p(A,this,J),typeof te=="function"&&(ne=te.apply(this,J)),V&&p(V,this,J),ne})}let R=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function L(I){return`${I.name||"Error"}: `+I.message}function C(I){return I.filter(N=>N.url==null||!N.url.includes("sls-rum.js"))}function z(I){let N=L(I);return I.stack.forEach(A=>{var V=A.func==="?"?"<anonymous>":A.func,te=A.args&&0<A.args.length?`(${A.args.join(", ")})`:"",J=A.line?":"+A.line:"",ne=A.line&&A.column?":"+A.column:"";N+=`
  at ${V}${te} @ `+A.url+J+ne}),encodeURIComponent(N)}let ie=8,Z=16,q="traceparent",x="uber-trace-id",F="X-B3-TraceId",Y="X-B3-SpanId",re=Array(32);function le(I){for(let N=0;N<2*I;N++)re[N]=Math.floor(16*Math.random())+48,58<=re[N]&&(re[N]+=39);return String.fromCharCode.apply(null,re.slice(0,2*I))}function ae(){return le(Z)}function Q(){return le(ie)}function oe(I,N){return I+`-${N}-1`}function fe(I,N){return`00-${I}-${N}-01`}function be(I,N){return I+`:${N}:0:1`}let Ee={b3:{name:"b3",getter:oe},traceparent:{name:q,getter:fe},uber:{name:x,getter:be}};function Pe(I,N,A){I!=null&&Object.keys(I).map(V=>{A==null||A==""?N[V]=I[V]:N[A+"."+V]=I[V]})}var je=Object.defineProperty,ze=Object.defineProperties,Ye=Object.getOwnPropertyDescriptors,it=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,Ce=(I,N,A)=>N in I?je(I,N,{enumerable:!0,configurable:!0,writable:!0,value:A}):I[N]=A,De=(I,N)=>{for(var A in N=N||{})Te.call(N,A)&&Ce(I,A,N[A]);if(it)for(var A of it(N))ke.call(N,A)&&Ce(I,A,N[A]);return I};function Oe(){return{name:v.InternalPlugin.BASE_TRANSFORM,run:function(){this.subscribe("*",(V,N)=>{var A,{otBase:V,extra:te}=V,J=(V.service=this.options.service,V.attribute=(A=De(De({},(A=this.options.attribute)!=null?A:{}),V.attribute),J={sid:this.session.getSessionId(),pid:this.session.getPageId(),uid:this.options.uid},ze(A,Ye(J))),this.options.nickname&&(V.attribute.nickname=this.options.nickname),Pe(this.options.custom,V.attribute,"custom"),V.resource=De(De({},(A=this.options.resource)!=null?A:{}),V.resource),Pe({"uem.sdk.version":"0.3.8",workspace:this.options.workspace,"deployment.environment":this.options.env},V.resource),this.options.namespace&&(V.resource["service.namespace"]=this.options.namespace),this.options.version&&(V.resource["service.version"]=this.options.version),{otBase:V,extra:te});v.InternalPlugin.BASE_TRANSFORM,N(J)},v.InternalPluginPriority[v.InternalPlugin.BASE_TRANSFORM])}}}class qe{constructor(N){this.subscribeMap={},this.allNotifiers=[],this.allNotifiers=N}subscribeOne(N,A,V,te){var J=(J=this.subscribeMap[A])!=null?J:[];(this.subscribeMap[A]=J).push({name:N,priority:te,callback:V}),J.sort((ne,de)=>ne.priority-de.priority)}notify(N,A){N=(N=this.subscribeMap[N])!=null?N:[],function V(te,J,ne){if(!(J<0)){let de=ce=>{V(te,J-1,ce)},ge=te[J];d(()=>{ge.callback.call(void 0,ne,de)},"plugin notify run error")()}}(N,N.length-1,A)}subscribe(N,A,V,te){if(A==="*")for(let ne=0;ne<this.allNotifiers.length;ne++){var J=this.allNotifiers[ne];N!==J&&this.subscribeOne(N,J,V,te)}else this.subscribeOne(N,A,V,te)}getSubscribeMap(){return this.subscribeMap}}var Ne=Object.defineProperty,Xe=Object.defineProperties,$e=Object.getOwnPropertyDescriptors,ot=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable,tt=(I,N,A)=>N in I?Ne(I,N,{enumerable:!0,configurable:!0,writable:!0,value:A}):I[N]=A;let Qe=["uid","nickname","env","service","version","custom","namespace"];class Me{constructor(N){var A;this.isInit=!1,this.pendingPlugins=[],this.pluginMap={},this.session=(()=>{let V=ae(),te=Q();return{getSessionId:()=>V,getPageId:()=>te,refreshPageId:()=>{te=Q()}}})(),this.options=N,this.use({name:v.InternalPlugin.LOG_SEND,run:function(){}}),this.use(Oe()),this.options.env=(A=N.env)!=null?A:"prod",this.options.version=(A=N.version)!=null?A:"-"}initPlugin(N){if(N==null||typeof N!="object")console.error("plugin is not a object");else if(N.name==null||N.name==="")console.error("plugin name is required.");else if(this.pluginMap[N.name])console.error(`plugin name: ${N.name} is conflict`);else if(typeof N.run!="function")console.error("plugin.run is not a function");else{A=((te,J)=>{for(var ne in J=J||{})Je.call(J,ne)&&tt(te,ne,J[ne]);if(ot)for(var ne of ot(J))He.call(J,ne)&&tt(te,ne,J[ne]);return te})({},this.context);let V=Xe(A,$e({subscribe:(te,J,ne)=>{this.sub.subscribe(N.name,te,J,ne)},notify:te=>{this.sub.notify(N.name,te)}}));var A;d(()=>N.run.call(V),`plugin ${N.name} init failed`)()}}addLog(N){this.isInit?(Pe(N,N={t:v.WebEventType.LOG},v.WebEventType.LOG),N={start:1e3*T(),attribute:N,resource:{}},this.sub.notify(v.InternalPlugin.LOG_SEND,{otBase:N,extra:{}})):console.error("log should call after start")}setOptions(N){this.isInit?Qe.forEach(A=>{N[A]!==this.options[A]&&N[A]!=null&&N[A]!=""&&(this.options[A]=N[A],A==="uid")&&typeof this.setLocalStorage=="function"&&this.setLocalStorage(v.SLS_TRACE_UID_KEY,N[A])}):console.error("setOptions should call after start")}start(){if(!this.isInit){this.isInit=!0;let V=this.options.uid;V!=null&&V!==""||(V=typeof this.getLocalStorage=="function"?this.getLocalStorage(v.SLS_TRACE_UID_KEY):V)!=null&&V!==""||(V=y()),this.options.uid=V,typeof this.setLocalStorage=="function"&&this.setLocalStorage(v.SLS_TRACE_UID_KEY,V);var N,A=this.pendingPlugins.map(te=>te==null?void 0:te.name).filter(te=>te!=null);this.sub=new qe(A),this.context={options:this.options,session:this.session};for(N of this.pendingPlugins)this.initPlugin(N)}}use(N){this.isInit?console.error(`plugin: ${N==null?void 0:N.name} use should run before start`):this.pendingPlugins.push(N)}}var Be=Object.defineProperty,ue=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,X=(I,N,A)=>N in I?Be(I,N,{enumerable:!0,configurable:!0,writable:!0,value:A}):I[N]=A;W.ONE_DAY=864e5,W.ONE_HOUR=36e5,W.ONE_KILO_BYTE=1024,W.ONE_MINUTE=6e4,W.ONE_SECOND=1e3,W.ONE_YEAR=31536e6,W.Observable=class{constructor(I){this.onFirstSubscribe=I,this.observers=[]}subscribe(I){return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(I),{unsubscribe:()=>{this.observers=this.observers.filter(N=>I!==N),!this.observers.length&&this.onLastUnsubscribe&&this.onLastUnsubscribe()}}}notify(I){this.observers.forEach(N=>N(I))}},W.SDK_VERSION="0.3.8",W.SLSClient=Me,W.Subscribe=class{constructor(){this.dep=new Map}subscribe(I,N){var A=this.dep.get(I);A?this.dep.set(I,A.concat(N)):this.dep.set(I,[N])}notify(I,N){var A=this.dep.get(I);I&&A&&A.forEach(V=>{try{V(N)}catch(te){console.error(te)}})}},W.assembleOTAttribute=Pe,W.buildHttpInfo=function(I,N,A,V){return I={url:I,method:N,status_code:A},V==null?I:(N=((te,J)=>{for(var ne in J=J||{})r.call(J,ne)&&g(te,ne,J[ne]);if(n)for(var ne of n(J))s.call(J,ne)&&g(te,ne,J[ne]);return te})({},I),A={host:V.host,scheme:V.protocol},t(N,e(A)))},W.callMonitored=p,W.catchUserErrors=d,W.clocksNow=function(){return{relative:k(),timeStamp:T()}},W.clocksOrigin=function(){return{relative:0,timeStamp:D()}},W.computeStackTrace=M,W.createHandlingStack=function(){let I=new Error,N;return p(()=>{var A=M(I);A!=null&&A.stack&&(A.stack=C(A.stack)),N=z(A)}),N},W.currentDrift=function(){return Math.round(Date.now()-(D()+performance.now()))},W.debugLog=l,W.defineGlobal=function(I,N,A,V){V?V(()=>{h(I,N,A)}):h(I,N,A)},W.defineGlobalValue=h,W.elapsed=function(I,N){return N-I},W.formatErrorMessage=L,W.formatUnknownError=function(I,N,A,V=!0){return I&&(I.message!==void 0||N instanceof Error)?(I!=null&&I.stack&&V&&(I.stack=C(I.stack)),N=(A=I==null?void 0:I.stack)==null?void 0:A[0],{message:encodeURIComponent(I.message||"Empty message"),stacktrace:z(I),type:I.name,col:N?N.column:void 0,line:N?N.line:void 0,file:encodeURIComponent(N&&N.url?N.url:""),id:f()}):{message:A+" "+JSON.stringify(N),stacktrace:"",type:I&&I.name,id:f()}},W.genUid=y,W.generateSpanId=Q,W.generateTraceId=ae,W.generateUUID=f,W.getB3Header=oe,W.getConsoleLogStatus=function(){return!1},W.getCorrectedTimeStamp=E,W.getInternalUrl=a,W.getJaegerTraceHeaderr=be,W.getRelativeTime=function(I){return I-D()},W.getTimeStamp=P,W.getW3CTraceHeader=fe,W.includes=function(I,N){return I.indexOf(N)!==-1},W.instrumentMethod=j,W.instrumentMethodAndCallOriginal=H,W.isError=function(I){return Object.prototype.toString.call(I)==="[object Error]"},W.isInternalUrl=function(I,N){return I.includes("/track?APIVersion=0.6.0")||I===a(N)},W.isNumber=c,W.isString=function(I){return Object.prototype.toString.call(I)==="[object String]"},W.isURL=function(I){return typeof I=="string"&&_.test(I)},W.looksLikeRelativeTime=function(I){return I<31536e6},W.makeWebPublicApi=function(I,N){let A,V={current:void 0},te=[],J={};return((ne,de)=>{for(var ge in de=de||{})he.call(de,ge)&&X(ne,ge,de[ge]);if(ue)for(var ge of ue(de))ye.call(de,ge)&&X(ne,ge,de[ge]);return ne})({init:ne=>{if(V.current==null){V.current=I(ne);let de=V.current;te.forEach(ge=>{de.use(ge)}),de.start()}},use:ne=>{te.push(ne)},addLog:ne=>{var de=V.current;de&&de.addLog(ne)},onReady(ne){ne()},setOptions:ne=>{var de=V.current;de&&de.setOptions(ne)}},J=typeof N=="function"?(A=N(V))!=null?A:{}:J)},W.matchCondition=b,W.matchSample=function(I){return I!==0&&Math.random()<=I},W.matchWithDefault=function(I,N){return I==null?N:!!I},W.monitor=function(I){return function(){return p(I,this,arguments)}},W.noop=function(){},W.parseUri=function(I){var N,A;return(I=(V=>{try{return decodeURIComponent(V)}catch(te){return unescape(V)}})(I||"").match(_))==null?null:(A=(N=(I[3]||"").split(":")).length?(I[2]||"").replace(/(.*\@)/,""):I[2],{uri:I[0],protocol:I[1],host:A,hostname:I[4],port:I[5],auth:I[3],user:N[0],password:N[1],path:I[6],search:I[7],hash:I[8]})},W.patchHeaderOnRequest=function(I,N,A,V,te,J="headers"){var ne=A!=null?A:{};ne[J]=(A=ne[J])!=null?A:{},ne[J].constructor.name==="Headers"?(ne[J].append("b3",oe(I,N)),ne[J].append(q,fe(I,N)),ne[J].append(x,be(I,N)),te&&ne[J].append(F,I),te&&ne[J].append(Y,N)):(ne[J].b3=oe(I,N),ne[J][q]=fe(I,N),ne[J][x]=be(I,N),te&&(ne[J][F]=I),te&&(ne[J][Y]=N));try{if(V)if(V instanceof Function){var de=d(V,"run customTraceHeaders func error.")(I,N);if(de)for(var[ge,ce]of Object.entries(de))ne[J].constructor.name==="Headers"?ne[J].append(ge,ce):ne[J][ge]=ce}else for(var[se,me]of Object.entries(V))Ee[me]&&(ne[J].constructor.name==="Headers"?ne[J].append(se,Ee[me].getter(I,N)):ne[J][se]=Ee[me].getter(I,N))}catch(ve){console.error("Failed utilizing customTraceHeaders.",ve)}return ne},W.patchHeaderOnXhr=function(I,N,A,V,te){I.setRequestHeader("b3",oe(N,A)),I.setRequestHeader(q,fe(N,A)),I.setRequestHeader(x,be(N,A)),te&&I.setRequestHeader(F,N),te&&I.setRequestHeader(Y,A);try{if(V)if(V instanceof Function){var J=d(V,"run customTraceHeaders func error.")(N,A);if(J)for(var[ne,de]of Object.entries(J))I.setRequestHeader(ne,de)}else for(var[ge,ce]of Object.entries(V))Ee[ce]&&I.setRequestHeader(ge,Ee[ce].getter(N,A))}catch(se){console.error("Failed utilizing customTraceHeaders.",se)}},W.relativeNow=k,W.relativeToClocks=function(I){return{relative:I,timeStamp:E(I)}},W.resetNavigationStart=function(){w=void 0},W.round=u,W.shouldTrace=function(I,N){return N==null||b(I,N)},W.shouldTrackBody=function(I,N,A){return I!==!1&&(I===!0||I==="error"&&!A||typeof I=="function"&&d(I,"call shouldTrackBody failed")(N))},W.startUnhandledErrorCollection=function(I){let N=(A=I,H(window,"onerror",{before(J,ne,de,ge,ce){let se;if(ce)se=M(ce),A(se,ce);else{ce={url:ne,column:ge,line:de};let me,ve=J;({}).toString.call(J)==="[object String]"&&(ne=R.exec(ve))&&(me=ne[1],ve=ne[2]),se={name:me,message:typeof ve=="string"?ve:void 0,stack:[ce]},A(se,J)}}})).stop;var A,V;let te=(V=I,H(window,"onunhandledrejection",{before(ne){var ne=ne.reason||"Empty reason",de=M(ne);V(de,ne)}})).stop;return{stop:()=>{N(),te()}}},W.throttle=function(I,N){let A=!0;return function(...V){A&&(I.apply(this,V),A=!1,setTimeout(()=>{A=!0},N))}},W.timeStampNow=T,W.toServerDuration=function(I){return c(I)?u(1e6*I,0):I},W.toStackTraceString=z},{"@aliyun-sls/web-types":5}],3:[function(S,m,W){class v{constructor(p){this.total=0,this.count=0,this.peddings=[],this.total=p}append(p){this.peddings.push(p),this.run()}run(){var p;!this.peddings.length||this.count>=this.total||(p=this.peddings.shift())&&(this.count++,p().finally(()=>{this.count--,this.run()}))}}m.exports=class{constructor(h){var p;this.timer=null,this.time=10,this.count=10,this.arr=[],this.time=(p=h.time)!=null?p:10,this.count=(p=h.count)!=null?p:10,this.ccController=new v((p=h.maxReqCount)!=null?p:10),h.host.startsWith("http://")||h.host.startsWith("https://")?this.url=h.host+"/logstores/"+h.logstore+"/track":this.url="https://"+h.project+"."+h.host+"/logstores/"+h.logstore+"/track",(this.opt=h).installUnloadHook&&typeof h.installUnloadHook=="function"&&h.installUnloadHook(()=>{this.sendImmediateInner()})}assemblePayload(h){return h={__logs__:h},this.opt.tags&&(h.__tags__=this.opt.tags),this.opt.topic&&(h.__topic__=this.opt.topic),this.opt.source&&(h.__source__=this.opt.source),JSON.stringify(h)}platformSend(){if(this.opt.sendPayload&&typeof this.opt.sendPayload=="function"){let h=this.assemblePayload(this.arr);this.ccController.append(()=>this.opt.sendPayload(this.url,h))}}transString(h){var p,l={};for(p in h)typeof h[p]=="object"?l[p]=JSON.stringify(h[p]):l[p]=String(h[p]);return l}sendImmediateInner(){this.arr&&0<this.arr.length&&(this.platformSend(),this.timer!=null&&(clearTimeout(this.timer),this.timer=null),this.arr=[])}sendInner(){if(this.timer)this.arr.length>=this.count&&(clearTimeout(this.timer),this.timer=null,this.sendImmediateInner());else{let h=this;this.arr.length>=this.count||this.time<=0?this.sendImmediateInner():this.timer=setTimeout(function(){h.sendImmediateInner()},1e3*this.time)}}send(h){h=this.transString(h),this.arr.push(h),this.sendInner()}sendImmediate(h){h=this.transString(h),this.arr.push(h),this.sendImmediateInner()}sendBatchLogs(h){h=h.map(p=>this.transString(p)),this.arr.push(...h),this.sendInner()}sendBatchLogsImmediate(h){h=h.map(p=>this.transString(p)),this.arr.push(...h),this.sendImmediateInner()}overwriteTransString(h){this.transString=h.transString}getOpt(){return this.opt}}},{}],4:[function(h,m,W){var v=h("@aliyun-sls/web-base"),h=h("@aliyun-sls/web-track-base"),p=(e,n,r)=>new Promise((s,g)=>{var c=y=>{try{f(r.next(y))}catch(d){g(d)}},u=y=>{try{f(r.throw(y))}catch(d){g(d)}},f=y=>y.done?s(y.value):Promise.resolve(y.value).then(c,u);f((r=r.apply(e,n)).next())});function l(e,n){var r=new window.XMLHttpRequest;r.open("POST",e+"?APIVersion=0.6.0",!0),r.send(n)}function o(e,n){try{32768<=n.length?l(e,n):(r=e,s=n,navigator&&navigator.sendBeacon&&navigator.sendBeacon(r+"?APIVersion=0.6.0",s)||l(e,n))}catch(g){window&&window.console&&typeof window.console.error=="function"&&(console.error(`Failed to log to ali log service because of this exception:
`+g),console.error("Failed log data:",e))}var r,s}class t extends h{constructor(n){super(Object.assign({},n,{installUnloadHook:r=>{window.addEventListener("beforeunload",()=>{r()})},sendPayload:(r,s)=>p(this,null,function*(){o(r,s)})}))}useStsPlugin(n){this.getOpt().sendPayload=(r,s)=>p(this,null,function*(){yield function(g,c,u){return p(this,null,function*(){return new Promise(f=>p(this,null,function*(){try{g=g.slice(0,-6);var y,{data:d,header:a}=yield u.process(g,c);let _=new window.XMLHttpRequest;for(y in _.open("POST",g,!0),a)_.setRequestHeader(y,a[y]);_.onreadystatechange=()=>{_.readyState===4&&(_.status!==200&&window&&window.console&&typeof window.console.error=="function"&&(console.error(`Failed to log to ali log service because of this exception:
`+_.status),console.error("Failed logdata:",g)),f())},_.send(d)}catch(_){window&&window.console&&typeof window.console.error=="function"&&(console.error(`Failed to log to ali log service because of this exception:
`+_),console.error("Failed log data:",g))}}))})}(r,s,n)}),this.overwriteTransString(n)}}v.defineGlobal(window,"SLS_Tracker",t),m.exports=t},{"@aliyun-sls/web-base":2,"@aliyun-sls/web-track-base":3}],5:[function(S,m,W){var v=(o=>(o.ERROR="error",o.LOG="log",o.LOCATION="pv",o.API="api",o.RESOURCE="res",o.RESOURCE_ERROR="res_err",o.PERF="perf",o.CONSOLE_LOG="console",o.DOM_CLICK="dom_click",o))({}),h=(o=>(o.LOG_SEND="LOG_SEND",o.BROWSER_SEND="BROWSER_SEND",o.BASE_TRANSFORM="BASE_TRANSFORM",o.BROWSER_BASE_TRANSFORM="BROWSER_BASE_TRANSFORM",o.BROWSER_FETCH="BROWSER_FETCH",o.BROWSER_XHR="BROWSER_XHR",o.BROWSER_DOM="BROWSER_DOM",o.BROWSER_LOCATION="BROWSER_LOCATION",o.BROWSER_RUNTIME_ERROR="BROWSER_RUNTIME_ERROR",o.BROWSER_CUSTOM_ERROR="BROWSER_CUSTOM_ERROR",o.BROWSER_RESOURCE_ERROR="BROWSER_RESOURCE_ERROR",o.BROWSER_CONSOLE="BROWSER_CONSOLE",o.BROWSER_PERF="BROWSER_PERF",o.BROWSER_RESOURSE="BROWSER_RESOURSE",o.MINI_SEND="MINI_SEND",o.MINI_REQUEST="MINI_REQUEST",o.MINI_BASE_TRANSFORM="MINI_BASE_TRANSFORM",o.MINI_ROUTE="MINI_ROUTE",o))({}),p={BROWSER_SEND:-1,MINI_SEND:-2,BASE_TRANSFORM:100,BROWSER_BASE_TRANSFORM:200,MINI_BASE_TRANSFORM:201,BROWSER_PERF:301,BROWSER_FETCH:400,BROWSER_XHR:401,MINI_REQUEST:402,BROWSER_RUNTIME_ERROR:500},l=(o=>(o.OK="OK",o.ERROR="ERROR",o.UNSET="UNSET",o))({});W.InternalPlugin=h,W.InternalPluginPriority=p,W.OTStatusCode=l,W.SLS_CLIENT_NAME="SLS_CLIENT",W.SLS_TRACE_UID_KEY="sls-trace-uid",W.WebEventType=v},{}],6:[function(S,m,W){},{}],7:[function(S,m,W){(function(v){(function(){var h,p;h=this,p=function(){var l,o=Math;if(typeof window!="undefined"&&window.crypto&&(l=window.crypto),typeof self!="undefined"&&self.crypto&&(l=self.crypto),!(l=!(l=!(l=typeof globalThis!="undefined"&&globalThis.crypto?globalThis.crypto:l)&&typeof window!="undefined"&&window.msCrypto?window.msCrypto:l)&&v!==void 0&&v.crypto?v.crypto:l)&&typeof S=="function")try{l=S("crypto")}catch(_){}var t=Object.create||function(_){return e.prototype=_,_=new e,e.prototype=null,_};function e(){}var n={},r=n.lib={},s=r.Base={extend:function(_){var b=t(this);return _&&b.mixIn(_),b.hasOwnProperty("init")&&this.init!==b.init||(b.init=function(){b.$super.init.apply(this,arguments)}),(b.init.prototype=b).$super=this,b},create:function(){var _=this.extend();return _.init.apply(_,arguments),_},init:function(){},mixIn:function(_){for(var b in _)_.hasOwnProperty(b)&&(this[b]=_[b]);_.hasOwnProperty("toString")&&(this.toString=_.toString)},clone:function(){return this.init.prototype.extend(this)}},g=r.WordArray=s.extend({init:function(_,b){_=this.words=_||[],this.sigBytes=b!=null?b:4*_.length},toString:function(_){return(_||u).stringify(this)},concat:function(_){var b=this.words,E=_.words,T=this.sigBytes,k=_.sigBytes;if(this.clamp(),T%4)for(var P=0;P<k;P++){var w=E[P>>>2]>>>24-P%4*8&255;b[T+P>>>2]|=w<<24-(T+P)%4*8}else for(var D=0;D<k;D+=4)b[T+D>>>2]=E[D>>>2];return this.sigBytes+=k,this},clamp:function(){var _=this.words,b=this.sigBytes;_[b>>>2]&=4294967295<<32-b%4*8,_.length=o.ceil(b/4)},clone:function(){var _=s.clone.call(this);return _.words=this.words.slice(0),_},random:function(_){for(var b=[],E=0;E<_;E+=4)b.push((()=>{if(l){if(typeof l.getRandomValues=="function")try{return l.getRandomValues(new Uint32Array(1))[0]}catch(T){}if(typeof l.randomBytes=="function")try{return l.randomBytes(4).readInt32LE()}catch(T){}}throw new Error("Native crypto module could not be used to get secure random number.")})());return new g.init(b,_)}}),c=n.enc={},u=c.Hex={stringify:function(_){for(var b=_.words,E=_.sigBytes,T=[],k=0;k<E;k++){var P=b[k>>>2]>>>24-k%4*8&255;T.push((P>>>4).toString(16)),T.push((15&P).toString(16))}return T.join("")},parse:function(_){for(var b=_.length,E=[],T=0;T<b;T+=2)E[T>>>3]|=parseInt(_.substr(T,2),16)<<24-T%8*4;return new g.init(E,b/2)}},f=c.Latin1={stringify:function(_){for(var b=_.words,E=_.sigBytes,T=[],k=0;k<E;k++){var P=b[k>>>2]>>>24-k%4*8&255;T.push(String.fromCharCode(P))}return T.join("")},parse:function(_){for(var b=_.length,E=[],T=0;T<b;T++)E[T>>>2]|=(255&_.charCodeAt(T))<<24-T%4*8;return new g.init(E,b)}},y=c.Utf8={stringify:function(_){try{return decodeURIComponent(escape(f.stringify(_)))}catch(b){throw new Error("Malformed UTF-8 data")}},parse:function(_){return f.parse(unescape(encodeURIComponent(_)))}},d=r.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(_){typeof _=="string"&&(_=y.parse(_)),this._data.concat(_),this._nDataBytes+=_.sigBytes},_process:function(U){var b,E=this._data,T=E.words,k=E.sigBytes,P=this.blockSize,w=k/(4*P),D=(w=U?o.ceil(w):o.max((0|w)-this._minBufferSize,0))*P,U=o.min(4*D,k);if(D){for(var M=0;M<D;M+=P)this._doProcessBlock(T,M);b=T.splice(0,D),E.sigBytes-=U}return new g.init(b,U)},clone:function(){var _=s.clone.call(this);return _._data=this._data.clone(),_},_minBufferSize:0}),a=(r.Hasher=d.extend({cfg:s.extend(),init:function(_){this.cfg=this.cfg.extend(_),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(_){return this._append(_),this._process(),this},finalize:function(_){return _&&this._append(_),this._doFinalize()},blockSize:16,_createHelper:function(_){return function(b,E){return new _.init(E).finalize(b)}},_createHmacHelper:function(_){return function(b,E){return new a.HMAC.init(_,E).finalize(b)}}}),n.algo={});return n},typeof W=="object"?m.exports=W=p():typeof define=="function"&&define.amd?define([],p):h.CryptoJS=p()}).call(this)}).call(this,typeof __webpack_require__.g!="undefined"?__webpack_require__.g:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{crypto:6}],8:[function(S,m,W){var v,h;v=this,h=function(p){var l;return l=p.lib.WordArray,p.enc.Base64={stringify:function(o){for(var t=o.words,e=o.sigBytes,n=this._map,r=(o.clamp(),[]),s=0;s<e;s+=3)for(var g=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,c=0;c<4&&s+.75*c<e;c++)r.push(n.charAt(g>>>6*(3-c)&63));var u=n.charAt(64);if(u)for(;r.length%4;)r.push(u);return r.join("")},parse:function(o){var t=o.length,e=this._map;if(!(n=this._reverseMap))for(var n=this._reverseMap=[],r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;for(var s,g,c=e.charAt(64),u=(c&&(c=o.indexOf(c))!==-1&&(t=c),o),f=t,y=n,d=[],a=0,_=0;_<f;_++)_%4&&(s=y[u.charCodeAt(_-1)]<<_%4*2,g=y[u.charCodeAt(_)]>>>6-_%4*2,d[a>>>2]|=(s|g)<<24-a%4*8,a++);return l.create(d,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},p.enc.Base64},typeof W=="object"?m.exports=W=h(S("crypto-js/core")):typeof define=="function"&&define.amd?define(["crypto-js/core"],h):h(v.CryptoJS)},{"crypto-js/core":7}],9:[function(S,m,W){var v,h;v=this,h=function(p){return p.enc.Utf8},typeof W=="object"?m.exports=W=h(S("crypto-js/core")):typeof define=="function"&&define.amd?define(["crypto-js/core"],h):h(v.CryptoJS)},{"crypto-js/core":7}],10:[function(S,m,W){var v,h;v=this,h=function(p){return p.HmacSHA1},typeof W=="object"?m.exports=W=h(S("crypto-js/core"),S("crypto-js/sha1"),S("crypto-js/hmac")):typeof define=="function"&&define.amd?define(["crypto-js/core","crypto-js/sha1","crypto-js/hmac"],h):h(v.CryptoJS)},{"crypto-js/core":7,"crypto-js/hmac":11,"crypto-js/sha1":12}],11:[function(S,m,W){var v,h;v=this,h=function(p){var l,o;l=p.lib.Base,o=p.enc.Utf8,p.algo.HMAC=l.extend({init:function(t,e){t=this._hasher=new t.init,typeof e=="string"&&(e=o.parse(e));for(var n=t.blockSize,r=4*n,t=((e=e.sigBytes>r?t.finalize(e):e).clamp(),this._oKey=e.clone()),e=this._iKey=e.clone(),s=t.words,g=e.words,c=0;c<n;c++)s[c]^=1549556828,g[c]^=909522486;t.sigBytes=e.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(n){var e=this._hasher,n=e.finalize(n);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})},typeof W=="object"?m.exports=W=h(S("crypto-js/core")):typeof define=="function"&&define.amd?define(["crypto-js/core"],h):h(v.CryptoJS)},{"crypto-js/core":7}],12:[function(S,m,W){var v,h;v=this,h=function(p){var l,o,t,e,n;return o=(l=p).lib,t=o.WordArray,e=o.Hasher,n=[],o=l.algo.SHA1=e.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(r,s){for(var g=this._hash.words,c=g[0],u=g[1],f=g[2],y=g[3],d=g[4],a=0;a<80;a++){n[a]=a<16?0|r[s+a]:(_=n[a-3]^n[a-8]^n[a-14]^n[a-16])<<1|_>>>31;var _=(c<<5|c>>>27)+d+n[a];_+=a<20?1518500249+(u&f|~u&y):a<40?1859775393+(u^f^y):a<60?(u&f|u&y|f&y)-1894007588:(u^f^y)-899497514,d=y,y=f,f=u<<30|u>>>2,u=c,c=_}g[0]=g[0]+c|0,g[1]=g[1]+u|0,g[2]=g[2]+f|0,g[3]=g[3]+y|0,g[4]=g[4]+d|0},_doFinalize:function(){var r=this._data,s=r.words,g=8*this._nDataBytes,c=8*r.sigBytes;return s[c>>>5]|=128<<24-c%32,s[14+(64+c>>>9<<4)]=Math.floor(g/4294967296),s[15+(64+c>>>9<<4)]=g,r.sigBytes=4*s.length,this._process(),this._hash},clone:function(){var r=e.clone.call(this);return r._hash=this._hash.clone(),r}}),l.SHA1=e._createHelper(o),l.HmacSHA1=e._createHmacHelper(o),p.SHA1},typeof W=="object"?m.exports=W=h(S("crypto-js/core")):typeof define=="function"&&define.amd?define(["crypto-js/core"],h):h(v.CryptoJS)},{"crypto-js/core":7}],13:[function(S,m,W){(function(v,h){(function(){var p,l;p=this,l=function(){function o(Q){return typeof Q=="function"}var t=Array.isArray||function(Q){return Object.prototype.toString.call(Q)==="[object Array]"},e=0,n=void 0,r=void 0,s=function(Q,oe){d[e]=Q,d[e+1]=oe,(e+=2)===2&&(r?r(a):w())},g=typeof window!="undefined"?window:void 0,c=g||{},c=c.MutationObserver||c.WebKitMutationObserver,u=typeof self=="undefined"&&v!==void 0&&{}.toString.call(v)==="[object process]",f=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined";function y(){var Q=setTimeout;return function(){return Q(a,1)}}var d=new Array(1e3);function a(){for(var Q=0;Q<e;Q+=2)(0,d[Q])(d[Q+1]),d[Q]=void 0,d[Q+1]=void 0;e=0}function _(){try{var Q=Function("return this")().require("vertx");return(n=Q.runOnLoop||Q.runOnContext)!==void 0?function(){n(a)}:y()}catch(oe){return y()}}var b,E,T,w=void 0;function k(Q,oe){var fe,be=this,Ee=new this.constructor(U),Pe=(Ee[D]===void 0&&F(Ee),be._state);return Pe?(fe=arguments[Pe-1],s(function(){return q(Pe,Ee,fe,be._result)})):ie(be,Ee,Q,oe),Ee}function P(Q){var oe;return Q&&typeof Q=="object"&&Q.constructor===this?Q:(R(oe=new this(U),Q),oe)}var w=u?function(){return v.nextTick(a)}:c?(E=0,u=new c(a),T=document.createTextNode(""),u.observe(T,{characterData:!0}),function(){T.data=E=++E%2}):f?((b=new MessageChannel).port1.onmessage=a,function(){return b.port2.postMessage(0)}):(g===void 0&&typeof S=="function"?_:y)(),D=Math.random().toString(36).substring(2);function U(){}var M=void 0,O=1,B=2;function j(Q,oe,fe){s(function(be){var Ee=!1,Pe=((je,ze,Ye,it)=>{try{je.call(ze,Ye,it)}catch(Te){return Te}})(fe,oe,function(je){Ee||(Ee=!0,(oe!==je?R:C)(be,je))},function(je){Ee||(Ee=!0,z(be,je))},be._label);!Ee&&Pe&&(Ee=!0,z(be,Pe))},Q)}function H(Q,oe,fe){var be,Ee;oe.constructor===Q.constructor&&fe===k&&oe.constructor.resolve===P?(be=Q,(Ee=oe)._state===O?C(be,Ee._result):Ee._state===B?z(be,Ee._result):ie(Ee,void 0,function(Pe){return R(be,Pe)},function(Pe){return z(be,Pe)})):fe!==void 0&&o(fe)?j(Q,oe,fe):C(Q,oe)}function R(Q,oe){if(Q===oe)z(Q,new TypeError("You cannot resolve a promise with itself"));else if(fe=typeof oe,oe===null||fe!="object"&&fe!="function")C(Q,oe);else{fe=void 0;try{fe=oe.then}catch(be){return void z(Q,be)}H(Q,oe,fe)}var fe}function L(Q){Q._onerror&&Q._onerror(Q._result),Z(Q)}function C(Q,oe){Q._state===M&&(Q._result=oe,Q._state=O,Q._subscribers.length!==0)&&s(Z,Q)}function z(Q,oe){Q._state===M&&(Q._state=B,Q._result=oe,s(L,Q))}function ie(Q,oe,fe,be){var Ee=Q._subscribers,Pe=Ee.length;Q._onerror=null,Ee[Pe]=oe,Ee[Pe+O]=fe,Ee[Pe+B]=be,Pe===0&&Q._state&&s(Z,Q)}function Z(Q){var oe=Q._subscribers,fe=Q._state;if(oe.length!==0){for(var be,Ee=void 0,Pe=Q._result,je=0;je<oe.length;je+=3)be=oe[je],Ee=oe[je+fe],be?q(fe,be,Ee,Pe):Ee(Pe);Q._subscribers.length=0}}function q(Q,oe,fe,be){var Ee=o(fe),Pe=void 0,je=void 0,ze=!0;if(Ee){try{Pe=fe(be)}catch(Ye){ze=!1,je=Ye}if(oe===Pe)return void z(oe,new TypeError("A promises callback cannot return that same promise."))}else Pe=be;oe._state===M&&(Ee&&ze?R(oe,Pe):ze===!1?z(oe,je):Q===O?C(oe,Pe):Q===B&&z(oe,Pe))}var x=0;function F(Q){Q[D]=x++,Q._state=void 0,Q._result=void 0,Q._subscribers=[]}re.prototype._enumerate=function(Q){for(var oe=0;this._state===M&&oe<Q.length;oe++)this._eachEntry(Q[oe],oe)},re.prototype._eachEntry=function(Q,oe){var fe=this._instanceConstructor,be=fe.resolve;if(be===P){var Ee,Pe=void 0,je=void 0,ze=!1;try{Pe=Q.then}catch(Ye){ze=!0,je=Ye}Pe===k&&Q._state!==M?this._settledAt(Q._state,oe,Q._result):typeof Pe!="function"?(this._remaining--,this._result[oe]=Q):fe===le?(Ee=new fe(U),ze?z(Ee,je):H(Ee,Q,Pe),this._willSettleAt(Ee,oe)):this._willSettleAt(new fe(function(Ye){return Ye(Q)}),oe)}else this._willSettleAt(be(Q),oe)},re.prototype._settledAt=function(Q,oe,fe){var be=this.promise;be._state===M&&(this._remaining--,Q===B?z(be,fe):this._result[oe]=fe),this._remaining===0&&C(be,this._result)},re.prototype._willSettleAt=function(Q,oe){var fe=this;ie(Q,void 0,function(be){return fe._settledAt(O,oe,be)},function(be){return fe._settledAt(B,oe,be)})};var Y=re;function re(Q,oe){this._instanceConstructor=Q,this.promise=new Q(U),this.promise[D]||F(this.promise),t(oe)?(this.length=oe.length,this._remaining=oe.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(oe),this._remaining!==0)||C(this.promise,this._result)):z(this.promise,new Error("Array Methods must be provided an Array"))}ae.prototype.catch=function(Q){return this.then(null,Q)},ae.prototype.finally=function(Q){var oe=this.constructor;return o(Q)?this.then(function(fe){return oe.resolve(Q()).then(function(){return fe})},function(fe){return oe.resolve(Q()).then(function(){throw fe})}):this.then(Q,Q)};var le=ae;function ae(Q){if(this[D]=x++,this._result=this._state=void 0,this._subscribers=[],U!==Q){if(typeof Q!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof ae))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var oe=this;try{Q(function(fe){R(oe,fe)},function(fe){z(oe,fe)})}catch(fe){z(oe,fe)}}}return le.prototype.then=k,le.all=function(Q){return new Y(this,Q).promise},le.race=function(Q){var oe=this;return t(Q)?new oe(function(fe,be){for(var Ee=Q.length,Pe=0;Pe<Ee;Pe++)oe.resolve(Q[Pe]).then(fe,be)}):new oe(function(fe,be){return be(new TypeError("You must pass an array to race."))})},le.resolve=P,le.reject=function(Q){var oe=new this(U);return z(oe,Q),oe},le._setScheduler=function(Q){r=Q},le._setAsap=function(Q){s=Q},le._asap=s,le.polyfill=function(){var Q=void 0;if(h!==void 0)Q=h;else if(typeof self!="undefined")Q=self;else try{Q=Function("return this")()}catch(be){throw new Error("polyfill failed because global object is unavailable in this environment")}var oe=Q.Promise;if(oe){var fe=null;try{fe=Object.prototype.toString.call(oe.resolve())}catch(be){}if(fe==="[object Promise]"&&!oe.cast)return}Q.Promise=le},le.Promise=le},typeof W=="object"&&m!==void 0?m.exports=l():typeof define=="function"&&define.amd?define(l):p.ES6Promise=l()}).call(this)}).call(this,S("_process"),typeof __webpack_require__.g!="undefined"?__webpack_require__.g:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{_process:14}],14:[function(S,p,W){var v,h,p=p.exports={};function l(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}try{v=typeof setTimeout=="function"?setTimeout:l}catch(y){v=l}try{h=typeof clearTimeout=="function"?clearTimeout:o}catch(y){h=o}function t(y){if(v===setTimeout)return setTimeout(y,0);if((v===l||!v)&&setTimeout)return(v=setTimeout)(y,0);try{return v(y,0)}catch(d){try{return v.call(null,y,0)}catch(a){return v.call(this,y,0)}}}var e,n=[],r=!1,s=-1;function g(){r&&e&&(r=!1,e.length?n=e.concat(n):s=-1,n.length)&&c()}function c(){if(!r){for(var y=t(g),d=(r=!0,n.length);d;){for(e=n,n=[];++s<d;)e&&e[s].run();s=-1,d=n.length}e=null,r=!1,function(a){if(h===clearTimeout)return clearTimeout(a);if((h===o||!h)&&clearTimeout)return(h=clearTimeout)(a);try{h(a)}catch(_){try{return h.call(null,a)}catch(b){return h.call(this,a)}}}(y)}}function u(y,d){this.fun=y,this.array=d}function f(){}p.nextTick=function(y){var d=new Array(arguments.length-1);if(1<arguments.length)for(var a=1;a<arguments.length;a++)d[a-1]=arguments[a];n.push(new u(y,d)),n.length!==1||r||t(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=f,p.addListener=f,p.once=f,p.off=f,p.removeListener=f,p.removeAllListeners=f,p.emit=f,p.prependListener=f,p.prependOnceListener=f,p.listeners=function(y){return[]},p.binding=function(y){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(y){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],15:[function(S,m,W){m.exports={name:"aliyun-aliplayer",version:"2.31.0",description:"\u963F\u91CC\u4E91 Web \u64AD\u653E\u5668",main:"./build/aliplayer-min",style:"./build/skins/default/aliplayer-min.css",files:["build"],repository:{type:"git",url:""},keywords:["aliyun","aliplayer"],scripts:{start:"npx grunt live","start:hls":"npx grunt live --hls=true","start:flv":"npx grunt live --flv=true",build:"npx grunt build",release:"commit-and-tag-version",prepublishOnly:"npm run build","test:unit":"karma start","test:unit:watch":"karma start --no-single-run"},devDependencies:{"@ali/mediabox-quality-tracer":"^0.26.0","@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@types/chai":"^5.0.1","@types/mocha":"^10.0.10","babel-loader":"^9.2.1","babel-plugin-es6-promise":"^1.1.1","babel-plugin-istanbul":"^7.0.0",babelify:"^10.0.0",chai:"^5.1.2","commit-and-tag-version":"^11.2.1","es6-promise":"^4.2.8",grunt:"^1.0.4","grunt-autoprefixer":"^3.0.4","grunt-babel":"^8.0.0","grunt-browserify":"^5.3.0","grunt-contrib-clean":"^2.0.0","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-cssmin":"^3.0.0","grunt-contrib-less":"^2.0.0","grunt-contrib-uglify":"^4.0.1","grunt-contrib-watch":"^1.1.0","grunt-run":"^0.8.1","grunt-text-replace":"^0.4.0",karma:"^6.4.4","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-webpack":"^5.0.1",mocha:"^11.0.1","node-args":"^2.1.8",sinon:"^19.0.2","sinon-chai":"^4.0.0",webpack:"^5.97.1"},dependencies:{"@aliyun-sls/web-track-browser":"^0.3.9","crypto-js":"^4.1.1"},optionalDependencies:{puppeteer:"^23.11.1"}}},{}],16:[function(t,m,W){var v=t("../ui/component"),h=(t("../lib/util"),t("../lib/dom")),p=t("../lib/event"),l=(t("../lib/ua"),t("../lang/index")),o=t("../player/base/event/eventtype"),t=v.extend({init:function(e,n){v.call(this,e,n),this.className=n.className||"prism-auto-stream-selector",this.addClass(this.className)},createEl:function(){var e=v.prototype.createEl.call(this,"div");return e.innerHTML="<div><p class='tip-text'></p></div><div class='operators'><a class='prism-button prism-button-ok' type='button'>"+l.get("OK_Text")+"</a><a class='prism-button prism-button-cancel'  target='_blank'>"+l.get("Cancel_Text")+"</a></div>",e},bindEvent:function(){var e=this,n=(e._player.on(o.Private.AutoStreamShow,function(r){var s,g=document.querySelector("#"+e.getId()+" .tip-text");e._player._getLowerQualityLevel&&(s=e._player._getLowerQualityLevel())&&(e._switchUrl=s,g.innerText=l.get("Auto_Stream_Tip_Text").replace("$$",s.item.desc),h.css(e.el(),"display","block"))}),e._player.on(o.Private.AutoStreamHide,function(r){document.querySelector("#"+e.getId()+" .tip-text"),h.css(e.el(),"display","none")}),document.querySelector("#"+e.getId()+" .prism-button-ok")),n=(p.on(n,"click",function(){e._player._changeStream&&e._switchUrl&&(e._player._changeStream(e._switchUrl.index,l.get("Quality_Change_Text")),e._player.trigger(o.Private.SettingListHide)),h.css(e.el(),"display","none")}),document.querySelector("#"+e.getId()+" .prism-button-cancel"));p.on(n,"click",function(){h.css(e.el(),"display","none"),e._player.trigger(o.Private.SettingListHide)})}});m.exports=t},{"../lang/index":28,"../lib/dom":37,"../lib/event":38,"../lib/ua":53,"../lib/util":55,"../player/base/event/eventtype":77,"../ui/component":143}],17:[function(s,m,W){var v=s("../ui/component"),h=s("../lib/dom"),p=s("../lib/event"),l=s("../lib/ua"),o=s("../lib/function"),t=(s("../lang/index"),s("../lib/util")),e=s("../config"),n=s("../lib/playerutil"),r=s("../player/base/event/eventtype"),s=v.extend({init:function(g,c){v.call(this,g,c),this.className=c.className||"prism-liveshift-progress",this.addClass(this.className),this._liveshiftService=g._liveshiftService},createEl:function(){var g=v.prototype.createEl.call(this);return g.innerHTML='<div class="prism-enable-liveshift"><div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-liveshift-seperator"></div></div><div class="prism-disable-liveshift"></div>',g},bindEvent:function(){function g(y){c._progressDown=y}var c=this,u=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this.id()+" .prism-progress-time"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),this.seperatorNode=document.querySelector("#"+this.id()+" .prism-liveshift-seperator"),this.progressNode=document.querySelector("#"+this.id()+" .prism-enable-liveshift"),document.querySelector("#"+this.id()+" .prism-progress-cursor img")),f="//"+e.domain+e.path+e.h5Version+"/skins/default/img/dragcursor.png";this._player._options.skinsDomain=this._player._options.assetPrefix||this._player._options.skinsDomain,this._player._options.skinsDomain?f=this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":e.domain?-1<e.domain.indexOf("localhost")&&(f="//"+e.domain+"/build/skins/default/img/dragcursor.png"):f=this._player&&this._player._options&&this._player._options.sdkDomain?this._player._options.sdkDomain+e.path+e.h5Version+"/skins/default/img/dragcursor.png":(e.path||"").substring(1)+e.h5Version+"/skins/default/img/dragcursor.png",u.src=f,p.on(this.cursorNode,"mousedown",function(y){c._onMouseDown(y)}),p.on(this.cursorNode,"touchstart",function(y){c._onMouseDown(y)}),p.on(this.progressNode,"mousemove",function(y){c._progressMove(y)}),p.on(this.progressNode,"touchmove",function(y){c._progressMove(y)}),p.on(this.progressNode,"mousedown",function(y){g(!0)}),p.on(this.progressNode,"touchstart",function(y){g(!0)}),p.on(this.progressNode,"mouseup",function(y){g(!1)}),p.on(this.progressNode,"touchend",function(y){g(!1)}),p.on(this._el,"click",function(y){c._onMouseClick(y)}),this._player.on(r.Private.HideProgress,function(y){c._hideProgress(y)}),this._player.on(r.Private.CancelHideProgress,function(y){c._cancelHideProgress(y)}),this._player.on(r.Private.ShowBar,function(){c._updateLayout()}),p.on(this.progressNode,r.Private.MouseOver,function(y){c._onMouseOver(y)}),p.on(this.progressNode,r.Private.MouseOut,function(y){c._onMouseOut(y)}),this.bindTimeupdate=o.bind(this,this._onTimeupdate),this._player.on(r.Player.TimeUpdate,this.bindTimeupdate),n.isLiveShift(this._player._options)&&c._liveshiftService.start(6e4,function(y){y={mediaId:c._player._options.vid||"",error_code:y.Code,error_msg:y.Message},c._player.logError(y),c._player.trigger(r.Player.Error,y)}),this._player.on(r.Private.LiveShiftQueryCompleted,function(){c._updateSeperator(),c._updateLayout()}),this._player.on(r.Private.LiveShiftSwitchToLive,function(){c._updateCursorPosition()}),this._player.on(r.Player.Pause,function(){c._liveshiftService.stop()}),l.IS_IPAD?this.interval=setInterval(function(){c._onProgress()},500):this._player.on(r.Video.Progress,function(){c._onProgress()})},_updateSeperator:function(){this._liveshiftService.currentTimeDisplay&&(this.seperatorNode.innerText=this._liveshiftService.currentTimeDisplay)},_updateLayout:function(){var g=this.seperatorNode.offsetWidth,c=this.el().offsetWidth,u=c-g;g!=0&&u!=0&&(h.css(this.progressNode,"width",100*(u-10)/c+"%"),h.css(this.seperatorNode,"right",-1*(g+10)+"px"))},_progressMove:function(g){var c=this._getSeconds(g),u=this._liveshiftService.availableLiveShiftTime,c=(this.timeNode.innerText="-"+t.formatTime(u-c),u?c/u:0),u=1-this.timeNode.clientWidth/this.el().clientWidth,f=(u<c&&(c=u),this.timeNode&&(h.css(this.timeNode,"display","block"),h.css(this.timeNode,"left",100*c+"%")),this);!l.IS_PC&&f._progressDown&&(f.progressSeekTimer&&clearTimeout(f.progressSeekTimer),f.progressSeekTimer=setTimeout(function(){f._progressDown||f._onMouseClick(g)},200))},_hideProgress:function(g){p.off(this.cursorNode,"mousedown"),p.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(g){var c=this;p.on(this.cursorNode,"mousedown",function(u){c._onMouseDown(u)}),p.on(this.cursorNode,"touchstart",function(u){c._onMouseDown(u)})},_canSeekable:function(g){var c=!0;return c=typeof this._player.canSeekable=="function"?this._player.canSeekable(g):c},_onMouseOver:function(g){this._updateCursorPosition(this._getCurrentTime()),h.css(this.timeNode,"display","block")},_onMouseOut:function(g){h.css(this.timeNode,"display","none")},_getSeconds:function(d){if(d.touches&&d.touches[0]){for(var c,u=this.el().offsetLeft,f=this.el();f.offsetParent;){var f=f.offsetParent,y=h.getTranslateX(f);u+=f.offsetLeft+y}f.tagName&&f.tagName.toLowerCase()==="body"&&(u+=document.getElementsByTagName("html")[0].offsetLeft),(c=(d.touches?d.touches[0]:d).pageX-u)<0&&(c=0)}else c=d.offsetX,d.target!==this.cursorNode&&d.target.offsetParent!==this.cursorNode||(c+=this.cursorNode.offsetLeft),d.target!==this._el&&(d.target.offsetParent,this._el);var d=this.progressNode.offsetWidth,a=this._liveshiftService.availableLiveShiftTime;return sec=(sec=(sec=a?c/d*a:0)<0?0:sec)>a?a:sec},_onMouseClick:function(u){var c=this,u=this._getSeconds(u),y=this._liveshiftService.availableLiveShiftTime,f=y-u,d=this._player._options,y=(f<=d.liveShiftMinOffset&&(u=y-(f=d.liveShiftMinOffset)),this._player.trigger(r.Private.SeekStart,{fromTime:this._getCurrentTime()}),this._liveshiftService.getSourceUrl(f)),d=n.isHls(c._player._options.source);c._player._loadByUrlInner(y,u,!0),c._player.trigger(r.Private.Play_Btn_Hide),c._liveshiftService.seekTime=u,c._player.trigger(r.Private.EndStart,{toTime:u}),c._updateProgressBar(this.playedNode,u),c._updateCursorPosition(u),setTimeout(function(){c._progressDown||c._onMouseOut()},500),d&&setTimeout(function(){c._player.play()})},_onMouseDown:function(g){var c=this;g.preventDefault(),this._player.trigger(r.Private.SeekStart,{fromTime:this._getCurrentTime()}),p.on(this.controlNode,"mousemove",function(u){c._onMouseMove(u)}),p.on(this.controlNode,"touchmove",function(u){c._onMouseMove(u)}),p.on(this.controlNode,"mouseup",function(u){c._onMouseUp(u)}),p.on(this.controlNode,"touchend",function(u){c._onMouseUp(u)})},_onMouseUp:function(g){g.preventDefault(),p.off(this.controlNode,"mousemove"),p.off(this.controlNode,"touchmove"),p.off(this._player.tag,"mouseup"),p.off(this._player.tag,"touchend"),p.off(this.controlNode,"mouseup"),p.off(this.controlNode,"touchend"),this._onMouseClick(g)},_onMouseMove:function(g){g.preventDefault()},_onTimeupdate:function(g){this._player._seeking||(l.IS_ANDROID&&l.IS_UC&&(this._hasResetFlagUC&&this._player.getCurrentTime()&&(this._hasResetFlagUC=!1,this._basePtsUC=this._player.getCurrentTime()),this._player.getCurrentTime()||(this._hasResetFlagUC=!0,this._basePtsUC=0)),this._updateProgressBar(this.playedNode,this._getCurrentTime()),this._updateCursorPosition(this._getCurrentTime()),this._player.trigger(r.Private.UpdateProgressBar,{time:this._getCurrentTime()}))},_getCurrentTime:function(){var g=this._liveshiftService.seekTime,g=(g==-1&&(g=0),this._player.getCurrentTime()+g);return l.IS_ANDROID&&l.IS_UC&&(g-=this._basePtsUC||0),g},_onProgress:function(g){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(g,c){var u,f;this._player._switchSourcing!=1&&(f=0,this._liveshiftService.seekTime==-1?f=1:1<(f=(u=this._liveshiftService.availableLiveShiftTime)?c/u:0)&&(this._liveshiftService.seekTime=-(f=1)),this.liveShiftStartDisplay,g)&&h.css(g,"width",100*f+"%")},_updateCursorPosition:function(g){var c,u,f,y;this._player.el()&&this._player._switchSourcing!=1&&(f=0,y=1,c=this._player.el().clientWidth,this._liveshiftService.seekTime==-1?f=1:1<(f=(u=this._liveshiftService.availableLiveShiftTime)?g/u:0)&&(this._liveshiftService.seekTime=-1),c!=0&&(y=1-(g=10/c),f-=g),f=f<0?0:f,this.cursorNode)&&(y<f?(h.css(this.cursorNode,"right","0px"),h.css(this.cursorNode,"left","auto")):(h.css(this.cursorNode,"right","auto"),h.css(this.cursorNode,"left",100*f+"%")))}});m.exports=s},{"../config":19,"../lang/index":28,"../lib/dom":37,"../lib/event":38,"../lib/function":40,"../lib/playerutil":50,"../lib/ua":53,"../lib/util":55,"../player/base/event/eventtype":77,"../ui/component":143}],18:[function(l,m,W){var v=l("../ui/component"),h=l("../lib/util"),p=l("../player/base/event/eventtype"),l=v.extend({init:function(o,t){v.call(this,o,t),this.className=t.className||"prism-live-time-display",this.addClass(this.className),this._liveshiftService=o._liveshiftService},createEl:function(){var o=v.prototype.createEl.call(this,"div");return o.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="end-time">00:00</span><span class="live-text">Live: </span><span class="live-time"></span>',o},bindEvent:function(){var o=this;this._player.on(p.Video.TimeUpdate,function(){var t,e=o._liveshiftService,n=document.querySelector("#"+o.id()+" .current-time");e.liveShiftStartDisplay&&e.availableLiveShiftTime>e.seekTime&&e.seekTime!=-1?(t=o._liveshiftService.getBaseTime(),t=h.formatTime(t+o._player.getCurrentTime()),n.innerText=t):e.currentTimeDisplay&&(n.innerText=e.currentTimeDisplay)}),this._player.on(p.Private.LiveShiftQueryCompleted,function(){o.updateTime()})},updateTime:function(){document.querySelector("#"+this.id()+" .end-time").innerText=this._liveshiftService.liveTimeRange.endDisplay,document.querySelector("#"+this.id()+" .live-time").innerText=this._liveshiftService.currentTimeDisplay}});m.exports=l},{"../lib/util":55,"../player/base/event/eventtype":77,"../ui/component":143}],19:[function(S,m,W){S=S("../package.json"),m.exports={domain:"g.alicdn.com",path:"/apsara-media-box/imp-web-player/",flashVersion:"2.8.2",h5Version:S.version.split("-")[0],rtsVersion:"2.9.1",cityBrain:!0,logDuration:3,logCount:100,logReportTo:"https://videocloud.cn-hangzhou.log.aliyuncs.com/logstores/newplayer/track",dumpLogReportTo:"https://web-video.cn-hangzhou.log.aliyuncs.com/logstores/player-dump/track"}},{"../package.json":15}],20:[function(S,m,W){(function(v){(function(){var h,p,l,o,t,e,r=S("../node_modules/@ali/mediabox-quality-tracer/dist/index.cjs").MediaboxQualityTracer,n=(S("./lib/patch-ssr").isSSR||(p=function(s){var g=window&&window.location.host||"";if(!(-1<g.indexOf("localhost")||/(?:\d{1,3}\.){3}\d{1,3}/.test(g))){if(s&&s.msg&&(["\u6CA1\u6709\u4E3A\u64AD\u653E\u5668\u6307\u5B9A\u5BB9\u5668","playauth property is required"].some(function(c){return-1<s.msg.indexOf(c)})||/code:(\d+);msg:(.+)/.test(s.msg)))return void console.log("ignore error report");if(!(s.stack&&-1<s.stack.indexOf("alivc-im.iife.js")||s.file&&-1<s.file.indexOf("imp-interaction")))return s}console.log("ignore error report")},S("./lang/index").load(),l=S("./player/adaptiveplayer"),o=S("./lib/reloadInstanceUtil"),n=S("./lib/componentutil"),t=S("./config"),(e=function(s,g){h&&(h.updateOptions({cid:s.license&&s.license.key,region:s.env==="SEA"?"ap-southeast-1":"cn-hangzhou",beforeSend:p}),h.setReady());var c=l.create(s,g);return h&&h.updateOptions({beforeSend:function(u){if(u=p(u))return u.c3="likely_ri="+(c._monitor&&c._monitor.sessionId),u}}),o.storeUserEvents(c),c}).getVersion=function(){return t.h5Version},n.register(e),e.players={},e.reloadInstance=o.reloadInstance,typeof Uint8Array=="undefined")||Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),(h=new r({businessName:"imp-web-player",version:t.h5Version||"unknown",deferRegionSet:!0,env:v!=="dev"?"prod":"local",disabled:!0})).wrap(e)),r=window.Aliplayer=n;r.tracer=h,m.exports=r}).call(this)}).call(this,"prod")},{"../node_modules/@ali/mediabox-quality-tracer/dist/index.cjs":1,"./config":19,"./lang/index":28,"./lib/componentutil":32,"./lib/patch-ssr":49,"./lib/reloadInstanceUtil":51,"./player/adaptiveplayer":74}],21:[function(S,m,W){var v=S("../player/base/event/eventtype"),h=S("../lib/constants"),p=S("../lang/index");m.exports=(()=>{function l(t){var e=this;t===void 0&&(t={}),this.interval=3e3,this.player=null,this.timer=null,this.playerInitDone=!1,this.player=t.player,this.player.on(v.Player.Init,function(){e.playerInitDone=!0})}var o=l.prototype;return o.start=function(){var t=this;this.stop(),this.player&&this.player._options&&!this.player._options.preventRecord||(this.timer=setInterval(function(){t.playerInitDone&&t.check()},this.interval))},o.stop=function(){this.clearTimer()},o.check=function(){var t=!1,e=this.detectPrototype()||this.detectNativeFn();return(e||this.detectDeperateVideo())&&(console.log("isMediaSourceModified",e),this.clearTimer(),this.displayError(),this.setupErrorStyle(),this.destroyVideo(),localStorage.setItem("_intercept_mediastream_",""),t=!0),t},o.dispose=function(){this.stop(),this.player=null,this.playerInitDone=!1},o.clearTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},o.displayError=function(){var t=this.player,e={mediaId:t._options&&t._options.vid?t._options.vid:"",error_code:h.ErrorCode.RecordNotAllowed,error_msg:p.get("Record_Not_Allowed")};t.logError(e),t.trigger(v.Player.Error,e)},o.setupErrorStyle=function(){this.hideRetry();var t=document.querySelector(".prism-ErrorMessage");t&&(t.style.opacity="1",t.style.visibility="visible")},o.hideRetry=function(){var t=document.querySelector("#"+this.player.id()+" .prism-button-retry");t&&(t.style.display="none")},o.destroyVideo=function(){this.player._drm&&this.player.destroy();var t=this.player.tag;t&&t.parentNode&&t.parentNode.removeChild(t)},o.detectPrototype=function(){var t=window,e=t.MediaSource;return e&&t.EventTarget&&e.__proto__.__proto__===t.EventTarget},o.detectNativeFn=function(){var t=window.MediaSource;return t&&!this.isNativeFn(t.prototype.addSourceBuffer)},o.isNativeFn=function(t){var e=RegExp("^".concat(Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),"$")),n=typeof t;return t!==null&&(n=="object"||n=="function")&&e.test(t)},o.detectDeperateVideo=function(){var t=this.player.tag;if(t)return(t.getAttribute("id")||"").indexOf("360")!==-1},l})()},{"../lang/index":28,"../lib/constants":33,"../player/base/event/eventtype":77}],22:[function(p,m,W){var v=p("../lib/oo"),h=p("../lang/index"),p=v.extend({init:function(o,t){this._player=o,this._options=o.options()}}),l=(p.prototype.handle=function(o){var t,e;this._options.autoPlayDelay&&(t=(t=this._options.autoPlayDelayDisplayText)||h.get("AutoPlayDelayDisplayText").replace("$$",this._options.autoPlayDelay),this._player.trigger("info_show",t),this._player.trigger("h5_loading_hide"),this._player.trigger("play_btn_hide"),(e=this)._timeHandler=setTimeout(function(){e._player.trigger("info_hide"),e._options.autoPlayDelay=0,o&&o()},1e3*this._options.autoPlayDelay),this._player.on("play",function(){l(e)}),this._player.on("pause",function(){l(e)}))},p.prototype.dispose=function(){l(this),this._player=null},function(o){o._timeHandler&&(clearTimeout(o._timeHandler),o._timeHandler=null)});m.exports=p},{"../lang/index":28,"../lib/oo":48}],23:[function(o,m,W){var v=o("../lib/event"),h=o("../lib/data"),p=o("../player/base/event/eventtype"),l=h.guid(),o={};function t(r){var s,g,c=this._options.keyFastForwardStep,u=this._options.isLive;switch(r&&r.keyCode){case 39:u||(r.preventDefault(),s=this.getDuration(),g=this.getCurrentTime()+c,this.seek(g=s<g?s:g),e.call(this,g),n.call(this,g));break;case 37:u||(r.preventDefault(),g=this.getCurrentTime()-c,this.seek(g=g<0?0:g),e.call(this,g),n.call(this,g));break;case 38:r.preventDefault(),this.getVolume()<1&&0<=this.getVolume()&&this.setVolume(Number((this.getVolume()+.1).toFixed(1)));break;case 40:r.preventDefault(),0<this.getVolume()&&this.getVolume()<=1&&this.setVolume(Number((this.getVolume()-.1).toFixed(1)));break;case 32:if(u)return;r.preventDefault(),this.tag.paused?this.play(!0):this.pause(!0)}}function e(r){this.trigger(p.Private.UpdateProgress,{targetTime:r})}function n(r){this.trigger(p.Private.UpdateCursorPosition,{targetTime:r})}o.init=function(){var r;this._options.keyShortCuts&&((r=t.bind(this)).guid=l,v.on(window.document,"keydown",r))},o.dispose=function(){var r;this._options.keyShortCuts&&((r=t.bind(this)).guid=l,v.off(window.document,"keydown",r))},m.exports=o},{"../lib/data":35,"../lib/event":38,"../player/base/event/eventtype":77}],24:[function(o,m,W){var v=typeof Promise=="undefined"?o("es6-promise").Promise:Promise,h=o("../lib/constants").LicenseResultCode,p=o("../lib/io"),l=((o={})[h.ResourceIncorrect]="license resource init error",o[h.LicenseKeyInvalid]="invalid license key",o[h.DomainInvalid]="invalid domain",o[h.CertInvalid]="invalid cert content",o[h.NotFound]="license not found",o[h.Expired]="license expired",o),o=(()=>{function t(){}return t.getLicense=function(e,n,r){var s=this;return this.isWasmSupported()?n?e?this.instance?v.resolve(this.instance):new v(function(g,c){s.resolvers.push(g),s.rejecters.push(c),s.resolvers.length===1&&p.loadJS("https://g.alicdn.com/apsara-media-components/amcom-web-license/0.5.1/index.js",function(){window.loadLicenseSource().then(function(u){var f=new u({business_id:2,domain_identity:e,license_key:n,region:r});return f.update().then(function(){s.instance=f,s.resolvers.forEach(function(y){y(f)})}).catch(function(y){s.rejecters.forEach(function(d){d(h.CertInvalid+"#"+(y||"").trim().split(":")[0])})})}).catch(function(){s.rejecters.forEach(function(u){u(h.ResourceIncorrect)})}).finally(function(){s.resolvers=[],s.rejecters=[]})},function(){s.rejecters.forEach(function(u){u(h.ResourceIncorrect)})})}):v.reject(h.DomainInvalid):v.reject(h.LicenseKeyInvalid):v.reject(h.WasmNotSupported)},t.isWasmSupported=function(){return typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function"},t.logError=function(e){l[e]&&console.error(l[e])},t})();o.instance=void 0,o.resolvers=[],o.rejecters=[],m.exports=o},{"../lib/constants":33,"../lib/io":45,"es6-promise":13}],25:[function(g,m,W){function v(){return(v=Object.assign?Object.assign.bind():function(u){for(var f=1;f<arguments.length;f++){var y,d=arguments[f];for(y in d)!{}.hasOwnProperty.call(d,y)||(u[y]=d[y])}return u}).apply(null,arguments)}function h(u,f){for(var y=0;y<f.length;y++){var d=f[y];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,(a=>typeof(a=((_,b)=>{if(typeof _!="object"||!_)return _;var E=_[Symbol.toPrimitive];if(E===void 0)return(b==="string"?String:Number)(_);if(typeof(E=E.call(_,b||"default"))!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")})(a,"string"))=="symbol"?a:a+"")(d.key),d)}}var p=g("../lib/event"),l="box",o="content",t="top-left",e="top-right",n="bottom-left",r="bottom-right",s="percentage",g=(()=>{function u(a){this._container=void 0,this._video=void 0,this._logoList=[],this._resizeDone=!0,this._observer=void 0,this._observer=new c,this._handleVideoResize=this._handleVideoResize.bind(this),this._handleWindowResize=this._handleWindowResize.bind(this),this._setLogo(a.logo),this._setElements(a.container,a.video)}var f,y,d=u.prototype;return d.dispose=function(){this._observer.dispose(),this._observer=void 0,p.off(this._video,"resize",this._handleVideoResize),p.off(document,"fullscreenchange",this._handleWindowResize),this._logoList.forEach(function(a){a.logo&&a.logo.remove()}),this._logoList=[],this._container=void 0,this._video=void 0,this._resizeDone=!0},d._setElements=function(a,_){this._container=a,this._video=_,this.loadedMeta?this._logoList.forEach(this._setupLogo.bind(this)):p.on(_,"resize",this._handleVideoResize),this._observer.observe(this._container,this._handleWindowResize),p.on(document,"fullscreenchange",this._handleWindowResize)},d._handleVideoResize=function(){!this._video.videoWidth||this._logoList.some(function(a){return a.logo})||this._logoList.forEach(this._setupLogo.bind(this))},d._handleWindowResize=function(){var a=this;this._container&&this._resizeDone&&this.loadedMeta&&(this._resizeDone=!1,window.requestAnimationFrame(function(){a._resizeDone=!0,a._logoList.forEach(a._placeLogo.bind(a))}))},d._setLogo=function(a){this._logoList=a.map(this._defauleValue)},d._setupLogo=function(a){var _=this,b=this._createLogo(a);(a.logo=b).onload=function(){_._placeLogo(a)}},d._createLogo=function(a){var _=document.createElement("img");return _.setAttribute("class","prism-logo"),_.src=a.src,_},d._placeLogo=function(a){var _=a.logo,b=this._calcSize(a),E=(b.width&&_.setAttribute("width",b.width+"px"),b.height&&_.setAttribute("height",b.height+"px"),this._calcMatrix(a));_.style.position="absolute",Object.keys(E).forEach(function(T){_.style[T]=E[T]+"px"}),this._container.appendChild(a.logo)},d._calcSize=function(a){return this._getPixel(a)},d._calcMatrix=function(a){var _=this._getPosition(a),b=this._getPixel(a,{width:a.offsetX,height:a.offsetY});return Object.keys(_).forEach(function(E){switch(E){case"top":_[E]+=b.height;break;case"bottom":_[E]-=b.height;break;case"left":_[E]+=b.width;break;case"right":_[E]-=b.width}}),_},d._getPosition=function(b){var _=b.origin,b=b.position,E=0,T=0;switch(_===o&&(E=Math.abs(this.videoSize.height-this.contentSize.height)/2,T=Math.abs(this.videoSize.width-this.contentSize.width)/2),b){case t:return{top:0+E,left:0+T};case e:return{top:0+E,right:0+T};case n:return{bottom:0+E,left:0+T};case r:return{bottom:0+E,right:0+T};default:return{top:0,left:0}}},d._formalize=function(a,_){var b=1,b=a.width/a.height>_.width/_.height?_.width/a.width:_.height/a.height;return{width:a.width*b,height:a.height*b}},d._getPixel=function(a,E){var E=E===void 0?{}:E,b=E.width,E=E.height,T=a.unit,k=a.origin;return isNaN(b)&&(b=a.width),isNaN(E)&&(E=a.height),T===s?{width:(a=k===l?this.videoSize:this.contentSize).width*b/100,height:a.height*E/100}:{width:b,height:E}},d._defauleValue=function(a){return v({},a,{position:a.position||t,offsetX:a.offsetX||0,offsetY:a.offsetY||0,origin:a.origin||l,unit:a.unit||s})},d=u,(f=[{key:"videoSize",get:function(){return this._video?{width:this._video.offsetWidth,height:this._video.offsetHeight}:{}}},{key:"contentSize",get:function(){var a;return this._video?(a={width:this._video.videoWidth,height:this._video.videoHeight},{width:(a=this._formalize(a,this.videoSize)).width,height:a.height}):{}}},{key:"loadedMeta",get:function(){return!!this._video.videoWidth}}])&&h(d.prototype,f),y&&h(d,y),Object.defineProperty(d,"prototype",{writable:!1}),d})(),c=(m.exports=g,(()=>{function u(){this._frame=void 0}var f=u.prototype;return f.observe=function(y,d){var a=document.createElement("iframe");return a.style.cssText="position:absolute;left:0;top:-100%;width:100%;height:100%;margin:1px 0 0;border:none;opacity:0;visibility:hidden;pointer-events:none;",a.onload=function(){a.contentWindow.onresize=function(){d(y)}},y.appendChild(a),this._frame=a},f.dispose=function(){this._frame&&(this._frame.contentWindow.onresize=null,this._frame.remove(),this._frame=void 0)},u})())},{"../lib/event":38}],26:[function(S,m,W){var v=S("../lib/event"),h=S("../player/base/event/eventtype");m.exports=(()=>{function p(){this.player=void 0,this.ratio=void 0,this.resize=void 0,this.target=void 0,this.resize=this._resize.bind(this)}var l=p.prototype;return l.autoResize=function(o,t,e){e===void 0&&(e="height"),typeof o!="number"?console.warn("Parameter [ratio] should be a number, like 16/9"):(this.target=e,this.ratio=o,this.player=t,v.on(window,"resize",this.resize),this.resize())},l._resize=function(){var o,t,e;(o=this.player.fullscreenService)!=null&&o.isFullScreen||(o=(o=this.player)==null?void 0:o.el())&&(this.target==="height"?(e=(t=o.offsetWidth)/this.ratio,o.style.height=e+"px"):(t=(e=o.offsetHeight)*this.ratio,o.style.width=t+"px"),(o=this.player)!=null)&&o.trigger(h.Player.AutoResize,{width:t,height:e})},l.dispose=function(){v.off(window,"resize",this.resize),this.player=void 0,this.ratio=void 0,this.resize=void 0,this.target=void 0},p})()},{"../lib/event":38,"../player/base/event/eventtype":77}],27:[function(S,m,W){m.exports={OD:"OD",FD:"360p",LD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Speed:"Speed",Speed_05X_Text:"0.5X",Speed_1X_Text:"Normal",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Speed_Long_Press:"2x speed",Refresh_Text:"Refresh",Cancel:"Cancel",Mute:"Mute",Click_To_Unmute:"Click to unmute",Snapshot:"Snapshot",Detection_Text:"Diagnose",Play_DateTime:"Time",Default:"Default",Quality_Change_Fail_Switch_Text:"Cannot play, switch to ",Quality_Change_Text:"Switching to ",Quality_Change_Result:"Switched to ",Quality_The_Url:"The url",AutoPlayDelayDisplayText:"Play in $$ seconds",Error_Load_Abort_Text:"Data abort erro",Error_Network_Text:"Loading failed due to network error",Error_Decode_Text:"Decode error",Error_No_Decoder_Text:"Unsupported codec",Error_Server_Network_NotSupport_Text:"Network error or \xA0the format of video is unsupported",Error_Offline_Text:"The network is unreachable, please click Refresh",Error_Play_Text:"Error occured while playing",Error_Retry_Text:" Please close or refresh",Error_AuthKey_Text:"(HttpCode-403)Authentication expired or the domain is not in white list",Error_H5_Not_Support_Text:"The format/codec of video is not supported",Error_Not_Support_M3U8_Text:"The format of m3u8 is not supported by this explorer",Error_Not_Support_MP4_Text:"The format of mp4\xA0is not supported by this explorer",Error_Not_Support_encrypt_Text:"To play the encrypted video,please set encryptType to 1",Error_Encrypt_Fetch_Failed_Text:"Failed to fetch the encrypted video",Error_Vod_URL_Is_Empty_Text:"The url is empty",Error_Vod_Fetch_Urls_Text:"Error occured when fetch urls from vod service\uFF0Cplease close or refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Error_Playauth_Decode_Text:"PlayAuth parse failed",Error_Vid_Not_Same_Text:"Cannot renew url due to vid changed",Error_Playauth_Expired_Text:"Playauth expired, please close or refresh",Error_MTS_Fetch_Urls_Text:"Error occurred while requesting mst server",Error_Load_M3U8_Failed_Text:"(HttpCode-0)The m3u8 file loaded failed,possibly due to HTTPS certificate issues, cross-origin problems, or DNS resolution failures",Error_Load_M3U8_Timeout_Text:"Timeout error occored\xA0when the\xA0m3u8 file loaded",Error_Liveshift_M3U8_Not_Found_Text:"No more liveshift video avaliable",Error_M3U8_Decode_Text:"The m3u8 file decoded failed",Error_TX_Decode_Text:"Video decoded failed",Error_Manifest_Decode_Text:"Failed to parse manifest",Error_Waiting_Timeout_Text:"Buffering timeout,\xA0please close or refresh",Error_Invalidate_Source:"Video shoud be mp4\u3001mp3\u3001m3u8\u3001mpd or flv",Error_Empty_Source:"Video URL shouldn't be empty",Error_Vid_Empty_Source:"vid's video URL hasn't been fetched",Error_Mediaauth_Empty_Source:"mediaAuth's video URL hasn't been fetched",Error_Fetch_NotStream:"The vid has no stream to play",Error_Fetch_Media_Not_Found:"Data is not found",Error_Not_Found:"(HttpCode-404)Url is not found",Error_Drm_License_Request_Failed:"DRM license request failed",Error_Drm_Not_Supported:"DRM in not supported",Error_Drm_Load:"DRM load error",Error_Drm_No_Sts:"STS(accessKeyId/accessKeySecret/securityToken) is required for DRM playback",Error_Drm_Params_Missing:"Parameters for drm.widevine/fairplay, etc. are missing",Error_Region_Block_Text:"(HttpCode-403)This video is not available in your region",Error_SW_Conflict:"Service Worker conflict. Please try disabling browser extensions, restarting the browser, and closing other tabs.",Error_SW_Register_Failed:"Service Worker registration failed.",Error_SW_ScriptURL_Empty:"Please provide the swScriptURL parameter.",Error_SW_ScriptURL_Https:"The swScriptURL parameter must use an absolute address with https:// protocol.",Error_SW_ScriptURL_Scope:"The swScriptURL (subpath: @scope1@) and the current webpage (subpath: @scope2@) must be under the same subpath.",Error_SW_Version_Not_Match:"The version number of swScriptURL (@swVersion@) must match the player version (@playerVersion@).",Error_SW_ScriptURL_ILlegal:"Please provide a valid swScriptURL(@detail@).",Error_SW_Https_required:"Https is required when playing Vod's encription video",Tip_Err_Common:"please contact us for support, the error detail is:<br />",Tip_Err_Common_Short:"the error detail is:<br />",Tip_Drm_Request_Err:"The request failed with an error, please check the browser console to check whether it is caused by DNS, HTTPS certificates, or network problems. <br/> If the above tests are fine,",Tip_Drm_Secure_Context:"DRM can only be accessed under https, localhost, 127.0.0.1 web pages, and manifest and media segments must also use https.",Tip_Drm_Key_System_Unavailable:"1. This browser does not support Widevine or the current Widevine configuration<br/>2. The request that pops up in the browser was rejected by the user<br/>3. Please open the browser settings, look for the [Protected Content] setting and allow",Tip_Drm_File_Not_Allowed:"Do not use the file:// to open the file directly, you need to use a https:// to access the file",Tip_Drm_Playlist_Hierarchy:"HLS playlist level error, the main list needs to be master playlist",Tip_Drm_Info_Missing:"Please make sure the parameters of drm.widevine/fairplay you provided are valid",Tip_Drm_Unsupported:"Your browser does not currently support Widevine. If you are using Chrome, you can visit the URL chrome://components/ to locate the 'Widevine Content Decryption Module' and click on 'Update'. If this module is not present, the browser will be unable to play DRM-protected videos.",Tip_Err_Decode:"The decoding error refers to the current audio/video frame is not compatible with the browser, you can try the following methods: <br />1.chrome/edge browser open the chrome://flags, search for Hardware-accelerated video decode, select disabled<br />2.If the decoding error persists, please transcode the video to fix the problem frame",Tip_Err_Rts_Http_Failed:"The error indicates that the RTS streaming request encountered an HTTP error, which is usually related to HTTPS certificate, DNS resolution, or network connectivity issues. Due to browser restrictions on JavaScript, the player cannot obtain detailed error information. If you need further information, you can follow these steps:<br>Right-click on a blank area of the browser and select 'Inspect'.<br>2.In the newly opened interface, select 'Console'.<br>3.Check for any red error messages:<br>If you see 'SSL', it means that you have not correctly configured the HTTPS certificate for the streaming domain.<br>If you see 'NOT RESOLVED', it means that the DNS resolution for your domain has failed.<br>You can also use the <a style='color:white;text-decoration:underline;' href='https://live.console.aliyun.com/#/tool/url' target='_blank'>ApsaraVideo Live Diagnostic Tool</a> for self-diagnosis.",Tip_Err_Not_found:"For live streams, this might be due to the broadcast not starting yet, having ended, or being disrupted. For on-demand videos, it could indicate the video is unavailable.",Tip_Err_Blocked:"If you have a network proxy enabled, please try disabling it and then retrying.",Tip_Err_Splayer:"For best practices regarding playback of H.265/H.266 encoded videos, please refer to",Tip_Err_Splayer_Doc:" this document.",Tip_SW_Register:"1.Please access the webpage using HTTPS<br>2.Please ensure that the provided swScriptURL is a complete address starting with https:// and is accessible.",Tip_License_Required:"Starting 2024-12-01, the new version of the player must be configured with a license to use. The license for the basic functions of the player can be applied for free and is valid for 1 year. Please apply in advance to avoid any disruption in usage ",Tip_License_Params:"After completing the application, please refer to this document to pass the license information into the SDK ",Tip_License_Check:"Please ensure that the provided license key/domain parameters match exactly with what were obtained from the VOD/LIVE console.",Tip_License_Domain:"The current website domain does not match with your licensed domain",Tip_License_Feature:"The feature is not authorized by your license:",Tip_License_Reason:"The playback failed because your license verification was unsuccessful. Specific reason:",Live_End:"Live has finished",Play_Before_Fullscreen:"Please play before fullscreen",Can_Not_Seekable:"Can not seek to this position",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Request_Block_Text:"This request is blocked, the video Url should be over https",Open_Html_By_File:"Html page should be on the server",Maybe_Cors_Error:"(HttpCode-0)there is a network error, possibly due to HTTPS certificate issues, cross-origin problems, or DNS resolution failures",Speed_Switch_To:"Speed switch to ",Curent_Volume:"Current volume:",Volume_Mute:"set to mute",Volume_UnMute:"set to unmute",ShiftLiveTime_Error:"Live start time should not be greater than over time",Error_Not_Support_Format_On_Mobile:"flv\u3001rmtp can't be supported on mobile\uFF0Cplease use m3u8",Error_Not_Support_Mse_Flv:"Flv is not supported by this browser.",Error_Not_Support_Mse_Dash:"Dash is not supported by this browser.",Error_Not_Support_RTMP:"RTMP is not supported by this browser.",SessionId_Ticket_Invalid:"please assign value for sessionId and ticket properties",Http_Error:" An HTTP network request failed with an error, but not from the server.",Http_Timeout:"A network request timed out",DRM_License_Expired:"DRM license is expired, please refresh",Not_Support_DRM:"Browser doesn't support DRM",CC_Switch_To:"Subtitle switch to ",AudioTrack_Switch_To:"Audio tracks switch to ",Subtitle:"Subtitle/CC",AudioTrack:"Audio Track",Quality:"Quality",Auto:"Auto",Quality_Switch_To:"Quality switching to ",Fullscreen:"Full Screen",Setting:"Settings",Volume:"Volume",Play:"Play",Pause:"Pause",CloseSubtitle:"Close CC",OpenSubtitle:"Open CC",ExistFullScreen:"Exit Full Screen",Muted:"Muted",Retry:"Retry",SwitchToLive:"Return to live",iOSNotSupportVodEncription:"Versions of iOS below 17.1 doesn't support Vod's private encription video",iOSVodEncriptionBlacklist:"Please use Safari/Chrome browser to play Vod's private encription video",UseChromeForVodEncription:"This browser desn't suport Vod's encription video, please use latest Chrome/Edge",Record_Not_Allowed:"Recording or playing in seperated window is not allowed, please disable related plugins or switch browser.",License_Empty:"License params are required",License_Not_Found:"Unregistered license",License_Expired:"Expired license",License_License_Key_Invalid:"Invalid license key",License_Domain_Invalid:"Unexpected domain",License_Feature_Unauthorized:"Unauthorized feature",Rts_Err_Http_Signal_Error:"(RTS)http signal error",Rts_Err_Play_Failed:"(RTS)play faild error",Rts_Err_No_Data_For:"s received no data",Rts_Err_Browser_Not_Support:"(RTS)browser not support",Rts_Err_Not_Support_Webrtc:"(RTS)not support webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)browser version too low",Rts_Err_Not_Support_H264:"(RTS)not support h264",Rts_Err_Create_Offer_Error:"(RTS)create offer error",Rts_Err_Play_Url_Error:"(RTS)play url error",Rts_Err_Subscribe_Nonthing:"(RTS)subscribe nonthing",Rts_Err_Http_Request_Failed:"(RTS)HTTP request failed",Rts_Err_Http_Answer_Failed:"(RTS)answer failed",Rts_Err_PeerConnection_Unknown:"(RTS)Unknown PeerConnection",Splayer_Err_Env_Check:"(SP)This browser can't play this media",Splayer_Err_Coroutine:"(SP)Coroutine error",Splayer_Err_Decoder:"(SP)Decode error",Splayer_Err_Buffering:"(SP)Buffering error",Splayer_Err_Parser_Not_Found:"(SP)Media container is not supported"}},{}],28:[function(S,m,W){function v(s,g,c){var u=r(s),y="",f=n(),y=f=="en-us"?S("./en-us"):f=="zh-cn"?S("./zh-cn"):g[f];c&&(y=Object.assign({},y,c[f])),p.set(u,JSON.stringify(y)),e(s,y),c&&S("../lib/constants").updateByLanguage()}var h=S("../config"),p=S("../lib/storage"),l=(S("../lib/io"),"aliplayer_lang_data"),o="aliplayer_lang",t=function(){var s;return window[o]!==void 0&&window[o]||(s=(s=(navigator.language||navigator.browserLanguage).toLowerCase())&&-1<s.indexOf("zh")?"zh-cn":"en-us",window[o]=s),window[o]},e=function(s,g){s=r(s),window[s]=g},n=function(){return t()},r=function(s){var g=n();return l+"_"+(s=s||"h5")+"_"+h.h5Version.replace(/\./g,"_")+"_"+g};m.exports.setCurrentLanguage=function(s,g,c,u){var f=window[o];(s=s!==void 0&&s?s:t())=="en-us"||s=="zh-cn"||c&&c[s]||(console.warn("There is no language resource for "+s+", please specify the language resource by languageTexts property"),s="zh-cn"),window[o]=s,v(g,c,u),s!=f&&S("../lib/constants").updateByLanguage()},m.exports.getCurrentLanguage=t,m.exports.getLanguageData=function(s,g){return s=r(s),window[s]},m.exports.load=v,m.exports.get=function(s,g,c){if(g=r(g=g||"h5"),g=window[g],g){var u=g[s];if(c)for(var f in c)u=u.replace(new RegExp("@"+f+"@","g"),c[f]);return u}}},{"../config":19,"../lib/constants":33,"../lib/io":45,"../lib/storage":52,"./en-us":27,"./zh-cn":29}],29:[function(S,m,W){m.exports={OD:"\u539F\u753B",FD:"\u6D41\u7545",LD:"\u6807\u6E05",SD:"\u9AD8\u6E05",HD:"\u8D85\u6E05","2K":"2K","4K":"4K",FHD:"\u5168\u9AD8\u6E05",XLD:"\u6781\u901F",SQ:"\u666E\u901A\u97F3\u8D28",HQ:"\u9AD8\u97F3\u8D28",Speed:"\u500D\u901F",Speed_05X_Text:"0.5X",Speed_1X_Text:"\u6B63\u5E38",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Speed_Long_Press:"\u500D\u901F\u64AD\u653E\u4E2D",Quality_Change_Fail_Switch_Text:"\u4E0D\u80FD\u64AD\u653E\uFF0C\u5207\u6362\u4E3A",Quality_Change_Text:"\u6B63\u5728\u4E3A\u60A8\u5207\u6362\u5230 ",Quality_Change_Result:"\u5DF2\u5207\u6362\u5230 ",Quality_The_Url:"\u6B64\u5730\u5740",Refresh_Text:"\u5237\u65B0",Detection_Text:"\u67E5\u770B\u5EFA\u8BAE",Cancel:"\u53D6\u6D88",Mute:"\u9759\u97F3",Click_To_Unmute:"\u70B9\u51FB\u53D6\u6D88\u9759\u97F3",Snapshot:"\u622A\u56FE",Play_DateTime:"\u64AD\u653E\u65F6\u95F4",Default:"\u9ED8\u8BA4",AutoPlayDelayDisplayText:"$$\u79D2\u4EE5\u540E\u5F00\u59CB\u64AD\u653E",Error_Load_Abort_Text:"\u83B7\u53D6\u6570\u636E\u8FC7\u7A0B\u88AB\u4E2D\u6B62",Error_Network_Text:"\u7F51\u7EDC\u9519\u8BEF\u52A0\u8F7D\u6570\u636E\u5931\u8D25",Error_Decode_Text:"\u89E3\u7801\u9519\u8BEF",Error_No_Decoder_Text:"\u4E0D\u652F\u6301\u6B64\u7F16\u7801\u683C\u5F0F",Error_Server_Network_NotSupport_Text:"\u670D\u52A1\u5668\u3001\u7F51\u7EDC\u9519\u8BEF\u6216\u683C\u5F0F\u4E0D\u652F\u6301",Error_Offline_Text:"\u7F51\u7EDC\u4E0D\u53EF\u7528\uFF0C\u8BF7\u786E\u5B9A",Error_Play_Text:"\u64AD\u653E\u51FA\u9519\u5566",Error_Retry_Text:"\u8BF7\u5C1D\u8BD5\u9000\u51FA\u91CD\u8BD5\u6216\u5237\u65B0",Error_AuthKey_Text:"\u3010HttpCode-403\u3011\u53EF\u80FD\u9274\u6743\u8FC7\u671F\u3001\u57DF\u540D\u4E0D\u5728\u767D\u540D\u5355\u6216\u8BF7\u6C42\u88AB\u62E6\u622A",Error_H5_Not_Support_Text:"\u4E0D\u652F\u6301\u6B64\u683C\u5F0F\u7684\u89C6\u9891",Error_Not_Support_M3U8_Text:"\u6D4F\u89C8\u5668\u4E0D\u652F\u6301m3u8\u89C6\u9891\u64AD\u653E",Error_Not_Support_MP4_Text:"\u6D4F\u89C8\u5668\u4E0D\u652F\u6301mp4\u89C6\u9891\u64AD\u653E",Error_Not_Support_encrypt_Text:"\u64AD\u653E\u79C1\u6709\u52A0\u5BC6\u89C6\u9891\uFF0C\u8BF7\u8BBE\u7F6E\u5C5E\u6027encryptType\u4E3A1",Error_Encrypt_Fetch_Failed_Text:"\u8BF7\u6C42\u52A0\u5BC6\u5730\u5740\u5931\u8D25",Error_Vod_URL_Is_Empty_Text:"\u83B7\u53D6\u64AD\u653E\u5730\u5740\u4E3A\u7A7A",Error_Vod_Fetch_Urls_Text:"\u70B9\u64AD\u63A5\u53E3\u5F02\u5E38\uFF0C\u8BF7\u5C1D\u8BD5\u9000\u51FA\u91CD\u8BD5\u6216\u5237\u65B0",Fetch_Playauth_Error:"\u83B7\u53D6\u64AD\u653E\u51ED\u8BC1\u51FA\u9519\u5566\uFF0C\u8BF7\u5C1D\u8BD5\u9000\u51FA\u91CD\u8BD5\u6216\u5237\u65B0",Error_Playauth_Decode_Text:"playauth\u89E3\u6790\u9519\u8BEF",Error_Vid_Not_Same_Text:"\u4E0D\u80FD\u66F4\u65B0\u5730\u5740\uFF0Cvid\u548C\u64AD\u653E\u4E2D\u7684\u4E0D\u4E00\u81F4",Error_Playauth_Expired_Text:"\u51ED\u8BC1\u5DF2\u8FC7\u671F\uFF0C\u8BF7\u5C1D\u8BD5\u9000\u51FA\u91CD\u8BD5\u6216\u5237\u65B0",Error_MTS_Fetch_Urls_Text:"MTS\u83B7\u53D6\u53D6\u6570\u5931\u8D25",Error_Load_M3U8_Failed_Text:"\u3010HttpCode-0\u3011\u83B7\u53D6m3u8\u6587\u4EF6\u5931\u8D25,\u53EF\u80FD\u662Fhttps\u8BC1\u4E66\u3001\u8DE8\u57DF\u95EE\u9898\u6216DNS\u89E3\u6790\u5931\u8D25",Error_Load_M3U8_Timeout_Text:"\u83B7\u53D6m3u8\u6587\u4EF6\u8D85\u65F6",Error_Liveshift_M3U8_Not_Found_Text:"\u6CA1\u6709\u66F4\u591A\u65F6\u79FB\u89C6\u9891\u4E86",Error_M3U8_Decode_Text:"\u83B7\u53D6m3u8\u6587\u4EF6\u89E3\u6790\u5931\u8D25",Error_TX_Decode_Text:"\u89E3\u6790\u6570\u636E\u51FA\u9519",Error_Manifest_Decode_Text:"Manifest\u89E3\u6790\u51FA\u9519",Error_Waiting_Timeout_Text:"\u7F13\u51B2\u6570\u636E\u8D85\u65F6\uFF0C\u8BF7\u5C1D\u8BD5\u9000\u51FA\u91CD\u8BD5\u6216\u5237\u65B0",Error_Invalidate_Source:"\u64AD\u653E\u5730\u5740\u683C\u5F0F\u9700\u8981\u4E3Amp4\u3001mp3\u3001m3u8\u3001mpd\u6216flv",Error_Empty_Source:"\u64AD\u653E\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",Error_Vid_Empty_Source:"vid\u5BF9\u5E94\u7684\u89C6\u9891\u5730\u5740\u8FD8\u672A\u83B7\u53D6\u5230",Error_Mediaauth_Empty_Source:"mediaAuth\u5BF9\u5E94\u7684\u89C6\u9891\u5730\u5740\u8FD8\u672A\u83B7\u53D6\u5230",Error_Fetch_NotStream:"\u6B64vid\u6CA1\u6709\u53EF\u64AD\u653E\u89C6\u9891",Error_Fetch_Media_Not_Found:"\u6570\u636E\u4E0D\u5B58\u5728\u6216\u5DF2\u88AB\u5220\u9664",Error_Not_Found:"\u3010HttpCode-404\u3011\u64AD\u653E\u5730\u5740\u4E0D\u5B58\u5728",Error_Drm_License_Request_Failed:"DRM License \u8BF7\u6C42\u5931\u8D25",Error_Drm_Not_Supported:"\u5F53\u524D\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 DRM \u64AD\u653E",Error_Drm_Load:"DRM \u64AD\u653E\u9519\u8BEF",Error_Drm_No_Sts:"DRM \u64AD\u653E\u9700\u8981\u4F7F\u7528STS(accessKeyId/accessKeySecret/securityToken)",Error_Drm_Params_Missing:"\u7F3A\u5C11drm.widevine/fairplay\u7B49\u53C2\u6570",Error_Region_Block_Text:"\u3010HttpCode-403\u3011\u60A8\u6240\u5728\u7684\u5730\u533A\u65E0\u6CD5\u89C2\u770B\u8BE5\u89C6\u9891",Error_SW_Conflict:"ServiceWorker\u51B2\u7A81\uFF0C\u8BF7\u5C1D\u8BD5\u7981\u7528\u6D4F\u89C8\u5668\u63D2\u4EF6\u3001\u91CD\u542F\u6D4F\u89C8\u5668\u5E76\u5173\u95ED\u5176\u4ED6\u7F51\u9875",Error_SW_Register_Failed:"Service Worker\u6CE8\u518C\u5931\u8D25",Error_SW_ScriptURL_Empty:"\u8BF7\u4F20\u5165 swScriptURL \u53C2\u6570",Error_SW_ScriptURL_Https:"swScriptURL\u53C2\u6570\u8BF7\u4F7F\u7528 https:// \u534F\u8BAE\u7684\u7EDD\u5BF9\u5730\u5740",Error_SW_ScriptURL_Scope:"swScriptURL(\u5B50\u8DEF\u5F84:@scope1@)\u548C\u5F53\u524D\u7F51\u9875(\u5B50\u8DEF\u5F84:@scope2@)\u5FC5\u987B\u5728\u540C\u4E00\u4E2A\u5B50\u8DEF\u5F84\u4E0B",Error_SW_Version_Not_Match:"swScriptURL\u7684\u7248\u672C\u53F7(@swVersion@)\u5FC5\u987B\u548C\u64AD\u653E\u5668\u7248\u672C(@playerVersion@)\u53F7\u4E00\u81F4",Error_SW_ScriptURL_ILlegal:"\u8BF7\u4F20\u5165\u5408\u6CD5\u7684swScriptURL(@detail@)",Error_SW_Https_required:"\u79C1\u6709\u52A0\u5BC6\u64AD\u653E\u9700\u8981\u4F7F\u7528 https \u73AF\u5883",Tip_Err_Common:"\u60A8\u53EF\u8054\u7CFB\u552E\u540E\u652F\u6301\uFF0C\u9519\u8BEF\u8BE6\u60C5:<br />",Tip_Err_Common_Short:"\u9519\u8BEF\u8BE6\u60C5:<br />",Tip_Drm_Request_Err:"\u8BF7\u6C42\u51FA\u9519\uFF0C\u8BF7\u5148\u67E5\u770B\u6D4F\u89C8\u5668\u63A7\u5236\u53F0\uFF0C\u68C0\u67E5\u662F\u5426\u7531\u57DF\u540D\u89E3\u6790\u3001https\u8BC1\u4E66\u3001\u6216\u7F51\u7EDC\u95EE\u9898\u5F15\u8D77\u3002<br />\u82E5\u4EE5\u4E0A\u68C0\u67E5\u6CA1\u95EE\u9898\uFF0C",Tip_Drm_Secure_Context:"DRM\u4EC5\u53EF\u4EE5\u5728https\u3001localhost\u3001127.0.0.1\u7F51\u9875\u4E0B\u8BBF\u95EE\uFF0C\u540C\u65F6manifest\u548C\u5207\u7247\u4E5F\u5FC5\u987B\u4F7F\u7528https\u3002",Tip_Drm_Key_System_Unavailable:"1.\u6B64\u6D4F\u89C8\u5668\u4E0D\u652F\u6301Widevine\u6216\u8005\u5F53\u524D\u7684Widevine\u914D\u7F6E<br />2.\u6D4F\u89C8\u5668\u5F39\u51FA\u7684\u8BF7\u6C42\u88AB\u7528\u6237\u62D2\u7EDD\u4E86<br />3.\u8BF7\u6253\u5F00\u6D4F\u89C8\u5668\u8BBE\u7F6E\uFF0C\u67E5\u627E\u5173\u4E8E\u3010\u53D7\u4FDD\u62A4\u7684\u5185\u5BB9\u3011\u8BBE\u7F6E\u5E76\u5141\u8BB8",Tip_Drm_File_Not_Allowed:"\u8BF7\u4E0D\u8981\u4F7F\u7528file://\u76F4\u63A5\u6253\u5F00\u6587\u4EF6\uFF0C\u9700\u8981\u4F7F\u7528https://\u8BBF\u95EE\u6587\u4EF6",Tip_Drm_Playlist_Hierarchy:"HLS\u64AD\u653E\u5217\u8868\u5C42\u7EA7\u9519\u8BEF\uFF0C\u4E3B\u5217\u8868\u9700\u8981\u662F master playlist",Tip_Drm_Info_Missing:"\u8BF7\u68C0\u67E5\u4F20\u5165\u7684drm.widevine/fairplay\u7B49\u53C2\u6570\u662F\u5426\u6709\u6548",Tip_Drm_Unsupported:"\u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 Widevine\uFF0C\u5982\u679C\u662F Chrome\uFF0C\u53EF\u4EE5\u8BBF\u95EE chrome://components/\uFF0C\u67E5\u627E Widevine Content Decryption Module\uFF0C\u5E76\u70B9\u51FB\u66F4\u65B0\u3002\u5982\u679C\u6CA1\u6709\u6B64\u6A21\u5757\uFF0C\u5219\u8BE5\u6D4F\u89C8\u5668\u65E0\u6CD5\u64AD\u653E DRM \u89C6\u9891\u3002",Tip_Err_Decode:"\u89E3\u7801\u9519\u8BEF\u6307\u7684\u662F\u5F53\u524D\u97F3/\u89C6\u9891\u5E27\u4E0E\u6D4F\u89C8\u5668\u4E0D\u517C\u5BB9\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\u4EE5\u4E0B\u65B9\u5F0F\uFF1A<br />1.chrome/edge \u6D4F\u89C8\u5668\u6253\u5F00chrome://flags\uFF0C\u641C\u7D22 Hardware-accelerated video decode\uFF0C\u9009\u62E9 disabled<br />2.\u5982\u679C\u89E3\u7801\u9519\u8BEF\u4ECD\u7136\u5B58\u5728\uFF0C\u8BF7\u5BF9\u89C6\u9891\u8FDB\u884C\u8F6C\u7801\u5904\u7406\uFF0C\u4EE5\u4FEE\u590D\u95EE\u9898\u5E27<br />3.firefox\u6D4F\u89C8\u5668\u8BF7\u6253\u5F00about:support\uFF0C\u4E0B\u62C9\u627E\u5230\u3010\u89E3\u7801\u5668\u652F\u6301\u4FE1\u606F\u3011\uFF0C\u5982\u679C\u6CA1\u6709AAC\u5B57\u6837\uFF0C\u4EE3\u8868\u4E0D\u652F\u6301\u97F3\u9891\u89E3\u7801\uFF0C\u8BF7\u66F4\u6362\u6D4F\u89C8\u5668",Tip_Err_Rts_Http_Failed:"\u8BE5\u9519\u8BEF\u6307\u7684\u662FRTS\u62C9\u6D41\u8BF7\u6C42\u9047\u5230\u4E86\u4E00\u4E2Ahttp\u9519\u8BEF\uFF0C\u4E00\u822C\u6765\u8BF4\u662Fhttps\u8BC1\u4E66\u3001DNS\u89E3\u6790\u6216\u8005\u7F51\u7EDC\u8FDE\u901A\u6027\u95EE\u9898\uFF0C\u7531\u4E8E\u6D4F\u89C8\u5668\u5BF9JS\u7684\u9650\u5236\uFF0C\u64AD\u653E\u5668\u65E0\u6CD5\u53D6\u5F97\u8BE6\u7EC6\u7684\u9519\u8BEF\u4FE1\u606F\uFF0C\u9700\u8981\u8FDB\u4E00\u6B65\u6392\u67E5\uFF0C\u60A8\u53EF\u6309\u7167\u4EE5\u4E0B\u64CD\u4F5C\uFF1A<br>1.\u53F3\u952E\u6D4F\u89C8\u5668\u7A7A\u767D\u5904\uFF0C\u9009\u62E9\u3010\u68C0\u67E5\u30112.\u5728\u65B0\u6253\u5F00\u7684\u754C\u9762\u4E2D\u9009\u62E9\u3010\u63A7\u5236\u53F0\u30113.\u67E5\u770B\u7EA2\u8272\u62A5\u9519\uFF1A<br>\u5982\u679C\u6709SSL\u5B57\u6837\uFF0C\u5219\u4EE3\u8868\u60A8\u6CA1\u6709\u4E3A\u62C9\u6D41\u57DF\u540D\u6B63\u786E\u5730\u914D\u7F6Ehttps\u8BC1\u4E66<br>\u5982\u679C\u6709NOT RESOLVED\u5B57\u6837\uFF0C\u5219\u4EE3\u8868\u60A8\u7684\u57DF\u540DDNS\u89E3\u6790\u5931\u8D25<br>\u60A8\u4E5F\u4F7F\u7528<a style='color:white;text-decoration:underline;' href='https://live.console.aliyun.com/#/tool/url' target='_blank'>\u963F\u91CC\u4E91\u76F4\u64AD\u8BCA\u65AD\u5DE5\u5177</a>\u8FDB\u884C\u81EA\u52A9\u6392\u67E5",Tip_Err_Not_found:"\u5982\u679C\u662F\u76F4\u64AD\uFF0C\u53EF\u80FD\u662F\u76F4\u64AD\u672A\u5F00\u59CB/\u5DF2\u505C\u6B62/\u5DF2\u65AD\u6D41\uFF1B\u5982\u679C\u662F\u70B9\u64AD\uFF0C\u53EF\u80FD\u662F\u89C6\u9891\u4E0D\u5B58\u5728\u3002",Tip_Err_Blocked:"\u5982\u679C\u60A8\u5F00\u542F\u4E86\u7F51\u7EDC\u4EE3\u7406\uFF0C\u8BF7\u5173\u95ED\u540E\u91CD\u8BD5\u3002",Tip_Err_Splayer:"\u5173\u4E8E H.265/H.266 \u64AD\u653E\u7684\u6700\u4F73\u5B9E\u8DF5\uFF0C\u8BF7\u53C2\u8003",Tip_Err_Splayer_Doc:"\u6B64\u6587\u6863\u3002",Tip_SW_Register:"1.\u8BF7\u4F7F\u7528https\u8BBF\u95EE\u7F51\u9875<br>2.\u8BF7\u786E\u4FDD\u4F20\u5165\u7684swScriptURL\u662F\u4EE5https://\u5F00\u5934\u7684\u5B8C\u6574\u5730\u5740\uFF0C\u4E14\u53EF\u4EE5\u6B63\u5E38\u8BBF\u95EE",Tip_License_Required:"2024\u5E7412\u67081\u65E5\u8D77\uFF0C\u65B0\u7248\u672C\u64AD\u653E\u5668\u9700\u8981\u914D\u7F6ELicense\u624D\u53EF\u4EE5\u4F7F\u7528\uFF0C\u64AD\u653E\u5668\u57FA\u7840\u529F\u80FDLicense\u514D\u8D39\u7533\u8BF7\uFF0C\u6709\u6548\u671F 1 \u5E74\uFF0C\u8BF7\u63D0\u524D\u7533\u8BF7\u4EE5\u907F\u514D\u65E0\u6CD5\u4F7F\u7528",Tip_License_Params:"\u7533\u8BF7\u5B8C\u6210\u540E\uFF0C\u8BF7\u53C2\u8003\u6B64\u6587\u6863\u5C06License\u4FE1\u606F\u4F20\u5165SDK",Tip_License_Check:"\u8BF7\u786E\u4FDD\u4F20\u5165\u7684 license key/domain \u53C2\u6570\u548C\u70B9\u64AD/\u76F4\u64AD\u63A7\u5236\u53F0\u4E0A\u83B7\u53D6\u7684\u5B8C\u5168\u4E00\u81F4",Tip_License_Domain:"\u5F53\u524D\u7F51\u9875\u57DF\u540D\u548C\u60A8\u7684 license \u6388\u6743\u57DF\u540D\u4E0D\u4E00\u81F4",Tip_License_Feature:"\u60A8\u7684license\u672A\u6388\u6743\u529F\u80FD\uFF1A",Tip_License_Reason:"\u64AD\u653E\u5931\u8D25\uFF0C\u56E0\u4E3A\u60A8\u7684 License \u6821\u9A8C\u672A\u901A\u8FC7\uFF0C\u5177\u4F53\u539F\u56E0\uFF1A",Live_End:"\u4EB2\uFF0C\u76F4\u64AD\u5DF2\u7ED3\u675F",Play_Before_Fullscreen:"\u64AD\u653E\u540E\u518D\u5168\u5C4F",Can_Not_Seekable:"\u4E0D\u80FDseek\u5230\u8FD9\u91CC",Cancel_Text:"\u53D6\u6D88",OK_Text:"\u786E\u8BA4",Auto_Stream_Tip_Text:"\u7F51\u7EDC\u4E0D\u7ED9\u529B\uFF0C\u662F\u5426\u5207\u6362\u5230$$",Request_Block_Text:"\u6D4F\u89C8\u5668\u5B89\u5168\u7B56\u7565\u89C6\u9891\u5730\u5740\u4E0D\u80FD\u4E3Ahttp\u534F\u8BAE\uFF0C\u4E0E\u7F51\u7AD9https\u534F\u8BAE\u4E0D\u4E00\u81F4",Open_Html_By_File:"\u4E0D\u80FD\u76F4\u63A5\u5728\u6D4F\u89C8\u5668\u6253\u5F00html\u6587\u4EF6\uFF0C\u8BF7\u90E8\u7F72\u5230\u670D\u52A1\u7AEF",Maybe_Cors_Error:"\u3010HttpCode-0\u3011\u7F51\u7EDC\u8BF7\u6C42\u5931\u8D25\uFF0C\u53EF\u80FD\u662Fhttps\u8BC1\u4E66\u3001\u8DE8\u57DF\u95EE\u9898\u6216DNS\u89E3\u6790\u5931\u8D25",Speed_Switch_To:"\u500D\u901F\u5207\u6362\u5230 ",Curent_Volume:"\u5F53\u524D\u97F3\u91CF\uFF1A",Volume_Mute:"\u8BBE\u7F6E\u4E3A\u9759\u97F3",Volume_UnMute:"\u8BBE\u7F6E\u4E3A\u975E\u9759\u97F3",ShiftLiveTime_Error:"\u76F4\u64AD\u5F00\u59CB\u65F6\u95F4\u4E0D\u80FD\u5927\u4E8E\u76F4\u64AD\u7ED3\u675F\u65F6\u95F4",Error_Not_Support_Format_On_Mobile:"\u79FB\u52A8\u7AEF\u4E0D\u652F\u6301flv\u3001rmtp\u89C6\u9891\uFF0C\u8BF7\u4F7F\u7528m3u8",Error_Not_Support_Mse_Flv:"\u5F53\u524D\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 flv \u89C6\u9891",Error_Not_Support_Mse_Dash:"\u5F53\u524D\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 dash \u89C6\u9891",Error_Not_Support_RTMP:"\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 rtmp \u89C6\u9891",SessionId_Ticket_Invalid:"DRM\u89C6\u9891\u64AD\u653E\uFF0CsessionId\u548Cticket\u5C5E\u6027\u4E0D\u80FD\u4E3A\u7A7A",Http_Error:"Http\u7F51\u7EDC\u8BF7\u6C42\u5931\u8D25",Http_Timeout:"http\u8BF7\u6C42\u8D85\u65F6",DRM_License_Expired:"DRM license\u8D85\u65F6\uFF0C\u8BF7\u5237\u65B0",Not_Support_DRM:"\u6D4F\u89C8\u5668\u4E0D\u652F\u6301DRM\u89C6\u9891\u7684\u64AD\u653E\u6216\u672A\u53D7\u5230\u7528\u6237\u8BB8\u53EF",CC_Switch_To:"\u5B57\u5E55\u5207\u6362\u5230 ",AudioTrack_Switch_To:"\u97F3\u8F68\u5207\u6362\u5230 ",Subtitle:"\u5B57\u5E55",AudioTrack:"\u97F3\u8F68",Quality:"\u6E05\u6670\u5EA6",Auto:"\u81EA\u52A8",Quality_Switch_To:"\u6B63\u5728\u5207\u6362\u6E05\u6670\u5EA6\u81F3 ",Fullscreen:"\u5168\u5C4F",Setting:"\u8BBE\u7F6E",Volume:"\u97F3\u91CF",Play:"\u64AD\u653E",Pause:"\u6682\u505C",CloseSubtitle:"\u5173\u95ED\u5B57\u5E55",OpenSubtitle:"\u6253\u5F00\u5B57\u5E55",ExistFullScreen:"\u9000\u51FA\u5168\u5C4F",Muted:"\u9759\u97F3",Retry:"\u91CD\u8BD5",SwitchToLive:"\u8FD4\u56DE\u76F4\u64AD",iOSNotSupportVodEncription:"iOS17.1\u4EE5\u4E0B\u4E0D\u652F\u6301\u963F\u91CC\u4E91\u89C6\u9891\u79C1\u6709\u52A0\u5BC6\u64AD\u653E",iOSVodEncriptionBlacklist:"\u8BF7\u4F7F\u7528Safari/Chrome\u6D4F\u89C8\u5668\u64AD\u653E\u52A0\u5BC6\u89C6\u9891",UseChromeForVodEncription:"\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u70B9\u64AD\u52A0\u5BC6\u64AD\u653E\uFF0C\u8BF7\u4F7F\u7528\u6700\u65B0Chrome/Edge\u6D4F\u89C8\u5668",Record_Not_Allowed:"\u7981\u6B62\u5F55\u5C4F\u6216\u5C0F\u7A97\u53E3\u64AD\u653E\uFF0C\u8BF7\u5173\u95ED\u63D2\u4EF6\u6216\u66F4\u6362\u6D4F\u89C8\u5668",License_Empty:"\u672A\u914D\u7F6ELicense",License_Not_Found:"License\u672A\u6CE8\u518C",License_Expired:"License\u5DF2\u8FC7\u671F",License_License_Key_Invalid:"LicenseKey\u65E0\u6548",License_Domain_Invalid:"\u57DF\u540D\u4E0D\u5339\u914D",License_Feature_Unauthorized:"\u529F\u80FD\u672A\u6388\u6743",Rts_Err_Http_Signal_Error:"(RTS)\u4FE1\u4EE4\u8BF7\u6C42\u5931\u8D25",Rts_Err_Play_Failed:"(RTS)\u64AD\u653E\u5931\u8D25",Rts_Err_No_Data_For:"\u79D2\u6CA1\u6709\u6570\u636E",Rts_Err_Browser_Not_Support:"(RTS)\u4E0D\u652F\u6301\u6B64\u6D4F\u89C8\u5668",Rts_Err_Not_Support_Webrtc:"(RTS)\u4E0D\u652F\u6301webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)\u6D4F\u89C8\u5668\u7248\u672C\u8FC7\u4F4E",Rts_Err_Not_Support_H264:"(RTS)\u4E0D\u652F\u6301H264",Rts_Err_Create_Offer_Error:"(RTS)create offer\u5931\u8D25",Rts_Err_Play_Url_Error:"(RTS)\u64AD\u653Eurl\u534F\u8BAE\u9519\u8BEF",Rts_Err_Subscribe_Nonthing:"(RTS)\u53C2\u6570\u8BBE\u7F6E\u9519\u8BEF",Rts_Err_Http_Request_Failed:"(RTS)HTTP\u8BF7\u6C42\u5931\u8D25",Rts_Err_Http_Answer_Failed:"(RTS)answer\u5931\u8D25",Rts_Err_PeerConnection_Unknown:"(RTS)PeerConnection\u5F02\u5E38",Splayer_Err_Env_Check:"(SP)\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301\u64AD\u653E\u8BE5\u89C6\u9891",Splayer_Err_Coroutine:"(SP)Coroutine \u9519\u8BEF",Splayer_Err_Decode:"(SP)\u89E3\u7801\u9519\u8BEF",Splayer_Err_Buffering:"(SP)\u7F13\u51B2\u533A\u9519\u8BEF",Splayer_Err_Parser_Not_Found:"(SP)\u4E0D\u652F\u6301\u7684\u5A92\u4F53\u5BB9\u5668"}},{}],30:[function(S,m,W){var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";if(window.Uint8Array)for(var h=new Uint8Array(256),p=0;p<v.length;p++)h[v.charCodeAt(p)]=p;var l=function(o){for(var t="",e=0;e<o.length;e+=16e3){var n=o.subarray(e,e+16e3);t+=String.fromCharCode.apply(null,n)}return t};m.exports={decode:function(o){for(var t,e,n,r,c=.75*o.length,s=o.length,g=0,c=(o[o.length-1]==="="&&(c--,o[o.length-2]==="=")&&c--,new ArrayBuffer(c)),u=new Uint8Array(c),f=0;f<s;f+=4)t=h[o.charCodeAt(f)],e=h[o.charCodeAt(f+1)],n=h[o.charCodeAt(f+2)],r=h[o.charCodeAt(f+3)],u[g++]=t<<2|e>>4,u[g++]=(15&e)<<4|n>>2,u[g++]=(3&n)<<6|63&r;return c},encode:function(o){for(var t=new Uint8Array(o),e=t.length,n="",r=0;r<e;r+=3)n=(n=(n=(n+=v[t[r]>>2])+v[(3&t[r])<<4|t[r+1]>>4])+v[(15&t[r+1])<<2|t[r+2]>>6])+v[63&t[r+2]];return e%3==2?n=n.substring(0,n.length-1)+"=":e%3==1&&(n=n.substring(0,n.length-2)+"=="),n},unpackPlayReady:function(o){if(o=((g,c,u)=>{if(!g)return"";u||g.byteLength%2==0||console.log("Data has an incorrect length, must be even."),u=g instanceof ArrayBuffer?g:((u=new Uint8Array(g.byteLength)).set(new Uint8Array(g)),u.buffer);for(var f=Math.floor(g.byteLength/2),y=new Uint16Array(f),d=new DataView(u),a=0;a<f;a++)y[a]=d.getUint16(2*a,c);return l(y)})(o,!0,!0),o.indexOf("PlayReadyKeyMessage")!=-1){for(var o=new DOMParser().parseFromString(o,"application/xml"),t=o.getElementsByTagName("HttpHeader"),e={},n=0;n<t.length;++n){var r=t[n].querySelector("name"),s=t[n].querySelector("value");e[r.textContent]=s.textContent}return{header:e,changange:o.querySelector("Challenge").textContent}}console.log("PlayReady request is already unwrapped.")}}},{}],31:[function(S,m,W){function v(){v=function(){return r};var n,r={},s=Object.prototype,g=s.hasOwnProperty,k=typeof Symbol=="function"?Symbol:{},c=k.iterator||"@@iterator",u=k.asyncIterator||"@@asyncIterator",f=k.toStringTag||"@@toStringTag";function y(H,R,L,C){Object.defineProperty(H,R,{value:L,enumerable:!C,configurable:!C,writable:!C})}try{y({},"")}catch(H){y=function(R,L,C){return R[L]=C}}function d(H,x,L,C){var z,ie,Z,q,x=x&&x.prototype instanceof b?x:b,x=Object.create(x.prototype);return y(x,"_invoke",(z=H,ie=L,Z=new B(C||[]),q=1,function(F,Y){if(q===3)throw Error("Generator is already running");if(q===4){if(F==="throw")throw Y;return{value:n,done:!0}}for(Z.method=F,Z.arg=Y;;){var re=Z.delegate;if(re&&(re=function le(ae,Q){var oe=Q.method,fe=ae.i[oe];return fe===n?(Q.delegate=null,oe==="throw"&&ae.i.return&&(Q.method="return",Q.arg=n,le(ae,Q),Q.method==="throw")||oe!=="return"&&(Q.method="throw",Q.arg=new TypeError("The iterator does not provide a '"+oe+"' method")),_):(oe=a(fe,ae.i,Q.arg),oe.type==="throw"?(Q.method="throw",Q.arg=oe.arg,Q.delegate=null,_):(fe=oe.arg,fe?fe.done?(Q[ae.r]=fe.value,Q.next=ae.n,Q.method!=="return"&&(Q.method="next",Q.arg=n),Q.delegate=null,_):fe:(Q.method="throw",Q.arg=new TypeError("iterator result is not an object"),Q.delegate=null,_)))}(re,Z),re)){if(re===_)continue;return re}if(Z.method==="next")Z.sent=Z._sent=Z.arg;else if(Z.method==="throw"){if(q===1)throw q=4,Z.arg;Z.dispatchException(Z.arg)}else Z.method==="return"&&Z.abrupt("return",Z.arg);if(q=3,re=a(z,ie,Z),re.type==="normal"){if(q=Z.done?4:2,re.arg===_)continue;return{value:re.arg,done:Z.done}}re.type==="throw"&&(q=4,Z.method="throw",Z.arg=re.arg)}}),!0),x}function a(H,R,L){try{return{type:"normal",arg:H.call(R,L)}}catch(C){return{type:"throw",arg:C}}}r.wrap=d;var _={};function b(){}function E(){}function T(){}var k={},P=(y(k,c,function(){return this}),Object.getPrototypeOf),P=P&&P(P(j([]))),w=(P&&P!==s&&g.call(P,c)&&(k=P),T.prototype=b.prototype=Object.create(k));function D(H){["next","throw","return"].forEach(function(R){y(H,R,function(L){return this._invoke(R,L)})})}function U(H,R){var L;y(this,"_invoke",function(C,z){function ie(){return new R(function(Z,q){(function x(Q,Y,re,le){var ae,Q=a(H[Q],H,Y);if(Q.type!=="throw")return(Y=(ae=Q.arg).value)&&typeof Y=="object"&&g.call(Y,"__await")?R.resolve(Y.__await).then(function(oe){x("next",oe,re,le)},function(oe){x("throw",oe,re,le)}):R.resolve(Y).then(function(oe){ae.value=oe,re(ae)},function(oe){return x("throw",oe,re,le)});le(Q.arg)})(C,z,Z,q)})}return L=L?L.then(ie,ie):ie()},!0)}function M(H){this.tryEntries.push(H)}function O(H){var R=H[4]||{};R.type="normal",R.arg=n,H[4]=R}function B(H){this.tryEntries=[[-1]],H.forEach(M,this),this.reset(!0)}function j(H){if(H!=null){var R,L=H[c];if(L)return L.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length))return R=-1,(L=function C(){for(;++R<H.length;)if(g.call(H,R))return C.value=H[R],C.done=!1,C;return C.value=n,C.done=!0,C}).next=L}throw new TypeError(typeof H+" is not iterable")}return y(w,"constructor",E.prototype=T),y(T,"constructor",E),y(T,f,E.displayName="GeneratorFunction"),r.isGeneratorFunction=function(H){return H=typeof H=="function"&&H.constructor,!!H&&(H===E||(H.displayName||H.name)==="GeneratorFunction")},r.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,T):(H.__proto__=T,y(H,f,"GeneratorFunction")),H.prototype=Object.create(w),H},r.awrap=function(H){return{__await:H}},D(U.prototype),y(U.prototype,u,function(){return this}),r.AsyncIterator=U,r.async=function(H,R,L,C,z){z===void 0&&(z=Promise);var ie=new U(d(H,R,L,C),z);return r.isGeneratorFunction(R)?ie:ie.next().then(function(Z){return Z.done?Z.value:ie.next()})},D(w),y(w,f,"Generator"),y(w,c,function(){return this}),y(w,"toString",function(){return"[object Generator]"}),r.keys=function(H){var R,L=Object(H),C=[];for(R in L)C.unshift(R);return function z(){for(;C.length;)if((R=C.pop())in L)return z.value=R,z.done=!1,z;return z.done=!0,z}},r.values=j,B.prototype={constructor:B,reset:function(H){if(this.prev=this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(O),!H)for(var R in this)R.charAt(0)==="t"&&g.call(this,R)&&!isNaN(+R.slice(1))&&(this[R]=n)},stop:function(){this.done=!0;var H=this.tryEntries[0][4];if(H.type==="throw")throw H.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var R=this;function L(F){ie.type="throw",ie.arg=H,R.next=F}for(var C=R.tryEntries.length-1;0<=C;--C){var z=this.tryEntries[C],ie=z[4],Z=this.prev,q=z[1],x=z[2];if(z[0]===-1)return L("end"),!1;if(!q&&!x)throw Error("try statement without catch or finally");if(z[0]!=null&&z[0]<=Z){if(Z<q)return this.method="next",this.arg=n,L(q),!0;if(Z<x)return L(x),!1}}},abrupt:function(H,R){for(var L=this.tryEntries.length-1;0<=L;--L){var C=this.tryEntries[L];if(-1<C[0]&&C[0]<=this.prev&&this.prev<C[2]){var z=C;break}}var ie=(z=z&&(H==="break"||H==="continue")&&z[0]<=R&&R<=z[2]?null:z)?z[4]:{};return ie.type=H,ie.arg=R,z?(this.method="next",this.next=z[2],_):this.complete(ie)},complete:function(H,R){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&R&&(this.next=R),_},finish:function(H){for(var R=this.tryEntries.length-1;0<=R;--R){var L=this.tryEntries[R];if(L[2]===H)return this.complete(L[4],L[3]),O(L),_}},catch:function(H){for(var R=this.tryEntries.length-1;0<=R;--R){var L,C,z=this.tryEntries[R];if(z[0]===H)return(L=z[4]).type==="throw"&&(C=L.arg,O(z)),C}throw Error("illegal catch attempt")},delegateYield:function(H,R,L){return this.delegate={i:j(H),r:R,n:L},this.method==="next"&&(this.arg=n),_}},r}function h(n,r,s,g,c,u,f){try{var y=n[u](f),d=y.value}catch(a){return s(a)}y.done?r(d):Promise.resolve(d).then(g,c)}var p=typeof Promise=="undefined"?S("es6-promise").Promise:Promise,l=S("./io"),o=S("../config");function t(){}function e(){var n;return n=v().mark(function r(s,g,c,u){var f,y;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(g===void 0&&(g={}),c===void 0&&(c=t),u===void 0&&(u=t),window.VideoxMuxer){d.next=14;break}d.prev=4,d.next=7;var a=g;return new p(function(_,b){var E="videox-muxer.min.js",T="https://"+o.domain+o.path+o.h5Version+"/splayer/"+E;a.assetPrefix&&(T=a.assetPrefix+"/splayer/"+E),l.loadJS(T,function(){_()},function(){b()})});case 7:d.next=14;break;case 9:return d.prev=9,d.t0=d.catch(4),console.error("load videox-demuxer failed"),u("load videox-demuxer failed"),d.abrupt("return");case 14:f=window.VideoxMuxer.Demuxer,(y=new f({progressive:!0})).on("loadedmetadata",function(_){_===void 0&&(_={}),y.suspend(),y.destroy(),y=null,c(_)}),y.on("error",function(_){u(_),y.suspend(),y.destroy(),y=null}),y.load(s);case 19:case"end":return d.stop()}},r,null,[[4,9]])}),(e=function(){var r=this,s=arguments;return new Promise(function(g,c){var u=n.apply(r,s);function f(d){h(u,g,c,f,y,"next",d)}function y(d){h(u,g,c,f,y,"throw",d)}f(void 0)})}).apply(this,arguments)}m.exports=function(n,r,s,g){return e.apply(this,arguments)}},{"../config":19,"./io":45,"es6-promise":13}],32:[function(S,m,W){var v=S("./oo"),h=S("../player/base/event/eventtype");m.exports.stopPropagation=function(p){window.event?window.event.cancelBubble=!0:p.stopPropagation()},m.exports.register=function(p){p.util={stopPropagation:m.exports.stopPropagation},p.Component=v.extend,p.EventType=h.Player}},{"../player/base/event/eventtype":77,"./oo":48}],33:[function(S,m,W){function v(){m.exports.VideoErrorCodeText={1:h.get("Error_Load_Abort_Text"),2:h.get("Error_Network_Text"),3:h.get("Error_Decode_Text"),4:h.get("Error_Server_Network_NotSupport_Text")},m.exports.VideoLevels={0:h.get("OD"),640:h.get("FD"),960:h.get("LD"),1280:h.get("SD"),1920:h.get("HD"),2580:h.get("2K"),3840:h.get("4K")},m.exports.QualityLevels={OD:h.get("OD"),LD:h.get("LD"),FD:h.get("FD"),SD:h.get("SD"),HD:h.get("HD"),"2K":h.get("2K"),"4K":h.get("4K"),XLD:h.get("XLD"),FHD:h.get("FHD"),SQ:h.get("SQ"),HQ:h.get("HQ")},m.exports.SpeedLevels=[{key:.5,text:h.get("Speed_05X_Text")},{key:1,text:h.get("Speed_1X_Text")},{key:1.25,text:h.get("Speed_125X_Text")},{key:1.5,text:h.get("Speed_15X_Text")},{key:2,text:h.get("Speed_2X_Text")}]}var h=S("../lang/index");m.exports.LOAD_START="loadstart",m.exports.LOADED_METADATA="loadedmetadata",m.exports.LOADED_DATA="loadeddata",m.exports.PROGRESS="progress",m.exports.CAN_PLAY="canplay",m.exports.CAN_PLYA_THROUGH="canplaythrough",m.exports.PLAY="play",m.exports.PAUSE="pause",m.exports.ENDED="ended",m.exports.PLAYING="playing",m.exports.WAITING="waiting",m.exports.ERROR="error",m.exports.SUSPEND="suspend",m.exports.STALLED="stalled",m.exports.DASH_QUALITY_PROTOCOL="quality_index://",m.exports.AuthKeyExpiredEvent="authkeyexpired",m.exports.USER_EVENT_NAME="__user_events__",m.exports.PLAYER_SCOPE="__aliplayerMessage__",m.exports.SW_MSG_EVT={SETUP:"setup",SETUP_ACK:"setupAck",DISPOSE:"dispose",ENC_SEGMENT:"encSegment",DEC_SEGMENT:"decSegment",ABORT_SEGMENT:"abortSegment"},m.exports.DM_MSG_EVT={SETUP:"setup",DEMUX:"demux",RESULT:"result",FLUSH:"flush",DISPOSE:"dispose",DISPOSED:"disposed",ERROR:"error"},m.exports.PLAYER_SDK_CODE_LEGACY=9201,m.exports.PLAYER_SDK_CODE=9203,m.exports.FEATURE_ID_H265=30001,m.exports.FEATURE_ID_H266=30002,m.exports.LicenseResultCode={Success:0,NotFound:1,Expired:2,CertInvalid:3,WasmNotSupported:4,ResourceIncorrect:5,LicenseKeyInvalid:6,DomainInvalid:7},m.exports.LicenseErrorKey={Empty:"License_Empty",NotFound:"License_Not_Found",Expired:"License_Expired",CertInvalid:"License_Cert_Invalid",LicenseKeyInvalid:"License_License_Key_Invalid",DomainInvalid:"License_Domain_Invalid",Unauthorized:"License_Feature_Unauthorized"},m.exports.DRMKeySystem={4:"com.microsoft.playready",5:"com.widevine.alpha"},m.exports.EncryptionType={Private:1,Standard:2,ChinaDRM:3,PlayReady:4,Widevine:5},m.exports.VodEncryptionType={AliyunVoDEncryption:1,HLSEncryption:2,Widevine:5,"Widevine-FairPlay":5},m.exports.DRMType={Widevine:"Widevine",PlayReady:"PlayReady"},m.exports.ErrorCode={InvalidParameter:4001,AuthKeyExpired:4002,InvalidSourceURL:4003,NotFoundSourceURL:4004,StartLoadData:4005,LoadedMetadata:4006,PlayingError:4007,LoadingTimeout:4008,RequestDataError:4009,EncrptyVideoNotSupport:4010,FormatNotSupport:4011,PlayauthDecode:4012,PlayDataDecode:4013,NetworkUnavaiable:4014,UserAbort:4015,NetworkError:4016,URLsIsEmpty:4017,DrmLicenseRequestFailed:4018,RecordNotAllowed:4019,MediaNotFound:4020,DrmNotSupported:4021,DrmLoadError:4022,RegionBlock:4023,ModuleLoadError:4034,LicenseError:4035,CrossDomain:4027,OtherError:4400,ServerAPIError:4500,FlashNotInstalled:4600,RtsSignalError:4100,RtsPlayFailedError:4200,RtsNotSupportWebRtc:4110,RtsBrowserNotSupport:4111,RtsBrowserVersionTooLow:4112,RtsNotSupportH264:4113,RtsCreateOfferError:4114,RtsAutoPLayFaild:4115,RtsPlayUrlError:4116,RtsSubscribeNonthing:4117,RtsHtmlElementError:4118,RtsHtmlElementNotMatch:4119,RtsBrowserNotSupportRtc:4120,RtsHttpRequestFaild:4121,RtsHttpAnswerFaild:4122,RtsPeerConnectionUnknown:4123,SplayerEnvCheckError:4300,SplayerCoroutineError:4301,SplayerDecodeError:4302,SplayerBufferingError:4303,SplayerParserNotFound:4304},m.exports.AuthKeyExpired=7200,m.exports.AuthKeyRefreshExpired=7e3,m.exports.AuthInfoExpired=100,m.exports.VideoErrorCode={1:4015,2:4016,3:4013,4:4400},m.exports.RegionBlockMessages=["black location","denied by region block"],m.exports.IconType={FontClass:"fontclass",Symbol:"symbol",Sprite:"Sprite"},m.exports.SelectedStreamLevel="selectedStreamLevel",m.exports.SelectedCC="selectedCC",m.exports.HWDetectHvc1="HWDetectHvc1",m.exports.HWDetectHvc1Hls="HWDetectHvc1Hls",m.exports.HWDetectHev1="HWDetectHev1",m.exports.HWDetectHev1Hls="HWDetectHev1Hls",m.exports.WidthMapToLevel={0:"OD",640:"FD",960:"LD",1280:"SD",1920:"HD",2580:"2K",3840:"4K"},v(),m.exports.updateByLanguage=v},{"../lang/index":28}],34:[function(S,m,W){m.exports.get=function(v){for(var h=v+"",p=document.cookie.split(";"),l=0;l<p.length;l++){var o=p[l].trim();if(o.indexOf(h)==0)return unescape(o.substring(h.length+1,o.length))}return""},m.exports.set=function(v,h,o){var l=new Date,o=(l.setTime(l.getTime()+24*o*60*60*1e3),"expires="+l.toGMTString());document.cookie=v+"="+escape(h)+"; "+o}},{}],35:[function(S,m,W){var v=S("./object");m.exports.cache={},m.exports.guid=function(h,p){var l,o,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=[];if(p=p||t.length,h)for(l=0;l<h;l++)e[l]=t[0|Math.random()*p];else for(e[8]=e[13]=e[18]=e[23]="-",e[14]="4",l=0;l<36;l++)e[l]||(o=0|16*Math.random(),e[l]=t[l==19?3&o|8:o]);return e.join("")},m.exports.expando="vdata"+new Date().getTime(),m.exports.getData=function(h){var p=h[m.exports.expando];return p||(p=h[m.exports.expando]=m.exports.guid(),m.exports.cache[p]={}),m.exports.cache[p]},m.exports.hasData=function(h){var p="";return!(!(p=h?h[m.exports.expando]:p)||v.isEmpty(m.exports.cache[p]))},m.exports.removeData=function(h){var p="";if(p=h?h[m.exports.expando]:p){delete m.exports.cache[p];try{delete h[m.exports.expando]}catch(l){h.removeAttribute?h.removeAttribute(m.exports.expando):h[m.exports.expando]=null}}}},{"./object":47}],36:[function(S,m,W){var v,h=typeof Promise=="undefined"?S("es6-promise").Promise:Promise;S=typeof self!="undefined"?self:this,v=function(){return l=[function(t,e,n){(function(r){e.b=function(c){for(var u=(c=c===void 0?{}:c).includes,c=c.excludes,c=c===void 0?[]:c,f=!1,y=!1,d=0,a=u===void 0?[]:u;d<a.length;d++)if(a[d]===!0){f=!0;break}for(var _=0,b=c;_<b.length;_++)if(b[_]===!0){y=!0;break}return f&&!y},e.c=function(c,u,f){return c=g.a[c],c!==void 0&&Object(s.compare)(c,u,f)},e.a=function(){return typeof self!="undefined"?self:typeof window!="undefined"?window:r!==void 0?r:this};var s=n(11),g=(n.n(s),n(4))}).call(e,n(10))},function(t,s,g){g.d(s,"c",function(){return c}),g.d(s,"d",function(){return u}),g.d(s,"b",function(){return f}),g.d(s,"f",function(){return y}),g.d(s,"a",function(){return d}),g.d(s,"e",function(){return a});var r,s=g(3),g=g(0),g=Object(g.a)(),c="InstallTrigger"in((g==null?void 0:g.window)||{})||/firefox/i.test(s.b),u=/trident/i.test(s.b)||/msie/i.test(s.b),f=/edge/i.test(s.b),y=/webkit/i.test(s.b)&&!f,d=((r=g==null?void 0:g.window)==null?void 0:r.chrome)!==void 0||/chrome/i.test(s.b),a=(((g=(r=g==null?void 0:g.window)==null?void 0:r.safari)==null?void 0:g.pushNotification)||!1).toString()==="[object SafariRemoteNotification]"||/safari/i.test(s.b)&&!d},function(t,e,n){n.d(e,"b",function(){return g}),n.d(e,"c",function(){return c}),n.d(e,"a",function(){return u});var r=n(1);function s(f){if(console){if(!r.d&&!r.b)return console[f];if(f==="log"||f==="clear")return function(){for(var y=[],d=0;d<arguments.length;d++)y[d]=arguments[d];console[f].apply(console,y)}}return function(){for(var y=0;y<arguments.length;y++);}}var g=s("log"),c=s("table"),u=s("clear")},function(t,r,n){r.a=function(){for(var c,u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return s!=null&&s.document?(c=s.document).createElement.apply(c,u):{}},n.d(r,"b",function(){return g});var r=n(0),s=Object(r.a)(),g=((n=s==null?void 0:s.navigator)==null?void 0:n.userAgent)||"xxxxx"},function(t,e,n){n.d(e,"a",function(){return r});for(var r={},s=0,g=(n(3).b||"").match(/\w+\/(\d|\.)+(\s|$)/gi)||[];s<g.length;s++){var c=g[s].split("/"),u=c[0];r[u]=c[1]}},function(t,r,n){n.d(r,"b",function(){return s}),n.d(r,"d",function(){return g}),n.d(r,"c",function(){return c}),n.d(r,"a",function(){return u}),n.d(r,"e",function(){return f});var r=n(3),s=/ipad/i.test(r.b),g=/macintosh/i.test(r.b),c=/iphone/i.test(r.b),u=/android/i.test(r.b),f=/windows/i.test(r.b)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.addListener=function(_){a.addListener(_)},e.removeListener=function(_){a.removeListener(_)},e.isLaunch=function(){return a.isLaunch()},e.launch=function(){a.launch()},e.stop=function(){a.stop()},e.setDetectDelay=function(_){a.setDetectDelay(_)};var r=n(7),s=n(8),g=(n.d(e,"DevtoolsDetector",function(){return r.a}),n.d(e,"checkers",function(){return s}),n(0)),c=(n.d(e,"match",function(){return g.b}),n.d(e,"specificVersionMatch",function(){return g.c}),n(1)),u=(n.d(e,"isFirefox",function(){return c.c}),n.d(e,"isIE",function(){return c.d}),n.d(e,"isEdge",function(){return c.b}),n.d(e,"isWebkit",function(){return c.f}),n.d(e,"isChrome",function(){return c.a}),n.d(e,"isSafari",function(){return c.e}),n(2)),f=(n.d(e,"log",function(){return u.b}),n.d(e,"table",function(){return u.c}),n.d(e,"clear",function(){return u.a}),n(17)),y=(n.d(e,"isMobile",function(){return f.a}),n(4)),d=(n.d(e,"versionMap",function(){return y.a}),n(5)),a=(n.d(e,"isIpad",function(){return d.b}),n.d(e,"isMac",function(){return d.d}),n.d(e,"isIphone",function(){return d.c}),n.d(e,"isAndroid",function(){return d.a}),n.d(e,"isWindows",function(){return d.e}),new r.a({checkers:[s.elementIdChecker,s.regToStringChecker,s.functionToStringChecker,s.depRegToStringChecker,s.dateToStringChecker,s.debuggerChecker]}));e.default=a},function(t,e,n){n.d(e,"a",function(){return g});var r=this&&this.__awaiter||function(u,f,y,d){return new(y=y||h)(function(a,_){function b(k){try{T(d.next(k))}catch(P){_(P)}}function E(k){try{T(d.throw(k))}catch(P){_(P)}}function T(k){var P;k.done?a(k.value):((P=k.value)instanceof y?P:new y(function(w){w(P)})).then(b,E)}T((d=d.apply(u,f||[])).next())})},s=this&&this.__generator||function(u,f){var y,d,a,_={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},b={next:E(0),throw:E(1),return:E(2)};return typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function E(T){return function(k){var P=[T,k];if(y)throw new TypeError("Generator is already executing.");for(;_;)try{if(y=1,d&&(a=2&P[0]?d.return:P[0]?d.throw||((a=d.return)&&a.call(d),0):d.next)&&!(a=a.call(d,P[1])).done)return a;switch(d=0,(P=a?[2&P[0],a.value]:P)[0]){case 0:case 1:a=P;break;case 4:return _.label++,{value:P[1],done:!1};case 5:_.label++,d=P[1],P=[0];continue;case 7:P=_.ops.pop(),_.trys.pop();continue;default:if(!(a=0<(a=_.trys).length&&a[a.length-1])&&(P[0]===6||P[0]===2)){_=0;continue}if(P[0]===3&&(!a||P[1]>a[0]&&P[1]<a[3]))_.label=P[1];else if(P[0]===6&&_.label<a[1])_.label=a[1],a=P;else{if(!(a&&_.label<a[2])){a[2]&&_.ops.pop(),_.trys.pop();continue}_.label=a[2],_.ops.push(P)}}P=f.call(u,_)}catch(w){P=[6,w],d=0}finally{y=a=0}if(5&P[0])throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}}},g=(c.prototype.launch=function(){this._detectLoopDelay<=0&&this.setDetectDelay(500),this._detectLoopStopped&&(this._detectLoopStopped=!1,this._detectLoop())},c.prototype.stop=function(){this._detectLoopStopped||(this._detectLoopStopped=!0,clearTimeout(this._timer))},c.prototype.isLaunch=function(){return!this._detectLoopStopped},c.prototype.setDetectDelay=function(u){this._detectLoopDelay=u},c.prototype.addListener=function(u){this._listeners.push(u)},c.prototype.removeListener=function(u){this._listeners=this._listeners.filter(function(f){return f!==u})},c.prototype._broadcast=function(u){for(var f=0,y=this._listeners;f<y.length;f++){var d=y[f];try{d(u.isOpen,u)}catch(a){}}},c.prototype._detectLoop=function(){return r(this,void 0,void 0,function(){var u,f,y,d,a,_=this;return s(this,function(b){switch(b.label){case 0:u=!1,f="",y=0,d=this._checkers,b.label=1;case 1:return y<d.length?[4,(a=d[y]).isEnable()]:[3,6];case 2:return b.sent()?(f=a.name,[4,a.isOpen()]):[3,4];case 3:u=b.sent(),b.label=4;case 4:if(u)return[3,6];b.label=5;case 5:return y++,[3,1];case 6:return u!=this._isOpen&&(this._isOpen=u,this._broadcast({isOpen:u,checkerName:f})),0<this._detectLoopDelay?this._timer=setTimeout(function(){return _._detectLoop()},this._detectLoopDelay):this.stop(),[2]}})})},c);function c(u){u=u.checkers,this._listeners=[],this._isOpen=!1,this._detectLoopStopped=!0,this._detectLoopDelay=500,this._checkers=u.slice()}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),s=(n.d(e,"depRegToStringChecker",function(){return r.a}),n(12)),g=(n.d(e,"elementIdChecker",function(){return s.a}),n(13)),c=(n.d(e,"functionToStringChecker",function(){return g.a}),n(14)),u=(n.d(e,"regToStringChecker",function(){return c.a}),n(15)),f=(n.d(e,"debuggerChecker",function(){return u.a}),n(16));n.d(e,"dateToStringChecker",function(){return f.a})},function(t,e,n){n.d(e,"a",function(){return d});var r=n(1),s=n(2),g=n(0),c=this&&this.__awaiter||function(a,_,b,E){return new(b=b||h)(function(T,k){function P(U){try{D(E.next(U))}catch(M){k(M)}}function w(U){try{D(E.throw(U))}catch(M){k(M)}}function D(U){var M;U.done?T(U.value):((M=U.value)instanceof b?M:new b(function(O){O(M)})).then(P,w)}D((E=E.apply(a,_||[])).next())})},u=this&&this.__generator||function(a,_){var b,E,T,k={label:0,sent:function(){if(1&T[0])throw T[1];return T[1]},trys:[],ops:[]},P={next:w(0),throw:w(1),return:w(2)};return typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function w(D){return function(U){var M=[D,U];if(b)throw new TypeError("Generator is already executing.");for(;k;)try{if(b=1,E&&(T=2&M[0]?E.return:M[0]?E.throw||((T=E.return)&&T.call(E),0):E.next)&&!(T=T.call(E,M[1])).done)return T;switch(E=0,(M=T?[2&M[0],T.value]:M)[0]){case 0:case 1:T=M;break;case 4:return k.label++,{value:M[1],done:!1};case 5:k.label++,E=M[1],M=[0];continue;case 7:M=k.ops.pop(),k.trys.pop();continue;default:if(!(T=0<(T=k.trys).length&&T[T.length-1])&&(M[0]===6||M[0]===2)){k=0;continue}if(M[0]===3&&(!T||M[1]>T[0]&&M[1]<T[3]))k.label=M[1];else if(M[0]===6&&k.label<T[1])k.label=T[1],T=M;else{if(!(T&&k.label<T[2])){T[2]&&k.ops.pop(),k.trys.pop();continue}k.label=T[2],k.ops.push(M)}}M=_.call(a,k)}catch(O){M=[6,O],E=0}finally{b=T=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}}},f=/ /,y=!1,d=(f.toString=function(){return y=!0,d.name},{name:"dep-reg-to-string",isOpen:function(){return c(this,void 0,void 0,function(){return u(this,function(a){return y=!1,Object(s.c)({dep:f}),Object(s.a)(),[2,y]})})},isEnable:function(){return c(this,void 0,void 0,function(){return u(this,function(a){return[2,Object(g.b)({includes:[!0],excludes:[r.c,r.d]})]})})}})},function(t,e){var n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){typeof window=="object"&&(n=window)}t.exports=n},function(t,e,n){var r;(e=typeof(r=function(){var s=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function g(a){var _=a.replace(/^v/,"").replace(/\+.*$/,""),b=function(T,k){return T.indexOf(k)===-1?T.length:T.indexOf(k)}(_,"-"),E=_.substring(0,b).split(".");return E.push(_.substring(b+1)),E}function c(a){return isNaN(Number(a))?a:Number(a)}function u(a){if(typeof a!="string")throw new TypeError("Invalid argument expected string");if(!s.test(a))throw new Error("Invalid argument not valid semver ('"+a+"' received)")}function f(a,_){[a,_].forEach(u);for(var b=g(a),E=g(_),T=0;T<Math.max(b.length-1,E.length-1);T++){var k=parseInt(b[T]||0,10),P=parseInt(E[T]||0,10);if(k>P)return 1;if(P>k)return-1}var w=b[b.length-1],D=E[E.length-1];if(w&&D){var U=w.split(".").map(c),M=D.split(".").map(c);for(T=0;T<Math.max(U.length,M.length);T++){if(U[T]===void 0||typeof M[T]=="string"&&typeof U[T]=="number")return-1;if(M[T]===void 0||typeof U[T]=="string"&&typeof M[T]=="number"||U[T]>M[T])return 1;if(M[T]>U[T])return-1}}else if(w||D)return w?-1:1;return 0}var y=[">",">=","=","<","<="],d={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return f.validate=function(a){return typeof a=="string"&&s.test(a)},f.compare=function(a,_,b){(function(T){if(typeof T!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof T);if(y.indexOf(T)===-1)throw new TypeError("Invalid operator, expected one of "+y.join("|"))})(b);var E=f(a,_);return d[b].indexOf(E)>-1},f})=="function"?r.apply(e,[]):r)!==void 0&&(t.exports=e)},function(t,c,n){n.d(c,"a",function(){return a});var r=n(1),s=n(2),g=n(0),c=n(3),u=this&&this.__awaiter||function(_,b,E,T){return new(E=E||h)(function(k,P){function w(M){try{U(T.next(M))}catch(O){P(O)}}function D(M){try{U(T.throw(M))}catch(O){P(O)}}function U(M){var O;M.done?k(M.value):((O=M.value)instanceof E?O:new E(function(B){B(O)})).then(w,D)}U((T=T.apply(_,b||[])).next())})},f=this&&this.__generator||function(_,b){var E,T,k,P={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]},w={next:D(0),throw:D(1),return:D(2)};return typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function D(U){return function(M){var O=[U,M];if(E)throw new TypeError("Generator is already executing.");for(;P;)try{if(E=1,T&&(k=2&O[0]?T.return:O[0]?T.throw||((k=T.return)&&k.call(T),0):T.next)&&!(k=k.call(T,O[1])).done)return k;switch(T=0,(O=k?[2&O[0],k.value]:O)[0]){case 0:case 1:k=O;break;case 4:return P.label++,{value:O[1],done:!1};case 5:P.label++,T=O[1],O=[0];continue;case 7:O=P.ops.pop(),P.trys.pop();continue;default:if(!(k=0<(k=P.trys).length&&k[k.length-1])&&(O[0]===6||O[0]===2)){P=0;continue}if(O[0]===3&&(!k||O[1]>k[0]&&O[1]<k[3]))P.label=O[1];else if(O[0]===6&&P.label<k[1])P.label=k[1],k=O;else{if(!(k&&P.label<k[2])){k[2]&&P.ops.pop(),P.trys.pop();continue}P.label=k[2],P.ops.push(O)}}O=b.call(_,P)}catch(B){O=[6,B],T=0}finally{E=k=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}}},y=Object(c.a)("div"),d=!1,a=(Object.defineProperty(y,"id",{get:function(){return d=!0,a.name},configurable:!0}),{name:"element-id",isOpen:function(){return u(this,void 0,void 0,function(){return f(this,function(_){return d=!1,Object(s.b)(y),Object(s.a)(),[2,d]})})},isEnable:function(){return u(this,void 0,void 0,function(){return f(this,function(_){return[2,Object(g.b)({includes:[!0],excludes:[r.d,r.b,r.c]})]})})}})},function(t,e,n){n.d(e,"a",function(){return a});var r=n(1),s=n(2),g=n(5),c=n(0),u=this&&this.__awaiter||function(_,b,E,T){return new(E=E||h)(function(k,P){function w(M){try{U(T.next(M))}catch(O){P(O)}}function D(M){try{U(T.throw(M))}catch(O){P(O)}}function U(M){var O;M.done?k(M.value):((O=M.value)instanceof E?O:new E(function(B){B(O)})).then(w,D)}U((T=T.apply(_,b||[])).next())})},f=this&&this.__generator||function(_,b){var E,T,k,P={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]},w={next:D(0),throw:D(1),return:D(2)};return typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function D(U){return function(M){var O=[U,M];if(E)throw new TypeError("Generator is already executing.");for(;P;)try{if(E=1,T&&(k=2&O[0]?T.return:O[0]?T.throw||((k=T.return)&&k.call(T),0):T.next)&&!(k=k.call(T,O[1])).done)return k;switch(T=0,(O=k?[2&O[0],k.value]:O)[0]){case 0:case 1:k=O;break;case 4:return P.label++,{value:O[1],done:!1};case 5:P.label++,T=O[1],O=[0];continue;case 7:O=P.ops.pop(),P.trys.pop();continue;default:if(!(k=0<(k=P.trys).length&&k[k.length-1])&&(O[0]===6||O[0]===2)){P=0;continue}if(O[0]===3&&(!k||O[1]>k[0]&&O[1]<k[3]))P.label=O[1];else if(O[0]===6&&P.label<k[1])P.label=k[1],k=O;else{if(!(k&&P.label<k[2])){k[2]&&P.ops.pop(),P.trys.pop();continue}P.label=k[2],P.ops.push(O)}}O=b.call(_,P)}catch(B){O=[6,B],T=0}finally{E=k=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}}};function y(){}var d=0,a=(y.toString=function(){return d++,""},{name:"function-to-string",isOpen:function(){return u(this,void 0,void 0,function(){return f(this,function(_){return d=0,Object(s.b)(y),Object(s.a)(),[2,d===2]})})},isEnable:function(){return u(this,void 0,void 0,function(){return f(this,function(_){return[2,Object(c.b)({includes:[!0],excludes:[r.c,(g.b||g.c)&&r.a]})]})})}})},function(t,e,n){n.d(e,"a",function(){return d});var r=n(2),s=n(1),g=n(0),c=this&&this.__awaiter||function(a,_,b,E){return new(b=b||h)(function(T,k){function P(U){try{D(E.next(U))}catch(M){k(M)}}function w(U){try{D(E.throw(U))}catch(M){k(M)}}function D(U){var M;U.done?T(U.value):((M=U.value)instanceof b?M:new b(function(O){O(M)})).then(P,w)}D((E=E.apply(a,_||[])).next())})},u=this&&this.__generator||function(a,_){var b,E,T,k={label:0,sent:function(){if(1&T[0])throw T[1];return T[1]},trys:[],ops:[]},P={next:w(0),throw:w(1),return:w(2)};return typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function w(D){return function(U){var M=[D,U];if(b)throw new TypeError("Generator is already executing.");for(;k;)try{if(b=1,E&&(T=2&M[0]?E.return:M[0]?E.throw||((T=E.return)&&T.call(E),0):E.next)&&!(T=T.call(E,M[1])).done)return T;switch(E=0,(M=T?[2&M[0],T.value]:M)[0]){case 0:case 1:T=M;break;case 4:return k.label++,{value:M[1],done:!1};case 5:k.label++,E=M[1],M=[0];continue;case 7:M=k.ops.pop(),k.trys.pop();continue;default:if(!(T=0<(T=k.trys).length&&T[T.length-1])&&(M[0]===6||M[0]===2)){k=0;continue}if(M[0]===3&&(!T||M[1]>T[0]&&M[1]<T[3]))k.label=M[1];else if(M[0]===6&&k.label<T[1])k.label=T[1],T=M;else{if(!(T&&k.label<T[2])){T[2]&&k.ops.pop(),k.trys.pop();continue}k.label=T[2],k.ops.push(M)}}M=_.call(a,k)}catch(O){M=[6,O],E=0}finally{b=T=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}}},f=/ /,y=!1,d=(f.toString=function(){return y=!0,d.name},{name:"reg-to-string",isOpen:function(){return c(this,void 0,void 0,function(){return u(this,function(a){return y=!1,Object(r.b)(f),Object(r.a)(),[2,y]})})},isEnable:function(){return c(this,void 0,void 0,function(){return u(this,function(a){return[2,Object(g.b)({includes:[!0],excludes:[s.f]})]})})}})},function(t,e,n){n.d(e,"a",function(){return c});var r=this&&this.__awaiter||function(u,f,y,d){return new(y=y||h)(function(a,_){function b(k){try{T(d.next(k))}catch(P){_(P)}}function E(k){try{T(d.throw(k))}catch(P){_(P)}}function T(k){var P;k.done?a(k.value):((P=k.value)instanceof y?P:new y(function(w){w(P)})).then(b,E)}T((d=d.apply(u,f||[])).next())})},s=this&&this.__generator||function(u,f){var y,d,a,_={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},b={next:E(0),throw:E(1),return:E(2)};return typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function E(T){return function(k){var P=[T,k];if(y)throw new TypeError("Generator is already executing.");for(;_;)try{if(y=1,d&&(a=2&P[0]?d.return:P[0]?d.throw||((a=d.return)&&a.call(d),0):d.next)&&!(a=a.call(d,P[1])).done)return a;switch(d=0,(P=a?[2&P[0],a.value]:P)[0]){case 0:case 1:a=P;break;case 4:return _.label++,{value:P[1],done:!1};case 5:_.label++,d=P[1],P=[0];continue;case 7:P=_.ops.pop(),_.trys.pop();continue;default:if(!(a=0<(a=_.trys).length&&a[a.length-1])&&(P[0]===6||P[0]===2)){_=0;continue}if(P[0]===3&&(!a||P[1]>a[0]&&P[1]<a[3]))_.label=P[1];else if(P[0]===6&&_.label<a[1])_.label=a[1],a=P;else{if(!(a&&_.label<a[2])){a[2]&&_.ops.pop(),_.trys.pop();continue}_.label=a[2],_.ops.push(P)}}P=f.call(u,_)}catch(w){P=[6,w],d=0}finally{y=a=0}if(5&P[0])throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}}};function g(){return(performance||Date).now()}var c={name:"debugger-checker",isOpen:function(){return r(this,void 0,void 0,function(){var u;return s(this,function(f){return u=g(),function(){}.constructor("debugger")(),[2,100<g()-u]})})},isEnable:function(){return r(this,void 0,void 0,function(){return s(this,function(u){return[2,!0]})})}}},function(t,e,n){n.d(e,"a",function(){return d});var r=n(1),s=n(2),g=n(0),c=this&&this.__awaiter||function(a,_,b,E){return new(b=b||h)(function(T,k){function P(U){try{D(E.next(U))}catch(M){k(M)}}function w(U){try{D(E.throw(U))}catch(M){k(M)}}function D(U){var M;U.done?T(U.value):((M=U.value)instanceof b?M:new b(function(O){O(M)})).then(P,w)}D((E=E.apply(a,_||[])).next())})},u=this&&this.__generator||function(a,_){var b,E,T,k={label:0,sent:function(){if(1&T[0])throw T[1];return T[1]},trys:[],ops:[]},P={next:w(0),throw:w(1),return:w(2)};return typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function w(D){return function(U){var M=[D,U];if(b)throw new TypeError("Generator is already executing.");for(;k;)try{if(b=1,E&&(T=2&M[0]?E.return:M[0]?E.throw||((T=E.return)&&T.call(E),0):E.next)&&!(T=T.call(E,M[1])).done)return T;switch(E=0,(M=T?[2&M[0],T.value]:M)[0]){case 0:case 1:T=M;break;case 4:return k.label++,{value:M[1],done:!1};case 5:k.label++,E=M[1],M=[0];continue;case 7:M=k.ops.pop(),k.trys.pop();continue;default:if(!(T=0<(T=k.trys).length&&T[T.length-1])&&(M[0]===6||M[0]===2)){k=0;continue}if(M[0]===3&&(!T||M[1]>T[0]&&M[1]<T[3]))k.label=M[1];else if(M[0]===6&&k.label<T[1])k.label=T[1],T=M;else{if(!(T&&k.label<T[2])){T[2]&&k.ops.pop(),k.trys.pop();continue}k.label=T[2],k.ops.push(M)}}M=_.call(a,k)}catch(O){M=[6,O],E=0}finally{b=T=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}}},f=new Date,y=0,d=(f.toString=function(){return y++,""},{name:"date-to-string",isOpen:function(){return c(this,void 0,void 0,function(){return u(this,function(a){return y=0,Object(s.b)(f),Object(s.a)(),[2,y===2]})})},isEnable:function(){return c(this,void 0,void 0,function(){return u(this,function(a){return[2,Object(g.b)({includes:[r.a],excludes:[]})]})})}})},function(t,r,n){n.d(r,"a",function(){return s});var r=n(3),s=/mobile/i.test(r.b)}],o={},p.m=l,p.c=o,p.d=function(t,e,n){p.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},p.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return p.d(e,"a",e),e},p.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},p.p="",p(p.s=6);function p(t){var e;return(o[t]||(e=o[t]={i:t,l:!1,exports:{}},l[t].call(e.exports,e,e.exports,p),e.l=!0,e)).exports}var l,o},typeof W=="object"&&typeof m=="object"?m.exports=v():typeof define=="function"&&define.amd?define([],v):typeof W=="object"?W.devtoolsDetector=v():S.devtoolsDetector=v()},{"es6-promise":13}],37:[function(S,m,W){var v=S("./object");m.exports.el=function(h){return document.getElementById(h)},m.exports.createEl=function(h,p){var l;return h=h||"div",p=p||{},l=document.createElement(h),v.each(p,function(o,t){o.indexOf("aria-")!==-1||o=="role"?l.setAttribute(o,t):l[o]=t}),l},m.exports.addClass=function(h,p){h&&(" "+h.className+" ").indexOf(" "+p+" ")==-1&&(h.className=h.className===""?p:h.className+" "+p)},m.exports.removeClass=function(h,p){var l,o;if(h.className.indexOf(p)!=-1){for(o=(l=h.className.split(" ")).length-1;0<=o;o--)l[o]===p&&l.splice(o,1);h.className=l.join(" ")}},m.exports.hasClass=function(h,p){return h.className.indexOf(p)!=-1},m.exports.getClasses=function(h){return h.className?h.className.split(" "):[]},m.exports.getElementAttributes=function(h){var p,l,o={};if(h&&h.attributes&&0<h.attributes.length)for(var t,e=(t=h.attributes).length-1;0<=e;e--)p=t[e].name,l=t[e].value,typeof h[p]!="boolean"&&",autoplay,controls,loop,muted,default,".indexOf(","+p+",")===-1||(l=l!==null),o[p]=l;return o},m.exports.insertFirst=function(h,p){p.firstChild?p.insertBefore(h,p.firstChild):p.appendChild(h)},m.exports.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},m.exports.unblockTextSelection=function(){document.onselectstart=function(){return!0}},m.exports.css=function(h,p,l){return!(!h||!h.style)&&(p&&l?(h.style[p]=l,!0):l||typeof p!="string"?!l&&typeof p=="object"&&(v.each(p,function(o,t){h.style[o]=t}),!0):h.style[p])},m.exports.getTransformName=function(h){for(var p=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],l=p[0],o=0,t=p.length;o<t;o++)if(h.style[p[o]]!==void 0){l=p[o];break}return l},m.exports.getTransformEventName=function(h,p){for(var l=["","Webkit","Moz","ms","O"],o=p.toLowerCase(),t=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],e=0,n=t.length;e<n;e++)if(h.style[t[e]]!==void 0){e!=0&&(o=l[e]+p);break}return o},m.exports.addCssByStyle=function(o){var p=document,l=p.createElement("style"),o=(l.setAttribute("type","text/css"),l.styleSheet?l.styleSheet.cssText=o:(o=p.createTextNode(o),l.appendChild(o)),p.getElementsByTagName("head"));(o.length?o[0]:p.documentElement).appendChild(l)},m.exports.getTranslateX=function(h){var p=0;if(h)try{var l=window.getComputedStyle(h),o=m.exports.getTransformName(h),p=new(window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)(l[o]).m41}catch(t){console.log(t)}return p},m.exports.getPointerPosition=function(t,p){var l={},n=m.exports.findPosition(t),o=t.offsetWidth,t=t.offsetHeight,e=n.top,n=n.left,r=p.pageY,s=p.pageX;return p.changedTouches&&(s=p.changedTouches[0].pageX,r=p.changedTouches[0].pageY),l.y=Math.max(0,Math.min(1,(e-r+t)/t)),l.x=Math.max(0,Math.min(1,(s-n)/o)),l},m.exports.findPosition=function(h){var p,l,o,t;return(p=h.getBoundingClientRect&&h.parentNode?h.getBoundingClientRect():p)?(h=document.documentElement,t=document.body,o=h.clientLeft||t.clientLeft||0,l=window.pageXOffset||t.scrollLeft,l=p.left+l-o,o=h.clientTop||t.clientTop||0,h=window.pageYOffset||t.scrollTop,t=p.top+h-o,{left:Math.round(l),top:Math.round(t)}):{left:0,top:0}}},{"./object":47}],38:[function(S,m,W){var v=S("./object"),h=S("./data"),p=S("./ua"),l=S("./fastclick");function o(t,e,n,r){v.each(n,function(s){t(e,s,r)})}m.exports.on=function(t,e,n){if(t){if(v.isArray(e))return o(m.exports.on,t,e,n);p.IS_MOBILE&&e=="click"&&l.attach(t);var r=h.getData(t);r.handlers||(r.handlers={}),r.handlers[e]||(r.handlers[e]=[]),n.guid||(n.guid=h.guid()),r.handlers[e].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(s){if(!r.disabled){s=m.exports.fixEvent(s);var g=r.handlers[s.type];if(g)for(var c=g.slice(0),u=0,f=c.length;u<f&&!s.isImmediatePropagationStopped();u++)c[u].call(t,s)}}),r.handlers[e].length==1&&(t.addEventListener?t.addEventListener(e,r.dispatcher,!1):t.attachEvent&&t.attachEvent("on"+e,r.dispatcher))}},m.exports.off=function(t,e,n){if(t&&h.hasData(t)){var r=h.getData(t);if(r.handlers){if(v.isArray(e))return o(m.exports.off,t,e,n);var s=function(f){r.handlers[f]=[],m.exports.cleanUpEvents(t,f)};if(e){var g=r.handlers[e];if(g)if(n){if(n.guid)for(var c=0;c<g.length;c++)g[c].guid===n.guid&&g.splice(c--,1);m.exports.cleanUpEvents(t,e)}else s(e)}else for(var u in r.handlers)s(u)}}},m.exports.cleanUpEvents=function(t,e){var n=h.getData(t);n.handlers[e].length===0&&(delete n.handlers[e],t.removeEventListener?t.removeEventListener(e,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,n.dispatcher)),v.isEmpty(n.handlers)&&(delete n.handlers,delete n.dispatcher,delete n.disabled),v.isEmpty(n)&&h.removeData(t)},m.exports.fixEvent=function(t){function e(){return!0}function n(){return!1}if(!t||!t.isPropagationStopped){var r,s,g,c=t||window.event;for(r in t={},c)r==="layerX"||r==="layerY"||r==="keyboardEvent.keyLocation"||r=="returnValue"&&c.preventDefault||(t[r]=c[r]);t.target||(t.target=t.srcElement||document),t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement,t.preventDefault=function(){c.preventDefault&&c.preventDefault(),t.returnValue=!1,t.isDefaultPrevented=e,t.defaultPrevented=!0},t.isDefaultPrevented=n,t.defaultPrevented=!1,t.stopPropagation=function(){c.stopPropagation&&c.stopPropagation(),t.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=n,t.stopImmediatePropagation=function(){c.stopImmediatePropagation&&c.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=n,t.clientX!=null&&(s=document.documentElement,g=document.body,t.pageX=t.clientX+(s&&s.scrollLeft||g&&g.scrollLeft||0)-(s&&s.clientLeft||g&&g.clientLeft||0),t.pageY=t.clientY+(s&&s.scrollTop||g&&g.scrollTop||0)-(s&&s.clientTop||g&&g.clientTop||0)),t.which=t.charCode||t.keyCode,t.button!=null&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t},m.exports.trigger=function(t,e){var n,r,s;if(t)return n=h.hasData(t)?h.getData(t):{},r=t.parentNode||t.ownerDocument,typeof e=="string"&&(s=null,!t.paramData&&t.paramData!=0||(s=t.paramData,t.paramData=null,t.removeAttribute(s)),e={type:e,target:t,paramData:s}),e=m.exports.fixEvent(e),n.dispatcher&&n.dispatcher.call(t,e),r&&!e.isPropagationStopped()&&e.bubbles!==!1?m.exports.trigger(r,e):r||e.defaultPrevented||(s=h.getData(e.target),e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)),!e.defaultPrevented},m.exports.one=function(t,e,n){if(t){if(v.isArray(e))return o(m.exports.one,t,e,n);var r=function(){m.exports.off(t,e,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||h.guid(),m.exports.on(t,e,r)}}},{"./data":35,"./fastclick":39,"./object":47,"./ua":53}],39:[function(S,m,W){function v(n,r){var s;if(r=r||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=r.touchBoundary||10,this.layer=n,this.tapDelay=r.tapDelay||200,this.tapTimeout=r.tapTimeout||700,!v.notNeeded(n)){for(var g=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],c=0,u=g.length;c<u;c++)this[g[c]]=((f,y)=>function(){return f.apply(y,arguments)})(this[g[c]],this);p&&(n.addEventListener("mouseover",this.onMouse,!0),n.addEventListener("mousedown",this.onMouse,!0),n.addEventListener("mouseup",this.onMouse,!0)),n.addEventListener("click",this.onClick,!0),n.addEventListener("touchstart",this.onTouchStart,!1),n.addEventListener("touchmove",this.onTouchMove,!1),n.addEventListener("touchend",this.onTouchEnd,!1),n.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(n.removeEventListener=function(f,y,d){var a=Node.prototype.removeEventListener;f==="click"?a.call(n,f,y.hijacked||y,d):a.call(n,f,y,d)},n.addEventListener=function(f,y,d){var a=Node.prototype.addEventListener;f==="click"?a.call(n,f,y.hijacked||(y.hijacked=function(_){_.propagationStopped||y(_)}),d):a.call(n,f,y,d)}),typeof n.onclick=="function"&&(s=n.onclick,n.addEventListener("click",function(f){s(f)},!1),n.onclick=null)}}var h=0<=navigator.userAgent.indexOf("Windows Phone"),p=0<navigator.userAgent.indexOf("Android")&&!h,l=/iP(ad|hone|od)/.test(navigator.userAgent)&&!h,o=l&&/OS 4_\d(_\d)?/.test(navigator.userAgent),t=l&&/OS [6-7]_\d/.test(navigator.userAgent),e=0<navigator.userAgent.indexOf("BB10");v.prototype.needsClick=function(n){switch(n.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(n.disabled)return!0;break;case"input":if(l&&n.type==="file"||n.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(n.className)},v.prototype.needsFocus=function(n){switch(n.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!p;case"input":switch(n.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!n.disabled&&!n.readOnly;default:return/\bneedsfocus\b/.test(n.className)}},v.prototype.sendClick=function(n,r){var s;document.activeElement&&document.activeElement!==n&&document.activeElement.blur(),r=r.changedTouches[0],(s=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(n),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),s.forwardedTouchEvent=!0,n.dispatchEvent(s)},v.prototype.determineEventType=function(n){return p&&n.tagName.toLowerCase()==="select"?"mousedown":"click"},v.prototype.focus=function(n){var r;l&&n.setSelectionRange&&n.type.indexOf("date")!==0&&n.type!=="time"&&n.type!=="month"&&n.type!=="email"?(r=n.value.length,n.setSelectionRange(r,r)):n.focus()},v.prototype.updateScrollParent=function(n){var r,s=n.fastClickScrollParent;if(!s||!s.contains(n)){r=n;do if(r.scrollHeight>r.offsetHeight){s=r,n.fastClickScrollParent=r;break}while(r=r.parentElement)}s&&(s.fastClickLastScrollTop=s.scrollTop)},v.prototype.getTargetElementFromEventTarget=function(n){return n.nodeType===Node.TEXT_NODE?n.parentNode:n},v.prototype.onTouchStart=function(n){var r,s,g;if(!(1<n.targetTouches.length)){if(r=this.getTargetElementFromEventTarget(n.target),s=n.targetTouches[0],l){if((g=window.getSelection()).rangeCount&&!g.isCollapsed)return!0;if(!o){if(s.identifier&&s.identifier===this.lastTouchIdentifier)return n.preventDefault(),!1;this.lastTouchIdentifier=s.identifier,this.updateScrollParent(r)}}this.trackingClick=!0,this.trackingClickStart=n.timeStamp,this.targetElement=r,this.touchStartX=s.pageX,this.touchStartY=s.pageY,n.timeStamp-this.lastClickTime<this.tapDelay&&n.preventDefault()}return!0},v.prototype.touchHasMoved=function(r){var r=r.changedTouches[0],s=this.touchBoundary;return Math.abs(r.pageX-this.touchStartX)>s||Math.abs(r.pageY-this.touchStartY)>s},v.prototype.onTouchMove=function(n){return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(n.target)||this.touchHasMoved(n))&&(this.trackingClick=!1,this.targetElement=null),!0},v.prototype.findControl=function(n){return n.control!==void 0?n.control:n.htmlFor?document.getElementById(n.htmlFor):n.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},v.prototype.onTouchEnd=function(n){var r,s,g,c=this.targetElement;if(!this.trackingClick)return!0;if(n.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(n.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=n.timeStamp,r=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,t&&(g=n.changedTouches[0],(c=document.elementFromPoint(g.pageX-window.pageXOffset,g.pageY-window.pageYOffset)||c).fastClickScrollParent=this.targetElement.fastClickScrollParent),(g=c.tagName.toLowerCase())==="label"){if(s=this.findControl(c)){if(this.focus(c),p)return!1;c=s}}else if(this.needsFocus(c))return 100<n.timeStamp-r||l&&window.top!==window&&g==="input"?this.targetElement=null:(this.focus(c),this.sendClick(c,n),l&&g==="select"||(this.targetElement=null,n.preventDefault())),!1;return!(!l||o||!(s=c.fastClickScrollParent)||s.fastClickLastScrollTop===s.scrollTop)||(this.needsClick(c)||(n.preventDefault(),this.sendClick(c,n)),!1)},v.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},v.prototype.onMouse=function(n){return!this.targetElement||!(!n.forwardedTouchEvent&&n.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)&&(n.stopImmediatePropagation?n.stopImmediatePropagation():n.propagationStopped=!0,n.stopPropagation(),n.preventDefault(),1))},v.prototype.onClick=function(n){return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):n.target.type==="submit"&&n.detail===0||((n=this.onMouse(n))||(this.targetElement=null),n)},v.prototype.destroy=function(){var n=this.layer;p&&(n.removeEventListener("mouseover",this.onMouse,!0),n.removeEventListener("mousedown",this.onMouse,!0),n.removeEventListener("mouseup",this.onMouse,!0)),n.removeEventListener("click",this.onClick,!0),n.removeEventListener("touchstart",this.onTouchStart,!1),n.removeEventListener("touchmove",this.onTouchMove,!1),n.removeEventListener("touchend",this.onTouchEnd,!1),n.removeEventListener("touchcancel",this.onTouchCancel,!1)},v.notNeeded=function(n){var r,s;return window.ontouchstart===void 0||(s=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1])&&(!p||(r=document.querySelector("meta[name=viewport]"))&&(r.content.indexOf("user-scalable=no")!==-1||31<s&&document.documentElement.scrollWidth<=window.outerWidth))||e&&10<=(s=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=s[2]&&(r=document.querySelector("meta[name=viewport]"))&&(r.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)?!0:n.style.msTouchAction==="none"||n.style.touchAction==="manipulation"||!!(27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(r=document.querySelector("meta[name=viewport]"))&&(r.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth))||n.style.touchAction==="none"||n.style.touchAction==="manipulation"},v.attach=function(n,r){return new v(n,r)},m.exports=v},{}],40:[function(S,m,W){var v=S("./data");m.exports.bind=function(h,p,l){p.guid||(p.guid=v.guid());function o(){return p.apply(h,arguments)}return o.guid=l?l+"_"+p.guid:p.guid,o}},{"./data":35}],41:[function(S,m,W){function v(){v=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,E=typeof Symbol=="function"?Symbol:{},s=E.iterator||"@@iterator",g=E.asyncIterator||"@@asyncIterator",c=E.toStringTag||"@@toStringTag";function u(B,j,H,R){Object.defineProperty(B,j,{value:H,enumerable:!R,configurable:!R,writable:!R})}try{u({},"")}catch(B){u=function(j,H,R){return j[H]=R}}function f(B,Z,H,R){var L,C,z,ie,Z=Z&&Z.prototype instanceof a?Z:a,Z=Object.create(Z.prototype);return u(Z,"_invoke",(L=B,C=H,z=new M(R||[]),ie=1,function(q,x){if(ie===3)throw Error("Generator is already running");if(ie===4){if(q==="throw")throw x;return{value:t,done:!0}}for(z.method=q,z.arg=x;;){var F=z.delegate;if(F&&(F=function Y(re,le){var ae=le.method,Q=re.i[ae];return Q===t?(le.delegate=null,ae==="throw"&&re.i.return&&(le.method="return",le.arg=t,Y(re,le),le.method==="throw")||ae!=="return"&&(le.method="throw",le.arg=new TypeError("The iterator does not provide a '"+ae+"' method")),d):(ae=y(Q,re.i,le.arg),ae.type==="throw"?(le.method="throw",le.arg=ae.arg,le.delegate=null,d):(Q=ae.arg,Q?Q.done?(le[re.r]=Q.value,le.next=re.n,le.method!=="return"&&(le.method="next",le.arg=t),le.delegate=null,d):Q:(le.method="throw",le.arg=new TypeError("iterator result is not an object"),le.delegate=null,d)))}(F,z),F)){if(F===d)continue;return F}if(z.method==="next")z.sent=z._sent=z.arg;else if(z.method==="throw"){if(ie===1)throw ie=4,z.arg;z.dispatchException(z.arg)}else z.method==="return"&&z.abrupt("return",z.arg);if(ie=3,F=y(L,C,z),F.type==="normal"){if(ie=z.done?4:2,F.arg===d)continue;return{value:F.arg,done:z.done}}F.type==="throw"&&(ie=4,z.method="throw",z.arg=F.arg)}}),!0),Z}function y(B,j,H){try{return{type:"normal",arg:B.call(j,H)}}catch(R){return{type:"throw",arg:R}}}e.wrap=f;var d={};function a(){}function _(){}function b(){}var E={},T=(u(E,s,function(){return this}),Object.getPrototypeOf),T=T&&T(T(O([]))),k=(T&&T!==n&&r.call(T,s)&&(E=T),b.prototype=a.prototype=Object.create(E));function P(B){["next","throw","return"].forEach(function(j){u(B,j,function(H){return this._invoke(j,H)})})}function w(B,j){var H;u(this,"_invoke",function(R,L){function C(){return new j(function(z,ie){(function Z(le,x,F,Y){var re,le=y(B[le],B,x);if(le.type!=="throw")return(x=(re=le.arg).value)&&typeof x=="object"&&r.call(x,"__await")?j.resolve(x.__await).then(function(ae){Z("next",ae,F,Y)},function(ae){Z("throw",ae,F,Y)}):j.resolve(x).then(function(ae){re.value=ae,F(re)},function(ae){return Z("throw",ae,F,Y)});Y(le.arg)})(R,L,z,ie)})}return H=H?H.then(C,C):C()},!0)}function D(B){this.tryEntries.push(B)}function U(B){var j=B[4]||{};j.type="normal",j.arg=t,B[4]=j}function M(B){this.tryEntries=[[-1]],B.forEach(D,this),this.reset(!0)}function O(B){if(B!=null){var j,H=B[s];if(H)return H.call(B);if(typeof B.next=="function")return B;if(!isNaN(B.length))return j=-1,(H=function R(){for(;++j<B.length;)if(r.call(B,j))return R.value=B[j],R.done=!1,R;return R.value=t,R.done=!0,R}).next=H}throw new TypeError(typeof B+" is not iterable")}return u(k,"constructor",_.prototype=b),u(b,"constructor",_),u(b,c,_.displayName="GeneratorFunction"),e.isGeneratorFunction=function(B){return B=typeof B=="function"&&B.constructor,!!B&&(B===_||(B.displayName||B.name)==="GeneratorFunction")},e.mark=function(B){return Object.setPrototypeOf?Object.setPrototypeOf(B,b):(B.__proto__=b,u(B,c,"GeneratorFunction")),B.prototype=Object.create(k),B},e.awrap=function(B){return{__await:B}},P(w.prototype),u(w.prototype,g,function(){return this}),e.AsyncIterator=w,e.async=function(B,j,H,R,L){L===void 0&&(L=Promise);var C=new w(f(B,j,H,R),L);return e.isGeneratorFunction(j)?C:C.next().then(function(z){return z.done?z.value:C.next()})},P(k),u(k,c,"Generator"),u(k,s,function(){return this}),u(k,"toString",function(){return"[object Generator]"}),e.keys=function(B){var j,H=Object(B),R=[];for(j in H)R.unshift(j);return function L(){for(;R.length;)if((j=R.pop())in H)return L.value=j,L.done=!1,L;return L.done=!0,L}},e.values=O,M.prototype={constructor:M,reset:function(B){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(U),!B)for(var j in this)j.charAt(0)==="t"&&r.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=t)},stop:function(){this.done=!0;var B=this.tryEntries[0][4];if(B.type==="throw")throw B.arg;return this.rval},dispatchException:function(B){if(this.done)throw B;var j=this;function H(q){C.type="throw",C.arg=B,j.next=q}for(var R=j.tryEntries.length-1;0<=R;--R){var L=this.tryEntries[R],C=L[4],z=this.prev,ie=L[1],Z=L[2];if(L[0]===-1)return H("end"),!1;if(!ie&&!Z)throw Error("try statement without catch or finally");if(L[0]!=null&&L[0]<=z){if(z<ie)return this.method="next",this.arg=t,H(ie),!0;if(z<Z)return H(Z),!1}}},abrupt:function(B,j){for(var H=this.tryEntries.length-1;0<=H;--H){var R=this.tryEntries[H];if(-1<R[0]&&R[0]<=this.prev&&this.prev<R[2]){var L=R;break}}var C=(L=L&&(B==="break"||B==="continue")&&L[0]<=j&&j<=L[2]?null:L)?L[4]:{};return C.type=B,C.arg=j,L?(this.method="next",this.next=L[2],d):this.complete(C)},complete:function(B,j){if(B.type==="throw")throw B.arg;return B.type==="break"||B.type==="continue"?this.next=B.arg:B.type==="return"?(this.rval=this.arg=B.arg,this.method="return",this.next="end"):B.type==="normal"&&j&&(this.next=j),d},finish:function(B){for(var j=this.tryEntries.length-1;0<=j;--j){var H=this.tryEntries[j];if(H[2]===B)return this.complete(H[4],H[3]),U(H),d}},catch:function(B){for(var j=this.tryEntries.length-1;0<=j;--j){var H,R,L=this.tryEntries[j];if(L[0]===B)return(H=L[4]).type==="throw"&&(R=H.arg,U(L)),R}throw Error("illegal catch attempt")},delegateYield:function(B,j,H){return this.delegate={i:O(B),r:j,n:H},this.method==="next"&&(this.arg=t),d}},e}function h(t,e,n,r,s,g,c){try{var u=t[g](c),f=u.value}catch(y){return n(y)}u.done?e(f):Promise.resolve(f).then(r,s)}function p(t){return function(){var e=this,n=arguments;return new Promise(function(r,s){var g=t.apply(e,n);function c(f){h(g,r,s,c,u,"next",f)}function u(f){h(g,r,s,c,u,"throw",f)}c(void 0)})}}var l,o=typeof Promise=="undefined"?S("es6-promise").Promise:Promise;S=self,l=function(){return(n={d:function(_,b){for(var E in b)n.o(b,E)&&!n.o(_,E)&&Object.defineProperty(_,E,{enumerable:!0,get:b[E]})},o:function(_,b){return Object.prototype.hasOwnProperty.call(_,b)}}).d(r={},{default:function(){return a}}),s=navigator.userAgent,g=/qqbrowser/i.test(s.toLowerCase()),c=/Edge/i.test(s),c=/Chrome/i.test(s)&&!c&&!g,u=/Safari/i.test(s)&&!c,g=s.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),c=g&&g[1],f=c&&Number(c.split(".")[0]),y=(()=>{var _=p(v().mark(function b(E){var T;return v().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,fetch(E);case 2:return T=k.sent,k.next=5,T.blob();case 5:return T=k.sent,k.abrupt("return",URL.createObjectURL(T));case 7:case"end":return k.stop()}},b)}));return function(b){return _.apply(this,arguments)}})(),d={includeSystemHijack:!0,showVideo:!1,format:"mp4",codecTags:["hev1","hvc1"],timeout:2e3},a=function(_){return _===void 0&&(_={}),new o((()=>{var b=p(v().mark(function E(T){var k,P,w,D,U,M,O,B,j,H,R,L,C;return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(D=Object.assign({},d,_),k=D.includeSystemHijack,P=D.showVideo,O=D.codecTags,w=D.format,D=D.timeout,U=performance.now(),M=-1<O.indexOf("hvc1"),O=-1<O.indexOf("hev1"),j=B=!1,!(u&&f&&11<=f)){z.next=14;break}if(H=t("hvc1",w),z.t0=k,z.t0){z.next=9;break}return z.next=8,y(H);case 8:H=z.sent;case 9:return z.next=11,e(H,P,"hvc1",D);case 11:B=z.sent,z.next=34;break;case 14:if(!M){z.next=24;break}if(R=t("hvc1",w),z.t1=k,z.t1){z.next=21;break}return z.next=20,y(R);case 20:R=z.sent;case 21:return z.next=23,e(R,P,"hvc1",D);case 23:B=z.sent;case 24:if(!O){z.next=34;break}if(L=t("hev1",w),z.t2=k,z.t2){z.next=31;break}return z.next=30,y(L);case 30:L=z.sent;case 31:return z.next=33,e(L,P,"hev1",D);case 33:j=z.sent;case 34:C=performance.now(),T({isHvc1Supported:B,isHev1Supported:j,time:Math.ceil(C-U)});case 36:case"end":return z.stop()}},E)}));return function(E){return b.apply(this,arguments)}})())},r.default;function t(_,b){var E=(b=b===void 0?"mp4":b)==="hls",T="";switch(_=_===void 0?"":_){case"hvc1":T=E?"https://player.alicdn.com/lib/detect-assets/01s_20x20_hvc1.m3u8":"https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hvc1.mp4";break;case"hev1":T=E?"https://player.alicdn.com/lib/detect-assets/01s_20x20_hev1.m3u8":"https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hev1.mp4";break;default:T=""}return T}function e(_,b,E,T){b===void 0&&(b=!1),E===void 0&&(E="");var k=performance.now(),P=T;return new o(function(w){D=_,(U=b?100:0)===void 0&&(U=100),(M=document.createElement("video")).setAttribute("width",""+U),M.setAttribute("height",""+U),M.setAttribute("muted","muted"),M.setAttribute("crossorigin","anonymous"),M.setAttribute("preload","preload"),M.setAttribute("autoplay","autoplay"),M.setAttribute("webkit-playsinline","webkit-playsinline"),M.setAttribute("playsinline","playsinline"),M.setAttribute("x-webkit-airplay","x-webkit-airplay"),M.setAttribute("playsinline","playsinline"),M.src=D;var D,U,M,O=M,B=setInterval(function(){var j,H,R,L,C;(performance.now()-k>P||O.videoWidth!==0)&&(clearInterval(B),j=O.videoWidth!==0,b?(O.setAttribute("controls","controls"),H=O,(R=E)===void 0&&(R=""),L=document.createElement("dv"),(C=document.createElement("h3")).innerText=R,L.appendChild(H),L.appendChild(C),document.body.appendChild(L)):(O.pause(),O=null),w(j))})})}var n,r,s,g,c,u,f,y,d,a},typeof W=="object"&&typeof m=="object"?m.exports=l():typeof define=="function"&&define.amd?define([],l):typeof W=="object"?W.hevcDetector=l():S.hevcDetector=l()},{"es6-promise":13}],42:[function(S,m,W){function v(l){for(var o in l=typeof l=="string"?this.parseAttrList(l):l)l.hasOwnProperty(o)&&(this[o]=l[o])}var h=/^(\d+)x(\d+)$/,p=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;v.prototype={decimalInteger:function(l){return l=parseInt(this[l],10),l>Number.MAX_SAFE_INTEGER?1/0:l},hexadecimalInteger:function(l){if(this[l]){for(var o=(1&(o=(this[l]||"0x").slice(2)).length?"0":"")+o,t=new Uint8Array(o.length/2),e=0;e<o.length/2;e++)t[e]=parseInt(o.slice(2*e,2*e+2),16);return t}return null},hexadecimalIntegerAsNumber:function(l){return l=parseInt(this[l],16),l>Number.MAX_SAFE_INTEGER?1/0:l},decimalFloatingPoint:function(l){return parseFloat(this[l])},enumeratedString:function(l){return this[l]},decimalResolution:function(l){if(l=h.exec(this[l]),l!==null)return{width:parseInt(l[1],10),height:parseInt(l[2],10)}},parseAttrList:function(l){var o,t={};for(p.lastIndex=0;(o=p.exec(l))!==null;){var e=o[2];e.indexOf('"')===0&&e.lastIndexOf('"')===e.length-1&&(e=e.slice(1,-1)),t[o[1]]=e}return t}},m.exports=v},{}],43:[function(S,m,W){function v(){this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}function h(){this.loaders={}}var p=S("../constants"),l=S("../playerutil"),o=S("./attrlist"),t=S("../io"),e=S("./urltoolkit"),n=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,r=/#EXT-X-MEDIA:(.*)/g,s=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),g=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(PART-INF):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,c="RegionBlock",u=function(){this.method=null,this.key=null,this.iv=null,this._uri=null};v.prototype.getUrl=function(){return!this._url&&this.relurl&&(this._url=e.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},v.prototype.Seturl=function(f){this._url=f},v.prototype.getProgramDateTime=function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime},v.prototype.GetbyteRange=function(){var f,y,d;return this._byteRange||(f=this._byteRange=[],this.rawByteRange&&((y=this.rawByteRange.split("@",2)).length===1?(d=this.lastByteRangeEndOffset,f[0]=d||0):f[0]=parseInt(y[1]),f[1]=parseInt(y[0])+f[0])),this._byteRange},v.prototype.getByteRangeStartOffset=function(){return this.byteRange[0]},v.prototype.getByteRangeEndOffset=function(){return this.byteRange[1]},v.prototype.getDecryptdata=function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},h.prototype=((S={parseMasterPlaylist:function(f,y){var d=[];for(n.lastIndex=0;(b=n.exec(f))!=null;){var a={},_=a.attrs=new o(b[1]),b=(a.url=this.resolve(b[2],y),_.decimalResolution("RESOLUTION"));if(b&&(a.width=b.width,a.height=b.height),a.bitrate=_.decimalInteger("AVERAGE-BANDWIDTH")||_.decimalInteger("BANDWIDTH"),a.name=_.NAME,E=_.CODECS)for(var E=E.split(/[ ,]+/),T=0;T<E.length;T++){var k=E[T];k.indexOf("avc1")!==-1?a.videoCodec=this.avc1toavcoti(k):k.indexOf("hvc1")!==-1?a.videoCodec=k:a.audioCodec=k}d.push(a)}return d},parseMasterPlaylistMedia:function(f,y,d,a){var _=[],b=0;for(r.lastIndex=0;(T=r.exec(f))!=null;){var E={},T=new o(T[1]);T.TYPE===d&&(E.groupId=T["GROUP-ID"],E.name=T.NAME,E.type=d,E.default=T.DEFAULT==="YES",E.autoselect=T.AUTOSELECT==="YES",E.forced=T.FORCED==="YES",T.URI&&(E.url=this.resolve(T.URI,y)),E.lang=T.LANGUAGE,E.name||(E.name=E.lang),a&&(E.audioCodec=a),E.id=b++,_.push(E))}return _},avc1toavcoti:function(f){var y=f.split("."),d=2<y.length?(d=y.shift()+".",(d+=parseInt(y.shift()).toString(16))+("000"+parseInt(y.shift()).toString(16)).substr(-4)):f;return d},load:function(f,y,d){var a=this;t.get(f,function(_){var b,E,T,k=a.parseMasterPlaylist(_,f);k.length&&(b=a.parseMasterPlaylistMedia(_,f,"AUDIO",k[0].audioCodec),E=a.parseMasterPlaylistMedia(_,f,"SUBTITLES"),b.length)&&(T=!1,b.forEach(function(P){P.url||(T=!0)}),T===!1)&&k[0].audioCodec&&!k[0].attrs.AUDIO&&(console.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),b.unshift({type:"main",name:"main"})),y({levels:k,audioTracks:b,subtitles:E,url:f,string:_})},function(_,b,E){d&&((E=l.parseHttpHeaders(E)["x-tengine-error"])&&-1<p.RegionBlockMessages.indexOf(E)&&(_=c),d(_,b))})},loadMediaPlaylist:function(f,y,d){var a=this,_=(f=f||{}).string,b=f.url;_?(f=a.parseLevelPlaylist(_,b),y(f)):t.get(b,function(E){E=a.parseLevelPlaylist(E,b),y(E)},function(E){d&&d(E)})},resolve:function(f,y){return e.buildAbsoluteURL(y,f,{alwaysNormalize:!0})}}).parseMasterPlaylist=function(f,y){var d=[];for(n.lastIndex=0;(b=n.exec(f))!=null;){var a={},_=a.attrs=new o(b[1]),b=(a.url=this.resolve(b[2],y),_.decimalResolution("RESOLUTION"));if(b&&(a.width=b.width,a.height=b.height),a.bitrate=_.decimalInteger("AVERAGE-BANDWIDTH")||_.decimalInteger("BANDWIDTH"),a.name=_.NAME,E=_.CODECS)for(var E=E.split(/[ ,]+/),T=0;T<E.length;T++){var k=E[T];k.indexOf("avc1")!==-1?a.videoCodec=this.avc1toavcoti(k):k.indexOf("hvc1")!==-1?a.videoCodec=k:a.audioCodec=k}d.push(a)}return d},S.parseMasterPlaylistMedia=function(f,y,d,a){var _=[],b=0;for(r.lastIndex=0;(T=r.exec(f))!=null;){var E={},T=new o(T[1]);T.TYPE===d&&(E.groupId=T["GROUP-ID"],E.name=T.NAME,E.type=d,E.default=T.DEFAULT==="YES",E.autoselect=T.AUTOSELECT==="YES",E.forced=T.FORCED==="YES",T.URI&&(E.url=this.resolve(T.URI,y)),E.lang=T.LANGUAGE,E.name||(E.name=E.lang),a&&(E.audioCodec=a),E.id=b++,_.push(E))}return _},S.avc1toavcoti=function(f){var y=f.split("."),d=2<y.length?(d=y.shift()+".",(d+=parseInt(y.shift()).toString(16))+("000"+parseInt(y.shift()).toString(16)).substr(-4)):f;return d},S.parseLevelPlaylist=function(f,y,d,a){var _,b,E=0,T=0,k={type:null,version:null,url:y,fragments:[],live:!0,startSN:0},P=new u,w=0,D=null,U=new v;for(s.lastIndex=0;(_=s.exec(f))!==null;){var M=_[1];if(M){U.duration=parseFloat(M);var O=(" "+_[2]).slice(1);U.title=O||null,U.tagList.push(O?["INF",M,O]:["INF",M])}else if(_[3])isNaN(U.duration)||(O=E++,U.type=a,U.start=T,U.levelkey=P,U.sn=O,U.level=d,U.cc=w,U.baseurl=y,U.relurl=(" "+_[3]).slice(1),k.fragments.push(U),T+=(D=U).duration,U=new v);else if(_[4])U.rawByteRange=(" "+_[4]).slice(1),D&&(M=D.byteRangeEndOffset)&&(U.lastByteRangeEndOffset=M);else if(_[5])U.rawProgramDateTime=(" "+_[5]).slice(1),U.tagList.push(["PROGRAM-DATE-TIME",U.rawProgramDateTime]),k.programDateTime===void 0&&(k.programDateTime=new Date(new Date(Date.parse(_[5]))-1e3*T));else{for(_=_[0].match(g),b=1;b<_.length&&_[b]===void 0;b++);var B=(" "+_[b+1]).slice(1),j=(" "+_[b+2]).slice(1);switch(_[b]){case"#":U.tagList.push(j?[B,j]:[B]);break;case"PLAYLIST-TYPE":k.type=B.toUpperCase();break;case"MEDIA-SEQUENCE":E=k.startSN=parseInt(B);break;case"TARGETDURATION":k.targetduration=parseFloat(B);break;case"VERSION":k.version=parseInt(B);break;case"EXTM3U":break;case"ENDLIST":k.live=!1;break;case"DIS":w++,U.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":w=parseInt(B);break;case"KEY":var L=new o(B),H=L.enumeratedString("METHOD"),R=L.URI,L=L.hexadecimalInteger("IV");H&&(P=new u,R)&&0<=["AES-128","SAMPLE-AES"].indexOf(H)&&(P.method=H,P.baseuri=y,P.reluri=R,P.key=null,P.iv=L);break;case"START":H=new o(B).decimalFloatingPoint("TIME-OFFSET"),isNaN(H)||(k.startTimeOffset=H);break;case"MAP":R=new o(B),U.relurl=R.URI,U.rawByteRange=R.BYTERANGE,U.baseurl=y,U.level=d,U.type=a,U.sn="initSegment",k.initSegment=U,U=new v;break;case"PART-INF":L=new o(B),k.partTarget=L.decimalFloatingPoint("PART-TARGET");break;default:console.log("line parsed but not handled: "+_)}}}return(U=D)&&!U.relurl&&(k.fragments.pop(),T-=U.duration),k.totalduration=T,k.averagetargetduration=T/k.fragments.length,k.endSN=E-1,k},S),h.ERROR_REGION_BLOCK=c,m.exports=h},{"../constants":33,"../io":45,"../playerutil":50,"./attrlist":42,"./urltoolkit":44}],44:[function(S,m,W){var v=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,h=/^([^\/;?#]*)(.*)$/,p=/(?:\/|^)\.(?=\/)/g,l=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(g,e,n){if(n=n||{},g=g.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return g;var r=o.parseURL(g);if(r)return r.path=o.normalizePath(r.path),o.buildURLFromParts(r);throw new Error("Error trying to parse base URL.")}if(r=o.parseURL(e),!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=o.normalizePath(r.path),o.buildURLFromParts(r)):e;if(e=o.parseURL(g),!e)throw new Error("Error trying to parse base URL.");!e.netLoc&&e.path&&e.path[0]!=="/"&&(g=h.exec(e.path),e.netLoc=g[1],e.path=g[2]),e.netLoc&&!e.path&&(e.path="/");var s,g={scheme:e.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};return r.netLoc||(g.netLoc=e.netLoc,r.path[0]!=="/"&&(r.path?(s=(s=e.path).substring(0,s.lastIndexOf("/")+1)+r.path,g.path=o.normalizePath(s)):(g.path=e.path,r.params||(g.params=e.params,r.query)||(g.query=e.query)))),g.path===null&&(g.path=n.alwaysNormalize?o.normalizePath(r.path):r.path),o.buildURLFromParts(g)},parseURL:function(t){return t=v.exec(t),t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(p,"");t.length!==(t=t.replace(l,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};m.exports=o},{}],45:[function(S,m,W){var v=S("./url");m.exports.get=function(h,p,l,o,t,e){m.exports.ajax.call(this,"GET",h,{},p,l,o,t,void 0,e)},m.exports.post=function(h,p,l,o,t,e){var n={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"};m.exports.ajax("POST",h,p,l,o,t,e,n)},m.exports.postWithHeader=function(h,p,l,o,t){m.exports.ajax("POST",h,p,o,t,!0,!1,l)},m.exports.ajax=function(h,p,l,o,t,e,n,r,s){var g,c,u;t=t||function(){},typeof XMLHttpRequest=="undefined"&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(y){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(y){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(y){}throw new Error("This browser does not support XMLHttpRequest.")}),c=new XMLHttpRequest,s&&(c.timeout=s),s=v.parseUrl(p),u=window.location,s.protocol+s.host===u.protocol+u.host||!window.XDomainRequest||"withCredentials"in c?(g=s.protocol=="file:"||u.protocol=="file:",c.onreadystatechange=function(){c.readyState===4&&(c.status===200||g&&c.status===0?o(c.responseText):t(c.responseText,c.status,c))}):((c=new window.XDomainRequest).onload=function(){o(c.responseText)},c.onerror=t,c.onprogress=function(){},c.ontimeout=t);try{if(e===void 0&&(e=!0),c.open(h,p,e),n&&(c.withCredentials=!0),r)for(var f in r)r.hasOwnProperty(f)&&c.setRequestHeader(f,r[f])}catch(y){return void t(y)}try{c.send(l)}catch(y){t(y)}},m.exports.jsonp=function(h,p,l){var o="jsonp_callback_"+Math.round(1e5*Math.random()),t=document.createElement("script");h&&(t.src=h+(0<=h.indexOf("?")?"&":"?")+"callback="+o+"&cb="+o,t.onerror=function(){delete window[o],document.body.removeChild(t),l()},t.onload=function(){setTimeout(function(){window[o]&&(delete window[o],document.body.removeChild(t))},0)},window[o]=function(e){delete window[o],document.body.removeChild(t),p(e)},document.body.appendChild(t))},m.exports.loadJS=function(h,p,l){var o=document.getElementsByTagName("HEAD").item(0),t=document.createElement("script");t.setAttribute("crossorigin","anonymous"),h&&h.toLowerCase().indexOf("https://")<0&&h.toLowerCase().indexOf("http://")<0&&(h=document.URL.replace(/(\/[^\/]*?)$/i,"")+h),t.type="text/javascript",t.src=h,t.onload=function(){p&&p()},t.onerror=function(){l&&l()},o.appendChild(t)}},{"./url":54}],46:[function(S,m,W){var v=S("./dom");m.exports.render=function(h,t){var l=t.align||(t.className?"":"tl"),o=t.x||0,t=t.y||0,e=o.indexOf&&0<o.indexOf("%")?"":"px",n=t.indexOf&&0<t.indexOf("%")?"":"px";l==="tl"?v.css(h,{float:"left","margin-left":o+e,"margin-top":t+n}):l==="tr"?v.css(h,{float:"right","margin-right":o+e,"margin-top":t+n}):l==="tlabs"?v.css(h,{position:"absolute",left:o+e,top:t+n}):l==="trabs"?v.css(h,{position:"absolute",right:o+e,top:t+n}):l==="blabs"?v.css(h,{position:"absolute",left:o+e,bottom:t+n}):l==="brabs"?v.css(h,{position:"absolute",right:o+e,bottom:t+n}):l==="cc"&&v.addClass(h,"loading-center")}},{"./dom":37}],47:[function(S,m,W){var v=Object.prototype.hasOwnProperty;m.exports.create=Object.create||function(h){function p(){}return p.prototype=h,new p},m.exports.isArray=function(h){return Object.prototype.toString.call(arg)==="[object Array]"},m.exports.isEmpty=function(h){for(var p in h)if(h[p]!==null)return!1;return!0},m.exports.each=function(h,p,l){if(m.exports.isArray(h))for(var o=0,t=h.length;o<t&&p.call(l||this,h[o],o)!==!1;++o);else for(var e in h)if(v.call(h,e)&&p.call(l||this,e,h[e])===!1)break;return h},m.exports.merge=function(h,p){if(p)for(var l in p)v.call(p,l)&&(h[l]=p[l]);return h},m.exports.deepMerge=function(h,p){var l,o,t;for(l in h=m.exports.copy(h),p)v.call(p,l)&&(o=h[l],t=p[l],m.exports.isPlain(o)&&m.exports.isPlain(t)?h[l]=m.exports.deepMerge(o,t):h[l]=p[l]);return h},m.exports.copy=function(h){return m.exports.merge({},h)},m.exports.isPlain=function(h){return!!h&&typeof h=="object"&&h.toString()==="[object Object]"&&h.constructor===Object},m.exports.isArray=Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"},m.exports.unescape=function(h){return h.replace(/&([^;]+);/g,function(p,l){return{amp:"&",lt:"<",gt:">",quot:'"',"#x27":"'","#x60":"`"}[l.toLowerCase()]||p})}},{}],48:[function(S,m,W){var v,h=S("./object");(v=function(){}).extend=function(p){var l,o,t=(p=p||{}).init||this.prototype.init||function(){};for(o in(((l=function(){t.apply(this,arguments)}).prototype=h.create(this.prototype)).constructor=l).extend=v.extend,l.create=v.create,p)p.hasOwnProperty(o)&&(l.prototype[o]=p[o]);return l},v.create=function(){var p=h.create(this.prototype);return this.apply(p,arguments),p},m.exports=v},{"./object":47}],49:[function(S,m,W){var v=!new Function("try {return this===window;}catch(e){ return false;}")();m.exports.isSSR=v},{}],50:[function(S,m,W){var v=S("./object"),h=S("../config"),p=S("./dom"),l=S("./cookie"),o=S("./constants"),t=S("../lang/index"),e=S("./ua"),n=S("./io"),r=S("../player/base/plugin/defaultemptycomponent"),s=S("./hardware-decoding-detector"),g={preload:!0,autoplay:!0,autoplayPolicy:{fallbackToMute:!1,showUnmuteBtn:!0},useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"",trackLog:!0,logBatched:!0,logReportTo:void 0,heartHeatInterval:30,isLive:!1,playsinline:!0,showBarTime:5e3,rePlay:!1,mute:!1,liveRetry:5,liveRetryInterval:1,liveRetryStep:0,disableVodHalfRetry:!1,disableLiveHalfRetry:!1,keyShortCuts:!1,keyFastForwardStep:10,isVBR:!1,vodRetry:3,format:"",definition:"",defaultDefinition:"",loadDataTimeout:20,waitingTimeout:60,waitingBufferedTime:3,delayLoadingShow:1,controlBarForOver:!1,controlBarVisibility:"hover",enableSystemMenu:!1,qualitySort:"asc",x5_video_position:"normal",x5_type:"",x5_fullscreen:!1,x5_orientation:"landscape|portrait",x5LandscapeAsFullScreen:!0,license:{},autoPlayDelay:0,autoPlayDelayDisplayText:"",useHlsPluginForSafari:!1,enableMSEForAndroid:!0,encryptType:0,language:"zh-cn",languageTexts:{},extLanguageTexts:{},mediaType:"video",outputType:"",playConfig:{},reAuthInfo:{},components:[],liveTimeShiftUrl:"",liveShiftSource:"",liveShiftTime:"",liveShiftMinOffset:30,videoHeight:"100%",videoWidth:"100%",enableWorker:!0,authTimeout:"",enableMockFullscreen:!1,region:"cn-shanghai",debug:!1,progressMarkers:[],ratio:void 0,snapshotWatermark:{left:"500",top:"100",text:"",font:"16px \u5B8B\u4F53",fillColor:"#FFFFFF",strokeColor:"#FFFFFF"},liveStartTime:"",liveOverTime:"",enableStashBufferForFlv:!1,flvOption:{},hlsOption:{stopLoadAsPaused:!1},drmOption:{},hlsLoadingTimeOut:2e4,useHlsPlugOnMobile:!0,useFlvPlugOnMobile:!0,lowLatencyMode:!1,useHls2:!0,useDrm2:void 0,skipRtsSupportCheck:!1,rtsLoadDataTimeout:6e3,rtsOption:{},rtsFallback:!1,rtsFallbackSource:void 0,rtsFallbackType:void 0,rtsVersion:"",rtsSdkUrl:"",nudgeMaxRetry:5,tracks:[],recreatePlayer:function(){},diagnosisButtonVisible:!0,enableH265:!1,forceH265:!1,enableH266:!1,forceH266:!1,h265Threads:!0,h265Simd:!0,preventRecord:!1,traceId:"",mediaAuth:void 0,textTracks:void 0,_native:!0,hlsUriToken:"",thumbnailUrl:"",refreshAccessInfo:function(){},drmSessionTimeout:5e3,skinRes:"//"+h.domain+"/de/prismplayer-flash/"+h.flashVersion+"/atlas/defaultSkin",splayerUrl:null,splayerWasmDomain:null,logo:[],disablePip:!1,assetPrefix:null,clickPause:e.IS_PC,clickPauseDelay:200,statisticsReportInterval:5e3,skinLayoutIgnore:[],disableSeek:!1,dashjsUrl:null,dashOption:{},disableDumpBuffer:!1,useSW:!1,swScriptURL:void 0,env:"",autoSize:"",watchStartTime:void 0,watchEndTime:void 0,start:void 0,end:void 0,dbClickFullscreen:e.IS_PC,dbClickFullscreenDelay:200,enableHlsH265:!1,bitrateDisplayHandler:void 0,longPressFastForward:!e.IS_PC,dbClickSkip:!e.IS_PC,customData:void 0},c=(m.exports.getDefaultH5Layout=function(){return[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"unmuteButton",align:"cc"},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"tooltip",align:"blabs",x:0,y:50},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]}]},m.exports.getDefaultAudioLayout=function(){return[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"volume",align:"tr",x:5,y:10}]}]},m.exports.getDefaultFlashLayout=function(){return[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}]},m.exports.canPlayType=function(u){var f=document.createElement("video");return f.canPlayType?f.canPlayType(u):""},m.exports.canPlayHls=function(){return m.exports.canPlayType("application/x-mpegURL")!=""},m.exports.isUsedHlsPluginOnMobile=function(u){return!!(e.IS_MOBILE&&(e.IS_CHROME||e.IS_FIREFOX||e.IS_X5||e.IS_EDGE_NEW)&&m.exports.isSupportHls())},m.exports.isSafariUsedHlsPlugin=function(u){return!!(e.os.pc&&e.browser.safari&&u)},m.exports.validateSource=function(u){return!0},m.exports.supportH5Video=function(){return document.createElement("video").canPlayType!==void 0},m.exports.createWrapper=function(u){var f=u.id,f=typeof f=="string"?(f.indexOf("#")===0&&(f=f.slice(1)),p.el(f)):f;if(f&&f.nodeName)return m.exports.adjustContainerLayout(f,u),f;throw new TypeError("\u6CA1\u6709\u4E3A\u64AD\u653E\u5668\u6307\u5B9A\u5BB9\u5668")},m.exports.adjustContainerLayout=function(u,f){f.width&&!u.style.width&&(u.style.width=f.width),f.height&&!u.style.height&&(u.style.height=f.height)},m.exports.isSupportHls=function(){var u=window.MediaSource=window.MediaSource||window.WebKitMediaSource,f=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,u=u&&typeof u.isTypeSupported=="function"&&u.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),f=(e.IS_ANDROID&&e.is_X5&&(u=!0),!f||f.prototype&&typeof f.prototype.appendBuffer=="function"&&typeof f.prototype.remove=="function");return u&&f},m.exports.isSupportMMS=function(){return!!window.ManagedMediaSource},m.exports.isSupportFlv=function(){return m.exports.isSupportHls()},m.exports.isSupportMSE=function(){return m.exports.isSupportHls()||m.exports.isSupportMMS()},m.exports.isSupportedMediaSource=function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported},m.exports.isSupportedDrm=function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)&&m.exports.isSupportMSE()},m.exports.isAudio=function(u,f){if(f)return m.exports.isMp3Format(f);f=!1;try{f=u&&new URL("http:"+u).pathname.split(".").pop().toLowerCase()==="mp3"}catch(y){return u&&0<u.toLowerCase().indexOf(".mp3")}return f},m.exports.isLiveShift=function(u){return u.isLive&&u.liveStartTime&&u.liveOverTime},m.exports.isHls=function(u,f){if(f)return m.exports.isHlsFormat(f);f=!1;try{f=u&&new URL("http:"+u).pathname.split(".").pop().toLowerCase()==="m3u8"}catch(y){return u&&0<u.toLowerCase().indexOf(".m3u8")}return f},m.exports.isDash=function(u,f){if(f)return m.exports.isDashFormat(f);f=!1;try{f=u&&new URL("http:"+u).pathname.split(".").pop().toLowerCase()==="mpd"}catch(y){return u&&0<u.toLowerCase().indexOf(".mpd")}return f},m.exports.isFlv=function(u,f){if(f)return m.exports.isFlvFormat(f);f=!1;try{f=u&&new URL("http:"+u).pathname.split(".").pop().toLowerCase()==="flv"}catch(y){return u&&0<u.toLowerCase().indexOf(".flv")}return f},m.exports.isRTMP=function(u){return u&&-1<u.toLowerCase().indexOf("rtmp:")},m.exports.isRts=function(u){return u&&-1<u.toLowerCase().indexOf("artc:")},m.exports.isMp4=function(u,f){if(f)return m.exports.isMp4Format(f);f=!1;try{f=u&&new URL("http:"+u).pathname.split(".").pop().toLowerCase()==="mp4"}catch(y){return u&&-1<u.toLowerCase().indexOf(".mp4")}return f},m.exports.isSupportedFormat=function(u){if(!u)return!1;try{var f=u.toLowerCase();return~["mp3","mp4","mpd","hls","m3u8","flv"].indexOf(f)}catch(y){return!1}},m.exports.isMp3Format=function(u){if(!u)return!1;try{var f=u.toLowerCase();return~["mp3"].indexOf(f)}catch(y){return!1}},m.exports.isMp4Format=function(u){if(!u)return!1;try{var f=u.toLowerCase();return~["mp4"].indexOf(f)}catch(y){return!1}},m.exports.isFlvFormat=function(u){if(!u)return!1;try{var f=u.toLowerCase();return~["flv"].indexOf(f)}catch(y){return!1}},m.exports.isHlsFormat=function(u){if(!u)return!1;try{var f=u.toLowerCase();return~["hls","m3u8"].indexOf(f)}catch(y){return!1}},m.exports.isDashFormat=function(u){if(!u)return!1;try{var f=u.toLowerCase();return~["mpd"].indexOf(f)}catch(y){return!1}},m.exports.getFormat=function(y){var f={artc:"rts",m3u8:"hls"},y=(y=/\.(mp4)|\.(mp3)|\.(m3u8)|\.(flv)|(artc):/.exec(y))==null?void 0:y[0];return y=y&&y.replace(/\.|:|artc|m3u8/gi,function(d){return f[d]||""})},m.exports.checkSecuritSupport=function(){return m.exports.isSupportMSE()?e.IS_IOS&&(e.IS_UC||e.IS_QUARK||e.IS_BAIDU)?t.get("iOSVodEncriptionBlacklist"):"":"serviceWorker"in navigator?void 0:location.protocol==="http:"?t.get("Error_SW_Https_required"):t.get("UseChromeForVodEncription")+"(SW not found)"},m.exports.nativeSupportH265=function(){return e.IS_IOS||e.IS_MAC_SAFARI},m.exports.findSelectedStreamLevel=function(u,f){var y=f;if(y||(y=l.get(o.SelectedStreamLevel))){for(var d=0;d<u.length;d++)if(u[d].definition==y)return d}else l.set(o.SelectedStreamLevel,u[0].definition,365);return 0},m.exports.getHistoryDetectResult=function(u,f){if(u)return f=f==="hls",u==="hvc1"?f?l.get(o.HWDetectHvc1Hls):l.get(o.HWDetectHvc1):u==="hev1"?f?l.get(o.HWDetectHev1Hls):l.get(o.HWDetectHev1):void 0},m.exports.setHistoryDetectResult=function(u,a,y){var d="unknownCodec",a=a==="hls";u==="hvc1"?d=a?o.HWDetectHvc1Hls:o.HWDetectHvc1:u==="hev1"&&(d=a?o.HWDetectHev1Hls:o.HWDetectHev1),l.set(d,y)},m.exports.handleOption=function(u,f){m.exports.isRts(u.source)&&(u.isLive=!0);var y,d=v.merge(v.copy(g),u),a=(u.autoplayPolicy&&(d.autoplayPolicy=v.merge(g.autoplayPolicy,u.autoplayPolicy)),[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]),_=!1;if(u.useFlashPrism||m.exports.isRTMP(u.source)?(_=!0,a=[{name:"liveIco",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"volume",align:"tr",x:10,y:25}]):(y=m.exports.isLiveShift(d))?(a.push({name:"liveShiftProgress",align:"tlabs",x:0,y:0}),a.push({name:"playButton",align:"tl",x:15,y:12}),a.push({name:"liveDisplay",align:"tl",x:15,y:6})):a.push({name:"liveDisplay",align:"tlabs",x:15,y:6}),u.isLive){if(u.skinLayout===void 0)d.skinLayout=[{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"unmuteButton",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"H5Loading",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:m.exports.isRts(u.source)?[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"volume",align:"tr",x:5,y:10},{name:"liveDisplay",align:"tlabs",x:15,y:6}]:a}];else if(u.skinLayout!=0){for(var b=u.skinLayout.length,E=[],T=-1,k=0;k<b;k++)if(d.skinLayout[k].name=="controlBar"){for(var T=k,P=d.skinLayout[k].children.length,w=0;w<P;w++){var D,U=d.skinLayout[k].children[w].name;U!="liveDisplay"&&U!="liveIco"&&U!="fullScreenButton"&&U!="volume"&&U!="snapshot"&&U!="setting"&&U!="subtitle"&&(!y||U!="progress"&&U!="playButton"&&U!="timeDisplay")||(D=d.skinLayout[k].children[w],U=="progress"?D.name="liveShiftProgress":U=="timeDisplay"?D.name="liveShiftTimeDisplay":_&&U=="liveDisplay"&&(D.name="liveIco"),E.push(D))}break}T!=-1&&(d.skinLayout[T].children=E)}}return(u.components===void 0||!u.components||v.isArray(u.components)&&u.components.length==0)&&u.components!="false"&&(d.components=[r]),d},m.exports.ignoreSkinLayouts=function(u,f){var y;if(f!=null&&f.length&&u!=null&&u.length)return y=u,f.forEach(function(d){var a,_,b;-1<d.indexOf(".")?(b=d.split("."),a=b[0],_=b[1],(b=y.find(function(E){return E.name===a}))&&(b.children=b.children.filter(function(E){return E.name!==_}))):y=y.filter(function(E){return E.name!==d})}),y},m.exports.getLiveHostByRegion=function(u){var f="live.aliyuncs.com";return u&&-1<["ap-southeast-1","eu-central-1"].indexOf(u)?"live."+u+".aliyuncs.com":f},m.exports.isVideoTag=function(u){return u&&typeof u.nodeName=="string"&&u.nodeName.toLowerCase()==="video"},m.exports.unqiueTextTracks=function(u){var f=[],f=(u=u===void 0?[]:u).reduce(function(d,a){var _;return d.some(function(b){return b.srclang===a.srclang})?d:((_=a).label=a.label||a.srclang,[].concat(d,[_]))},[]),y={};return f.forEach(function(d,a){y[d.label]?y[d.label].push(a):y[d.label]=[a]}),Object.keys(y).forEach(function(d){d=y[d]||[],1<d.length&&d.forEach(function(a){f[a].label=f[a].label+"("+f[a].srclang+")"})}),f},m.exports.isHvc1Codec=function(u){return-1<(u=u===void 0?"":u).indexOf("hvc1")},m.exports.isHev1Codec=function(u){return-1<(u=u===void 0?"":u).indexOf("hev1")},m.exports.isVvccCodec=function(u){return-1<(u=u===void 0?"":u).indexOf("vvcC")},m.exports.isVvc1Codec=function(u){return-1<(u=u===void 0?"":u).indexOf("vvc1")},m.exports.isVvi1Codec=function(u){return-1<(u=u===void 0?"":u).indexOf("vvi1")},m.exports.isH265Codec=function(u){return m.exports.isHvc1Codec(u=u===void 0?"":u)||m.exports.isHev1Codec(u)},m.exports.isH266Codec=function(u){return m.exports.isVvccCodec(u=u===void 0?"":u)||m.exports.isVvc1Codec(u)||m.exports.isVvi1Codec(u)},m.exports.isH264Codec=function(u){return-1<(u=u===void 0?"":u).indexOf("avc1")},m.exports.getVideoTrack=function(u){var f;return(u=u===void 0?[]:u).forEach(function(y){Number(y.type)===1&&(f=y)}),f},e.IS_ANDROID&&(e.dingTalk()||e.IS_UC||e.is_X5||e.IS_HUAWEI||e.IS_XIAOMI||e.IS_OPPO||e.IS_VIVO||e.IS_MEIZU||e.IS_SAMSUNG||e.IS_WEBVIEW)||e.os&&e.os.name==="windows"&&e.IS_UC);m.exports.shouldUseBasePlayer=function(b,f){var y,d,a,_=b.codecTag,b=b.url,E="unsupported";return!_||(a=m.exports.isHvc1Codec(_),y=m.exports.isMp4(b),b=m.exports.isHls(b),y&&m.exports.nativeSupportH265()&&a)||y&&(()=>{if(!(!c&&(e.IS_CHROME||e.IS_EDGE_NEW)))return!1;var T=0;try{T=e.USER_AGENT.match(/Chrome\/(\d+)/i)[1]}catch(k){T=0}return!(parseInt(T)<104||!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4;codecs="hvc1.1.6.L120.90"'))})()?f(!0):c?(a=m.exports.getHistoryDetectResult(_,d=b?"hls":"mp4"))==="supported"?f(!0):a===E?f(!1):void s({codecTags:[_],format:d,timeout:2e3}).then(function(T){if(T=T.isHev1Supported||T.isHvc1Supported,m.exports.setHistoryDetectResult(_,d,T?"supported":E),T)return f(!0);f(!1)}).catch(function(T){console.log("hevcDetector ERROR",T),f(!1)}):f(!1)},m.exports.parseHttpHeaders=function(u){if(u){var f={};try{u instanceof Response?u.headers.forEach(function(y,d){f[d]=y}):u.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(function(a){var a=a.split(": "),d=a.shift(),a=a.join(": ");f[d]=a})}catch(y){}return f}},m.exports.detectRegionBlock=function(u,f){n.get(u,function(){f(!1)},function(y,d,a){a=m.exports.parseHttpHeaders(a)["x-tengine-error"],d===403&&a&&-1<o.RegionBlockMessages.indexOf(a)?f(!0):f(!1)})},m.exports.enableDbClickSkip=function(u){return u.dbClickSkip&&!u.dbClickFullscreen},m.exports.drawSnapshotText=function(u,f){f=f.snapshotWatermark,f&&f.text&&(u.font=f.font,f.fillColor&&(u.fillStyle=f.fillColor,u.fillText(f.text,f.left,f.top)),f.strokeColor&&(u.strokeStyle=f.strokeColor,u.strokeText(f.text,f.left,f.top)),u.stroke())},m.exports.hasValue=function(u){return u!=null&&u!==""}},{"../config":19,"../lang/index":28,"../player/base/plugin/defaultemptycomponent":103,"./constants":33,"./cookie":34,"./dom":37,"./hardware-decoding-detector":41,"./io":45,"./object":47,"./ua":53}],51:[function(S,m,W){var v=S("./object"),h=S("../player/adaptiveplayer"),p=S("./constants").USER_EVENT_NAME;m.exports.reloadInstance=function(s,o,t){var e=t,n=(e.dispose(),s.readyCallback),r=s._readyCallbackCalled,s=h.create(s,function(g){o(g),r||n(g)});m.exports.restoreUserEvents(t,s),m.exports.removeAllProps(e),(e.__proto__=s)[p]=e[p]},m.exports.storeUserEvents=function(l){var o=l,t=o.__proto__.on,e={};o.on=function(n,r){typeof r=="function"&&(e[n]?e[n].push(r):e[n]=[r],this._el)&&(r.binded=!0,t.call(o,n,r))},o[p]=e},m.exports.restoreUserEvents=function(l,o){var t=l[p];t&&v.each(t,function(e){t[e].forEach(function(n){o.on(e,n)})})},m.exports.removeAllProps=function(l,o){for(var t in o=[].concat(o=o||[],[p]),l)l.hasOwnProperty(t)&&o.indexOf(t)===-1&&delete l[t]}},{"../player/adaptiveplayer":74,"./constants":33,"./object":47}],52:[function(S,m,W){m.exports.set=function(v,h){try{window.localStorage&&localStorage.setItem(v,h)}catch(p){window[v+"_localStorage"]=h}},m.exports.get=function(v){try{if(window.localStorage)return localStorage.getItem(v)}catch(h){return window[v+"_localStorage"]}return""}},{}],53:[function(S,m,W){var v,h,p;if(m.exports.USER_AGENT=navigator.userAgent,m.exports.IS_IPHONE=/iPhone/i.test(m.exports.USER_AGENT),m.exports.IS_IPAD=/iPad/i.test(m.exports.USER_AGENT),m.exports.IS_IPOD=/iPod/i.test(m.exports.USER_AGENT),m.exports.IS_MAC=/mac/i.test(m.exports.USER_AGENT),m.exports.IS_EDGE=/Edge/i.test(m.exports.USER_AGENT),m.exports.IS_EDGE_NEW=/Edg/i.test(m.exports.USER_AGENT)&&!m.exports.IS_EDGE,m.exports.IS_IE11=/Trident\/7.0/i.test(m.exports.USER_AGENT),m.exports.IS_X5=/qqbrowser/i.test(m.exports.USER_AGENT.toLowerCase()),m.exports.IS_CHROME=/Chrome/i.test(m.exports.USER_AGENT)&&!m.exports.IS_EDGE&&!m.exports.IS_EDGE_NEW&&!m.exports.IS_X5,m.exports.IS_SAFARI=/Safari/i.test(m.exports.USER_AGENT)&&!m.exports.IS_CHROME&&!m.exports.IS_EDGE_NEW,m.exports.IS_FIREFOX=/Firefox/i.test(m.exports.USER_AGENT),m.exports.IS_UC=/ucweb|UCBrowser|UBrowser/i.test(m.exports.USER_AGENT),m.exports.IS_QUARK=/Quark/i.test(m.exports.USER_AGENT),m.exports.IS_HUAWEI=/HuaweiBrowser/i.test(m.exports.USER_AGENT),m.exports.IS_XIAOMI=/MiuiBrowser/i.test(m.exports.USER_AGENT),m.exports.IS_OPPO=/HeyTapBrowser/i.test(m.exports.USER_AGENT),m.exports.IS_VIVO=/VivoBrowser/i.test(m.exports.USER_AGENT),m.exports.IS_MEIZU=/MZBrowser/i.test(m.exports.USER_AGENT),m.exports.IS_SAMSUNG=/samsungbrowser/i.test(m.exports.USER_AGENT),m.exports.IS_BAIDU=/baiduboxapp/i.test(m.exports.USER_AGENT),document.all)try{var l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");m.exports.HAS_FLASH=!!l}catch(o){m.exports.HAS_FLASH=!1}else navigator.plugins&&0<navigator.plugins.length?(l=navigator.plugins["Shockwave Flash"],m.exports.HAS_FLASH=!!l):m.exports.HAS_FLASH=!1;m.exports.IS_MAC_SAFARI=m.exports.IS_MAC&&m.exports.IS_SAFARI&&!m.exports.IS_CHROME&&!m.exports.HAS_FLASH,m.exports.IS_IOS=m.exports.IS_IPHONE||m.exports.IS_IPAD||m.exports.IS_IPOD,m.exports.IOS_VERSION=(()=>{var o=m.exports.USER_AGENT.match(/OS (\d+)_/i);if(o&&o[1])return o[1]})(),m.exports.IOS_FULL_VERSION=(()=>{var o=m.exports.USER_AGENT.match(/OS (\d+)_(\d+)_?/i);if(o&&o[1]&&o[2])return o[1]+"."+o[2]})(),m.exports.IS_HARMONY=/OpenHarmony/i.test(m.exports.USER_AGENT),m.exports.IS_ANDROID=/Android/i.test(m.exports.USER_AGENT)||m.exports.IS_HARMONY,m.exports.ANDROID_VERSION=(l=m.exports.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i))?(h=l[1]&&parseFloat(l[1]),v=l[2]&&parseFloat(l[2]),h&&v?parseFloat(l[1]+"."+l[2]):h||null):null,m.exports.IS_OLD_ANDROID=m.exports.IS_ANDROID&&/webkit/i.test(m.exports.USER_AGENT)&&m.exports.ANDROID_VERSION<2.3,m.exports.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),m.exports.IS_MOBILE=m.exports.IS_IOS||m.exports.IS_ANDROID,m.exports.IS_H5=m.exports.IS_MOBILE||!m.exports.HAS_FLASH,m.exports.IS_PC=!m.exports.IS_MOBILE,m.exports.is_X5=/micromessenger/i.test(m.exports.USER_AGENT)||/qqbrowser/i.test(m.exports.USER_AGENT),m.exports.IS_ANDROID_FIREFOX=m.exports.IS_ANDROID&&m.exports.IS_FIREFOX,m.exports.CHROME_VERSION=m.exports.IS_CHROME&&m.exports.USER_AGENT.match(/Chrome\/(\d+)/i)[1],m.exports.getHost=function(o){var t,e,n="";return o===void 0||o==null||o==""?"":(t=o.indexOf("//"),e=o,n=e=-1<t?o.substring(t+2):e,(o=(n=(o=e.split("/"))&&0<o.length?o[0]:n).split(":"))&&0<o.length?o[0]:n)},m.exports.dingTalk=function(){var o=m.exports.USER_AGENT.toLowerCase();return/dingtalk/i.test(o)},m.exports.IS_DINGTALK=m.exports.dingTalk(),m.exports.wechat=function(){var o=m.exports.USER_AGENT.toLowerCase();return/micromessenger/i.test(o)},m.exports.inIFrame=function(){return self!=top},m.exports.getReferer=function(){var o=document.referrer;if(m.exports.inIFrame())try{o=top.document.referrer}catch(t){o=document.referrer}return o},m.exports.getHref=function(){if(location.href,m.exports.inIFrame())try{top.location.href}catch(o){location.href}return location.href},m.exports.check360=function(){return navigator.userAgent.indexOf("Safari")!=-1?(()=>{var o=navigator.userAgent.split(" ");if(o[o.length-1].indexOf("Safari")!=-1){for(var t in navigator.plugins)if(navigator.plugins[t].filename=="np-mswmp.dll")return!0}return!1})():(navigator.msPointerEnabled==null||navigator.msPointerEnabled)&&(navigator.msDoNotTrack==1||window.doNotTrack==1)&&(!!Number(window.screenX)&&window.screenLeft-window.screenX!=8||(navigator.userAgent.indexOf("MSIE 7.0")!=-1||navigator.userAgent.indexOf("MSIE 8.0")!=-1)&&console.count==null)},function(o,d){var e=this.os={},n=this.browser={},r=o.match(/Web[kK]it[\/]{0,1}([\d.]+)/),s=o.match(/(Android);?[\s\/]+([\d.]+)?/),g=!!o.match(/\(Macintosh\; Intel /),c=o.match(/(iPad).*OS\s([\d_]+)/),u=o.match(/(iPod)(.*OS\s([\d_]+))?/),f=!c&&o.match(/(iPhone\sOS)\s([\d_]+)/),y=o.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),d=/Win\d{2}|Windows/.test(d),a=o.match(/Windows Phone ([\d.]+)/),_=y&&o.match(/TouchPad/),b=o.match(/Kindle\/([\d.]+)/),E=o.match(/Silk\/([\d._]+)/),T=o.match(/(BlackBerry).*Version\/([\d.]+)/),k=o.match(/(BB10).*Version\/([\d.]+)/),P=o.match(/(RIM\sTablet\sOS)\s([\d.]+)/),w=o.match(/PlayBook/),D=o.match(/Chrome\/([\d.]+)/)||o.match(/CriOS\/([\d.]+)/),U=o.match(/Firefox\/([\d.]+)/),M=o.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),O=o.match(/MSIE\s([\d.]+)/)||o.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),B=!D&&o.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),j=B||o.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(n.webkit=!!r)&&(n.version=r[1]),s&&(e.android=!0,e.version=s[2]),f&&!u&&(e.ios=e.iphone=!0,e.version=f[2].replace(/_/g,".")),c&&(e.ios=e.ipad=!0,e.version=c[2].replace(/_/g,".")),u&&(e.ios=e.ipod=!0,e.version=u[3]?u[3].replace(/_/g,"."):null),a&&(e.wp=!0,e.version=a[1]),y&&(e.webos=!0,e.version=y[2]),_&&(e.touchpad=!0),T&&(e.blackberry=!0,e.version=T[2]),k&&(e.bb10=!0,e.version=k[2]),P&&(e.rimtabletos=!0,e.version=P[2]),w&&(n.playbook=!0),b&&(e.kindle=!0,e.version=b[1]),E&&(n.silk=!0,n.version=E[1]),!E&&e.android&&o.match(/Kindle Fire/)&&(n.silk=!0),D&&(n.chrome=!0,n.version=D[1]),U&&(n.firefox=!0,n.version=U[1]),M&&(e.firefoxos=!0,e.version=M[1]),O&&(n.ie=!0,n.version=O[1]),j&&(g||e.ios||d||s)&&(n.safari=!0,e.ios||e.android||(n.version=j[1])),e.ios&&(n.version=e.version),B&&(n.webview=!0),g&&((r=o.match(/[\d]*_[\d]*_[\d]*/))&&0<r.length&&r[0]&&(e.version=r[0].replace(/_/g,".")),/MQBHD/.test(o))&&(n.version=((o.match(/.*OS\s([\d_]+)/)||[])[1]||"").replace(/_/g,".")),e.tablet=!!(c||w||s&&!o.match(/Mobile/)||U&&o.match(/Tablet/)||O&&!o.match(/Phone/)&&o.match(/Touch/)),e.phone=!(e.tablet||e.ipod||!(s||f||y||T||k||D&&o.match(/Android/)||D&&o.match(/CriOS\/([\d.]+)/)||U&&o.match(/Mobile/)||O&&o.match(/Touch/))),e.pc=!e.tablet&&!e.phone,g?e.name="macOS":d?(e.name="windows",e.version=(()=>{var H=navigator.userAgent,R="";return(-1<H.indexOf("Windows NT 5.0")||-1<H.indexOf("Windows 2000"))&&(R="2000"),(-1<H.indexOf("Windows NT 5.1")||-1<H.indexOf("Windows XP"))&&(R="XP"),(-1<H.indexOf("Windows NT 5.2")||-1<H.indexOf("Windows 2003"))&&(R="2003"),(-1<H.indexOf("Windows NT 6.0")||-1<H.indexOf("Windows Vista"))&&(R="Vista"),(-1<H.indexOf("Windows NT 6.1")||-1<H.indexOf("Windows 7"))&&(R="7"),(-1<H.indexOf("Windows NT 6.2")||-1<H.indexOf("Windows 8"))&&(R="8"),(-1<H.indexOf("Windows NT 6.3")||-1<H.indexOf("Windows 8.1"))&&(R="8.1"),R=-1<H.indexOf("Windows NT 10")||-1<H.indexOf("Windows 10")?"10":R})()):e.name=(()=>{var H=navigator.userAgent,R="other",L=m.exports.os;return L.ios?"iOS":L.android?"android":-1<H.indexOf("OpenHarmony")?"ohos":-1<H.indexOf("Baiduspider")?"Baiduspider":-1<H.indexOf("PlayStation")?"PS4":(L=navigator.platform=="Win32"||navigator.platform=="Windows"||-1<H.indexOf("Windows"),(H=navigator.platform=="Mac68K"||navigator.platform=="MacPPC"||navigator.platform=="Macintosh"||navigator.platform=="MacIntel")&&(R="macOS"),navigator.platform!="X11"||L||H||(R="Unix"),-1<String(navigator.platform).indexOf("Linux")&&(R="Linux"),L?"windows":R)})(),n.name=(u=navigator.userAgent.toLowerCase(),(a=m.exports.browser).firefox?"Firefox":a.ie?/edge/.test(u)?"Edge":"IE":m.exports.IS_EDGE_NEW?"EdgeChromium":/micromessenger/.test(u)?"\u5FAE\u4FE1\u5185\u7F6E\u6D4F\u89C8\u5668":/qqbrowser/.test(u)?"QQ\u6D4F\u89C8\u5668":m.exports.IS_UC?"UC":m.exports.IS_QUARK?"Quark":m.exports.IS_DINGTALK?"Dingtalk":m.exports.IS_HUAWEI?"HuaweiBrowser":m.exports.IS_XIAOMI?"MiBrowser":m.exports.IS_OPPO?"OppoBrowser":m.exports.IS_VIVO?"VivoBrowser":m.exports.IS_MEIZU?"MeizuBrowser":m.exports.IS_SAMSUNG?"SamsungBrowser":m.exports.IS_WEBVIEW||/MQBHD/.test(u)?"webview":a.chrome?"Chrome":a.safari?"Safari":/baiduspider/.test(u)?"Baiduspider":/opera/.test(u)?"Opera":/360se/.test(u)?"360\u6D4F\u89C8\u5668":/bidubrowser/.test(u)?"\u767E\u5EA6\u6D4F\u89C8\u5668":/metasr/.test(u)?"\u641C\u72D7\u6D4F\u89C8\u5668":/lbbrowser/.test(u)?"\u730E\u8C79\u6D4F\u89C8\u5668":/playstation/.test(u)?"PS4\u6D4F\u89C8\u5668":void 0)}.call(m.exports,navigator.userAgent,navigator.platform),m.exports.IS_WEBVIEW=(v=m.exports.USER_AGENT,h=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(Version).*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig"),p=new RegExp("("+["VivoBrowser","MZBrowser","MiuiBrowser"].join("|")+")","ig"),!!v.match(h)&&!v.match(p))},{}],54:[function(S,m,W){var v=S("./dom");m.exports.getAbsoluteURL=function(h){return h=h.match(/^https?:\/\//)?h:v.createEl("div",{innerHTML:'<a href="'+h+'">x</a>'}).firstChild.href},m.exports.parseUrl=function(h){var p,l=["protocol","hostname","port","pathname","search","hash","host"],o=v.createEl("a",{href:h}),t=o.host===""&&o.protocol!=="file:";t&&((p=v.createEl("div")).innerHTML='<a href="'+h+'"></a>',o=p.firstChild,p.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(p));for(var e={},n=0;n<l.length;n++)e[l[n]]=o[l[n]];return e.segments=o.pathname.replace(/^\//,"").split("/"),t&&document.body.removeChild(p),e}},{"./dom":37}],55:[function(S,m,W){var v=S("./dom"),h=S("./ua"),p=S("./playerutil");m.exports.formatTime=function(t){t=Math.max(0,t||0);var o,t=Math.floor(t),e=Math.floor(t/3600);return t%=3600,o=Math.floor(t/60),t=t%60,!(e===1/0||isNaN(e)||o===1/0||isNaN(o)||t==1/0||isNaN(t))&&((e=10<=e?e:"0"+e)==="00"?"":e+":")+(10<=o?o:"0"+o)+":"+(10<=t?t:"0"+t)},m.exports.extractTime=function(l){var o;return l?((o=10<=(o=parseInt(l.getHours()))?o:"0"+o)==="00"?"":o+":")+(o=10<=(o=parseInt(l.getMinutes()))?o:"0"+o)+":"+(o=10<=(o=parseInt(l.getSeconds()))?o:"0"+o):""},m.exports.convertToTimestamp=function(l,o){var t="";return l&&(o?t=l.gettime():(t=Date.parse(l),t/=1e3)),t},m.exports.convertToDate=function(l,o){var t="";return l&&(t=new Date).setTime(1e3*l),t},m.exports.parseTime=function(l){var o,t,e;return l?(e=t=o=0,(l=l.split(":")).length===3?(o=l[0],t=l[1],e=l[2]):l.length===2?(t=l[0],e=l[1]):l.length===1&&(e=l[0]),3600*(o=parseInt(o,10))+60*(t=parseInt(t,10))+(e=Math.ceil(parseFloat(e)))):"00:00:00"},m.exports.formatDate=function(l,o){var t,e={"M+":l.getMonth()+1,"d+":l.getDate(),"H+":l.getHours(),"m+":l.getMinutes(),"s+":l.getSeconds(),"q+":Math.floor((l.getMonth()+3)/3),S:l.getMilliseconds()};for(t in/(y+)/.test(o)&&(o=o.replace(RegExp.$1,(l.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+t+")").test(o)&&(o=o.replace(RegExp.$1,RegExp.$1.length==1?e[t]:("00"+e[t]).substr((""+e[t]).length)));return o},m.exports.sleep=function(l){for(var o=Date.now();Date.now()-o<=l;);},m.exports.htmlEncodeAll=function(l){return l==null?"":l.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},m.exports.toBinary=function(l){if(!window.atob)return"";for(var o=atob(l),t=o.length,e=new Uint8Array(t),n=0;n<t;n++)e[n]=o.charCodeAt(n);return e},m.exports.readyBinary=function(l){for(var o=new Uint8Array(l),t=o.length,e="",n=0;n<t;n++)e+=o[n];return e},m.exports.delayHide=function(l,o){l&&(o===void 0&&(o=1e3),l.delayHanlder&&clearTimeout(l.delayHanlder),l.delayHanlder=setTimeout(function(){v.css(l,"display","none")},o))},m.exports.openInFile=function(){return window.location.protocol.toLowerCase().indexOf("file")!=-1},m.exports.contentProtocolMixed=function(l,o,t){return!!((h.os.pc&&(p.isHls(l,t)&&!h.browser.safari||p.isFlv(l,t))||o)&&window.location.protocol.toLowerCase()=="https:"&&l&&-1<l.toLowerCase().indexOf("http://"))},m.exports.queryString=function(l){var o,t,e;return(l=(l=decodeURIComponent(l)).split("?")).length===2&&(o=l[1].split("&"))?(t={},e=0,$(o).each(function(){var n=o[e].split("=");n.length===2&&(t[n[0]]=n[1].replace(/\+/g," ")),e++}),t):{}},m.exports.log=function(l){var o=window.location.href,o=m.exports.queryString(o);o&&o.debug==1&&console.log(l)},m.exports.arrayBufferToB64=function(l){for(var o="",t=new Uint8Array(l),e=t.byteLength,n=0;n<e;n++)o+=String.fromCharCode(t[n]);return window.btoa(o)},m.exports.b64ToArrayBuffer=function(l){for(var o=atob(l),t=new Uint8Array(o.length),e=0;e<o.length;e++)t[e]=o.charCodeAt(e);return t.buffer},m.exports.throttle=function(l,o){var t=null,e=0;return function(){for(var n=this,r=arguments.length,s=new Array(r),g=0;g<r;g++)s[g]=arguments[g];var c=Date.now(),u=o-(c-e);u<=0?(l.apply(this,s),e=c):(clearTimeout(t),t=setTimeout(function(){l.apply(n,s),e=Date.now()},u))}}},{"./dom":37,"./playerutil":50,"./ua":53}],56:[function(S,m,W){function v(p){for(var l=5381,o=p.length;o;)l=33*l^p.charCodeAt(--o);return(l>>>0).toString()}var h=S("./vttparse");m.exports={parse:function(e,l,o){var t,e=e.trim().replace(/\r\n|\n\r|\n|\r/g,`
`).split(`
`),n=[],r=new h;r.oncue=function(s){s.id=v(s.startTime)+v(s.endTime)+v(s.text),s.text=decodeURIComponent(escape(s.text)),s.isBig=!1;var g=s.text.split("#xywh=");g.length==2&&(g=g[1].split(","),s.x=g[0],s.y=g[1],s.w=g[2],s.h=g[3],s.isBig=!0),0<s.endTime&&n.push(s)},r.onparsingerror=function(s){t=s},r.onflush=function(){t&&o?(o(t),console.log(t)):l(n)},e.forEach(function(s){r.parse(s+`
`)}),r.flush()}}},{"./vttparse":58}],57:[function(S,m,W){function v(t){return typeof t=="string"&&!!o[t.toLowerCase()]&&t.toLowerCase()}function h(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)t[n]=r[n]}return t}function p(t,e,n){var r=this,s=(()=>{if(typeof navigator!="undefined")return/MSIE\s8\.0/.test(navigator.userAgent)})(),g={},c=(s?r=document.createElement("custom"):g.enumerable=!0,r.hasBeenReset=!1,""),u=!1,f=t,y=e,d=n,a=null,_="",b=!0,E="auto",T="start",k=50,P="middle",w=50,D="middle";if(Object.defineProperty(r,"id",h({},g,{get:function(){return c},set:function(U){c=""+U}})),Object.defineProperty(r,"pauseOnExit",h({},g,{get:function(){return u},set:function(U){u=!!U}})),Object.defineProperty(r,"startTime",h({},g,{get:function(){return f},set:function(U){if(typeof U!="number")throw new TypeError("Start time must be set to a number.");f=U,this.hasBeenReset=!0}})),Object.defineProperty(r,"endTime",h({},g,{get:function(){return y},set:function(U){if(typeof U!="number")throw new TypeError("End time must be set to a number.");y=U,this.hasBeenReset=!0}})),Object.defineProperty(r,"text",h({},g,{get:function(){return d},set:function(U){d=""+U,this.hasBeenReset=!0}})),Object.defineProperty(r,"region",h({},g,{get:function(){return a},set:function(U){a=U,this.hasBeenReset=!0}})),Object.defineProperty(r,"vertical",h({},g,{get:function(){return _},set:function(U){if(U=typeof(U=U)=="string"&&!!l[U.toLowerCase()]&&U.toLowerCase(),U===!1)throw new SyntaxError("An invalid or illegal string was specified.");_=U,this.hasBeenReset=!0}})),Object.defineProperty(r,"snapToLines",h({},g,{get:function(){return b},set:function(U){b=!!U,this.hasBeenReset=!0}})),Object.defineProperty(r,"line",h({},g,{get:function(){return E},set:function(U){if(typeof U!="number"&&U!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");E=U,this.hasBeenReset=!0}})),Object.defineProperty(r,"lineAlign",h({},g,{get:function(){return T},set:function(U){if(U=v(U),!U)throw new SyntaxError("An invalid or illegal string was specified.");T=U,this.hasBeenReset=!0}})),Object.defineProperty(r,"position",h({},g,{get:function(){return k},set:function(U){if(U<0||100<U)throw new Error("Position must be between 0 and 100.");k=U,this.hasBeenReset=!0}})),Object.defineProperty(r,"positionAlign",h({},g,{get:function(){return P},set:function(U){if(U=v(U),!U)throw new SyntaxError("An invalid or illegal string was specified.");P=U,this.hasBeenReset=!0}})),Object.defineProperty(r,"size",h({},g,{get:function(){return w},set:function(U){if(U<0||100<U)throw new Error("Size must be between 0 and 100.");w=U,this.hasBeenReset=!0}})),Object.defineProperty(r,"align",h({},g,{get:function(){return D},set:function(U){if(U=v(U),!U)throw new SyntaxError("An invalid or illegal string was specified.");D=U,this.hasBeenReset=!0}})),r.displayState=void 0,s)return r}var l,o;m.exports=typeof window!="undefined"&&window.VTTCue?window.VTTCue:(l={"":!0,lr:!0,rl:!0},o={start:!0,middle:!0,end:!0,left:!0,right:!0},p.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},p)},{}],58:[function(S,m,W){function v(){return{decode:function(r){if(!r)return"";if(typeof r!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(r))}}}var h=S("./vttcue");function p(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new v,this.regionList=[]}function l(){this.values=Object.create(null)}function o(r,s,g,c){var u,f,y=c?r.split(c):[r];for(u in y)typeof y[u]=="string"&&(f=y[u].split(g)).length===2&&s(f[0],f[1])}l.prototype={set:function(r,s){this.get(r)||s===""||(this.values[r]=s)},get:function(r,s,g){return g?this.has(r)?this.values[r]:s[g]:this.has(r)?this.values[r]:s},has:function(r){return r in this.values},alt:function(r,s,g){for(var c=0;c<g.length;++c)if(s===g[c]){this.set(r,s);break}},integer:function(r,s){/^-?\d+$/.test(s)&&this.set(r,parseInt(s,10))},percent:function(r,s){return!!(s.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(s=parseFloat(s))&&s<=100)&&(this.set(r,s),!0)}};var t=new h(0,0,0),e=t.align==="middle"?"middle":"center";function n(r,s,g){var c,u,f=r;function y(){var a,_=(_=(_=r).match(/^(\d+):(\d{2})(:\d{2})?(\.\d{3})?/))?(a=(a=_[4])&&a.replace(".",""),_[3]?b(_[1],_[2],_[3].replace(":",""),a):59<_[1]?b(_[1],_[2],0,a):b(0,_[1],_[2],a)):null;function b(E,T,k,P){return 3600*(0|E)+60*(0|T)+(0|k)+(0|P)/1e3}if(_===null)throw new Error("Malformed timestamp: "+f);return r=r.replace(/^[^\sa-zA-Z-]+/,""),_}function d(){r=r.replace(/^\s+/,"")}if(d(),s.startTime=y(),d(),r.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+f);r=r.substr(3),d(),s.endTime=y(),d(),c=r,s=s,u=new l,o(c,function(a,_){switch(a){case"region":for(var b=g.length-1;0<=b;b--)if(g[b].id===_){u.set(a,g[b].region);break}break;case"vertical":u.alt(a,_,["rl","lr"]);break;case"line":var E=_.split(","),T=E[0];u.integer(a,T),u.percent(a,T)&&u.set("snapToLines",!1),u.alt(a,T,["auto"]),E.length===2&&u.alt("lineAlign",E[1],["start",e,"end"]);break;case"position":E=_.split(","),u.percent(a,E[0]),E.length===2&&u.alt("positionAlign",E[1],["start",e,"end","line-left","line-right","auto"]);break;case"size":u.percent(a,_);break;case"align":u.alt(a,_,["start",e,"end","left","right"])}},/:/,/\s/),s.region=u.get("region",null),s.vertical=u.get("vertical",""),(c=u.get("line","auto"))==="auto"&&t.line===-1&&(c=-1),s.line=c,s.lineAlign=u.get("lineAlign","start"),s.snapToLines=u.get("snapToLines",!0),s.size=u.get("size",100),s.align=u.get("align",e),(c=u.get("position","auto"))==="auto"&&t.position===50&&(c=s.align==="start"||s.align==="left"?0:s.align==="end"||s.align==="right"?100:50),s.position=c}p.prototype={parse:function(r){var s=this;function g(){for(var d=0,a=(a=s.buffer).replace(/<br(?: \/)?>/gi,`
`);d<a.length&&a[d]!=="\r"&&a[d]!==`
`;)++d;var _=a.substr(0,d);return a[d]==="\r"&&++d,a[d]===`
`&&++d,s.buffer=a.substr(d),_}r&&(s.buffer+=s.decoder.decode(r,{stream:!0}));try{if(s.state==="INITIAL"){if(!/\r\n|\n/.test(s.buffer))return this;var c,u=(c=g()).match(/^WEBVTT([ \t].*)?$/);if(!u||!u[0])throw new Error("Malformed WebVTT signature.");s.state="HEADER"}for(var f=!1;s.buffer;){if(!/\r\n|\n/.test(s.buffer))return this;switch(f?f=!1:c=g(),s.state){case"HEADER":/:/.test(c)?o(c,function(d,a){d==="Region"&&console.log("parse region",a)},/:/):c||(s.state="ID");continue;case"NOTE":c||(s.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(c)){s.state="NOTE";break}if(!c)continue;if(s.cue=new h(0,0,""),s.state="CUE",c.indexOf("-->")===-1){s.cue.id=c;continue}case"CUE":try{n(c,s.cue,s.regionList)}catch(d){s.cue=null,s.state="BADCUE";continue}s.state="CUETEXT";continue;case"CUETEXT":var y=c.indexOf("-->")!==-1;if(!c||y&&(f=!0)){s.oncue&&s.oncue(s.cue),s.cue=null,s.state="ID";continue}s.cue.text&&(s.cue.text+=`
`),s.cue.text+=c;continue;case"BADCUE":c||(s.state="ID");continue}}}catch(d){s.state==="CUETEXT"&&s.cue&&s.oncue&&s.oncue(s.cue),s.cue=null,s.state=s.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&this.state!=="HEADER"||(this.buffer+=`

`,this.parse()),this.state==="INITIAL")throw new Error("Malformed WebVTT signature.")}catch(r){throw r}return this.onflush&&this.onflush(),this}},m.exports=p},{"./vttcue":57}],59:[function(c,m,W){function v(){return(v=Object.assign?Object.assign.bind():function(f){for(var y=1;y<arguments.length;y++){var d,a=arguments[y];for(d in a)!{}.hasOwnProperty.call(a,d)||(f[d]=a[d])}return f}).apply(null,arguments)}function h(f,y){for(var d=0;d<y.length;d++){var a=y[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(f,(_=>typeof(_=((b,E)=>{if(typeof b!="object"||!b)return b;var T=b[Symbol.toPrimitive];if(T===void 0)return(E==="string"?String:Number)(b);if(typeof(T=T.call(b,E||"default"))!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")})(_,"string"))=="symbol"?_:_+"")(a.key),a)}}function p(f,y,d){return y&&h(f.prototype,y),d&&h(f,d),Object.defineProperty(f,"prototype",{writable:!1}),f}var l=c("./vtt-parser"),o=c("./vtt-renderer"),t=c("./vtt-loader"),e=c("../../player/base/event/eventtype"),n=c("../../lib/ua"),r=c("../../lib/event"),s=c("../../ui/component/util"),g=o.CTR_BAR_HEIGHT,c=(()=>{function f(d){this.parser=null,this.activeRenderer=null,this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.tickTimer=null,this.prevPosition=null,this._enabled=!1,this._isShow=!1,this.sleeper=new u,this.player=(d=d||{}).player,this.loader=new t,this.parser=new l,this.createRendererInstance(),this.bindEvents()}var y=f.prototype;return y.bindEvents=function(){function d(k){k.paramData.splayer&&_.switchRenderer(o.VttBasicRenderer.RENDER_TYPE_CUSTOM)}var a,_=this,b=this,E=this.player,T=(E.on(e.Private.TextTrackFounded,function(k){if(k.paramData.from==="user")_.hasUserTracks=!0;else if(_.hasUserTracks)return;k=k.paramData.textTracks,k&&k.length&&(_.enabled=!0,_.trackConfigs=k.map(function(P){return v({},P,{label:P.label||P.srclang,language:P.srclang})}),_.trackConfigs.forEach(function(P){_.activeRenderer.addTrack(P),E.getOptions().controlBarVisibility==="always"&&_.activeRenderer.forceUpdateCuesStyle({transform:"translateY("+("-"+g+"px")+")"},_.parser.cues)}))}),E.on(e.Private.UserTrackReset,function(){_.hasUserTracks=!1}),E.on(e.Player.H265PlayInfo,d),E.on(e.Player.H266PlayInfo,d),n.IS_IOS?(a=!1,E.on(e.Player.RequestFullScreen,function(){a=!0}),r.on(E.tag,"webkitendfullscreen",function(){a=!1}),r.on(E.tag.textTracks,"change",function(){var k;_.sleeper.isSleep||(_.sleeper.sleep(1e3),_.isCustomRenderer)||a&&(k=E.tag.textTracks,(k=Array.from(k).find(function(P){return P.mode==="showing"}))?_.activeTrackConfig&&_.activeTrackConfig.language===k.language||(_.switchTrack(k.language),E.trigger(e.Private.SelectorValueChange,{type:"cc",text:k.label})):E.trigger(e.Private.CCStateChanged,{value:"off",lang:""}))})):(E.on(e.Player.RequestFullScreen,this.adjustLayout.bind(this)),E.on(e.Player.CancelFullScreen,this.adjustLayout.bind(this)),T=s.debounce(function(){b.isCustomRenderer&&b.activeRenderer.resetCuesStyle(_.parser.cues)},100),r.on(window,"resize",T)),s.throttle(function(){b.isShow&&(b.activeRenderer.forceUpdateCuesStyle({transform:"translateY("+("-"+g+"px")+")"},b.parser.cues),b.isCustomRenderer)&&b.player.paused()&&(b.activeRenderer.hide(),b.activeRenderer.restore())},100)),T=(E.on(e.Private.ShowBar,T),s.throttle(function(){b.isShow&&(b.activeRenderer.forceUpdateCuesStyle({transform:"none"},b.parser.cues),b.isCustomRenderer)&&b.player.paused()&&(b.activeRenderer.hide(),b.activeRenderer.restore())},100));E.on(e.Private.HideBar,T),E.on(e.Private.VttHide,function(){_.hide()}),E.on(e.Private.VttSwitchTrack,function(k){_.switchTrack(k.paramData)}),E.on(e.Private.VttClearTracks,function(){_.reset()})},y.createRendererInstance=function(d){this.activeRenderer&&this.activeRenderer.dispose();var a=this.player.getOptions(),_={player:this.player};this.adaptPlatform(),d?d===o.VttBasicRenderer.RENDER_TYPE_NATIVE?this.activeRenderer=new o.NativeRenderer(_):(_.overlayId=this.getOverlayId(),this.activeRenderer=new o.CustomRenderer(_)):a.useNativeTextRenderer?this.activeRenderer=new o.NativeRenderer(_):(_.overlayId=this.getOverlayId(),this.activeRenderer=new o.CustomRenderer(_))},y.switchTrack=function(d){var a,_=this;this.trackConfigs&&this.trackConfigs.length&&(this.activeTrackConfig&&(this.parser.dispose(),this.parser=new l,this.activeRenderer.clearTrack(this.activeTrackConfig.language),this.activeRenderer.hide()),this.activeTrackConfig=d,a=this.trackConfigs.find(function(b){return b.language===d}))&&(a=a._loaded?"":(a||{}).src,this.loadVtt(a,function(){_.parseVtt(),_.activeRenderer.addCues(_.parser.cues,_.activeTrackConfig.language),_.show()}))},y.adaptPlatform=function(){var d=this.player.getOptions();n.IS_IOS&&(d.useNativeTextRenderer=!0)},y.loadVtt=function(d,a){var _=this;d?this.loader.loadFromUrl(d,function(b){_.activeTrackConfig._loaded=!0,_.vttText[_.activeTrackConfig.language]=b,a&&a()}):a&&a()},y.show=function(){this._isShow=!0,this.isCustomRenderer&&this.startTickTimeListener(),this.activeRenderer.show(this.activeTrackConfig.language);var d=this.player.el().getElementsByClassName("prism-controlbar")[0];d&&((d=d.style)==null?void 0:d.display)==="block"&&this.activeRenderer.forceUpdateCuesStyle({transform:"translateY("+("-"+g+"px")+")"},this.parser.cues)},y.hide=function(){this._isShow=!1,this.clearTicker(),this.activeRenderer.hide()},y.switchRenderer=function(d){var a=this,_=o.VttBasicRenderer.RENDER_TYPE_NATIVE,b=o.VttBasicRenderer.RENDER_TYPE_CUSTOM;(d===_&&this.activeRenderer.type!==_||d===b&&this.activeRenderer.type!==b)&&(this.createRendererInstance(d),this.trackConfigs.forEach(function(E){return a.activeRenderer.addTrack(E)}),this.activeRenderer.addCues(this.parser.cues,this.activeTrackConfig.language),this.show())},y.parseVtt=function(){this.parser.parse(this.vttText[this.activeTrackConfig.language])},y.adjustLayout=function(){var d=this;this.isShow&&this.isCustomRenderer&&(this.activeRenderer.hide(),setTimeout(function(){d.activeRenderer.restore()},300))},y.startTickTimeListener=function(){var d=this;this.clearTicker(),this.tick(function(){var a=d.player.getCurrentTime();isNaN(a)||d.activeRenderer.renderCues(d.findTargetCues(a))})},y.tick=function(d){var a=this;this.tickTimer=requestAnimationFrame(function(){try{d()}catch(_){console.log("e",_)}a.tick(d)})},y.clearTicker=function(){this.tickTimer&&(cancelAnimationFrame(this.tickTimer),this.tickTimer=null)},y.getOverlayId=function(){var d=(this.player.el().getElementsByClassName("prism-text-overlay")||[])[0];if(d)return d.id},y.findTargetCues=function(d){if(this.parser&&d!==this.prevPosition){this.prevPosition=d;for(var a=[],_=0;_<this.parser.cues.length;_++){var b=this.parser.cues[_];if(d>=b.startTime&&d<=b.endTime)a.push(b);else if(d<b.startTime)break}return a}},y.reset=function(){this.clearTicker(),this.parser&&this.parser.reset(),this.activeRenderer&&this.activeRenderer.reset()},y.dispose=function(){this.clearTicker(),this.parser&&(this.parser.dispose(),this.parser=null),this.activeRenderer&&(this.activeRenderer.dispose(),this.activeRenderer=null),this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.prevPosition=null,this._enabled=!1,this._isShow=!1},p(f,[{key:"isShow",get:function(){return this._isShow}},{key:"enabled",get:function(){return this._enabled},set:function(d){this._enabled=d}},{key:"isCustomRenderer",get:function(){if(this.activeRenderer)return this.activeRenderer.type===o.VttBasicRenderer.RENDER_TYPE_CUSTOM}},{key:"activeTrackConfig",get:function(){var d;return(d=this.trackConfigs)==null?void 0:d.find(function(a){return a._isActive})},set:function(d){this.trackConfigs.forEach(function(a){return a._isActive=a.language===d})}}])})(),u=(()=>{function f(){this.value=!1,this.timer=null}return f.prototype.sleep=function(y){var d=this;this.timer&&clearTimeout(this.timer),this.value=!0,this.timer=setTimeout(function(){d.value=!1},y)},p(f,[{key:"isSleep",get:function(){return this.value}}])})();m.exports=c},{"../../lib/event":38,"../../lib/ua":53,"../../player/base/event/eventtype":77,"../../ui/component/util":173,"./vtt-loader":61,"./vtt-parser":62,"./vtt-renderer":63}],60:[function(r,m,W){function v(){return(v=Object.assign?Object.assign.bind():function(g){for(var c=1;c<arguments.length;c++){var u,f=arguments[c];for(u in f)!{}.hasOwnProperty.call(f,u)||(g[u]=f[u])}return g}).apply(null,arguments)}function h(g,c){g.prototype=Object.create(c.prototype),p(g.prototype.constructor=g,c)}function p(g,c){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,f){return u.__proto__=f,u})(g,c)}function l(g,c){for(var u=0;u<c.length;u++){var f=c[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(g,(y=>typeof(y=((d,a)=>{if(typeof d!="object"||!d)return d;var _=d[Symbol.toPrimitive];if(_===void 0)return(a==="string"?String:Number)(d);if(typeof(_=_.call(d,a||"default"))!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")})(y,"string"))=="symbol"?y:y+"")(f.key),f)}}function o(g,c,u){return c&&l(g.prototype,c),u&&l(g,u),Object.defineProperty(g,"prototype",{writable:!1}),g}var t=r("../../lib/data"),e={DISABLED:"disabled",SHOWING:"showing",HIDDEN:"hidden"},n={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",METADATA:"metadata",CHAPTERS:"chapters"},r=(g=>{function c(y){var y=v({},y=y===void 0?{}:y,{kind:y.kind||n.SUBTITLES,language:y.language||y.srclang||""}),d=y.mode||e.DISABLED;return-1<[n.METADATA,n.CHAPTERS].indexOf(y.kind)&&(d=e.HIDDEN),y.mode=d,(d=g.call(this,y)||this)._cues=[],d._activeCues=[],d._settings={},d._nativeTrack=null,d._extData={},d._settings=y,d}h(c,g);var u=c.prototype;return u.setExtData=function(f){this._extData=v({},this._extData,f=f===void 0?{}:f)},u.addCue=function(f){this._cues.push(f),this.nativeTrack&&this.nativeTrack.addCue(f)},u.removeCue=function(f){this._cues=this._cues.filter(function(y){return y!==f}),this.nativeTrack&&this.nativeTrack.removeCue(f)},o(c,[{key:"default",get:function(){return this._settings.default}},{key:"mode",get:function(){return this._settings.mode},set:function(f){this._settings.mode=f,this.nativeTrack&&(this.nativeTrack.mode=f)}},{key:"language",get:function(){return this._settings.language},set:function(f){this._settings.language=f,this.nativeTrack&&(this.nativeTrack.language=f)}},{key:"cues",get:function(){return this._cues}},{key:"activeCues",get:function(){return this._activeCues}},{key:"nativeTrack",get:function(){return this._nativeTrack},set:function(f){this._nativeTrack=f}}])})(o(function(g){this._id=(g=g===void 0?{}:g).id||"prism-track-"+t.guid(),this._kind=g.kind||"",this._language=g.language||"",this._label=g.label||""},[{key:"label",get:function(){return this._label},set:function(g){this._label=g}},{key:"id",get:function(){return this._id}},{key:"kind",get:function(){return this._kind}},{key:"language",get:function(){return this._language}}])),s=(g=>{function c(){return g.call(this)||this}return h(c,g),c})((()=>{function g(){this._trackList=[]}return g.prototype.addTrack=function(c){var u=this.length;""+u in this||Object.defineProperty(this,u,{get:function(){return this._trackList[u]}}),this._trackList.indexOf(c)===-1&&this._trackList.push(c)},o(g,[{key:"length",get:function(){return this._trackList.length}},{key:"list",get:function(){return this._trackList}}])})());m.exports.TextTrack=r,m.exports.TextTrackList=s,m.exports.TRACK_MODE=e,m.exports.TRACK_KIND=n},{"../../lib/data":35}],61:[function(S,m,W){var v=S("../io");m.exports=(()=>{function h(){}return h.prototype.loadFromUrl=function(p,l){v.get(p,function(o){l(o)},function(o,t){console.log("ERR",o,t)})},h})()},{"../io":45}],62:[function(p,m,W){function v(l,o){for(var t=0;t<o.length;t++){var e=o[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(l,(n=>typeof(n=((r,s)=>{if(typeof r!="object"||!r)return r;var g=r[Symbol.toPrimitive];if(g===void 0)return(s==="string"?String:Number)(r);if(typeof(g=g.call(r,s||"default"))!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")})(n,"string"))=="symbol"?n:n+"")(e.key),e)}}var h=p("./vttjs").WebVTT,p=(()=>{function l(){var n=this;this._cues=[],this._regions=[],this.parser=new h.Parser(window,h.StringDecoder()),this.parser.onregion=function(r){n._regions.push(r)},this.parser.oncue=function(r){n._cues.push(r)},this.parser.onflush=function(){},this.parser.onparsingerror=function(r){}}var o,t,e=l.prototype;return e.parse=function(n){this.parser.parse(n),this.parser.flush()},e.reset=function(){this.parser.flush(),this._cues=[],this._regions=[]},e.dispose=function(){this.parser.flush(),this.parser=null,this._cues=[],this._regions=[]},e=l,(o=[{key:"cues",get:function(){return this._cues}}])&&v(e.prototype,o),t&&v(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e})();m.exports=p},{"./vttjs":64}],63:[function(g,m,W){function v(u,f){for(var y=0;y<f.length;y++){var d=f[y];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,(a=>typeof(a=((_,b)=>{if(typeof _!="object"||!_)return _;var E=_[Symbol.toPrimitive];if(E===void 0)return(b==="string"?String:Number)(_);if(typeof(E=E.call(_,b||"default"))!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")})(a,"string"))=="symbol"?a:a+"")(d.key),d)}}function h(){return(h=Object.assign?Object.assign.bind():function(u){for(var f=1;f<arguments.length;f++){var y,d=arguments[f];for(y in d)!{}.hasOwnProperty.call(d,y)||(u[y]=d[y])}return u}).apply(null,arguments)}function p(u,f){u.prototype=Object.create(f.prototype),l(u.prototype.constructor=u,f)}function l(u,f){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,d){return y.__proto__=d,y})(u,f)}g("../../player/base/event/eventtype");var c=g("./text-track"),o=g("./vttjs").WebVTT,t=g("../../lib/dom"),e=c.TextTrack,n=c.TextTrackList,r=c.TRACK_MODE,s=(c.TRACK_KIND,(()=>{function u(y){this.player=null,this.type=null,this.trackList=null,this.overrideStyle={},this.player=(y=y||{}).player,this.defineTextTrackGetter(),this.trackList=new n}var f=u.prototype;return f.log=function(){for(var y,d=arguments.length,a=new Array(d),_=0;_<d;_++)a[_]=arguments[_];(y=console).log.apply(y,["[LOG:"+this.type+"]"].concat(a))},f.defineTextTrackGetter=function(){var y=this;this.player.getTextTracks=function(){return y.trackList||[]}},f.show=function(y){y=this.findTrackByLanguage(y),y&&(y.mode=r.SHOWING)},f.findTrackByLanguage=function(y){return this.trackList.list.find(function(d){return d.language===y})},f.clearCurrentCues=function(y){if(y){var d=y.mode;if(d===r.DISABLED&&(y.mode=r.HIDDEN),y.cues)for(var a=y.cues.length;a--;)y.removeCue(y.cues[a]);d===r.DISABLED&&(y.mode=d)}},f.addTrack=function(){},f.addCues=function(){},f.restore=function(){},f.renderCues=function(){},f.updateCuesStyle=function(){},f.clearTrack=function(y){this.clearCurrentCues(this.findTrackByLanguage(y))},f.clearAllTracks=function(){var y=this;this.trackList&&this.trackList.length&&this.trackList.list.forEach(function(d){d.mode=r.DISABLED,y.clearCurrentCues(d)}),this.trackList=new n},f.reset=function(){this.hide(),this.clearAllTracks()},f.dispose=function(){this.hide(),this.clearAllTracks(),this.player&&this.player.getTextTracks&&(this.player.getTextTracks=null),this.player=null,this.type=null},u})()),g=(s.RENDER_TYPE_CUSTOM="CUSTOM",s.RENDER_TYPE_NATIVE="NATIVE",(u=>{function f(d){var a=u.call(this,d)||this;return a.overlayId=null,a.currentCues=null,d=d||{},a.type=s.RENDER_TYPE_CUSTOM,a.overlayId=d.overlayId,a}p(f,u);var y=f.prototype;return y.addTrack=function(d){var a=new e({kind:d.kind,label:d.label,language:d.language,default:d.default});a.mode=d.default?r.SHOWING:r.DISABLED,this.trackList.addTrack(a)},y.hide=function(){return o.processCues(window,[],document.getElementById(this.overlayId))},y.restore=function(){this.currentCues&&(this.currentCues.forEach(function(d){return d.displayState=null}),o.processCues(window,this.currentCues,this.overlayEl),this.updateCuesStyle(this.currentCues))},y.renderCues=function(d){d&&(this.currentCues=d,this.overlayEl||(this.overlayEl=document.getElementById(this.overlayId)),o.processCues(window,d,this.overlayEl),this.updateCuesStyle(d))},y.updateCuesStyle=function(d){var a=this;d.forEach(function(_){var b,E=_.displayState;E._styleSetDone||E&&(E.setAttribute("class","prism-cue"),a.overlayEl||(a.overlayEl=document.getElementById(a.overlayId)),_=a.overlayEl.offsetWidth,b=a.overlayEl.offsetHeight,(_=Math.min(_,b))&&(E.style.fontSize=.05*_+"px",E.style.height="auto",E.style.top="auto"),44<((T,k)=>(T=T.getBoundingClientRect(),k.getBoundingClientRect().bottom-T.bottom))(E,a.overlayEl)&&(a.overrideStyle.transform="none"),Object.keys(a.overrideStyle).forEach(function(T){a.tryUpdateStyle(E,T,a.overrideStyle[T])}),E._styleSetDone=!0)})},y.updateOverrideStyle=function(d){this.overrideStyle=h({},this.overrideStyle,d=d===void 0?{}:d)},y.forceUpdateCuesStyle=function(d,a){a===void 0&&(a=[]),this.updateOverrideStyle(d=d===void 0?{}:d),this.resetCuesStyle(a)},y.tryUpdateStyle=function(d,a,_){try{d.style[a]=_}catch(b){}},y.resetCuesStyle=function(d){d&&d.length&&d.forEach(function(a){a.displayState&&(a.displayState=null)})},y.dispose=function(){u.prototype.dispose.call(this),this.overlayId=null,this.currentCues=null},f})(s)),c=(u=>{function f(_){return(_=u.call(this,_=_===void 0?{}:_)||this).type=s.RENDER_TYPE_NATIVE,_}p(f,u);var y,d,a=f.prototype;return a.addTrack=function(_){var b=this.player.tag,E=Array.from(b.textTracks)||[],T=E.find(function(k){return k.language===_.language}),E=T?(this.log("sameLangTrack",T,E),this.clearCurrentCues(T),T.kind=_.kind,T.label=_.label,T):b.addTextTrack(_.kind,_.label,_.language),T=(E.mode=_.default?r.SHOWING:r.DISABLED,new e(_));T.nativeTrack=E,this.trackList.addTrack(T)},a.addCues=function(_,b){var E;_&&_.length&&(E=this.trackList.list.find(function(T){return T.language===b}))&&_.forEach(function(T){E.addCue(T)})},a.hide=function(){this.trackList.list.forEach(function(_){_.mode=_.mode===r.SHOWING?r.HIDDEN:_.mode})},a.invalidAllTracks=function(){},a.forceUpdateCuesStyle=function(_,b){t.addCssByStyle("video::-webkit-media-text-track-container{transform: "+_.transform+";}")},a.dispose=function(){u.prototype.dispose.call(this)},a=f,(y=[{key:"activeTrack",get:function(){return this.trackList.list.find(function(_){return _.mode===r.SHOWING})}}])&&v(a.prototype,y),d&&v(a,d),Object.defineProperty(a,"prototype",{writable:!1}),a})(s);m.exports.VttBasicRenderer=s,m.exports.CustomRenderer=g,m.exports.NativeRenderer=c,m.exports.CTR_BAR_HEIGHT=44},{"../../lib/dom":37,"../../player/base/event/eventtype":77,"./text-track":60,"./vttjs":64}],64:[function(S,m,W){m.exports={WebVTT:S("./vtt.js").WebVTT}},{"./vtt.js":65}],65:[function(S,m,W){var v=this;function h(w,D){return D===void 0&&(D=1),"rgba("+[parseInt(w.substring(0,2),16),parseInt(w.substring(2,4),16),parseInt(w.substring(4,6),16),D].join(",")+")"}var p,l=1;function o(w,D,U){switch(U){case"webvtt.font.color":case"webvtt.font.opacity":var M=Services.prefs.getCharPref("webvtt.font.color"),O=Services.prefs.getIntPref("webvtt.font.opacity")/100;p.fontSet=h(M,O);break;case"webvtt.font.scale":l=Services.prefs.getIntPref("webvtt.font.scale")/100;break;case"webvtt.bg.color":case"webvtt.bg.opacity":M=Services.prefs.getCharPref("webvtt.bg.color"),O=Services.prefs.getIntPref("webvtt.bg.opacity")/100,p.backgroundSet=h(M,O);break;case"webvtt.edge.color":case"webvtt.edge.type":M=Services.prefs.getIntPref("webvtt.edge.type"),O=Services.prefs.getCharPref("webvtt.edge.color"),p.edgeSet=["","0px 0px ","4px 4px 4px ","-2px -2px ","2px 2px "][M]+h(O)}}typeof Services!="undefined"&&(p={},["webvtt.font.color","webvtt.font.opacity","webvtt.font.scale","webvtt.bg.color","webvtt.bg.opacity","webvtt.edge.color","webvtt.edge.type"].forEach(function(w){o(0,0,w),Services.prefs.addObserver(w,o,!1)}));var t=Object.create||function(w){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=w,new e};function e(){}function n(w,D){this.name="ParsingError",this.code=w.code,this.message=D||w.message}function r(w){function D(U,M,O,B){return 3600*(0|U)+60*(0|M)+(0|O)+(0|B)/1e3}return w=w.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/),w?w[3]?D(w[1],w[2],w[3].replace(":",""),w[4]):59<w[1]?D(w[1],w[2],0,w[4]):D(0,w[1],w[2],w[4]):null}function s(){this.values=t(null)}function g(w,D,U,M){var O,B,j=M?w.split(M):[w];for(O in j)typeof j[O]=="string"&&(B=j[O].split(U)).length===2&&D(B[0],B[1])}((n.prototype=t(Error.prototype)).constructor=n).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},s.prototype={set:function(w,D){this.get(w)||D===""||(this.values[w]=D)},get:function(w,D,U){return U?this.has(w)?this.values[w]:D[U]:this.has(w)?this.values[w]:D},has:function(w){return w in this.values},alt:function(w,D,U){for(var M=0;M<U.length;++M)if(D===U[M]){this.set(w,D);break}},integer:function(w,D){/^-?\d+$/.test(D)&&this.set(w,parseInt(D,10))},percent:function(w,D){return!!(D.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(D=parseFloat(D))&&D<=100)&&(this.set(w,D),!0)}};var c={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200E","&rlm;":"\u200F","&nbsp;":"\xA0"},u={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},f={v:"title",lang:"lang"},y={rt:"ruby"};function d(w,D){function U(Z){return c[Z]}for(var M,O,B,j,H,R,L,C=w.document.createElement("div"),z=C,ie=[];L=void 0,(L=D?(L=(L=D.match(/^([^<]*)(<[^>]*>?)?/))[1]||L[2],D=D.substr(L.length),L):null)!==null;)L[0]==="<"?L[1]==="/"?ie.length&&ie[ie.length-1]===L.substr(2).replace(">","")&&(ie.pop(),z=z.parentNode):(B=r(L.substr(1,L.length-2)))?(M=w.document.createProcessingInstruction("timestamp",B),z.appendChild(M)):(O=L.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(B=O[1],j=O[3],R=H=void 0,R=u[B],M=R?((H=w.document.createElement(R)).localName=R,(R=f[B])&&j&&(H[R]=j.trim()),H):null)&&(B=z,y[(R=M).localName]&&y[R.localName]!==B.localName||(O[2]&&(M.className=O[2].substr(1).replace("."," ")),ie.push(O[1]),z.appendChild(M),z=M)):z.appendChild(w.document.createTextNode((Z=>{for(;O=Z.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)Z=Z.replace(O[0],U);return Z})(L)));return C}var a=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function _(w){var D=[],U="";if(w&&w.childNodes){for(O(D,w);U=function B(j){var H,R,L;return j&&j.length?(R=(H=j.pop()).textContent||H.innerText)?(L=R.match(/^.*(\n|\r)/))?L[j.length=0]:R:H.tagName==="ruby"?B(j):H.childNodes?(O(j,H),B(j)):void 0:null}(D);)for(var M=0;M<U.length;M++)if((B=>{for(var j=0;j<a.length;j++){var H=a[j];if(B>=H[0]&&B<=H[1])return 1}})(U.charCodeAt(M)))return"rtl"}return"ltr";function O(B,j){for(var H=j.childNodes.length-1;0<=H;H--)B.push(j.childNodes[H])}}function b(){}function E(w,D,U){var M=typeof navigator!="undefined"&&/MSIE\s8\.0/.test(navigator.userAgent),j="rgba(255, 255, 255, 1)",O="rgba(0, 0, 0, 0.8)",B="",j=(p!==void 0&&(j=p.fontSet,O=p.backgroundSet,B=p.edgeSet),M&&(j="rgb(255, 255, 255)",O="rgb(0, 0, 0)"),b.call(this),this.cue=D,this.cueDiv=d(w,D.text),{color:j,backgroundColor:O,textShadow:B,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"}),H=(M||(j.writingMode=D.vertical===""?"horizontal-tb":D.vertical==="lr"?"vertical-lr":"vertical-rl",j.unicodeBidi="plaintext"),this.applyStyles(j,this.cueDiv),this.div=w.document.createElement("div"),j={textAlign:D.align==="middle"?"center":D.align,font:U.font,whiteSpace:"pre-line",position:"absolute"},M||(j.direction=_(this.cueDiv),j.writingMode=D.vertical===""?"horizontal-tb":D.vertical==="lr"?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(j),this.div.appendChild(this.cueDiv),0);switch(D.positionAlign){case"start":H=D.position;break;case"middle":H=D.position-D.size/2;break;case"end":H=D.position-D.size}D.vertical===""?this.applyStyles({left:this.formatStyle(H,"%"),width:this.formatStyle(D.size,"%")}):this.applyStyles({top:this.formatStyle(H,"%"),height:this.formatStyle(D.size,"%")}),this.move=function(R){this.applyStyles({top:this.formatStyle(R.top,"px"),bottom:this.formatStyle(R.bottom,"px"),left:this.formatStyle(R.left,"px"),right:this.formatStyle(R.right,"px"),height:this.formatStyle(R.height,"px"),width:this.formatStyle(R.width,"px")})}}function T(w){var D,U,M,O,B=typeof navigator!="undefined"&&/MSIE\s8\.0/.test(navigator.userAgent);w.div&&(D=w.div.offsetHeight,U=w.div.offsetWidth,M=w.div.offsetTop,O=(O=(O=w.div.childNodes)&&O[0])&&O.getClientRects&&O.getClientRects(),w=w.div.getBoundingClientRect(),O=O?Math.max(O[0]&&O[0].height||0,w.height/O.length):0),this.left=w.left,this.right=w.right,this.top=w.top||M,this.height=w.height||D,this.bottom=w.bottom||M+(w.height||D),this.width=w.width||U,this.lineHeight=O!==void 0?O:w.lineHeight,B&&!this.lineHeight&&(this.lineHeight=13)}function k(w,D,U,M){var O,B=new T(D),j=D.cue,H=(q=>{if(typeof q.line=="number"&&(q.snapToLines||0<=q.line&&q.line<=100))return q.line;if(!q.track||!q.track.textTrackList||!q.track.textTrackList.mediaElement)return-1;for(var x=q.track,F=x.textTrackList,Y=0,re=0;re<F.length&&F[re]!==x;re++)F[re].mode==="showing"&&Y++;return-1*++Y})(j),R=[];if(j.snapToLines){switch(j.vertical){case"":R=["+y","-y"],O="height";break;case"rl":R=["+x","-x"],O="width";break;case"lr":R=["-x","+x"],O="width"}var L=B.lineHeight,C=L*Math.round(H),z=U[O]+L,ie=R[0];Math.abs(C)>z&&(C=C<0?-1:1,C*=Math.ceil(z/L)*L),H<0&&(C+=j.vertical===""?U.height:U.width,R=R.reverse()),B.move(ie,C)}else{var Z=B.lineHeight/U.height*100;switch(j.lineAlign){case"middle":H-=Z/2;break;case"end":H-=Z}switch(j.vertical){case"":D.applyStyles({top:D.formatStyle(H,"%")});break;case"rl":D.applyStyles({left:D.formatStyle(H,"%")});break;case"lr":D.applyStyles({right:D.formatStyle(H,"%")})}R=["+y","-x","+x","-y"],B=new T(D)}z=((q,x)=>{for(var F,Y=new T(q),re=1,le=0;le<x.length;le++){for(;q.overlapsOppositeAxis(U,x[le])||q.within(U)&&q.overlapsAny(M);)q.move(x[le]);if(q.within(U))return q;var ae=q.intersectPercentage(U);ae<re&&(F=new T(q),re=ae),q=new T(Y)}return F||Y})(B,R),D.move(z.toCSSCompatValues(U))}function P(){}b.prototype.applyStyles=function(w,D){for(var U in D=D||this.div,w)w.hasOwnProperty(U)&&(D.style[U]=w[U])},b.prototype.formatStyle=function(w,D){return w===0?0:w+D},(E.prototype=t(b.prototype)).constructor=E,T.prototype.move=function(w,D){switch(D=D!==void 0?D:this.lineHeight,w){case"+x":this.left+=D,this.right+=D;break;case"-x":this.left-=D,this.right-=D;break;case"+y":this.top+=D,this.bottom+=D;break;case"-y":this.top-=D,this.bottom-=D}},T.prototype.overlaps=function(w){return this.left<w.right&&this.right>w.left&&this.top<w.bottom&&this.bottom>w.top},T.prototype.overlapsAny=function(w){for(var D=0;D<w.length;D++)if(this.overlaps(w[D]))return!0;return!1},T.prototype.within=function(w){return this.top>=w.top&&this.bottom<=w.bottom&&this.left>=w.left&&this.right<=w.right},T.prototype.overlapsOppositeAxis=function(w,D){switch(D){case"+x":return this.left<w.left;case"-x":return this.right>w.right;case"+y":return this.top<w.top;case"-y":return this.bottom>w.bottom}},T.prototype.intersectPercentage=function(w){return Math.max(0,Math.min(this.right,w.right)-Math.max(this.left,w.left))*Math.max(0,Math.min(this.bottom,w.bottom)-Math.max(this.top,w.top))/(this.height*this.width)},T.prototype.toCSSCompatValues=function(w){return{top:this.top-w.top,bottom:w.bottom-this.bottom,left:this.left-w.left,right:w.right-this.right,height:this.height,width:this.width}},T.getSimpleBoxPosition=function(w){var D=w.div?w.div.offsetHeight:w.tagName?w.offsetHeight:0,U=w.div?w.div.offsetWidth:w.tagName?w.offsetWidth:0,M=w.div?w.div.offsetTop:w.tagName?w.offsetTop:0;return{left:(w=w.div?w.div.getBoundingClientRect():w.tagName?w.getBoundingClientRect():w).left,right:w.right,top:w.top||M,height:w.height||D,bottom:w.bottom||M+(w.height||D),width:w.width||U}},P.StringDecoder=function(){return{decode:function(w){if(!w)return"";if(typeof w!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(w))}}},P.convertCueToDOMTree=function(w,D){return w&&D?d(w,D):null},P.processCues=function(w,D,U){if(!w||!D||!U)return null;for(;U.firstChild;)U.removeChild(U.firstChild);var M=w.document.createElement("div");if(M.style.position="absolute",M.style.left="0",M.style.right="0",M.style.top="0",M.style.bottom="0",M.style.margin="1.5%",U.appendChild(M),(z=>{for(var ie=0;ie<z.length;ie++)if(z[ie].hasBeenReset||!z[ie].displayState)return 1})(D))for(var O,B,j=[],H=T.getSimpleBoxPosition(M),R={font:Math.round(.05*H.height*100)/100*l+"px sans-serif"},L=0;L<D.length;L++)O=new E(w,B=D[L],R),M.appendChild(O.div),k(0,O,H,j),B.displayState=O.div,j.push(T.getSimpleBoxPosition(O));else for(var C=0;C<D.length;C++)M.appendChild(D[C].displayState)},(P.Parser=function(w,D){this.window=w,this.state="INITIAL",this.buffer="",this.decoder=D||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(w){if(!(w instanceof n))throw w;this.onparsingerror&&this.onparsingerror(w)},parse:function(w){var D=this;function U(){for(var R=D.buffer,L=0;L<R.length&&R[L]!=="\r"&&R[L]!==`
`;)++L;var C=R.substr(0,L);return R[L]==="\r"&&++L,R[L]===`
`&&++L,D.buffer=R.substr(L),C}function M(R){g(R,function(L,C){var z;L==="Region"&&(L=C,z=new s,g(L,function(ie,Z){switch(ie){case"id":z.set(ie,Z);break;case"width":z.percent(ie,Z);break;case"lines":z.integer(ie,Z);break;case"regionanchor":case"viewportanchor":var q,x=Z.split(",");x.length===2&&((q=new s).percent("x",x[0]),q.percent("y",x[1]),q.has("x")&&q.has("y"))&&(z.set(ie+"X",q.get("x")),z.set(ie+"Y",q.get("y")));break;case"scroll":z.alt(ie,Z,["up"])}},/=/,/\s/),z.has("id"))&&((L=new D.window.VTTRegion).width=z.get("width",100),L.lines=z.get("lines",3),L.regionAnchorX=z.get("regionanchorX",0),L.regionAnchorY=z.get("regionanchorY",100),L.viewportAnchorX=z.get("viewportanchorX",0),L.viewportAnchorY=z.get("viewportanchorY",100),L.scroll=z.get("scroll",""),D.onregion&&D.onregion(L),D.regionList.push({id:z.get("id"),region:L}))},/:/)}w&&(D.buffer+=D.decoder.decode(w,{stream:!0}));try{if(D.state==="INITIAL"){if(!/\r\n|\n/.test(D.buffer))return this;var O,B=(O=U()).match(/^WEBVTT([ \t].*)?$/);if(!B||!B[0])throw new n(n.Errors.BadSignature);D.state="HEADER"}for(var j=!1;D.buffer;){if(!/\r\n|\n/.test(D.buffer))return this;switch(j?j=!1:O=U(),D.state){case"HEADER":/:/.test(O)?M(O):O||(D.state="ID");continue;case"NOTE":O||(D.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(O)){D.state="NOTE";break}if(!O)continue;if(D.cue=new D.window.VTTCue(0,0,""),D.state="CUE",O.indexOf("-->")===-1){D.cue.id=O;continue}case"CUE":try{((R,L,C)=>{var z=R;function ie(){var F=r(R);if(F===null)throw new n(n.Errors.BadTimeStamp,"Malformed timestamp: "+z);return R=R.replace(/^[^\sa-zA-Z-]+/,""),F}function Z(){R=R.replace(/^\s+/,"")}if(Z(),L.startTime=ie(),Z(),R.substr(0,3)!=="-->")throw new n(n.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+z);R=R.substr(3),Z(),L.endTime=ie(),Z();var q=R,x=new s;g(q,function(F,Y){switch(F){case"region":for(var re=C.length-1;0<=re;re--)if(C[re].id===Y){x.set(F,C[re].region);break}break;case"vertical":x.alt(F,Y,["rl","lr"]);break;case"line":var le=Y.split(","),ae=le[0];x.integer(F,ae),x.percent(F,ae)&&x.set("snapToLines",!1),x.alt(F,ae,["auto"]),le.length===2&&x.alt("lineAlign",le[1],["start","middle","end"]);break;case"position":le=Y.split(","),x.percent(F,le[0]),le.length===2&&x.alt("positionAlign",le[1],["start","middle","end"]);break;case"size":x.percent(F,Y);break;case"align":x.alt(F,Y,["start","middle","end","left","right"])}},/:/,/\s/),L.region=x.get("region",null),L.vertical=x.get("vertical","");try{L.line=x.get("line","auto")}catch(F){}L.lineAlign=x.get("lineAlign","start"),L.snapToLines=x.get("snapToLines",!0),L.size=x.get("size",100);try{L.align=x.get("align","center")}catch(F){L.align=x.get("align","middle")}try{L.position=x.get("position","auto")}catch(F){L.position=x.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},L.align)}L.positionAlign=x.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},L.align)})(O,D.cue,D.regionList)}catch(R){D.reportOrThrowError(R),D.cue=null,D.state="BADCUE";continue}D.state="CUETEXT";continue;case"CUETEXT":var H=O.indexOf("-->")!==-1;if(!O||H&&(j=!0)){D.oncue&&D.oncue(D.cue),D.cue=null,D.state="ID";continue}D.cue.text&&(D.cue.text+=`
`),D.cue.text+=O;continue;case"BADCUE":O||(D.state="ID");continue}}}catch(R){D.reportOrThrowError(R),D.state==="CUETEXT"&&D.cue&&D.oncue&&D.oncue(D.cue),D.cue=null,D.state=D.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var w=this;try{if(w.buffer+=w.decoder.decode(),!w.cue&&w.state!=="HEADER"||(w.buffer+=`

`,w.parse()),w.state==="INITIAL")throw new n(n.Errors.BadSignature)}catch(D){w.reportOrThrowError(D)}return w.onflush&&w.onflush(),this}},v.WebVTT=P},{}],66:[function(S,m,W){m.exports.VIDEO_TYPE={VOD:"vod",LIVE:"live"},m.exports.TERMINAL_TYPE={PC:"pc",PAD:"pad",PHONE:"phone"},m.exports.EVENT={CREATE:1e3,STARTFETCHDATA:1003,COMPLETEFETCHDATA:1004,PREPARE:1101,PREPAREEND:1102,STARTPLAY:2e3,PLAY:2001,STOP:2002,PAUSE:2003,SEEK:2004,FULLSREEM:2005,QUITFULLSCREEM:2006,RESOLUTION:2007,RESOLUTION_DONE:2008,RECOVER:2010,SEEK_END:2011,PLAYABORT:2012,CANPLAY:2015,FETCHEDIP:2020,CDNDETECT:2021,DETECT:2022,HEVCINFO:2023,UNDERLOAD:3002,LOADED:3001,RETRY:3003,HEARTBEAT:9001,TRACE:9002,DUMP:9003,ERROR:4001,ERRORRETRY:4002,RTSFALLBACK:4003,VOD_REQUEST_FATAL_ERROR:4004,VOD_REQUEST_FATAL_ERROR_RESUME:4005,LICENSE_RESULT:5004,SNAPSHOT:2027,ROTATE:2028,IMAGE:2029,THUMBNAILSTART:2031,THUMBNAILCOMPLETE:2032,CCSTART:2033,CCCOMPLETE:2034,AUDIOTRACKSTART:2033,AUDIOTRACKCOMPLETE:2034},m.exports.AUTOPLAY_RESULT={SUCCEED:"succeed",FAILED:"failed"},m.exports.TRACK_TYPE={VIDEO:0,AUDIO:1,SUBTITLE:2,VOD:3}},{}],67:[function(s,m,W){var v=["args"];function h(){return(h=Object.assign?Object.assign.bind():function(f){for(var y=1;y<arguments.length;y++){var d,a=arguments[y];for(d in a)!{}.hasOwnProperty.call(a,d)||(f[d]=a[d])}return f}).apply(null,arguments)}var p=s("../lib/ua"),l=s("../lib/data"),o=s("../config"),t=s("./util"),e=s("../lib/playerutil"),n=s("./constants"),r=s("./reporter"),s=(()=>{function f(d,a){var _=this;this.player=d,this.cache=new u,this.session=new c,this.fpsObserver=new g,this.reporter=new r(a),this.initData(),this.reporter.sendImmediate(h({},this.reporter.getData(),{e:1e3})),this.listenDocument(),this.cache.observe(this.session,this.reporter,function(){_.updatePlayStatus()}),this.cache.checkStoreLogs()}var y=f.prototype;return y.initData=function(){this.createTime=performance.now(),this.firstFrameTime=null,this.manualPlayTime=null,this.autoPlayResult=null,this.firstFrameTimeline=[],this.backgroundList={bg:[],fg:[]},this.playReported=!1,this.canplayReported=!1,this.vodInfoReported=!1,this.errorCode=null,this.pauseStartTime=0,this.seekStartTime=0,this.waitingStartTime=0,this.seekId=0,this.innerEventId=0,this.session.refresh();var d=this.player.getOptions(),a=t.getUuid(),_=this.getCustomData(d.customData),b=window.devicePixelRatio||1;this.reporter.initData({e:9e3,db:1,dm:"h5",el:[],os:p.os.name,ov:p.os.version,uuid:a,ss:this.makeWH(parseInt(window.screen.width*b),parseInt(window.screen.height*b)),tt:this.getTerminalType(),bt:p.browser.name,bv:p.browser.version,ua:p.USER_AGENT,app_n:this.getHost(window.location.href),av:o.h5Version,install_uuid:a,li_ki:(b=d.license)==null?void 0:b.key,pu:window.location.href,ri:a,vps:this.session.id,tid:d.traceId||void 0,vt:this.getVideoType(d),vu:d.source,srcd:this.getHost(d.source),vid:d.source?void 0:d.vid,pc:this.getUserOptions(d._userOptions),cd:_}),this.reportEvent(n.EVENT.CREATE,{args:{ri:(b=this.player._monitor)==null?void 0:b.sessionId}}),d.autoplay&&this.reportVV()},y.play=function(){this.session.open(),this.reportVV(),this.pauseEnd(),this.fpsObserver.reset()},y.pause=function(){this.pauseStartTime=performance.now(),this.reportEvent(n.EVENT.PAUSE)},y.pauseEnd=function(){var d;this.pauseStartTime&&(d=parseInt(performance.now()-this.pauseStartTime),this.pauseStartTime=0,this.reportEvent(n.EVENT.RECOVER,{args:{cost:d}}))},y.seek=function(){this.seekStartTime=performance.now(),this.reportEvent(n.EVENT.SEEK,{args:{_seekId:++this.seekId}})},y.seekEnd=function(){var d;this.seekStartTime&&(d=parseInt(performance.now()-this.seekStartTime),this.seekStartTime=0,this.reportEvent(n.EVENT.SEEK_END,{args:{cost:d,_seekId:this.seekId}}))},y.waiting=function(){!this.seekStartTime&&this.canplayReported&&(this.waitingStartTime=performance.now(),this.reportEvent(n.EVENT.UNDERLOAD,{args:{speed:this.player.tag.playbackRate}}))},y.waitingEnd=function(){var d;this.waitingStartTime&&(d=parseInt(performance.now()-this.waitingStartTime),this.waitingStartTime=0,this.reportEvent(n.EVENT.LOADED,{args:{cost:d}}))},y.autoPlayHasResult=function(d){this.autoPlayResult||(this.autoPlayResult=d?n.AUTOPLAY_RESULT.SUCCEED:n.AUTOPLAY_RESULT.FAILED)},y.manualPlay=function(){this.manualPlayTime||(this.manualPlayTime=performance.now())},y.firstFrame=function(){var d;this.firstFrameTime||(this.firstFrameTime=performance.now(),(d=(d=this.player._monitor)==null?void 0:d.timeline)&&(this.firstFrameTimeline=this.getTimeline(d)),this.fpsObserver.start(this.player.tag))},y.canplay=function(){this.waitingEnd(),this.canplayReported||(this.canplayReported=!0,this.reportEvent(n.EVENT.CANPLAY))},y.playFinish=function(){this.reportEvent(n.EVENT.STOP),this.reporter.lastRenderInfo({t:Date.now(),vt:this.getVt()}),this.reporter.backgroundStop(this.flag(document.visibilityState==="hidden")),this.doReport(),this.session.close(),this.firstFrame()},y.playError=function(d){this.errorCode=d.error_code;try{delete d.requestId,delete d.uuid,d.sri=d.serverRequestId,delete d.serverRequestId}catch(a){}this.reportEvent(n.EVENT.ERROR,{args:this.pruneEmpty(d)}),this.doReport(),this.session.close()},y.playAbort=function(d,a){this.session.closed||(this.reportEvent(n.EVENT.PLAYABORT,{args:{from:d,url:a}}),this.doReport(),this.session.close())},y.traceLog=function(d){this.reportEvent(n.EVENT.TRACE,{args:{log:d}})},y.mediaMeta=function(d){this.reporter.duration(parseInt(1e3*d.duration)),d.videoWidth&&d.videoHeight&&(this.reporter.videoDefinition(this.makeWH(d.videoWidth,d.videoHeight)),this.vodInfoReported||this.reporter.mediaInfo([{id:1,type:n.TRACK_TYPE.VIDEO,definition:this.makeWH(d.videoWidth,d.videoHeight)},{id:2,type:n.TRACK_TYPE.AUDIO}]),this.reporter.subMediaInfo([{id:1,type:n.TRACK_TYPE.VIDEO,definition:this.makeWH(d.videoWidth,d.videoHeight)},{id:2,type:n.TRACK_TYPE.AUDIO}]))},y.vodMediaInfo=function(d){var a,_=this,b=(this.vodInfoReported=!0,[]),E=[],T="";try{d.PlayInfoList.PlayInfo.forEach(function(k,P){P===0&&(k.StreamType==="audio"?a=(k.Format||"").toUpperCase():(a="AAC",T=k.CodecName)),b.push({idx:P,type:n.TRACK_TYPE.VOD,bitrate:parseInt(1e3*k.Bitrate),codecFormat:k.CodecName,avgFps:Number(k.Fps),definition:_.makeWH(k.Width,k.Height)}),E.push({StreamType:k.StreamType,Definition:k.Definition,Specification:k.Specification,Duration:k.Duration,Encrypt:k.Encrypt,EncryptType:k.EncryptType,Format:k.Format})})}catch(k){}this.reporter.mediaInfo(b),this.reporter.codecFormat(a,T),this.reportEvent(n.EVENT.COMPLETEFETCHDATA,{args:{mi:E}})},y.vodSelectUrl=function(d){this.reporter.startBitrate(parseInt(1e3*d.bitrate))},y.rtsFallback=function(d){this.reportEvent(n.EVENT.RTSFALLBACK,{args:d})},y.vodRequestFatalError=function(d){this.reportEvent(n.EVENT.VOD_REQUEST_FATAL_ERROR,{args:d})},y.vodRequestFatalErrorResume=function(d){this.reportEvent(n.EVENT.VOD_REQUEST_FATAL_ERROR_RESUME,{args:d})},y.updateTraceId=function(d){this.reporter.traceId(d)},y.updateSource=function(d){this.reporter.source(d),this.reporter.videoDomain(this.getHost(d)),this.reporter.containerInfo(this.getContainerInfo(d))},y.reportVV=function(){this.playReported||(this.playReported=!0,this.reportEvent(n.EVENT.STARTPLAY),this.reporter.backgroundPlay(this.flag(document.visibilityState==="hidden")))},y.reportEvent=function(d,a){this.reporter.addEvent(this.makeEvent(h({id:d,e:d},a)))},y.mergeSeek=function(){var P=this.reporter.getAllEvents(),d=0,a=0,_=0,b=[],E=0,T=0,k=(P.forEach(function(w){w._id&&(w.id===n.EVENT.SEEK?((w.t-a<500||w.t-d<500)&&(w._remove=!0,b.push(w.args._seekId),T=T||_),d=w.t):w.id===n.EVENT.SEEK_END&&(a=w.t,_=w._id,b.includes(w.args._seekId))&&(w._remove=!0,E++))}),E),P=P.filter(function(w){return w._id===T&&(w._remove=!0),w.id===n.EVENT.SEEK_END&&k--,k===1&&(w._remove=!1,k--,w.args.merge=E),!w._remove});this.reporter.replaceEvents(P)},y.removeInternalEventsVars=function(){var d=this.reporter.getAllEvents().map(function(a){var _=h({},a,{args:h({},a.args)});return Object.keys(_).forEach(function(b){b.indexOf("_")===0&&delete _[b],_.args&&Object.keys(_.args).forEach(function(E){E.indexOf("_")===0&&delete _.args[E]})}),_});this.reporter.replaceEvents(d)},y.listenDocument=function(){var d=this,a=(document.addEventListener("visibilitychange",function(){var _;d.player.__disposed||((_=document.visibilityState)==="visible"?d.backgroundList.fg.push(Date.now()):_==="hidden"&&(d.backgroundList.bg.push(Date.now()),d.session.closed||d.doReport(!0)),d.cache.update(d.session.id,d.reporter.getData()))}),p.IS_PC?"beforeunload":"pagehide");window.addEventListener(a,function(){d.player.__disposed||d.playAbort("windowClose")})},y.updatePlayStatus=function(){this.updateSource(this.getPlayerOptions().source),this.firstFrameTime&&this.reporter.firstRenderInfo(this.getFirstRenderInfo()),this.reporter.videoDropInfo(this.getVideoDropInfo()),this.reporter.backgroundList(this.backgroundList),this.reporter.playSummary(this.getPlaySummary())},y.doReport=function(d){this.updatePlayStatus(),this.mergeSeek(),this.removeInternalEventsVars(),this.reporter.sequence(this.session.reportSequence++||void 0),d?this.reporter.report():(navigator.onLine?this.cache.clear(this.session.id):this.cache.update(this.session.id,this.reporter.getData()),this.reporter.flush(),this.initData())},y.getPlaySummary=function(){var d=parseInt(this.player._playingTime),a=parseInt(this.player._stuckTime),_=parseInt(this.player._stuckCount),E=this.reporter.getEvent(n.EVENT.SEEK_END),b=0,E=(E.length&&(b=parseInt(E.reduce(function(T,k){return T+k.args.cost},0)/E.length)),this.reporter.getData().sbr);return{pl:d,bf:a,bfc:_,ask:b,df:Number(this.fpsObserver.getFps()),vv:this.flag(this.playReported),ec:this.flag(this.errorCode),ecd:this.errorCode,apb:E}},y.getFirstRenderInfo=function(){var d=0,d=(this.autoPlayResult===n.AUTOPLAY_RESULT.SUCCEED?d=this.createTime:this.manualPlayTime&&(d=this.manualPlayTime),parseInt(this.firstFrameTime-d));return{efc:Math.max(d,0),timeline_web:this.firstFrameTimeline}},y.getVideoDropInfo=function(){var d=this.player.tag;if(d&&d instanceof HTMLVideoElement&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype)return{dc:(d=d.getVideoPlaybackQuality()).droppedVideoFrames,tc:d.totalVideoFrames}},y.getVt=function(){return Math.floor(1e3*this.player.getCurrentTime())},y.getTerminalType=function(){var d=n.TERMINAL_TYPE.PC;return p.IS_IPAD?d=n.TERMINAL_TYPE.PAD:p.os.phone&&(d=n.TERMINAL_TYPE.PHONE),d},y.getHost=function(d){if(d){var a="";try{a=new URL(d).host}catch(_){a=p.getHost(d)}return a}},y.getContainerInfo=function(d){var a="";(d=d===void 0?"":d).indexOf("//")===0&&(d=""+window.location.protocol+d+":");try{var _=new URL(d).pathname;1<_.split(".").length&&(a=_.split(".").pop())}catch(b){a=""}return{proto:d.split("://")[0],mb:0,cn:a}},y.getVideoType=function(d){var a=n.VIDEO_TYPE.VOD;return a=d.isLive||e.isRts(d.source)?n.VIDEO_TYPE.LIVE:a},y.getUserOptions=function(d){return d=h({},d),d.playauth&&(d.playauth=1,d.PlayAuth=void 0),d.accessKeyId&&(d.accessKeyId=1),d.accessKeySecret&&(d.accessKeySecret=1),d.securityToken&&(d.securityToken=1),this.pruneEmpty(d)},y.getTimeline=function(d){var a;return d?(a={},d.forEach(function(_,b){try{var E=b?_.ts-d[b-1].ts:0;a["tl_"+_.name]=b+"#"+parseInt(E)}catch(T){}}),a):{}},y.getPlayerOptions=function(){return this.player?this.player.getOptions():{}},y.getNameByValue=function(d,a){return Object.keys(d).find(function(_){return d[_]===a})},y.getCustomData=function(d){if(typeof d=="string"&&!(50<d.length))return d},y.makeEvent=function(_){var _=_||{},a=_.args,_=((b,E)=>{if(b==null)return{};var T,k={};for(T in b)if({}.hasOwnProperty.call(b,T)){if(E.indexOf(T)!==-1)continue;k[T]=b[T]}return k})(_,v);return h({_id:++this.innerEventId,t:Date.now()},_,{args:h({vt:this.getVt()},this.pruneEmpty(a||{}))})},y.makeWH=function(d,a){return d+"*"+a},y.flag=function(d){return d?1:0},y.pruneEmpty=function(d){return Object.keys(d).reduce(function(a,_){return d[_]!==void 0&&d[_]!==""&&(a[_]=d[_]),a},{})},y.destroy=function(){this.cache.dispose()},f})(),g=(()=>{function f(){this.fps=0,this.frameCount=0,this.lastStartTime=0}var y=f.prototype;return y.start=function(d){var a,_=this;!d||!1 in HTMLVideoElement.prototype||d.requestVideoFrameCallback(a=function(b){_.lastStartTime===0?_.lastStartTime=b:(b=(b-_.lastStartTime)/1e3,_.fps=(++_.frameCount/b).toFixed(2)),d.requestVideoFrameCallback(a)})},y.reset=function(){this.lastStartTime=0,this.frameCount=0},y.getFps=function(){return this.fps},f})(),c=(()=>{function f(){this.id=l.guid(),this.closed=!1,this.reportSequence=0}var y=f.prototype;return y.refresh=function(){this.id=l.guid(),this.reportSequence=0},y.open=function(){this.closed=!1},y.close=function(){this.closed=!0},f})(),u=(()=>{function f(){this.LOG_KEY="_alp_log",this.INTERVAL=5e3,this.init(),this.timer=null,this.session=null}var y=f.prototype;return y.init=function(){var d;if(!localStorage.getItem(this.LOG_KEY))return d=JSON.stringify({}),localStorage.setItem(this.LOG_KEY,d),d},y.observe=function(d,a,_){var b=this;_===void 0&&(_=function(){}),this.session=d,this.reporter=a,this.timer=setInterval(function(){var E;!d.closed&&(_(),E=a.getData())&&b.update(E.vps,a.getData())},this.INTERVAL)},y.update=function(d,a){this.session.closed||(a=this.createLog(a),this.write(d,a))},y.clear=function(d){var a=this.read();a&&(delete a[d],localStorage.setItem(this.LOG_KEY,JSON.stringify(a)))},y.read=function(){var d,a=(a=localStorage.getItem(this.LOG_KEY))||this.init();try{d=JSON.parse(a)}catch(_){}return d},y.write=function(d,a){if(a){var _;try{_=JSON.stringify(a)}catch(b){}_&&(_=this.read())&&(_[d]=a,localStorage.setItem(this.LOG_KEY,JSON.stringify(_)))}},y.createLog=function(d){return{log:d,lastUpdate:Date.now(),hidden:document.visibilityState==="hidden"}},y.checkStoreLogs=function(){var d=this,a=this.read();a&&Object.keys(a).length&&Object.keys(a).forEach(function(_){var b,E=a[_];_!==d.session.id&&(b=Date.now()-E.lastUpdate,E.hidden?d.clear(_):b>1.5*d.INTERVAL&&navigator.onLine&&(d.reporter.sendImmediate(h({},E.log,{se:999})),d.clear(_)))})},y.dispose=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},f})();m.exports=s},{"../config":19,"../lib/data":35,"../lib/playerutil":50,"../lib/ua":53,"./constants":66,"./reporter":68,"./util":70}],68:[function(p,m,W){var v=p("./sender"),h={e:void 0,db:void 0,dm:void 0,os:void 0,ov:void 0,uuid:void 0,ss:void 0,tt:void 0,bt:void 0,bv:void 0,us:void 0,app_n:void 0,av:void 0,install_uuid:void 0,li_ki:void 0,lv:void 0,pu:void 0,bl:void 0,bp:void 0,bs:void 0,ri:void 0,t:void 0,vps:void 0,tid:void 0,cd:void 0,vt:void 0,vu:void 0,srcd:void 0,vid:void 0,sbr:void 0,fri:void 0,lri:void 0,vdi:void 0,pc:void 0,mi:void 0,smi:void 0,ps:void 0,vdur:void 0,el:[],se:void 0,ci:void 0,hwd:1,def:void 0,acf:void 0,vcf:void 0},p=(()=>{function l(t){this.data=h,this.sender=new v(t)}var o=l.prototype;return o.getData=function(){return this.data},o.flush=function(){this.report(),this.data=h},o.report=function(){this.data.t=Date.now(),this.sender.sendImmediate(this.pruneReportData())},o.initData=function(t){this.data=t},o.addEvent=function(t){this.data.el.push(t)},o.getEvent=function(t){return this.data.el.filter(function(e){return e.id===t})},o.getAllEvents=function(){return this.data.el},o.replaceEvents=function(t){this.data.el=t},o.backgroundList=function(t){this.data.bl=t},o.backgroundPlay=function(t){this.data.bp=t},o.backgroundStop=function(t){this.data.bs=t},o.duration=function(t){this.data.vdur=t},o.mediaInfo=function(t){this.data.mi=t},o.subMediaInfo=function(t){this.data.smi=t},o.videoDefinition=function(t){this.data.def=t},o.traceId=function(t){this.data.tid=t},o.source=function(t){this.data.vu=t},o.vps=function(t){this.data.vps=t},o.videoDomain=function(t){this.data.srcd=t},o.containerInfo=function(t){this.data.ci=t},o.codecFormat=function(t,e){this.data.acf=t,this.data.vcf=e},o.startBitrate=function(t){this.data.sbr=t},o.firstRenderInfo=function(t){this.data.fri=t},o.videoDropInfo=function(t){this.data.vdi=t},o.lastRenderInfo=function(t){this.data.lri=t},o.playSummary=function(t){this.data.ps=t},o.sequence=function(t){this.data.se=t},o.pruneReportData=function(){var t=this;return Object.keys(this.data).reduce(function(e,n){return t.data[n]!==void 0&&(e[n]=t.data[n]),e},{})},o.sendImmediate=function(t){t.t=Date.now(),this.sender.sendImmediate(t)},l})();m.exports=p},{"./sender":69}],69:[function(h,m,W){var v=h("@aliyun-sls/web-track-browser"),h=(typeof __karma__!="undefined"&&__UNIT_TEST__==="true"&&(v=v.default),(()=>{function p(l){var o,t;l.disableTrack?this.tracker={sendImmediate:function(){}}:(o="cn-hangzhou.log.aliyuncs.com",t="vod-newplayer",l.env==="SEA"&&(o="ap-southeast-1.log.aliyuncs.com",t="vod-newplayer-sg"),this.tracker=new v({host:o,project:t,logstore:"hermes-player"}))}return p.prototype.sendImmediate=function(l){this.tracker.sendImmediate(l)},p})());m.exports=h},{"@aliyun-sls/web-track-browser":4}],70:[function(S,m,W){var v=S("../lib/cookie"),h=S("../lib/data");m.exports.getUuid=function(){var p=v.get("p_h5_u");return p||(p=h.guid(),v.set("p_h5_u",p,730)),p}},{"../lib/cookie":34,"../lib/data":35}],71:[function(S,m,W){var v=S("../lib/io");S("../lib/storage");function h(p){this._uploadDuration=p.logDuration||5,this._uploadCount=p.logCount||10,this._logReportTo=p.logReportTo,this._dumpLogReportTo=p.dumpLogReportTo,this._logs=[],this._retry=0,this._disposed=!1,this._supportLocalStorage=!0;var l;try{localStorage?(l=localStorage.getItem("__aliplayer_log_data"),localStorage.removeItem("__aliplayer_log_data"),l&&(this._logs=JSON.parse(l))):this._supportLocalStorage=!1}catch(o){this._supportLocalStorage=!1}this._start()}h.prototype.add=function(p){var l=this._logs.length;if(p.__time__=Math.round(new Date/1e3),0<l&&p.e=="4001"){var l=this._logs[l-1];if(l.e=="4001"&&l.__time__-p.__time__<5)return}this._logs.push(p),(this._logs.length>this._uploadCount||p.e=="4001"||p.e=="2002"||p.e=="9002"&&(l=p.args)!=null&&l.includes("dump::"))&&this._report()},h.prototype.dispose=function(){this._report(),this._disposed=!0},h.prototype._start=function(){this._disposed=!1,this._retry=0,this._report()},h.prototype._report=function(p){var l,o,t;this._tickHandler&&(clearTimeout(this._tickHandler),this._tickHandler=null),0<(p=p||this._logs.splice(0,this._uploadCount)).length?(t={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(l=JSON.stringify({__logs__:p,__source__:""})).length},v.postWithHeader((o=this)._logReportTo,l,t,function(e){o._tick()},function(e){o._retry==0?(o._retry=1,o._report(p)):o._tick()})):this._tick()},h.prototype.reportDump=function(p){var l;p&&(l={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(p=JSON.stringify({__logs__:[p],__source__:""})).length},v.postWithHeader(this._dumpLogReportTo,p,l,function(o){},function(o){}))},h.prototype._tick=function(){var p;this._disposed||(this._retry=0,(p=this)._logs.length>this._uploadCount?p._report():this._tickHandler=setTimeout(function(){p._report()},1e3*this._uploadDuration))},m.exports=h},{"../lib/io":45,"../lib/storage":52}],72:[function(d,m,W){function v(){return(v=Object.assign?Object.assign.bind():function(a){for(var _=1;_<arguments.length;_++){var b,E=arguments[_];for(b in E)!{}.hasOwnProperty.call(E,b)||(a[b]=E[b])}return a}).apply(null,arguments)}var h,p=d("../lib/oo"),l=d("../lib/object"),o=d("../lib/data"),t=d("../lib/io"),e=d("../lib/ua"),n=d("../lib/event"),r=d("../config"),s=d("../player/base/event/eventtype"),g=d("./util"),c=d("./log"),u=d("../lib/playerutil"),f=0,y={CREATE:1e3,STARTFETCHDATA:1003,COMPLETEFETCHDATA:1004,PREPARE:1101,PREPAREEND:1102,STARTPLAY:2e3,PLAY:2001,STOP:2002,PAUSE:2003,SEEK:2004,FULLSREEM:2005,QUITFULLSCREEM:2006,RESOLUTION:2007,RESOLUTION_DONE:2008,RECOVER:2010,SEEK_END:2011,PLAYABORT:2012,SEEKED:2014,CANPLAY:2018,FETCHEDIP:2020,CDNDETECT:2021,DETECT:2022,HEVCINFO:2023,UNDERLOAD:3002,LOADED:3001,RETRY:3003,HEARTBEAT:9001,TRACE:9002,DUMP:9003,ERROR:4001,ERRORRETRY:4002,RTSFALLBACK:4003,VOD_REQUEST_FATAL_ERROR:4004,VOD_REQUEST_FATAL_ERROR_RESUME:4005,LICENSE_RESULT:5004,SNAPSHOT:2027,ROTATE:2028,IMAGE:2029,THUMBNAILSTART:2031,THUMBNAILCOMPLETE:2032,CCSTART:2033,CCCOMPLETE:2034,AUDIOTRACKSTART:2033,AUDIOTRACKCOMPLETE:2034},d=p.extend({init:function(T,k,E){this.trackLog=E=E===void 0?!0:E,this.player=T,this.requestId="",this.sessionId=o.guid(),this.playId=0,this.firstPlay=!0,this.osName=e.os.name,this.osVersion=e.os.version||"",this.exName=e.browser.name,this.exVersion=e.browser.version||"",this.lightSaasVideoId="",this._logService="",this._h265ProbeInfo={},this.loadedDataReported=!1,this.startPlayReported=!1,this.canplayReported=!1,this.doPlayReported=!1,this.seekingData={seekingStartTime:0},this.pendingPrepareEndData=null,this.h265RenderTypeTimer=null,this.statisticsHistoryTimer=null,this.timeline=[{name:"init",ts:performance.now()}],this.checkSeekStuckedTimer=null,r.logReportTo=k.logReportTo||r.logReportTo,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},this.resetHeartBeatStatusData(),this.resetStatisticsHistoryData(),k.logBatched&&(this._logService=new c(r));var E=this.player.getOptions(),T=k.from||"",k=(E.isLive,E.isLive?"live":"vod"),P="pc",w=(e.IS_IPAD?P="pad":e.os.phone&&(P="phone"),this.encodeURL(e.getReferer())),M=e.getHref(),D=this.encodeURL(M),U="",M=(M&&(U=e.getHost(M)),r.h5Version),O=g.getUuid(),B=E.source?this.encodeURL(E.source):"",j=e.getHost(E.source),H=E.userId?E.userId+"":"0",R=this.sessionId,L=new Date().getTime(),C=String(E.traceId)||"";this._userNetInfo={cdnIp:"",localIp:""},this.opt={APIVersion:"0.6.0",t:L,ll:"info",lv:"1.0",pd:"player",md:"saas_player",ui:"saas_player",sm:"play",os:this.osName,ov:this.osVersion,et:this.exName,ev:this.exVersion,uat:e.USER_AGENT,hn:"0.0.0.0",bi:T,ri:R,e:"0",args:"0",li_ki:E.license.key||"",vt:k,tt:P,dm:"h5",av:M,uuid:O,vu:B,vd:j,ua:H,dn:"custom",cdn_ip:"0.0.0.0",app_n:U,r:w,pu:D,ti:C},this.bindEvent()},updateVideoInfo:function(a){a=a.from||"",this.opt.bi=a+"",this.updateSourceInfo()},updateSourceInfo:function(){var a,_=this.player.getOptions();_&&(a=_.source?this.encodeURL(_.source):"",_=e.getHost(_.source),this.opt.vu=a,this.opt.vd=_)},updateTraceId:function(a){this.opt.ti=String(a)},updateLightSaasVideoId:function(a){this.lightSaasVideoId=a},replay:function(){this.reset(),this.player.trigger(s.Video.LoadStart),this.player.trigger(s.Video.LoadedMetadata),this.player.trigger(s.Video.LoadedData),this.startHeartBeat()},bindEvent:function(){var a=this;this.player.on(s.Private.Create,function(_){a._onCreate(_)}),this.player.on(s.Player.Init,function(){a._onPlayerInit()}),this.player.on(s.Video.LoadStart,function(){a._onPlayerloadstart()}),this.player.on(s.Video.LoadedMetadata,function(){a._onPlayerLoadMetadata()}),this.player.on(s.Video.LoadedData,function(){a._onPlayerLoaddata()}),this.player.on(s.Player.H265PlayInfo,function(_){a._onH265PlayInfo(_),a._onPlayerH265PlayInfo(_)}),this.player.on(s.Player.H266PlayInfo,function(_){a._onH265PlayInfo(_),a._onPlayerH265PlayInfo(_)}),this.player.on(s.Video.Play,function(){a._onPlayerPlay()}),this.player.on(s.Video.Playing,function(){a._onPlayerReady()}),this.player.on(s.Video.Ended,function(){a._onPlayerFinish()}),this.player.on(s.Video.Pause,function(){a._onPlayerPause()}),this.player.on("seeking",function(){a._onPlayerSeeking()}),this.player.on("seeked",function(){a._onPlayerSeeked()}),this.player.on(s.Private.LicenseHasResult,function(_){a._onLicenseHasResult(_)}),this.player.on(s.Private.SeekStart,function(_){a._onPlayerSeekStart(_)}),this.player.on(s.Private.EndStart,function(_){a._seekEndData=_.paramData}),this.player.on(s.Player.Waiting,function(){a._onPlayerLoaded()}),this.player.on(s.Video.CanPlayThrough,function(){}),this.player.on(s.Video.CanPlay,function(){a._waitingDelayLoadingShowHandle&&(clearTimeout(a._waitingDelayLoadingShowHandle),a._waitingDelayLoadingShowHandle=null),a._onPlayerUnderload(),a._onPlayerCanplay()}),this.player.on(s.Video.TimeUpdate,function(){a._waitingDelayLoadingShowHandle&&(clearTimeout(a._waitingDelayLoadingShowHandle),a._waitingDelayLoadingShowHandle=null),a._seekEndData&&a.player._seeking&&a._onPlayerSeekEnd()}),this.player.on(s.Player.Error,function(_){a._onPlayerError(_)}),this.player.on(s.Player.RequestFullScreen,function(){a._onFullscreenChange(1)}),this.player.on(s.Player.CancelFullScreen,function(){a._onFullscreenChange(0)}),this.player.on(s.Private.PREPARE,function(_){a._prepareTime=performance.now(),a._log("PREPARE",{dn:_.paramData}),a.timeline.push({name:"prepare",ts:performance.now()})}),this.player.on(s.Private.ManualPlay,function(){a.loadedDataReported||(a._prepareTime=performance.now(),a.timeline.push({name:"prepare2",ts:performance.now()}))}),this.player.on(s.Player.Snapshoted,function(){a._log("SNAPSHOT")}),this.player.on(s.Private.Retry,function(_){_=_.paramData||{},a._log("RETRY",{type:_.type,source:_.source})}),this.player.on(s.Player.RtsFallback,function(E){var b,E=E.paramData||{};a._log("RTSFALLBACK",{reason:(b=E.reason)==null?void 0:b.error_msg,url:E.fallbackUrl})}),this.player.on(s.Private.VodRequestException,function(_){_=_.paramData||{},a.reportVodException(_)}),this.player.on(s.Private.VodRequestExceptionResume,function(_){_=_.paramData||{},a.reportVodExceptionResume(_)}),this.player.on(s.Private.TraceLog,function(_){_=_.paramData||{},a._reportTrace(_)}),this.player.on(s.Private.DumpBuffer,function(_){_=_.paramData||{},a._reportDump(_)}),this.player.on(s.Private.StatisticsInfo,function(_){_=_.paramData||{},a._onStatisticsHistoryUpdate(_)}),this.player.on(s.Private.Timeline,function(_){_=_.paramData||{},a._onTimeline(_)}),n.on(this.player.tag,s.Video.Playing,function(){a.reportPlaying()}),n.on(this.player.tag,s.Video.TimeUpdate,function(){a.reportPlaying()}),this.startHeartBeat.call(this),this.startStatisticsHistory.call(this)},startStatisticsHistory:function(){var a=this;this.opt.app_n==="n.dingtalk.com"&&(this.statisticsHistoryTimer&&clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=setInterval(function(){a.player.trigger(s.Private.TraceLog,"[statistics_history]"+JSON.stringify(a.statisticsHistory)),a.resetStatisticsHistoryData()},this.player._options.statisticsReportInterval))},reportPlaying:function(){var a;this.doPlayReported||this.player.paused()||this.player.readyState()===0||(this.doPlayReported=!0,this.first_play_time=performance.now(),a={dsm:"fix",tc:this.first_play_time-this.loadstartTime,fc:this.first_play_time-this.playstartTime},this._log("PLAY",a))},removeEvent:function(){this.player.offAll("init"),this.player.offAll("ready"),this.player.offAll("ended"),this.player.offAll("play"),this.player.offAll("pause"),this.player.offAll("seekStart"),this.player.offAll("seekEnd"),this.player.offAll("canplaythrough"),this.player.offAll("playing"),this.player.offAll("timeupdate"),this.player.offAll("error"),this.player.offAll("fullscreenchange"),this.player.offAll("seeking"),this.player.offAll("seeked"),this.player.offAll(s.Private.PREPARE),this.player.offAll(s.Player.RtsFallback),n.off(this.player.tag,s.Video.Playing),n.off(this.player.tag,s.Video.TimeUpdate),this._logService&&this._logService.dispose(),clearInterval(h),clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=null,clearTimeout(this.checkSeekStuckedTimer),this.checkSeekStuckedTimer=null},reset:function(){this.stucking=!1,this.startTimePlay=0,this.pause_flag=0,this.firstPlay=!1,this.playId=0,this._canPlay=0,this.seekingStartTime=0,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},f=0,this.lightSaasVideoId="",this.resetHeartBeatStatusData(),this.resetStatisticsHistoryData(),h&&(clearInterval(h),h=null)},encodeURL:function(a){var _;return a?(_=this.player.getOptions())&&!_.logBatched?encodeURIComponent(a):a:""},startHeartBeat:function(){var a=this;h&&clearInterval(h),h=setInterval(function(){var _;a.player.getCurrentTime()&&(_=Math.floor(1e3*a.player.getCurrentTime()),a.player.paused()&&(a.prevStats.timestamp=0),++f>=a.player._options.heartHeatInterval)&&a.updateStats.call(a,function(b){var T=a._imageInfo()||{},k=a.player.tag.playbackRate,E=a.player.getVolume(),T={vt:_,interval:1e3*f,imgLength:T.imgLength,playbackRate:k,volume:E,bw:a._getbwEstimator()+"KB"},k=((T=b?v({},T,{dls:Math.floor(b.downloadSpeedPerSec),dfps:Math.floor(b.decodedFramesPerSec),pkl:Number((b.packageLossRate||0).toFixed(2)),rtt:1e3*b.rtt}):T).player_status=v({},a.heartBeatStatusData),a.player);T.time={play_time:parseFloat((k._playingTime/1e3).toFixed(2)),stuck_count:parseFloat(k._stuckCount.toFixed(2)),stuck_time:parseFloat((k._stuckTime/1e3).toFixed(2))},a._log("HEARTBEAT",T),f=0})},1e3)},updateStats:function(a){a=a||function(){};var _=this;this.player.getStats().then(function(b){var E,T;b?(E=_.prevStats,b.bytesReceived=b.bytesReceived||0,b.framesDecoded=b.framesDecoded||0,b.packetsLost=b.packetsLost||0,b.packetsReceived=b.packetsReceived||0,T=((_.prevStats=b).timestamp-E.timestamp)/1e3,a({downloadSpeedPerSec:(b.bytesReceived-E.bytesReceived)/T,decodedFramesPerSec:(b.framesDecoded-E.framesDecoded)/T,packageLossRate:(b.packetsLost-E.packetsLost)/(b.packetsLost-E.packetsLost+(b.packetsReceived-E.packetsReceived)),rtt:b.rtt,timeGap:T})):a()}).catch(function(b){console.log("error in monitor getStats: ",b),a()})},reportStartPlay:function(){this.startPlayReported||(this._log("STARTPLAY",{vt:new Date().getTime()}),this.startPlayReported=!0)},reportCanplay:function(){this.canplayReported||(this._log("CANPLAY",{vt:new Date().getTime()}),this.canplayReported=!0)},reportPlayAbort:function(a){this._log("PLAYABORT",{vt:new Date().getTime(),from:a})},reportVodException:function(a){console.log("VOD_REQUEST_FATAL_ERROR",a),this._log("VOD_REQUEST_FATAL_ERROR",a)},reportVodExceptionResume:function(a){console.log("VOD_REQUEST_FATAL_ERROR_RESUME",a),this._log("VOD_REQUEST_FATAL_ERROR_RESUME",a)},resetStartPlayReportFlag:function(){this.startPlayReported=!1},resetCanplayReportFlag:function(){this.canplayReported=!1},resetLoadedDataReported:function(){this.loadedDataReported=!1,this._prepareTime=performance.now()},resetDoPlayReportFlag:function(){this.doPlayReported=!1},resetSessionId:function(){this.sessionId=o.guid()},resetHeartBeatStatusData:function(){this.heartBeatStatusData={t_last_pause:-1,t_last_resume:-1,t_last_load_start:-1,t_last_load_end:-1},this.player.startPlayTimeMonitor()},resetStatisticsHistoryData:function(){this.statisticsHistory={speed:[],framesDropped:[],downlink:[],type:[],rtt:[]}},resetTimeline:function(){var a=performance.now();this._createTime=a,this.timeline=[{name:"init",ts:a}]},resetVV:function(){this.startPlayReported&&(this.resetStartPlayReportFlag(),this.resetLoadedDataReported(),this.resetDoPlayReportFlag(),this.resetCanplayReportFlag(),this.resetSessionId(),this.resetTimeline())},updateH265ProbeInfo:function(a){this._h265ProbeInfo=a||{}},_onFullscreenChange:function(a){a?this._log("FULLSREEM",{}):this._log("QUITFULLSCREEM",{})},_onTimeline:function(a){var _=["frag_s","frag_f","frag_parsed"].includes(a.name);this.timeline.some(function(b){return _&&b.name===a.name})||this.timeline.push(a)},_onPlayerloadstart:function(){this.loadstartTime=performance.now(),this.playId=o.guid()},_onPlayerLoadMetadata:function(){this.loadMetaDataCost=performance.now()-this.loadstartTime,this.timeline.push({name:"meta",ts:performance.now()})},_onPlayerLoaddata:function(){var a,_,b,E,T=this;this.timeline.push({name:"loadeddata",ts:performance.now()}),this.loadedDataReported||(E=b=0,this.player.tag&&(b=this.player.tag.videoWidth,E=this.player.tag.videoHeight),a={fc:parseInt(performance.now()-this._createTime),tc:parseInt(performance.now()-this._prepareTime),cc:parseInt(performance.now()-this.loadstartTime),md:parseInt(this.loadMetaDataCost),mi:JSON.stringify({type:"video",definition:b+"*"+E})},this.timeline.forEach(function(k,P){try{var w=P?k.ts-T.timeline[P-1].ts:0;a["tl_"+k.name]=P+"#"+parseInt(w)}catch(D){}}),(b=this.player.tag)!=null&&b.duration&&(a.vdur=1e3*((E=this.player.tag)==null?void 0:E.duration)),(5<this._h265ProbeInfo.codecCost||5<this._h265ProbeInfo.decoderCost)&&(b=Math.floor(this._h265ProbeInfo.codecCost)||0,E=Math.floor(this._h265ProbeInfo.decoderCost)||0,a.tc+=_=b+E,a.cc+=_,a.pcc=b,a.pdc=E),_=[{type:"audio"}],b={type:"video",codecType:null,isHardwareDecode:null},E=this._h265ProbeInfo.codecTag,u.isH265Codec(E)?b.codecType="h265":u.isH266Codec(E)?b.codecType="h266":u.isH264Codec(E)&&(b.codecType="h264"),_.push(b),a.decode_info=_,this._h265ProbeInfo.waitRenderType?(this.pendingPrepareEndData=a,this.h265RenderTypeTimer=setTimeout(function(){T._log("PREPAREEND",a),T.h265RenderTypeTimer=null},2e3)):this._log("PREPAREEND",a)),this.loadedDataReported=!0},_onStatisticsHistoryUpdate:function(a){this.opt.app_n==="n.dingtalk.com"&&(this.statisticsHistory.speed.push(parseInt(a.speed)),this.statisticsHistory.framesDropped.push(a.droppedFrames),a=navigator.connection)&&(this.statisticsHistory.downlink.push(a.downlink),this.statisticsHistory.type.push(a.effectiveType),this.statisticsHistory.rtt.push(a.rtt))},_onH265PlayInfo:function(a){var _,b;this.h265RenderTypeTimer&&(clearTimeout(this.h265RenderTypeTimer),this.h265RenderTypeTimer=null),this.pendingPrepareEndData&&(a=a.paramData,_=this.pendingPrepareEndData,this.pendingPrepareEndData=null,b=_.decode_info[1],a.renderType==="wasm"&&(b.isHardwareDecode=!1),this._log("PREPAREEND",_))},_onPlayerH265PlayInfo:function(a){a=a.paramData||{},this._log("HEVCINFO",{cd:a.codecTag,rd:a.renderType,si:a.simd,sio:a.simdOption,wt:a.wasmThreads,wto:a.wasmThreadsOption,sp:a.splayer})},_onPlayerCanplay:function(){this._canPlay=1,this.reportCanplay(),this.prevStats.timestamp||this.updateStats.call(this)},_onCreate:function(a){a=a.paramData||{},a.hasPa=!!a.playauth,delete a.playauth,a.hasSk=!!a.accessKeySecret,delete a.accessKeySecret,a.hasSt=!!a.securityToken,delete a.securityToken,this._log("CREATE",a),this._createTime=performance.now()},_onPlayerInit:function(){this.stucking=!1,this.pause_flag=0,this.startTimePlay=0,this._canPlay=0,this.seekingStartTime=0},_onPlayerReady:function(){this.startTimePlay||(this.startTimePlay=new Date().getTime())},_onPlayerFinish:function(){this._log("STOP",{vt:Math.floor(1e3*this.player.getCurrentTime())}),this.reset()},_onPlayerPlay:function(){var a;this.playstartTime=new Date().getTime(),this.playId==0&&(this.playId=o.guid()),this.player._isPreload()||(this.loadstartTime=performance.now()),this.doPlayReported&&this.pause_flag&&(this.pause_flag=0,this.pauseEndTime=new Date().getTime(),this.heartBeatStatusData.t_last_resume=this.pauseEndTime,a=this.pauseEndTime-this.pauseTime,this._log("RECOVER",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:a,pass:a,t_last_pause:this.pauseTime}))},_onPlayerPause:function(){!this.doPlayReported||this.startTimePlay&&!this.player._seeking&&(this.pause_flag=1,this.pauseTime=new Date().getTime(),this.heartBeatStatusData.t_last_pause=this.pauseTime,this.heartBeatStatusData.t_last_resume=-1,this._log("PAUSE",{vt:Math.floor(1e3*this.player.getCurrentTime())}))},_onLicenseHasResult:function(a){a=a.paramData||{},this._log("LICENSE_RESULT",{li_ri:a.result+" "+(a.errorCode||""),li_ti:a.featureId||"sdk"})},_onPlayerSeekStart:function(a){this.seekStartTime=a.paramData.fromTime,this.startTimePlay=0,this.seekStartStamp=new Date().getTime()},_onPlayerSeekEnd:function(){this.seekEndStamp=new Date().getTime(),this._log("SEEK",{drag_from_timestamp:Math.floor(1e3*this.seekStartTime),drag_to_timestamp:Math.floor(1e3*this._seekEndData.toTime)}),this._log("SEEK_END",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.seekEndStamp-this.seekStartStamp}),this._seekEndData=null},_onPlayerLoaded:function(){var a,_=this;this.doPlayReported&&!this.stucking&&document.visibilityState!=="hidden"&&(this.player._seeking?(this.seekingStartTime=this.player.getCurrentTime(),this.checkSeekStuckedTimer&&clearTimeout(this.checkSeekStuckedTimer),this.checkSeekStuckedTimer=setTimeout(function(){var b=_.player.readyState()<4;_.player.readyState()||(b=!0),_.player.getCurrentTime()===_.seekingStartTime&&b&&(b=_._getbwEstimator(),_._log("UNDERLOAD",{vt:Math.floor(1e3*_.player.getCurrentTime()),bw:b,cbs:_._getCbs()}),_.stucking=!0,_.stuckStartTime=new Date().getTime(),_._getCbs()===0)&&(_.heartBeatStatusData.t_last_load_start=_.stuckStartTime,_.heartBeatStatusData.t_last_load_end=-1)},500)):(this.stuckStartTime=new Date().getTime(),this._getCbs()===0&&(this.heartBeatStatusData.t_last_load_start=this.stuckStartTime,this.heartBeatStatusData.t_last_load_end=-1),this.stuckStartTime-this.startTimePlay<=1e3||(this.stucking=!0,a=this._getbwEstimator(),this._log("UNDERLOAD",{vt:Math.floor(1e3*this.player.getCurrentTime()),bw:a,cbs:this._getCbs()}),this.stuckStartTime=new Date().getTime())))},_onPlayerUnderload:function(){var a,_,b,E;!this.doPlayReported&&this.player._options&&this.player._options.autoplay||this.stucking&&(a=Math.floor(1e3*this.player.getCurrentTime()),_=this.stuckStartTime||new Date().getTime(),0<(b=Math.floor(new Date().getTime()-_))&&b<(1e3*this.player._options.waitingTimeout||6e4)&&(E=this._getbwEstimator(),this._getCbs()===0&&(this.heartBeatStatusData.t_last_load_end=new Date().getTime()),this._log("LOADED",{vt:a,cost:b,bw:E,cbs:this._getCbs(),t_last_load_start:_})),this.seekStart=!1,this.stucking=!1)},_onPlayerSeeking:function(){this.seekStart=!0,this.seekingData.seekingStartTime=performance.now()},_onPlayerSeeked:function(){var a=this;this.player._splayer?this.player.one("canplay",function(){a._reportSeeked()}):this._reportSeeked()},_reportSeeked:function(){var a=performance.now(),a=Math.floor(a-this.seekingData.seekingStartTime);this._log("SEEKED",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:a})},_reportTrace:function(a){this._log("TRACE",{log:a})},_reportDump:function(a){this._log("DUMP",a)},_onPlayerError:function(a){this._reportTrace(a.paramData),this.playId=0,this.statisticsHistoryTimer&&(clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=null,this.resetStatisticsHistoryData()),h&&(clearInterval(h),h=null)},_getbwEstimator:function(){var a=NaN;try{a=((a=this.player._getbwEstimator&&parseInt(this.player._getbwEstimator(),10))/8/1024).toFixed(2)}catch(_){}return a},_getCbs:function(){return!this.player.getOptions().isLive&&this.seekStart?1:0},_log:function(a,_){if(this.trackLog){this.updateSourceInfo();var b=l.copy(this.opt),E=(this.requestId=o.guid(),r.logReportTo),a=(b.e=y[a]+"",b.en=a,b.ri=this.sessionId,b.bi=b.bi&&String(b.bi),b.t=new Date().getTime()+"",b.cdn_ip=this._userNetInfo.cdnIp,b.hn=this._userNetInfo.localIp,this.player.getCurrentQuality()),T=(a!=""&&(b.definition=a.definition),[]),a=(l.each(_,function(D,U){if(typeof U!="string")try{U=JSON.stringify(U)}catch(M){}T.push(D+"="+U)}),""),_=this.player.getOptions(),a=((a=_&&_.vid||this.lightSaasVideoId?_.vid||this.lightSaasVideoId:a)&&T.push("vid="+a),"");(a=_&&_.mediaAuth?_.mediaAuth:a)&&T.push("pauth="+a);try{Aliplayer&&Aliplayer.__logCallback__&&(b.args=T,Aliplayer.__logCallback__(b))}catch(D){console.log(D)}if((T=T.join("&"))==""&&(T="0"),b.args=this.encodeURL(T),this._logService){if(b.e===String(y.DUMP))return void this._logService.reportDump(b);this._logService.add(b)}else{var k=[];l.each(b,function(D,U){k.push(D+"="+U)}),k=k.join("&"),t.jsonp(E+"?"+k,function(){},function(){})}return this.sessionId}},_imageInfo:function(){try{var a,_,b,E,T,k,P;return/MSIE\s8\.0/.test(navigator.userAgent)?{}:(a=this.player.tag)?(_=document.createElement("canvas"),b=a.videoWidth,E=a.videoHeight,_.width=b,_.height=E,(T=_.getContext("2d")).save(),T.drawImage(a,0,0,b,E),T.restore(),k=_.toDataURL("image/jpeg",1),P="",{imgLength:(P=k?(P=k.substr(k.indexOf(",")+1))||"":P).length}):{}}catch(w){return{}}}});m.exports=d},{"../config":19,"../lib/data":35,"../lib/event":38,"../lib/io":45,"../lib/object":47,"../lib/oo":48,"../lib/playerutil":50,"../lib/ua":53,"../player/base/event/eventtype":77,"./log":71,"./util":73}],73:[function(S,m,W){var v=S("../lib/cookie"),h=S("../lib/data"),p=S("../lib/ua");m.exports.getUuid=function(){var l=v.get("p_h5_u");return l||(l=h.guid(),v.set("p_h5_u",l,730)),l},m.exports.getTerminalType=function(){var l="pc";return p.IS_IPAD?l="pad":p.IS_ANDROID?l="android":p.IS_IOS&&(l="iphone"),l},m.exports.returnUTCDate=function(g){var o=g.getUTCFullYear(),t=g.getUTCMonth(),e=g.getUTCDate(),n=g.getUTCHours(),r=g.getUTCMinutes(),s=g.getUTCSeconds(),g=g.getUTCMilliseconds();return Date.UTC(o,t,e,n,r,s,g)},m.exports.getRfc822=function(l){return l.toUTCString().replace("UTC","GMT")}},{"../lib/cookie":34,"../lib/data":35,"../lib/ua":53}],74:[function(S,m,W){var v=S("./base/player"),h=S("./saas/mtsplayer"),p=S("./saas/vodplayer"),l=S("./saas/lightPlayer"),o=S("./audio/audioplayer"),t=S("./hls/hlsplayer"),e=S("./flv/flvplayer"),n=S("./dash/dashplayer"),r=S("./rts/rtsplayer"),s=S("./drm/drmplayer"),g=S("./splayer/splayer"),c=S("../lib/ua"),u=S("../lib/playerutil"),f=(S("../lib/dom"),S("../lib/io"),S("../lang/index")),y=S("../lib/constants"),d=S("./base/event/eventtype");m.exports.create=function(E,b){E.PlayAuth&&(E.playauth=E.PlayAuth),typeof E.rtsFallback!="boolean"&&E.rtsFallbackSource&&(E.rtsFallback=!0),E._userOptions||(E._userOptions=Object.assign({},E)),navigator&&navigator.userAgent&&-1<navigator.userAgent.indexOf("Olympic_Android")&&(E.useNativeControls=!0),E.readyCallback=b=typeof b!="function"?function(){}:b,f.setCurrentLanguage(E.language,"h5",E.languageTexts,E.extLanguageTexts);var b=u.handleOption(E),E=b.source,T=b.format;if(T&&E)try{T=T.toLowerCase()}catch(D){console.log("Aliplayer - parsing format failed",D),T=""}else T="";u.isSupportedFormat(T)||(T=""),b.optionFormat=T,b.drm&&(b.isDrm=!0),b.useDrm2===void 0&&(b.useDrm2=!(b.isDrm&&b.accessKeyId));var k,P=u.isAudio(E,T),w=(P&&(b.mediaType="audio"),u.createWrapper(b));if(w.player)return w.player;if(P)k=new o(w,b);else if(u.isRts(E))k=new r(w,b);else if((b.forceH265||b.enableH265)&&(u.isMp4(E,T)||u.isFlv(E,T)||u.isHls(E,T)))k=new g(w,b);else if((b.forceH266||b.enableH266)&&(u.isMp4(E,T)||b.isLive&&(u.isFlv(E,T)||u.isHls(E,T))))k=new g(w,b);else if(!b.useFlashPrism&&u.isFlv(E,T)&&u.isSupportFlv())k=new e(w,b);else if([null,void 0].indexOf(b.mediaAuth)!==-1||b.source)if(b.vid&&!b.source)if(b.authInfo)k=new h(w,b);else{if(!(b.playauth||b.accessKeyId&&b.accessKeySecret))throw P="vid="+b.vid+" playauth='', playauth property is required by VOD(\u89C6\u9891\u70B9\u64AD) as new Aliplayer.",new Error(P);k=new p(w,b)}else u.isHls(E,T)?u.canPlayHls()?k=new(u.isSupportHls()&&(u.isUsedHlsPluginOnMobile()||u.isSafariUsedHlsPlugin(b.useHlsPluginForSafari))?b.isDrm?s:t:b.isDrm?s:v)(w,b):u.isSupportHls()?k=new(b.isDrm?s:t)(w,b):c.os.pc||(k=new v(w,b)):u.isDash(E,T)&&u.isSupportMSE()?k=new(b.isDrm?s:n)(w,b):(k=new v(w,b),b.source||(P={error_code:y.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL",display_msg:f.get("Error_Empty_Source")},k.trigger(d.Player.Error,P)));else k=new l(w,b);return k}},{"../lang/index":28,"../lib/constants":33,"../lib/dom":37,"../lib/io":45,"../lib/playerutil":50,"../lib/ua":53,"./audio/audioplayer":75,"./base/event/eventtype":77,"./base/player":102,"./dash/dashplayer":109,"./drm/drmplayer":112,"./flv/flvplayer":114,"./hls/hlsplayer":116,"./rts/rtsplayer":118,"./saas/lightPlayer":122,"./saas/mtsplayer":124,"./saas/vodplayer":129,"./splayer/splayer":138}],75:[function(t,m,W){var v=t("../base/player"),h=t("../../ui/component"),p=t("../../lib/dom"),l=t("../../lib/object"),o=t("../../lib/playerutil"),t=v.extend({init:function(e,n){this._isAudio=!0,n.skinLayout===void 0&&(n.skinLayout=o.getDefaultAudioLayout()),v.call(this,e,n)}});t.prototype.createEl=function(){this.tag.tagName!=="AUDIO"&&(this._el=this.tag,this.tag=h.prototype.createEl.call(this,"audio"));var e=this._el,n=this.tag,r=(n.player=this,p.getElementAttributes(n));return l.each(r,function(s){e.setAttribute(s,r[s])}),this.setVideoAttrs(),n.parentNode&&n.parentNode.insertBefore(e,n),p.insertFirst(n,e),e},m.exports=t},{"../../lib/dom":37,"../../lib/object":47,"../../lib/playerutil":50,"../../ui/component":143,"../base/player":102}],76:[function(S,m,W){var v=S("../../../lib/event"),h=S("./eventtype"),p=S("../eventHandler/video/index"),l=S("../eventHandler/player/index");m.exports.offAll=function(o){var t,e,n,r=o.tag,s=o._el;for(t in h.Video)v.off(r,h.Video[t]);for(e in h.Player)v.off(s,h.Player[e]);for(n in h.Private)v.off(s,h.Private[n])},m.exports.offVideoAll=function(o){var t,e=o.tag;for(t in h.Video)v.off(e,h.Video[t])},m.exports.onAll=function(o){p.bind(o),l.bind(o)}},{"../../../lib/event":38,"../eventHandler/player/index":81,"../eventHandler/video/index":91,"./eventtype":77}],77:[function(S,m,W){m.exports={Video:{TimeUpdate:"timeupdate",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",Suspend:"suspend",Stalled:"stalled",LoadStart:"loadstart",DurationChange:"durationchange",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Progress:"progress",CanPlayThrough:"canplaythrough",ContextMenu:"contextmenu",Seeking:"seeking",Seeked:"seeked",ManualEnded:"manualended",VolumeChange:"volumechange",RateChange:"ratechange",Resize:"resize"},Player:{TimeUpdate:"timeupdate",DurationChange:"durationchange",Init:"init",Ready:"ready",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",RequestFullScreen:"requestFullScreen",CancelFullScreen:"cancelFullScreen",Snapshoted:"snapshoted",Snapshoting:"snapshoting",OnM3u8Retry:"onM3u8Retry",LiveStreamStop:"liveStreamStop",AutoPlayPrevented:"autoPlayPrevented",AutoPlay:"autoplay",StartSeek:"startSeek",CompleteSeek:"completeSeek",TextTrackReady:"textTrackReady",AudioTrackReady:"audioTrackReady",AudioTrackUpdated:"audioTrackUpdated",LevelsLoaded:"levelsLoaded",AudioTrackSwitch:"audioTrackSwitch",AudioTrackSwitched:"audioTrackSwitched",LevelSwitch:"levelSwitch",LevelSwitched:"levelSwitched",MarkerDotOver:"markerDotOver",MarkerDotOut:"markerDotOut",DefaultBandWidth:"defaultbandwidth",ResolutionChange:"resolutionChange",SeiFrame:"seiFrame",RtsFallback:"rtsFallback",RtsTraceId:"rtsTraceId",H265PlayInfo:"h265PlayInfo",H266PlayInfo:"h266PlayInfo",H265DecoderOverload:"h265DecoderOverload",SettingSelected:"settingSelected",AutoResize:"autoResize",VideoUnavailable:"videoUnavailable"},Private:{Create:"create",Play_Btn_Show:"play_btn_show",UiH5Ready:"uiH5Ready",Error_Hide:"error_hide",Error_Show:"error_show",Info_Show:"info_show",Info_Hide:"info_hide",H5_Loading_Show:"h5_loading_show",H5_Loading_Hide:"h5_loading_hide",HideProgress:"hideProgress",CancelHideProgress:"cancelHideProgress",UpdateProgress:"updateProgress",UpdateCursorPosition:"updateCursorPosition",Click:"click",MouseOver:"mouseover",MouseOut:"mouseout",MouseEnter:"mouseenter",MouseLeave:"mouseleave",TouchStart:"touchstart",TouchMove:"touchmove",TouchEnd:"touchend",HideBar:"hideBar",ShowBar:"showBar",ControlBarClick:"controlBarClick",ReadyState:"readyState",SourceLoaded:"sourceloaded",QualityChange:"qualitychange",Play_Btn_Hide:"play_btn_hide",Cover_Hide:"cover_hide",Cover_Show:"cover_show",SeekStart:"seekStart",EndStart:"endStart",UpdateProgressBar:"updateProgressBar",LifeCycleChanged:"lifeCycleChanged",Dispose:"dispose",Created:"created",Snapshot_Hide:"snapshot_hide",AutoStreamShow:"auto_stream_show",AutoStreamHide:"auto_stream_hide",VolumnChanged:"volumnchanged",LiveShiftQueryCompleted:"liveShiftQueryCompleted",LiveShiftSwitchToLive:"LiveShiftSwitchToLive",StreamSelectorHide:"streamSelectorHide",SpeedSelectorHide:"speedSelectorHide",SettingShow:"settingShow",SettingHide:"settingHide",SelectorShow:"selectorShow",SelectorHide:"selectorHide",SettingListShow:"settingListShow",SettingListHide:"settingListHide",ThumbnailHide:"thumbnailHide",ThumbnailShow:"thumbnailShow",ThumbnailLoaded:"thumbnailLoaded",TooltipShow:"tooltipShow",TooltipHide:"tooltipHide",SelectorUpdateList:"selectorUpdateList",SelectorValueChange:"selectorValueChange",SelectorGenerateList:"selectorGenerateList",VolumeVisibilityChange:"volumeVisibilityChange",VolumeUpdatePosition:"volumeUpdatePosition",ChangeURL:"changeURL",UpdateToSettingList:"updateToSettingList",CCChanged:"CCChanged",CCStateChanged:"CCStateChanged",CCReset:"ccReset",TextTrackFounded:"textTrackFounded",UserTrackReset:"userTrackReset",PlayClick:"click",ProgressMarkerLoaded:"progressMarkerLoaded",MarkerTextShow:"markerTextShow",MarkerTextHide:"markerTextHide",PREPARE:"prepare",ProgressMarkerChanged:"progressMarkerChanged",SeiFrame:"privateSeiFrame",PlayInfoLoaded:"playInfoLoaded",Retry:"retry",LicenseHasResult:"licenseHasResult",PatchWaiting:"patchWaiting",VttHide:"vttHide",VttSwitchTrack:"vttSwitchTrack",VttClearTracks:"vttClearTracks",SafariDrmLevelSwitch:"safariDrmLevelSwitch",VodRequestException:"vodRequestException",VodRequestExceptionResume:"vodRequestExceptionResume",TraceLog:"traceLog",DumpBuffer:"dumpBuffer",PlaybackRateChanged:"playbackRateChanged",StatisticsInfo:"statisticsInfo",MutedAutoplay:"mutedAutoplay",HideUnmuteButton:"hideUnmuteButton",Timeline:"timeline",ManualPlay:"manualPlay",UpdateWatchTime:"updateWatchTime",FastForwardShow:"fastForwardShow",FastForwardHide:"fastForwardHide"}}},{}],78:[function(S,m,W){S("../../event/eventtype");var v=S("../../../../lib/dom"),h=S("../../../../lib/ua");m.exports.handle=function(){h.IS_IOS&&(h.IS_IOS,!this._splayer||this._splayer.renderType!==2)||v.removeClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":37,"../../../../lib/ua":53,"../../event/eventtype":77}],79:[function(S,m,W){var v=S("../../event/eventtype");m.exports.handle=function(h){var p=this;p.trigger(v.Player.CompleteSeek,h.paramData.toTime),p.one(v.Player.CanPlay,function(){p._enteredProgressMarker&&p.pause()})}},{"../../event/eventtype":77}],80:[function(S,m,W){var v=S("../../event/eventtype"),h=(S("../../../../lib/constants"),S("../../../../lang/index"),S("../../../../monitor/util"));m.exports.handle=function(o){var l=this,o=o.paramData;l.trigger(v.Private.H5_Loading_Hide),l.trigger(v.Private.Cover_Hide),l.trigger(v.Private.Play_Btn_Hide),l.trigger(v.Private.SettingListHide),l.trigger(v.Private.SelectorHide),l.trigger(v.Private.VolumeVisibilityChange,""),o=o||{},l._monitor&&(o.uuid=h.getUuid(),o.serverRequestId=l._serverRequestId,o.requestId=l._monitor2.session.id,o.cdnIp=l._monitor._userNetInfo.cdnIp,o.localIp=l._monitor._userNetInfo.localIp),l._isError=!0,l.trigger(v.Private.Error_Show,o),l.trigger(v.Private.LifeCycleChanged,{type:v.Player.Error,data:o}),l._monitor2.playError(o)}},{"../../../../lang/index":28,"../../../../lib/constants":33,"../../../../monitor/util":73,"../../event/eventtype":77}],81:[function(S,m,W){var v=S("../../event/eventtype"),h=S("../../../../lib/event"),p=S("./lifecyclecommon"),l={endStart:S("./endstart"),seekStart:S("./seekstart"),requestFullScreen:S("./requestfullscreen"),cancelFullScreen:S("./cancelfullscreen"),error:S("./error"),privateSeiFrame:S("./seiframe"),patchWaiting:S("../video/waiting")},o=[v.Private.EndStart,v.Private.SeekStart,v.Player.RequestFullScreen,v.Player.CancelFullScreen,v.Player.Error,v.Player.Ready,v.Private.Dispose,v.Private.Created,v.Private.SeiFrame,v.Private.PatchWaiting];m.exports.bind=function(t){t.el();for(var e=0;e<o.length;e++){var n=o[e];l[n]!="undefined"&&((r,s,g)=>{var c=r.el();h.on(c,s,function(u){var f=(g&&g.handle?g:p).handle;f.call(r,u,s)})})(t,n,l[n])}}},{"../../../../lib/event":38,"../../event/eventtype":77,"../video/waiting":101,"./cancelfullscreen":78,"./endstart":79,"./error":80,"./lifecyclecommon":82,"./requestfullscreen":83,"./seekstart":84,"./seiframe":85}],82:[function(S,m,W){var v=S("../../event/eventtype");m.exports.handle=function(h,p){this.trigger(v.Private.LifeCycleChanged,{type:p,data:h})}},{"../../event/eventtype":77}],83:[function(S,m,W){S("../../event/eventtype");var v=S("../../../../lib/dom"),h=S("../../../../lib/ua");m.exports.handle=function(){h.IS_IOS&&(h.IS_IOS,!this._splayer||this._splayer.renderType!==2)||v.addClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":37,"../../../../lib/ua":53,"../../event/eventtype":77}],84:[function(S,m,W){var v=S("../../event/eventtype");m.exports.handle=function(h){this._seeking=!0,this.trigger(v.Player.StartSeek,h.paramData.fromTime)}},{"../../event/eventtype":77}],85:[function(S,m,W){S("../../event/eventtype"),m.exports.handle=function(l){var h,p,l=l.paramData,o=l.pts;this._hls2?o=parseInt(1e3*o):this._hls&&(h=l.pts,p=this._initPTS,o=parseInt((h-p)/90,10)),this._seis[o]=this._seis[o]||[],this._seis[o].push(l.dataContent)}},{"../../event/eventtype":77}],86:[function(S,m,W){var v=S("../../event/eventtype");m.exports.handle=function(h){var p=this,l=(p._retrySwitchUrlCount=0,p._liveRetryCount=0,p._clearLiveErrorHandle(),p._dumpBuffer="ABORTED",new Date().getTime()-p.readyTime);p._options.autoplay||p._options._autoplay||!p.paused()||(p.trigger(v.Private.H5_Loading_Hide),p.trigger(v.Private.Play_Btn_Show)),p.trigger(v.Player.CanPlay,{loadtime:l}),p._monitor2.canplay()}},{"../../event/eventtype":77}],87:[function(S,m,W){var v=S("../../event/eventtype"),h=S("../../../../lib/dom"),p=S("../../../../lib/ua");m.exports.handle=function(l){this._seeking=!1;var o=this.tag;o.style.display==="none"&&p.IS_IOS&&setTimeout(function(){h.css(o,"display","block")},100),this.trigger(v.Video.CanPlayThrough)}},{"../../../../lib/dom":37,"../../../../lib/ua":53,"../../event/eventtype":77}],88:[function(S,m,W){m.exports.handle=function(v,h){var p="";v&&v.paramData&&(p=v.paramData),this.trigger(h,p)}},{}],89:[function(S,m,W){var v=S("../../event/eventtype");S("../../../../lang/index"),S("../../../../lib/event"),m.exports.handle=function(h){var p=this;p.waiting=!1,p._ended=!0,p._currentTimeForDisableSeek=0,p.traceLog("video/ended.js","event::ended"),p._monitor2.playFinish(),p.trigger(v.Private.Play_Btn_Show),p.trigger(v.Player.Ended,{playTime:p.getPlayTime()}),p.__disposed||(p._monitor&&p._monitor._onPlayerInit(),p._options.rePlay?(p._monitor&&p._monitor.startHeartBeat(),this._splayer||(p.seek(p._getPlayStartTime()),p.tag.play())):p._options.isLive&&p.trigger(v.Private.H5_Loading_Hide))}},{"../../../../lang/index":28,"../../../../lib/event":38,"../../event/eventtype":77}],90:[function(S,m,W){var v=S("../../event/eventtype"),h=S("../../../../lib/constants"),p=S("../../../../lang/index"),l=(S("../../../../lib/event"),S("../../../../lib/ua")),o=(S("../../../../lib/io"),S("../../../../lib/playerutil")),t="video/error.js";function e(n,r,s){var g=n._options,c=g.source||"";(r=r!==4&&l.IS_IOS&&/qqbrowser/i.test(l.USER_AGENT)?4:r)===4&&o.isHls(c)?o.detectRegionBlock(c,function(u){u?(u={mediaId:g.isLive?"ISLIVE":g.vid||"",error_code:h.ErrorCode.RegionBlock,error_msg:p.get("Error_Region_Block_Text"),diagnosis_info:p.get("Tip_Err_Blocked")},n.logError(u),n.trigger("error",u)):s()}):s()}m.exports.handle=function(n){if((n.target||n.srcElement).error){var r=this;if(r.waiting=!1,r._clearTimeout(),r.checkOnline()&&!r._splayer&&!r._drm){var s,u="",g=n.target||n.srcElement,c=g.error&&g.error.message||"",u="";if(g.error&&g.error.code&&(s=g.error.code,u=h.VideoErrorCode[g.error.code],c=s+" || "+c),r.traceLog(t,"event::error#"+s+"#"+c),r._reportDumpBuffer&&r._reportDumpBuffer(),r._options.isLive)e(r,s,function(){r._options.liveRetry>r._liveRetryCount?r._reloadAndPlayForM3u8():(r._liveRetryCount=0,r.trigger(v.Player.LiveStreamStop),r._liveErrorHandle=setTimeout(function(){var y={mediaId:"ISLIVE",error_code:u,error_msg:c||p.get("Error_Play_Text")+"\uFF0C"+p.get("Error_Retry_Text")};r.logError(y),y.display_msg=h.VideoErrorCodeText[s]||y.error_msg,r.trigger("error",y)}),l.IS_UC&&(r._liveErrorHandle=null))});else if(s==3){if(g="",-1<c.indexOf("no decoder found"))g=p.get("Error_No_Decoder_Text");else if(r._nudgeCount=r._nudgeCount||0,r._nudgeCount<5){r._nudgeCount++;var f=+r._nudgeCount,f=r.getCurrentTime()+f;if(r.traceLog(t,"decode error, try to nudge("+r._nudgeCount+"/5) from "+r.getCurrentTime()+" to "+f+"s, duration: "+r.getDuration()+"("+c+")",!0),f<r.getDuration())return void r._loadByUrlInner(r._options.source,f,!0)}else if(function(){var y=!1,d=this.getOptions();{var a;this._fallback||!o.isHls(d.source)||this._options._native||!o.canPlayHls()||this.swPlayer||(y=!0,this._options.useHlsPluginForSafari=!1,this._options._native=!0,this.traceLog(t,"fallback to native player"),a=this.getCurrentTime(),window.Aliplayer&&window.Aliplayer.reloadInstance(this._options,function(_){_._fallback=!0,d.isLive||_.seek(a)},this))}return y}.call(r)||function(){var y=!1,d=this.getOptions();{var a;!this._fallback&&o.isHls(d.source)&&this._options._native&&o.isSupportHls()&&(y=!0,this._options.useHlsPluginForSafari=!0,this._options._native=!1,this.traceLog(t,"fallback to MSE player"),a=this.getCurrentTime(),window.Aliplayer)&&window.Aliplayer.reloadInstance(this._options,function(_){_._fallback=!0,d.isLive||_.seek(a)},this)}return y}.call(r))return;f={mediaId:r._options.vid||"",error_code:u,error_msg:c},r.logError(f),f.display_msg=h.VideoErrorCodeText[s]+(g?"\uFF0C"+g:""),f.diagnosis_info=p.get("Tip_Err_Decode")+"<br />"+p.get("Tip_Err_Common_Short")+c,r.trigger(v.Player.Error,f)}else r._reloadForVod()||e(r,s,function(){var y,d,a;y=p.get("Error_Play_Text"),d=!1,s<3?y=h.VideoErrorCodeText[s]:r._eventState==h.SUSPEND?(y=p.get("Error_Load_Abort_Text"),u=h.ErrorCode.RequestDataError):r._eventState==h.LOAD_START?(y=p.get("Error_Network_Text"),0<r._options.source.indexOf("auth_key")&&(y=y+"\uFF0C"+p.get("Error_AuthKey_Text")),u=h.ErrorCode.StartLoadData):r._eventState==h.LOADED_METADATA&&(y=p.get("Error_Play_Text"),u=h.ErrorCode.PlayingError),y=y+"\uFF0C"+p.get("Error_Retry_Text"),1<r._urls.length&&r._retrySwitchUrlCount<3&&r._options.source.indexOf(".mpd")==-1&&(r.switchUrl(),d=!0),a={mediaId:r._options.vid||"",error_code:u,error_msg:c},d||(r.logError(a),a.display_msg=y,r.trigger(v.Player.Error,a))})}}else this.traceLog(t,"video.MediaError is null, may be caused by non-video source, like invalid poster ("+(n.target||n.srcElement).poster+")")}},{"../../../../lang/index":28,"../../../../lib/constants":33,"../../../../lib/event":38,"../../../../lib/io":45,"../../../../lib/playerutil":50,"../../../../lib/ua":53,"../../event/eventtype":77}],91:[function(S,m,W){var v=S("../../../../lib/event"),h=S("../../event/eventtype"),p={canplay:S("./canplay"),canplaythrough:S("./canplaythrough"),common:S("./common"),ended:S("./ended"),error:S("./error"),pause:S("./pause"),play:S("./play"),playing:S("./playing"),waiting:S("./waiting"),timeupdate:S("./timeupdate"),manualended:S("./ended"),loadedmetadata:S("./loadedmetadata"),loadeddata:S("./loadeddata"),seeking:S("./seeking"),seeked:S("./seeked"),resize:S("./resize")};m.exports.bind=function(l){l.tag;for(var o in h.Video)o=h.Video[o],((t,e,n)=>{var r=t.tag;v.on(r,e,function(s){n.handle.call(t,s,e),e!=h.Video.Error&&(e==h.Video.ManualEnded&&(e=h.Video.Ended),t.trigger(h.Private.LifeCycleChanged,{type:e,data:s}))})})(l,o,p[o]!==void 0?p[o]:p.common)}},{"../../../../lib/event":38,"../../event/eventtype":77,"./canplay":86,"./canplaythrough":87,"./common":88,"./ended":89,"./error":90,"./loadeddata":92,"./loadedmetadata":93,"./pause":94,"./play":95,"./playing":96,"./resize":97,"./seeked":98,"./seeking":99,"./timeupdate":100,"./waiting":101}],92:[function(S,m,W){var v=S("../../event/eventtype");m.exports.handle=function(h){this.trigger(v.Video.LoadedData),this._monitor2.firstFrame()}},{"../../event/eventtype":77}],93:[function(S,m,W){var v=S("../../event/eventtype");S("../../../../lib/playerutil"),m.exports.handle=function(h){var p=this.tag,l=p.duration<1?0:p.duration;this._getSubVideoConfig().start>l-1&&(console.warn("Params.start ["+this._getSubVideoConfig().start+"] is greater than video.duration ["+l+"] - 1, seeking to 0"),this.setStartEnd(0,this._getSubVideoConfig().end)),this._getWatchTimeConfig().watchStartTime>l-1&&(console.warn("Params.watchStartTime ["+this._getWatchTimeConfig().watchStartTime+"] is greater than video.duration ["+l+"] - 1, seeking to 0"),this.setWatchTime(0,this._getWatchTimeConfig().watchEndTime)),this.trigger(v.Private.ReadyState),this._splayer&&this.trigger(v.Video.DurationChange),this.trigger(v.Video.LoadedMetadata),p.videoWidth&&p.videoHeight||this.trigger(v.Player.VideoUnavailable),this._monitor2.mediaMeta({duration:l,videoWidth:p.videoWidth,videoHeight:p.videoHeight})}},{"../../../../lib/playerutil":50,"../../event/eventtype":77}],94:[function(S,m,W){var v=S("../../event/eventtype"),h=S("../../../../lib/ua");m.exports.handle=function(p){var l=this;l._seeking&&l._splayer||(l._hls&&l._options&&l._options.isLive&&h.IS_FIREFOX&&l.trigger(v.Private.Play_Btn_Show),l._clearTimeout(),l.trigger(v.Private.AutoStreamHide),l.trigger(v.Player.Pause),l._isManualPause&&(l.trigger(v.Private.Play_Btn_Show),l.trigger(v.Private.H5_Loading_Hide),l._monitor2.pause()),l.waiting=!1)}},{"../../../../lib/ua":53,"../../event/eventtype":77}],95:[function(S,m,W){var v=S("../../event/eventtype");m.exports.handle=function(h){this.trigger(v.Private.Error_Hide),this.trigger(v.Private.Cover_Hide),this.trigger(v.Private.AutoStreamHide),this.waiting=!1,this.trigger(v.Player.Play)}},{"../../event/eventtype":77}],96:[function(S,m,W){var v=S("../../event/eventtype");m.exports.handle=function(h){var p,l=this;this.tag.paused||(l.trigger(v.Private.H5_Loading_Hide),l.trigger(v.Private.Cover_Hide),l.trigger(v.Private.Info_Hide),l.waiting=!1,l._ended=!1,l._liveRetryCount=0,l._vodRetryCount=0,l._seeking=!1,p=l.getCurrentTime(),l._waitingReloadTime!=p&&(l._waitingTimeoutCount=0),l._checkTimeoutHandle&&(clearTimeout(l._checkTimeoutHandle),l._checkTimeoutHandle=null),l._waitingLoadedHandle&&(clearTimeout(l._waitingLoadedHandle),l._waitingLoadedHandle=null),l._ucSourceHandle&&(clearTimeout(l._ucSourceHandle),l._ucSourceHandle=null),l._waitingDelayLoadingShowHandle&&(clearTimeout(l._waitingDelayLoadingShowHandle),l._waitingDelayLoadingShowHandle=null),l._waitingTimeoutHandle&&(clearTimeout(l._waitingTimeoutHandle),l._waitingTimeoutHandle=null,l._ccService)&&l._options.isLive&&(p=l._ccService.getCurrentSubtitle(),l._setDefaultCC=!0,p)&&l._ccService.switch(p),l.trigger(v.Private.AutoStreamHide),l.trigger(v.Player.Playing),l.trigger(v.Private.Error_Hide),l.trigger(v.Private.Play_Btn_Hide))}},{"../../event/eventtype":77}],97:[function(S,m,W){var v=S("../../event/eventtype"),h=S("../../../../feature/ratioAdapter");m.exports.handle=function(p){this.trigger(v.Video.Resize);var l=this.getOptions();if(l.autoSize){if(!this._ratioAdapter){if(l.autoSize!==!0&&l.autoSize!=="width"&&l.autoSize!=="height")return void console.warn("Unknown parameter [autoSize]: "+l.autoSize+", only true/height/width are supported");l.autoSize===!0&&(l.autoSize="height"),this._ratioAdapter=new h}this._ratioAdapter.autoResize(this.tag.videoWidth/this.tag.videoHeight,this,l.autoSize)}}},{"../../../../feature/ratioAdapter":26,"../../event/eventtype":77}],98:[function(S,m,W){var v=S("../../event/eventtype");m.exports.handle=function(h){this.trigger(v.Video.Seeked),this._monitor2.seekEnd()}},{"../../event/eventtype":77}],99:[function(S,m,W){var v=S("../../event/eventtype");m.exports.handle=function(h){var p,l,o,t=this.tag,e=(this.getOptions().disableSeek&&(e=t.currentTime-this._currentTimeForDisableSeek,.01<Math.abs(e))&&(t.currentTime=this._currentTimeForDisableSeek),t.currentTime);this._canSeek(e)||(p=this._getWatchTimeConfig(),o=0,(l=this._getSubVideoConfig()).start||l.end?o=e>l.end?l.end:l.start:(p.watchStartTime||p.watchEndTime)&&(o=e>p.watchEndTime?p.watchEndTime:p.watchStartTime),t.currentTime=o),this.trigger(v.Video.Seeking),this._monitor2.seek()}},{"../../event/eventtype":77}],100:[function(S,m,W){var v=S("../../event/eventtype"),h=S("../../../../lib/ua"),p=S("../../../../lib/event"),l=S("../../plugin/status");function o(t){var e=this;t!=null&&t.length&&t.forEach(function(n){e.trigger(v.Player.SeiFrame,n)})}m.exports.handle=function(t){var e=this;if(e._isError||e.trigger(v.Player.TimeUpdate,t.timeStamp),!e.__disposed){e._decodeErrorNudgeTimer||(e._decodeErrorNudgeTimer=setTimeout(function(){e._nudgeCount=0},3e3)),(h.IS_IOS||h.IS_MAC_SAFARI)&&(clearTimeout(e._waitingPatchTimer),e._waitingPatchTimer=setTimeout(function(){e.waiting||e._isError||e.paused()||e._disposed||(console.log("!!!!!!!manually waiting!!!!!!!"),e.trigger(v.Private.PatchWaiting))},3e3));var n,r,s,g=e.getCurrentTime(),t=(e.tag.seeking||(e._currentTimeForDisableSeek=g),e.waiting&&!e._TimeUpdateStamp&&(e._TimeUpdateStamp=g),e.waiting!=0&&e._TimeUpdateStamp==g||g===0||(e.trigger(v.Private.H5_Loading_Hide),e.trigger(v.Private.AutoStreamHide),e._checkTimeoutHandle&&clearTimeout(e._checkTimeoutHandle),e._waitingTimeoutHandle&&clearTimeout(e._waitingTimeoutHandle),e._waitingLoadedHandle&&clearTimeout(e._waitingLoadedHandle),e._ucSourceHandle&&(clearTimeout(e._ucSourceHandle),e._ucSourceHandle=null),e.waiting=!1),h.IS_ANDROID&&h.IS_UC&&(e._timeNotUpdateCount=e._timeNotUpdateCount||0,e.waiting||g!==e._TimeUpdateStamp||(e._timeNotUpdateCount++,2<=e._timeNotUpdateCount&&(e._timeNotUpdateCount=0,e.trigger(v.Private.PatchWaiting)))),e._TimeUpdateStamp=g,e._options.isLive||(n=e.getDuration(),t=!1,r=0,n<g&&!e.paused()?(r=1,t=!0):n-g<.2&&0<=h.browser.version.indexOf("49.")&&!e.paused()?(r=2,t=!0):e.exceedPreviewTime(g)?(r=3,t=!0):g>=e._getWatchTimeConfig().watchEndTime&&(r=4,t=!0,e.pause()),t&&setTimeout(function(){e._ended||(e._splayer||e.paused()||e.pause(),p.trigger(e.tag,v.Video.ManualEnded),e.traceLog&&e.traceLog("video/timeupdate.js","ManualEnded#"+r+"#"+g+"#"+n))},100)),e._player.tag),c=(t&&e._options.isLive&&(e._player.resolution&&0<t.videoWidth&&0<t.videoHeight&&(0<e._player.resolution.width||0<e._player.resolution.height)&&(e._player.resolution.width!==t.videoWidth||e._player.resolution.height!==t.videoHeight)&&(s={oldResolution:{width:e._player.resolution.width,height:e._player.resolution.height},newResolution:{width:t.videoWidth,height:t.videoHeight}},e.trigger(v.Player.ResolutionChange,s)),e._player.resolution.width=t.videoWidth==0?e._player.resolution.width:t.videoWidth,e._player.resolution.height=t.videoHeight==0?e._player.resolution.height:t.videoHeight),h.IS_CHROME&&Number(h.CHROME_VERSION)<50&&(e._playingSlientPause&&(clearTimeout(e._playingSlientPause),e._playingSlientPause=null),e._playingSlientPause=setTimeout(function(){var _,b;e._status!=l.playing||e.paused()||e._drm||e._urls.length||(_=e.getCurrentTime(),b=e._options.isLive?0:_,e._loadByUrlInner(e._options.source,b,_))},3e3)),e._seis||{}),u=Object.keys(c);if(u.length!==0)for(var f=parseInt(1e3*g,10)+300,y=0;y<u.length;y++){var d=u[y];if(!(d<=f))break;o.call(e,c[d]),delete c[d]}}}},{"../../../../lib/event":38,"../../../../lib/ua":53,"../../event/eventtype":77,"../../plugin/status":106}],101:[function(S,m,W){var v=S("../../event/eventtype"),h=S("../../../../lib/constants"),p=S("../../../../lib/event"),l=S("../../../../lang/index"),o=S("../../../../lib/ua"),t=S("../../../../lib/playerutil"),e="video/waiting.js";m.exports.handle=function(n){var r=this;if(r._monitor2.waiting(),!r._options.isLive){var s=this.getCurrentTime(),g=this.getDuration();if(!r._ended&&0<g&&(g-s<.5||g<s))return r.pause(),r._ended=!0,p.trigger(this.tag,v.Video.ManualEnded),void(r.traceLog&&r.traceLog(e,"ManualEnded#"+s+"#"+g))}r.waiting=!0;function c(){r._checkTimeoutHandle&&(clearTimeout(r._checkTimeoutHandle),r._checkTimeoutHandle=null),r._waitingTimeoutHandle&&(clearTimeout(r._waitingTimeoutHandle),r._waitingTimeoutHandle=null),r._waitingLoadedHandle&&(clearTimeout(r._waitingLoadedHandle),r._waitingLoadedHandle=null),r._waitingDelayLoadingShowHandle&&(clearTimeout(r._waitingDelayLoadingShowHandle),r._waitingDelayLoadingShowHandle=null),r._ucSourceHandle&&(clearTimeout(r._ucSourceHandle),r._ucSourceHandle=null)}c(),r._waitingDelayLoadingShowHandle=setTimeout(function(){o.IS_IOS&&r.paused()||r._isError||r.trigger(v.Private.H5_Loading_Show)},1e3*r._options.delayLoadingShow),r._TimeUpdateStamp=null,r._checkTimeoutHandle=setTimeout(function(){r.trigger(v.Private.AutoStreamShow)},1e3*r._options.loadDataTimeout),r.trigger(v.Player.Waiting),r._waitingTimeoutHandle=setTimeout(function(){var u;r.tag&&r._options&&(r.pause(),u={mediaId:r._options.vid||"",error_code:h.ErrorCode.LoadingTimeout,error_msg:l.get("Error_Waiting_Timeout_Text")},r.logError(u),r.trigger("error",u))},1e3*r._options.waitingTimeout),s=r._options,s.disableLiveHalfRetry&&s.isLive||s.disableVodHalfRetry&&!s.isLive||(r._waitingLoadedHandle=setTimeout(function(){var u=r.getCurrentTime();r._waitingTimeoutCount==0&&u!=r._waitingReloadTime&&(r.traceLog(e,"half-retry::"+r._options.waitingTimeout/2),r._waitingTimeoutCount=1,r._waitingReloadTime=u,u=r._options.isLive?0:u,r._loadByUrlInner(r._options.source,u,!0))},r._options.waitingTimeout/2*1e3)),o.IS_ANDROID&&o.IS_DINGTALK&&(r._ucSourceHandle=setTimeout(function(){t.detectRegionBlock(r._options.source,function(u){u&&(u={mediaId:r._options.vid,error_code:h.ErrorCode.RegionBlock,error_msg:l.get("Error_Region_Block_Text"),diagnosis_info:l.get("Tip_Err_Blocked")},r.logError(u),r.trigger("error",u))})},5e3)),r.on("error",function(){c()})}},{"../../../../lang/index":28,"../../../../lib/constants":33,"../../../../lib/event":38,"../../../../lib/playerutil":50,"../../../../lib/ua":53,"../../event/eventtype":77}],102:[function(S,m,W){(function(v){(function(){var h=typeof Promise=="undefined"?S("es6-promise").Promise:Promise,p=S("../../ui/component"),l=S("../../lib/object"),o=S("../../lib/dom"),t=S("../../lib/event"),e=S("../../ui/exports"),n=S("../../monitor/monitor"),r=S("../../lib/ua"),s=S("../../lib/constants"),g=S("../../lib/playerutil"),c=S("../../lib/util"),u=S("./x5play"),f=S("../../lib/cookie"),y=S("../../lang/index"),d=S("../../feature/autoplaydelay"),a=S("./event/eventmanager"),_=S("../../ui/component/cover"),b=S("../../feature/license"),E=S("../../ui/component/text-track-display"),T=S("../../ui/component/press-fast-forward"),k=S("../../ui/component/double-click-skip"),P=S("../../commonui/autostreamselector"),w=S("./event/eventtype"),D=S("./plugin/lifecyclemanager"),U=S("../service/export"),M=S("../../ui/component/progressmarker"),O=S("../../feature/keyboardControl"),B=S("../../feature/AntiRecord"),j=S("../../lib/vttnext/index"),H=S("../../lib/codec-probe"),R=S("../splayer/splayerinjector"),L=S("../../ui/component/util").throttle,C=S("../../feature/ratioAdapter"),z=S("../../feature/logoManager"),ie=S("../../monitor-new/monitor"),Z="base/player.js",q=p.extend({init:function(x,F){var Y;function re(le){var ae,Q=this;v==="dev"||window.location.protocol==="file:"||window.location.protocol==="resource:"||-1<window.location.href.indexOf("resource://")||this._licenseHasResult||(this._licenseHasResult=!0,F.license&&F.license.key&&F.license.domain?(le.paramData.renderType!=="native"&&(le=le.paramData.codecTag,g.isH265Codec(le)?ae=s.FEATURE_ID_H265:g.isH266Codec(le)&&(ae=s.FEATURE_ID_H266)),b.getLicense(F.license.domain,F.license.key,F.env==="SEA"?"ap-southeast-1":"cn-shanghai").then(function(be){var fe=be.validate(s.PLAYER_SDK_CODE_LEGACY,ae),be=be.validate(s.PLAYER_SDK_CODE,ae),Ee=fe===0||be===0;if(Ee||console.log(s.PLAYER_SDK_CODE_LEGACY,fe,s.PLAYER_SDK_CODE,be),Ee)Q.trigger(w.Private.LicenseHasResult,{result:s.LicenseResultCode.Success,featureId:ae});else{if(fe===2||be===2)return h.reject(s.LicenseResultCode.Expired);{if(fe===1&&be===1)return h.reject(s.LicenseResultCode.NotFound);console.error("license validate unknown error")}}}).catch(function(oe){var fe=String(oe).split("#"),fe=(oe=Number(fe[0]),fe[1]);Q.trigger(w.Private.LicenseHasResult,{result:oe,errorCode:fe,featureId:ae}),b.logError(oe)})):(console.error(y.get("Tip_License_Required")+": https://help.aliyun.com/zh/vod/developer-reference/license-authorization-and-management#13133fa053843"),console.error(y.get("Tip_License_Params")+": https://help.aliyun.com/zh/vod/developer-reference/integration#387d8a4c094im"),this.trigger(w.Private.LicenseHasResult,{result:s.LicenseResultCode.LicenseKeyInvalid})))}this.tag=x,this.loaded=!1,this.played=!1,this.oncePlayed=!1,this.waiting=!1,this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._isError=!1,this._isHls=!1,this._liveRetryCount=0,this._liveRetryTimer=null,this._flvDumpTimer=null,this._vodRetryCount=0,this._nudgeCount=0,this._seeking=!1,this._serverRequestId=0,this._waitingTimeoutCount=0,this._waitingReloadTime=0,this._created=!1,this._enteredProgressMarker=!1,this._liveShiftSeekStartTime=0,this._seis={},this._initPTS=0,this.isMutiLevel=!1,this._antiRecord=null,this._ratioAdapter=null,this._logoManager=null,this._clickPauseEnabled=!1,this._currentTimeForDisableSeek=0,this._loadByUrlStartTime=0,this._posOffset=0,this._onceLogged=!1,this._licenseHasResult=!1,this.__disposed=!1,this.resolution={width:0,height:0},F.skinLayout===void 0&&(F.skinLayout=g.getDefaultH5Layout()),(x=F.skinLayoutIgnore)!=null&&x.length&&(F.skinLayout=g.ignoreSkinLayouts(F.skinLayout,F.skinLayoutIgnore)),g.isRts(F.source)&&!F.autoplay&&(F.preload=!1),F.env==="SEA"&&(F.logReportTo="https://videocloud-sgp.ap-southeast-1.log.aliyuncs.com/logstores/newplayer/track",F.disableDumpBuffer=!0),p.call(this,this,F),this.addClass("prism-player"),F.plugins&&l.each(F.plugins,function(le,ae){this[le](ae)},this),this._createService(),this.UI={},F.useNativeControls?this.tag.setAttribute("controls","controls"):(this.UI=e,F.errorDisplay==0&&(this.UI.errorDisplay=void 0)),F.disablePip&&this.tag.setAttribute("disablePictureInPicture","true"),this._handleLongPress(F),this._handleClickPause_dbClickFullscreen(F),this.initChildren(),this._options.trackLog&&(this._monitor=new n(this,{video_id:0,album_id:0,from:this._options.from,source:this._options.source,logBatched:this._options.logBatched,logReportTo:this._options.logReportTo},this._options.trackLog)),this._monitor2=new ie(this,F),a.onAll(this),this.trigger(w.Private.Create,F._userOptions),this._options.preventRecord&&(this._antiRecord=new B({player:this}),this._antiRecord.start()),this._lifeCycleManager=new D(this),this._overrideNativePlay(),this._liveshiftService&&!this._liveshiftService.validate()?(x={mediaId:this._options.vid||"",error_code:s.ErrorCode.InvalidParameter,error_msg:y.get("ShiftLiveTime_Error")},this.trigger(w.Player.Error,x)):(this._posOffset=this._getSubVideoConfig().start||0,this._options.extraInfo&&(x=this._options.extraInfo).liveRetry&&(this._options.liveRetry=x.liveRetry),this.on(w.Private.ReadyState,function(){this.trigger(w.Player.Ready)}),this.on(w.Player.H265PlayInfo,re),this.on(w.Player.H266PlayInfo,re),this.one(w.Player.CanPlay,re),this.on(w.Private.LicenseHasResult,function(be){var ae=this,be=be.paramData||{},Q=be.result,oe=be.errorCode,fe=be.featureId,be=s.LicenseResultCode,Ee="";switch(Q){case be.LicenseKeyInvalid:case be.DomainInvalid:Ee=y.get(s.LicenseErrorKey.Empty);break;case be.NotFound:var Ee=y.get(s.LicenseErrorKey.Unauthorized),Pe="";fe===s.FEATURE_ID_H265&&(Pe="H265"),fe===s.FEATURE_ID_H266&&(Pe="H266"),console.error(y.get("Tip_License_Feature"),Pe);break;case be.Expired:Ee=y.get(s.LicenseErrorKey.Expired);break;case be.CertInvalid:-1<["E003","E005","E006"].indexOf(oe)?(Ee=y.get(s.LicenseErrorKey.LicenseKeyInvalid)+"("+oe+")",console.error(y.get("Tip_License_Check"))):oe==="E008"?(Ee=y.get(s.LicenseErrorKey.DomainInvalid)+"("+oe+")",console.error(y.get("Tip_License_Domain"))):oe==="E010"&&(Ee=y.get(s.LicenseErrorKey.NotFound)+"("+oe+")",console.error(y.get("Tip_License_Check")))}Ee&&(console.error(y.get("Tip_License_Reason")+" "+Ee),setTimeout(function(){ae.trigger(w.Player.Error,{mediaId:ae._options.vid||"",error_code:s.ErrorCode.LicenseError,display_msg:y.get("Error_Play_Text")+" (LICENSE ERROR)",error_msg:Ee}),ae.tag.pause(),ae.trigger(w.Private.HideUnmuteButton),a.offAll(ae),ae.tag&&ae.tag.parentNode&&ae.tag.parentNode.removeChild(ae.tag),ae.play=function(){},ae.loadByUrl=function(){}}))}),this._thumbnailService&&this._options.thumbnailUrl&&this._thumbnailService.get(this._options.thumbnailUrl),0<this._options.progressMarkers.length&&this.trigger(w.Private.ProgressMarkerLoaded,this._options.progressMarkers),this._options.source&&this._options._native&&this._executeReadyCallback(),this._options.autoplay||this._options.preload?this.trigger(w.Private.H5_Loading_Show):this.trigger(w.Private.Play_Btn_Show),this._extraMultiSources(),this._options.source&&(this.trigger(w.Private.PREPARE,"custom"),this._options.autoPlayDelay?(this._autoPlayDelay=new d(this),(Y=this)._autoPlayDelay.handle(function(){Y.initPlay()})):this.initPlay()),this._options.ratio&&(this._options.autoSize?console.warn("The parameter [ratio] will be ignored when [autoSize] is set."):(this._options.height&&console.warn("The parameter [height] will be ignored when [ratio] is set."),this._ratioAdapter=new C,this._ratioAdapter.autoResize(this._options.ratio,this))),O.init.call(this),(x=this._options.logo)!=null&&x.length&&(this._logoManager=new z({container:this.el(),video:this.tag,logo:this._options.logo})),this._vttBroker=new j({player:this}),this._getUserTextTracks())}});q.prototype.isSupportMSE=function(){return g.isSupportMSE()},q.prototype.initPlay=function(x){this._initPlayBehavior(x,this._options.source)},q.prototype.initChildren=function(){var x=this.options(),F=x.skinLayout;if(F!==!1&&!l.isArray(F))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");F!==!1&&F.length!==0&&(this.options({children:F}),p.prototype.initChildren.call(this)),this.UI.cover=_,x.className="",this.addChild("cover",x),this.UI.autoStreamSelector=P,this.addChild("autoStreamSelector",x),this.UI.progressMarker=M,this.addChild("progressMarker",x),this.UI.textTrackDisplay=E,this.addChild("textTrackDisplay",x),x.longPressFastForward&&(this.UI.pressFastForward=T,this.addChild("pressFastForward",{name:"pressFastForward",align:"free"})),g.enableDbClickSkip(x)&&(this.UI.doubleClickSkip=k,this.addChild("doubleClickSkip",{name:"doubleClickSkip",align:"free"})),this.trigger(w.Private.UiH5Ready)},q.prototype.createEl=function(){var x=!1,F=(this.tag.tagName!=="VIDEO"?(this._el=this.tag,this.tag=p.prototype.createEl.call(this,"video"),this._options.playsinline&&(this.tag.setAttribute("webkit-playsinline",""),this.tag.setAttribute("playsinline",""),this.tag.setAttribute("x-webkit-airplay",""),this.tag.setAttribute("x5-playsinline",""))):(x=!0,this._el=this.tag.parentNode),this._el),Y=this.tag,re=(this._options.enableSystemMenu||(Y.addEventListener?Y.addEventListener("contextmenu",function(le){le.preventDefault()},!1):Y.attachEvent("oncontextmenu",function(){window.event.returnValue=!1})),Y.player=this,o.getElementAttributes(Y));return l.each(re,function(le){F.setAttribute(le,re[le])}),this.setVideoAttrs(),x||(Y.parentNode&&Y.parentNode.insertBefore(F,Y),o.insertFirst(Y,F)),F},q.prototype.setVideoAttrs=function(){var x=this._options.preload,F=this._options.autoplay;if(this.tag.style.width=this._options.videoWidth||"100%",this.tag.style.height=this._options.videoHeight||"100%",x&&this.tag.setAttribute("preload","preload"),F&&r.IOS_VERSION!=="15"&&this.tag.setAttribute("autoplay","autoplay"),r.IS_IOS&&this.tag.setAttribute("poster","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAMZJREFUeAHt0DEBAAAAwqD1T20LL4hAYcCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMDAc2CcpAABaODCqQAAAABJRU5ErkJggg=="),(r.IS_UC||r.dingTalk()||r.IS_QUARK)&&this.tag.setAttribute("renderer","standard"),this._options.extraInfo)for(var Y in this._options.extraInfo)r.IS_OPPO&&Y==="crossOrigin"||this.tag.setAttribute(Y,this._options.extraInfo[Y]);u.adaptX5Play(this)},q.prototype.checkOnline=function(){var x;return!(this._options&&!this._options.debug&&navigator.onLine==0&&((x={mediaId:this._options.vid||"",error_code:s.ErrorCode.NetworkUnavaiable,error_msg:y.get("Error_Offline_Text")}).display_msg=y.get("Error_Offline_Text"),this.trigger(w.Player.Error,x),1))},q.prototype.id=function(){return this.el().id},q.prototype.renderUI=function(){},q.prototype.switchUrl=function(){var x,F;this.traceLog(Z,"switchUrl"),this._urls.length!=0&&(this._currentPlayIndex=this._currentPlayIndex+1,this._urls.length<=this._currentPlayIndex&&(this._currentPlayIndex=0,this._retrySwitchUrlCount++),x=this._urls[this._currentPlayIndex],f.set(s.SelectedStreamLevel,x.definition,365),this.trigger(w.Private.QualityChange,y.get("Quality_Change_Fail_Switch_Text")),F=this.getCurrentTime(),this._vodRetryCount=0,this._originalSource="",this._loadByUrlInner(x.Url,F,!0))},q.prototype.setControls=function(){var x=this.options();x.useNativeControls?this.tag.setAttribute("controls","controls"):typeof x.controls=="object"&&(x=this._initControlBar(x.controls),this.addChild(x))},q.prototype.enableClickPause=function(){this._clickPauseEnabled=!0},q.prototype.disableClickPause=function(){this._clickPauseEnabled=!1},q.prototype._initControlBar=function(x){return new ControlBar(this,x)},q.prototype.getMetaData=function(){},q.prototype.getReadyTime=function(){return this.readyTime},q.prototype.readyState=function(){return this.tag.readyState},q.prototype.getError=function(){return this.tag.error},q.prototype.getRecentOccuredEvent=function(){return this._eventState},q.prototype.getSourceUrl=function(){return this._options?this._options.source:""},q.prototype.getMonitorInfo=function(){return this._monitor?this._monitor.opt:{}},q.prototype.getCurrentQuality=function(){var x;return 0<this._urls.length?{width:(x=this._urls[this._currentPlayIndex]).width,url:x.Url,definition:x.definition}:""},q.prototype.getCurrentPDT=function(){var x;if((r.IS_SAFARI||r.IS_IOS)&&this.tag)return x=Date.parse(this.tag.getStartDate()),isNaN(x)?0:x+1e3*this.getCurrentTime()},q.prototype.stopPlayTimeMonitor=function(){this._playTimeMonitorTimer&&(clearInterval(this._playTimeMonitorTimer),this._playTimeMonitorTimer=null)},q.prototype.startPlayTimeMonitor=function(){var x=this,F=(this._playingTime=0,this._stuckTime=0,this._stuckCount=0,performance.now()),Y=0,re=0,le=!1,ae=0;this.stopPlayTimeMonitor(),this._playTimeMonitorTimer=setInterval(function(){var Q=x.paused()?le=!0:!x.tag,oe=1e3*x.getCurrentTime(),fe=(oe<1e3&&(Q=!0),oe>=1e3*x.tag.duration-1e3&&(Q=!0),performance.now()),be=fe-F,Ee=(F=fe,(oe-Y)/x.tag.playbackRate);Y=oe,Ee<0&&(Q=!0),(oe=x._monitor)!=null&&oe.canplayReported||(Q=!0),x._monitor2.firstFrameTime||(Q=!0),(Q=document.visibilityState==="hidden"?!0:Q)||(le?le=!1:Ee<.8*be?(be<fe-re&&(x._stuckCount++,ae=fe),fe-ae>=1e3*x.getOptions().waitingTimeout?x.stopPlayTimeMonitor():(re=fe,x._playingTime+=Ee,x._stuckTime+=be-Ee)):x._playingTime+=be)},1e3)},q.prototype.setSpeed=function(x,F){F===void 0&&(F=!0),this.tag&&(this._originalPlaybackRate=x,this.tag.playbackRate=x,F)&&this.trigger(w.Private.PlaybackRateChanged,x)},q.prototype.play=function(x){return this.traceLog(Z,"play::"+x),x&&(this.trigger(w.Private.ManualPlay),this._monitor2.manualPlay()),this.tag&&(this.tag.ended||this._ended?this.replay():((this._options.preload||this.loaded)&&this.tag.src||this._initLoad(this._options.source),this.trigger(w.Private.Cover_Hide),this.tag.play())),this._isManualPlay=x||!1,this},q.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this.seek(this._getPlayStartTime()),this.tag.play(),this},q.prototype._getPlayStartTime=function(){return Math.max(0,this._getWatchTimeConfig().watchStartTime||0,this._loadByUrlStartTime||0)},q.prototype._getWatchTimeConfig=function(){var re=this.getOptions(),x=re.start,F=re.end,Y=re.watchStartTime,re=re.watchEndTime,Y=Number(Y),re=Number(re);return(Y||re)&&(g.hasValue(x)||g.hasValue(F))?(this._logOnce("Params.watchStartTime and Params.watchEndTime will be ignored when Params.start or Params.end is set","warn"),{watchStartTime:void 0,watchEndTime:void 0}):(re=re||void 0,(Y=Y||void 0)<0&&(this._logOnce("Params.watchStartTime is less than 0 ["+Y+"], setting to undefined","warn"),Y=void 0),re<0&&(this._logOnce("Params.watchEndTime is less than 0 ["+re+"], setting to undefined","warn"),re=void 0),re<=Y&&(this._logOnce("Params.watchEndTime("+re+") is less than Params.watchStartTime("+Y+"), setting to [undefined, "+re+"]","warn"),Y=void 0),{watchStartTime:Y,watchEndTime:re})},q.prototype._getSubVideoConfig=function(){var x=this.getOptions(),F=x.start,x=x.end,F=Number(F);return x=(x=Number(x))||void 0,(F=F||void 0)<0&&(this._logOnce("Params.start is less than 0 ["+F+"], setting to undefined","warn"),F=void 0),x<0&&(this._logOnce("Params.end is less than 0 ["+x+"], setting to undefined","warn"),x=void 0),x<=F&&(this._logOnce("Params.start("+F+") is greater than Params.end("+x+"), setting to [undefined, "+x+"]","warn"),F=void 0),{start:F,end:x}},q.prototype.pause=function(x){return this.tag&&this.tag.pause(),this._isManualPause=x||!1,this},q.prototype.stop=function(){return this.traceLog(Z,"stop"),this.tag.setAttribute("src",null),this},q.prototype.paused=function(){if(this.tag)return this.tag.paused!==!1},q.prototype.getDuration=function(){var x=0,Y=(this.tag&&(x=this.isPreview()&&this._vodDuration||this.tag.duration),this._getSubVideoConfig()),F=Y.start,Y=Y.end;return x=F||Y?Math.min(this.tag.duration,Y||this.tag.duration)-Math.max(0,F||0):x},q.prototype.getDisplayDuration=function(){var x=0,Y=(this.tag&&(x=this._vodDuration||this.getDuration()),this._getSubVideoConfig()),F=Y.start,Y=Y.end;return x=F||Y?Math.min(this.tag.duration,Y||this.tag.duration)-Math.max(0,F||0):x},q.prototype.getCurrentTime=function(){return this.tag?this.tag.currentTime-this._posOffset:0},q.prototype.seek=function(x){var F;if(!Number.isNaN(x)&&(x=Number(x),x+=this._posOffset,this._canSeek(x)))return this._ended=!1,F=this.tag.duration,this._doSeek(this,x=F<=x?F:x),this},q.prototype._doSeek=L(function(Y){var F=Y[0],Y=Y[1];try{var re=F._originalPlaybackRate||F.tag.playbackRate;["16"].indexOf(r.IOS_VERSION)!==-1&&!F.oncePlayed||(F.tag.currentTime=Y),F._seeking=!0,F.traceLog(Z,"doSeek::"+Y),r.IS_IE11&&setTimeout(function(){F.tag&&(F.tag.playbackRate=re)})}catch(le){console.log(le)}},100),q.prototype.traceLog=function(x,F,Y){x="["+x+"]"+F,this.trigger(w.Private.TraceLog,x),Y&&this._monitor2.traceLog(x)},q.prototype._loadByUrlInner=function(x,F,Y){this.loadByUrl(x,F,Y,!0)},q.prototype.loadByUrl=function(x,F,Y,re){var le,ae=this,Q=(this.traceLog(Z,"loadByUrl::"+x+"#"+F+"#"+Y+"#"+re),this._monitor&&this._monitor._onPlayerUnderload(),this._monitor&&!re&&(this._monitor.reportPlayAbort("loadByUrl"),this._monitor.resetVV()),re||this._monitor2.playAbort("loadByUrl",(le=x,(Q=F)&&(le+="#sec-"+Q),(Q=Y)&&(le+="#atp-"+Q),le)),/\.m3u8|\.flv|\.mp4|artc\:\/\/|rtmp\:\/\//gi),oe=((this._options.source||"").match(Q)||[])[0]!==((x||"").match(Q)||[])[0];if(this._options.liveShiftSource&&(oe=!1),this._options.enableH266&&(oe=!1),this._h265InfoReported=!1,this._probeInfo||(this._probeInfo={}),this._probeInfo.codecTag=void 0,!oe&&(g.isMp4(x)||g.isFlv(x)||g.isHls(x)))return this._options.forceH265||this._options.forceH266||!this._options.enableH265&&!this._options.enableH266||r.IS_ANDROID&&r.dingTalk()&&!g.isFlv(x)?void fe.call(this):void H(x,this._options,function(Ee){var Ee=g.getVideoTrack(Ee.tracks),Pe=(Ee||{}).codecTag||((Pe=(Ee||{}).codec)==null?void 0:Pe.split(".")[0]);ae._probeInfo.codecTag=Pe,Ee&&g.isH265Codec(Pe)?g.isFlv(x)||g.isHls(x)?(ae._splayer||(oe=!0),fe.call(ae)):g.shouldUseBasePlayer({codecTag:Pe,url:x},function(je){je?(ae._splayer&&(oe=!0),ae._probeInfo.codecTag&&R.reportH265PlayInfo.call(ae,{renderType:"native",codecTag:ae._probeInfo.codecTag})):ae._splayer||(oe=!0),fe.call(ae)}):(Ee&&g.isH266Codec(Pe)?ae._splayer||(oe=!0):ae._splayer&&(oe=!0),fe.call(ae))},function(be){fe.call(ae)});function fe(){var be,Ee=this;oe&&window.Aliplayer?(console.log("[RELOAD INSTANCE]"),this.traceLog(Z,"reloadInstance::"+x),this._options.source=x,window.Aliplayer.reloadInstance(this._options,function(){},this)):(re||(this._urls=[]),this._monitor&&!re&&(this._monitor.reset(),this._monitor.startHeartBeat()),this._isError=!1,this._clearTimeout(),this.trigger(w.Private.Error_Hide),this._options.source=x,this._posOffset=this._getSubVideoConfig().start||0,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:x,from:this._options.from}),re||(this.trigger(w.Private.ChangeURL),this._vodRetryCount=0),F&&this._canSeek(F)?this._loadByUrlStartTime=F-this._posOffset:this._loadByUrlStartTime=0,this._options._autoplay=Y,this.initPlay(Y),(be=this._options.autoplay||Y)&&this.trigger(w.Private.Cover_Hide),be?this.trigger(w.Player.Play):this.trigger(w.Player.Pause),this._options.isLive||!F&&F!=0||isNaN(F)||t.one(this.tag,w.Video.CanPlay,function(Pe){be&&(r.IS_IOS||r.IS_MAC_SAFARI)&&Ee._splayer&&Ee.play()}))}fe.call(this)},q.prototype.setLogo=function(x){this._logoManager&&this._logoManager.dispose(),this._logoManager=new z({container:this.el(),video:this.tag,logo:x})},q.prototype.dispose=function(){this.__disposed||(this.__disposed=!0,this.trigger(w.Private.Dispose),this.tag.pause(),a.offAll(this),O.dispose.call(this),this._ratioAdapter&&(this._ratioAdapter.dispose(),this._ratioAdapter=null),this._logoManager&&(this._logoManager.dispose(),this._logoManager=null),this._antiRecord&&(this._antiRecord.dispose(),this._antiRecord=null),this._monitor&&(this._monitor.reportPlayAbort("dispose"),this._monitor.removeEvent(),this._monitor=null),this._monitor2.playAbort("dispose"),this._monitor2.destroy(),this._monitor2=void 0,this._autoPlayDelay&&this._autoPlayDelay.dispose(),this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._playingSlientPause&&(clearTimeout(this._playingSlientPause),this._playingSlientPause=null),this._waitingLoadedHandle&&(clearTimeout(this._waitingLoadedHandle),this._waitingLoadedHandle=null),this._ucSourceHandle&&(clearTimeout(this._ucSourceHandle),this._ucSourceHandle=null),this._readyStateTimer&&(clearInterval(this._readyStateTimer),this._readyStateTimer=null),this._vodRetryCountHandle&&(clearTimeout(this._vodRetryCountHandle),this._vodRetryCountHandle=null),this._waitingDelayLoadingShowHandle&&(clearTimeout(this._waitingDelayLoadingShowHandle),this._waitingDelayLoadingShowHandle=null),this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this._flvDumpTimer&&(clearTimeout(this._flvDumpTimer),this._flvDumpTimer=null),this.stopPlayTimeMonitor(),this._disposeService(),this._clearLiveErrorHandle(),this._el.innerHTML="",this.destroy(),this._releaseMediaElement(),this._options.recreatePlayer=null,this._options=null,this.isMutiLevel=!1,this._seis={},this._initPTS=0,this._clickPauseEnabled=!1,this._currentTimeForDisableSeek=0,this._posOffset=0,this._onceLogged=!1)},q.prototype._releaseMediaElement=function(){this.tag.removeAttribute("src"),this.tag.load(),this.tag=null},q.prototype.mute=function(x){return this._muteInner(),this._originalVolumn=this.tag.volume,x||(x=y.get("Volume_Mute"),this._player.trigger(w.Private.Info_Show,{text:x,duration:1e3,align:"lb"})),this._setInnerVolume(0),this},q.prototype._muteInner=function(){this.tag.muted=!0,this.trigger(w.Private.VolumnChanged,-1)},q.prototype.unMute=function(x){return this._unMuteInner(),x||(x=y.get("Volume_UnMute"),this._player.trigger(w.Private.Info_Show,{text:x,duration:1e3,align:"lb"})),this._setInnerVolume(this._originalVolumn||.5),this},q.prototype._unMuteInner=function(){this.tag.muted=!1,this.getOptions().mute&&(this.getOptions().mute=!1),this.trigger(w.Private.VolumnChanged,-2)},q.prototype.muted=function(){return this.tag&&this.tag.muted},q.prototype.getVolume=function(){return this.tag&&this.tag.volume},q.prototype.getOptions=function(){return this._options},q.prototype.setVolume=function(x,F){(x=Math.min(1,Math.max(0,x)))!=0?this._unMuteInner():x==0&&this._muteInner(),this._setInnerVolume(x),x=y.get("Curent_Volume")+"<span>"+(100*x).toFixed()+"%</span>",this._player.trigger(w.Private.Info_Show,{text:x,duration:1e3,align:"lb"})},q.prototype._setInnerVolume=function(x){this.tag.volume=x,this.trigger(w.Private.VolumnChanged,x)},q.prototype.hideProgress=function(){this.trigger(w.Private.HideProgress)},q.prototype.cancelHideProgress=function(){this.trigger(w.Private.CancelHideProgress)},q.prototype.setPlayerSize=function(x,F){this._el&&(this._el.style.width=x,this._el.style.height=F)},q.prototype.getBuffered=function(){return this.tag.buffered},q.prototype.setRotate=function(x){this.tag&&(this._rotate=x,this._setTransform(),this.log("ROTATE",{rotation:x}))},q.prototype.getRotate=function(x){return this._rotate===void 0?0:this._rotate},q.prototype.setImage=function(x){this.tag&&(this._image=x,this._setTransform(),this.log("IMAGE",{mirror:x=="horizon"?2:1,text:x}))},q.prototype.getImage=function(){return this._image},q.prototype.cancelImage=function(){this.tag&&(this._image="",this._setTransform(),this.log("IMAGE",{mirror:0}))},q.prototype.setCover=function(x){var F=document.querySelector("#"+this.id()+" .prism-cover");F&&x&&(F.style.backgroundImage="url("+x+")",this._options.cover=x,this._options.autoplay||this.trigger(w.Private.Cover_Show))},q.prototype.setTextTracks=function(x){this._options.textTracks=x,x=g.unqiueTextTracks(x||[]),this.trigger(w.Private.VttClearTracks),x&&x.length&&this.trigger(w.Private.TextTrackFounded,{from:"user",textTracks:x}),this.trigger(w.Private.CCReset)},q.prototype._setTransform=function(){this._transformProp||(this._transformProp=o.getTransformName(this.tag));var x=" translate(-50%, -50%)";this._rotate&&(x+=" rotate("+this._rotate+"deg)"),this._image&&(this._image=="vertical"?x+=" scaleY(-1)":this._image=="horizon"&&(x+=" scaleX(-1)")),this.tag.style[this._transformProp]=x},q.prototype._startPlay=function(){this.tag.paused&&this.tag.play()},q.prototype._initPlayBehavior=function(x,F){var Y=this;return!this._checkSupportVideoType()&&(g.validateSource(F)?(x===void 0&&(x=!1),this._created||(this._created=!0,this.trigger(w.Private.Created)),this.loaded||this.trigger(w.Player.Init),this._options.mute&&this.mute(!0),this.one(w.Video.CanPlay,function(){var re=Y._getPlayStartTime();Y.getCurrentTime()<re&&Y.seek(re),Y._loadByUrlStartTime=0,Y.tag.playbackRate!==1&&Y.setSpeed(Y.tag.playbackRate)}),this._options.autoplay||this._options._autoplay||this._options.preload||x?(this._options._preload=!0,this._initLoad(F),!this._options.autoplay&&!this._options._autoplay||this._isError||this._dash||this._startPlay()):this.trigger(w.Private.Play_Btn_Show),!0):((x={mediaId:this._options.vid||"",error_code:s.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=y.get("Error_Invalidate_Source"),this.trigger(w.Player.Error,x),!1))},q.prototype._isPreload=function(){return this._options.autoplay||this._options.preload||this._options._preload},q.prototype._initLoad=function(x){x&&(this._isPreload()&&!r.IS_MOBILE?this.trigger(w.Private.H5_Loading_Show):(this.trigger(w.Private.H5_Loading_Hide),this.trigger(w.Private.Play_Btn_Show)),this.tag.setAttribute("src",x),this.oncePlayed=!1,this.loaded=!0)},q.prototype._clearLiveErrorHandle=function(){this._liveErrorHandle&&(clearTimeout(this._liveErrorHandle),this._liveErrorHandle=null)},q.prototype._reloadAndPlayForM3u8=function(){this._liveRetryCount==0&&this.trigger(w.Player.OnM3u8Retry);var x=this._options,F=x.liveRetryInterval+x.liveRetryStep*this._liveRetryCount,Y=this;this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this.traceLog(Z,"reloadAndPlayForM3u8::#"+Y._options.source+"#"+1e3*F),this._liveRetryTimer=setTimeout(function(){Y._liveRetryCount++,Y._loadByUrlInner(Y._options.source,void 0,x.autoplay)},1e3*F)},q.prototype._checkSupportVideoType=function(){var x,F=this,Y=this._options.source,re="";if(g.isRTMP(Y)&&!this._options.useFlashPrism)re=y.get("Error_Not_Support_RTMP");else if(g.isDash(Y)&&!g.isSupportMSE())re=y.get("Error_Not_Support_Mse_Dash");else if(!this.tag.canPlayType||!this._options.source||!r.IS_MOBILE)return"";return 0<Y.indexOf("m3u8")?this.tag.canPlayType("application/x-mpegURL")!=""||g.isSupportHls()||(re=y.get("Error_Not_Support_M3U8_Text")):0<Y.indexOf("mp4")?this.tag.canPlayType("video/mp4")==""&&(re=y.get("Error_Not_Support_MP4_Text")):(g.isRTMP(Y)||g.isFlv(Y))&&r.IS_MOBILE&&(this._options.useFlvPlugOnMobile?g.isSupportFlv()||(re=y.get("Error_Not_Support_Mse_Flv")):re=y.get("Error_Not_Support_Format_On_Mobile")),re&&(Y=g.getFormat(Y),x={mediaId:this._options.vid||"",error_code:s.ErrorCode.FormatNotSupport,error_msg:re+(Y?"(format:"+Y+")":"")},this.logError(x),x.display_msg=re,setTimeout(function(){F.trigger(w.Player.Error,x)})),re},q.prototype._handleLongPress=function(x,F){var Y,re,le=this;function ae(){re?(clearTimeout(re),re=null):t.trigger(F,"longPressEnd")}x.longPressFastForward&&(F=F||this.tag,t.on(F,"longPress",function(){le.trigger(w.Private.FastForwardShow),Y=le.tag.playbackRate,le.tag.playbackRate=2}),t.on(F,"longPressEnd",function(){le.trigger(w.Private.FastForwardHide),le.tag.playbackRate=Y}),re=null,t.on(F,"touchstart",function(){re&&clearTimeout(re),re=setTimeout(function(){re=null,t.trigger(F,"longPress")},500)}),t.on(F,"touchend",ae),t.on(F,"touchcancel",ae))},q.prototype._handleClickPause_dbClickFullscreen=function(x,F){var Y,re,le,ae=this,Q=null;!x.isLive&&x.clickPause&&(this._clickPauseEnabled=!0,Y=r.IS_IOS?"touchstart":"click",F=F||this.tag,t.on(F,Y,function(){ae._clickPauseEnabled&&(x.dbClickFullscreen?(Q&&clearTimeout(Q),Q=setTimeout(function(){ae.paused()?ae.play(!0):ae.pause(!0),Q=null},x.clickPauseDelay)):ae.paused()?ae.play(!0):ae.pause(!0))})),x.dbClickFullscreen&&(re=function(){Q&&(clearTimeout(Q),Q=null);var oe=this.fullscreenService;oe.getIsFullScreen()?oe.cancelFullScreen():oe.requestFullScreen(),this.trigger(w.Private.MarkerTextHide),t.trigger(this.tag,"touchend")},r.IS_IOS?(le=null,t.on(this.tag,"touchstart",function(){le=le?(re.call(ae),clearTimeout(le),null):setTimeout(function(){le=null},x.dbClickFullscreenDelay)})):t.on(this.tag,"dblclick",function(){re.call(ae)}))},q.prototype.getComponent=function(x){return this._lifeCycleManager.getComponent(x)},q.prototype.logError=function(x,F){(this._options.autoplay||this._options._autoplay)&&this._monitor&&this._monitor.reportStartPlay(),(x=x||{}).vt=this.getCurrentTime(),this.log(F?"ERRORRETRY":"ERROR",x)},q.prototype.log=function(x,F){var Y=0,re=0;if(this._monitor)return this._options&&(Y=this._options.vid||"0",re=this._options.from||"0"),this._monitor.updateVideoInfo({video_id:Y,album_id:0,source:this._options.source,from:re}),this._monitor._log(x,F)},q.prototype.setSanpshotProperties=function(x,F,Y){if(this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric.width=x,this._snapshotMatric.height=F,1<Y)throw new Error("rate doesn't allow more than 1");this._snapshotMatric.rate=Y},q.prototype.setSnapshotProperties=function(x,F,Y){this.setSanpshotProperties(x,F,Y)},q.prototype.takeSnapshot=function(){var x=document.createElement("canvas"),Q=this.tag,F=Q.videoWidth,Y=Q.videoHeight,re=this._getSanpshotMatric(),le=(x.width=re.width||F,x.height=re.height||Y,this.getCurrentTime()),ae=x.getContext("2d"),oe=(ae.save(),this.getImage()),oe=(oe=="vertical"?(ae.translate(0,x.height),ae.scale(1,-1)):oe=="horizon"&&(ae.translate(x.width,0),ae.scale(-1,1)),Q),Q=(this._splayer&&(oe=this._splayer.renderType===2?this._el.querySelector("canvas"):this._el.querySelector("video")),ae.drawImage(oe,0,0,F,Y),ae.restore(),g.drawSnapshotText(ae,this.getOptions()),""),oe="";try{Q=x.toDataURL("image/jpeg",re.rate||1)}catch(fe){(oe=fe)&&oe.message&&-1<oe.message.indexOf("Tainted canvases")&&(oe=new Error('\u622A\u56FE\u529F\u80FD\u9700\u8981\u8BBE\u7F6E\u64AD\u653E\u5668\u53C2\u6570 extraInfo: { crossOrigin:"anonymous" }'))}return F="",Y="",Q&&(ae=(F=Q).substr(F.indexOf(",")+1),Y=c.toBinary(ae)),{time:le,base64:F,binary:Y,error:oe}},q.prototype.getStatus=function(){return this._status||"init"},q.prototype.enterProgressMarker=function(){this._enteredProgressMarker=!0},q.prototype.isInProgressMarker=function(){return this._enteredProgressMarker},q.prototype.exitProgressMarker=function(){this._enteredProgressMarker=!1},q.prototype.setProgressMarkers=function(x){this.trigger(w.Private.ProgressMarkerChanged,x=x||[])},q.prototype.getProgressMarkers=function(){return this._progressMarkerService?this._progressMarkerService.progressMarkers:[]},q.prototype.setPreviewTime=function(x){this._options.playConfig||(this._options.playConfig={}),this._options.playConfig.PreviewTime=x},q.prototype.getPreviewTime=function(){var x=0;return x=this._options.playConfig?this._options.playConfig.PreviewTime:x},q.prototype.exceedPreviewTime=function(x){return this.isPreview()&&x>=this._options.playConfig.PreviewTime},q.prototype.isPreview=function(){var x=this._options.playConfig.PreviewTime,F=this._vodDuration||this.tag.duration;return 0<x&&x<F},q.prototype.getStats=function(){return new h(function(x){x()})},q.prototype.setTraceId=function(x){this._monitor&&this._monitor.updateTraceId(x),this._monitor2.updateTraceId(x)},q.prototype._canSeek=function(x){var Y=this._getSubVideoConfig(),F=Y.start,Y=Y.end;return F||Y?!(x<F||Y<x):!(!(F=this._getWatchTimeConfig()).watchStartTime||F.watchEndTime)||!(x<F.watchStartTime||x>F.watchEndTime)},q.prototype.setWatchTime=function(x,F){this._options.watchStartTime=x,this._options.watchEndTime=F,this.trigger(w.Private.UpdateWatchTime),x=this.getCurrentTime(),F=this._getWatchTimeConfig(),x<F.watchStartTime?this.seek(F.watchStartTime):x>F.watchEndTime&&this.seek(F.watchEndTime)},q.prototype.setNextWatchTime=function(x,F){this._options.watchStartTime=x,this._options.watchEndTime=F},q.prototype.setStartEnd=function(x,F){this._options.start=x,this._options.end=F,x=this._getSubVideoConfig(),this._posOffset=x.start||0,this.trigger(w.Player.DurationChange),F=this.getCurrentTime()+this._posOffset,F<x.start?this.seek(0):F>x.end&&this.seek(x.end-this._posOffset)},q.prototype.setNextStartEnd=function(x,F){this._options.start=x,this._options.end=F},q.prototype.getPlayTime=function(){return Math.round(this._playingTime/1e3)},q.prototype._getSanpshotMatric=function(){return this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric},q.prototype._autoplayFailedHandler=function(){var x,F=this;(x=this.getOptions().autoplayPolicy)!=null&&x.fallbackToMute&&!this.muted()?(this.mute(!0),(x=this.tag.play())?x.then(function(){F.trigger(w.Private.MutedAutoplay)}).catch(function(Y){F.tag.paused?(console.warn("Muted autoplay failed",Y),F.unMute(!0)):F.one("canplay",function(){F.trigger(w.Private.MutedAutoplay)})}):this.paused()?this.unMute(!0):this.trigger(w.Private.MutedAutoplay)):(this.oncePlayed=!1,this.trigger(w.Private.Play_Btn_Show),this.trigger(w.Private.H5_Loading_Hide),this.trigger(w.Player.AutoPlayPrevented),this.trigger(w.Player.AutoPlay,!1),this._monitor2.autoPlayHasResult(!1),this._options.cover&&this.trigger(w.Private.Cover_Show))},q.prototype._overrideNativePlay=function(){var x=this.tag.play,F=this;this.tag.play=function(){if(F._monitor&&F._monitor.reportStartPlay(),F._monitor2.play(),F._isManualPause=!1,!F._options.source)return Y={mediaId:F._options.vid||"",error_code:s.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"},F._options.vid||F._options.mediaAuth?void 0:(Y.display_msg=y.get("Error_Empty_Source"),void F.trigger(w.Player.Error,Y));F.readyTime=new Date().getTime();var Y=x.apply(F.tag),re=(F.oncePlayed=!0,Y!==void 0&&Y.then(function(){F._isAutoPlay()&&(F.trigger(w.Player.AutoPlay,!0),F._monitor2.autoPlayHasResult(!0))}).catch(function(le){!F.tag||!F.tag.paused||F._isError||F._options._autoplay||F._switchedLevel||F._autoplayFailedHandler()}),F._originalPlaybackRate||F.tag.playbackRate);return setTimeout(function(){F.tag&&(F.tag.playbackRate=re)}),Y}},q.prototype._extraMultiSources=function(){var x=this._options.source;if(x&&-1<x.indexOf("{")&&-1<x.indexOf("}")){var F="";try{F=JSON.parse(x)}catch(ae){console.error(ae),console.error("\u5730\u5740json\u4E32\u683C\u5F0F\u4E0D\u5BF9")}var Y,re=[];for(Y in F){var le=s.QualityLevels[Y];re.push({definition:Y,Url:F[Y],desc:le||Y})}this._setupSourceList(re)}return re},q.prototype._setupSourceList=function(x){var F;(x=x===void 0?[]:x).length&&(this._currentPlayIndex=g.findSelectedStreamLevel(x,this._options.defaultDefinition),F=x[this._currentPlayIndex],this._urls=x,this._options.source=F.Url,this.trigger(w.Private.SourceLoaded,F))},q.prototype._createService=function(){if(U)for(var x=U.length,F=0;F<x;F++){var Y=U[F],re=Y.condition;re===void 0?re=!0:typeof re=="function"&&(re=re.call(this)),re&&(this[Y.name]=new Y.service(this))}},q.prototype._disposeService=function(){if(U)for(var x=U.length,F=0;F<x;F++){var Y=this[U[F].name];Y!==void 0&&Y.dispose&&Y.dispose()}},q.prototype._executeReadyCallback=function(){if(!this._options._readyCallbackCalled){this._options._readyCallbackCalled=!0;try{this._options.autoplay||this._options.preload||(this.trigger(w.Private.H5_Loading_Hide),this.trigger(w.Private.Play_Btn_Show)),this._options.readyCallback(this)}catch(x){console.log(x)}}},q.prototype._clearTimeout=function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._decodeErrorNudgeTimer&&(clearTimeout(this._decodeErrorNudgeTimer),this._decodeErrorNudgeTimer=null),this._clearLiveErrorHandle()},q.prototype._reloadForVod=function(){var x,F,Y;return this._originalSource||(this._originalSource=this._options.source),!!(this._vodRetryCount<this._options.vodRetry&&navigator.onLine)&&(x=this.getCurrentTime(),(F=this._originalSource).indexOf("auth_key=")<0&&(F=F&&0<F.indexOf("?")?F+"&_t="+new Date().valueOf():F+"?_t="+new Date().valueOf()),this._vodRetryCountHandle&&clearTimeout(this._vodRetryCountHandle),(Y=this).traceLog(Z,"reloadForVod::#"+F+"#"+100*this._vodRetryCount),this._vodRetryCountHandle=setTimeout(function(){Y._loadByUrlInner(F,x,Y.getOptions().autoplay)},100*this._vodRetryCount),this._vodRetryCount=this._vodRetryCount+1,!0)},q.prototype._getUserTextTracks=function(){var x=this._options.textTracks||[];(x=g.unqiueTextTracks(x)).length&&this.trigger(w.Private.TextTrackFounded,{from:"user",textTracks:x})},q.prototype._isAutoPlay=function(){return this._options.autoplay||this._options._autoplay},q.prototype._logOnce=function(x,F){this._onceLogged||(console[F||"log"](x),this._onceLogged=!0)},m.exports=q}).call(this)}).call(this,"prod")},{"../../commonui/autostreamselector":16,"../../feature/AntiRecord":21,"../../feature/autoplaydelay":22,"../../feature/keyboardControl":23,"../../feature/license":24,"../../feature/logoManager":25,"../../feature/ratioAdapter":26,"../../lang/index":28,"../../lib/codec-probe":31,"../../lib/constants":33,"../../lib/cookie":34,"../../lib/dom":37,"../../lib/event":38,"../../lib/object":47,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../../lib/vttnext/index":59,"../../monitor-new/monitor":67,"../../monitor/monitor":72,"../../ui/component":143,"../../ui/component/cover":147,"../../ui/component/double-click-skip":148,"../../ui/component/press-fast-forward":155,"../../ui/component/progressmarker":157,"../../ui/component/text-track-display":168,"../../ui/component/util":173,"../../ui/exports":176,"../service/export":132,"../splayer/splayerinjector":139,"./event/eventmanager":76,"./event/eventtype":77,"./plugin/lifecyclemanager":105,"./x5play":107,"es6-promise":13}],103:[function(S,m,W){S=S("../../../lib/oo").extend({}),m.exports=S},{"../../../lib/oo":48}],104:[function(S,m,W){m.exports={createEl:"createEl",created:"created",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",timeUpdate:"timeupdate",error:"error",ended:"ended",dispose:"dispose",markerDotOver:"markerDotOver",markerDotOut:"markerDotOut"}},{}],105:[function(S,m,W){function v(n){(this._player=n)._status="init",this.components=[];var r=n.getOptions().components;if(r&&h.isArray(r)&&0<r.length)for(var s=0;s<r.length;s++){var u=r[s];if(!u)return void console.log("The "+s+" custome component is "+u);var g=u.type===void 0?u:u.type,c=u.args===void 0?[]:u.args,u=u.name===void 0?"":u.name;if(!g)return void console.log(u+" compenent is "+g);c=c&&0<c.length?[].concat.call([g],c):[],g=new(Function.prototype.bind.apply(g,c)),c=g[l.createEl],c&&typeof c=="function"&&c.call(g,n.el(),n),this.components.push({name:u,obj:g})}var f=this;n.on(p.Private.LifeCycleChanged,function(y){var d=y.paramData,a=d.type;a===p.Video.CanPlayThrough&&f._player.trigger(p.Player.TimeUpdate,d.data.target.currentTime),a===p.Video.Ended&&f._player.trigger(p.Player.TimeUpdate,f._player.getDuration()),f.components.length!=0&&t.call(f,n,y)})}var h=S("../../../lib/object"),p=S("../event/eventtype"),l=S("./lifecycle"),o=S("./status"),t=(v.prototype.getComponent=function(n){var r=null,s=this.components.length;if(n){for(var g=0;g<s;g++)if(this.components[g].name==n){r=this.components[g].obj;break}}return r},function(n,r){if(r){for(var r=r.paramData,s=r.type,g=r.data,c=((r=s)!=p.Video.LoadStart&&r!=p.Video.LoadedData&&r!=p.Video.LoadedMetadata||(s=l.loading),e(n,s),this.components.length),u=0;u<c;u++){var f=this.components[u].obj,y=f[s];y&&typeof y=="function"&&y.call(f,n,g)}s==p.Private.Dispose&&(this.components=[])}}),e=function(n,r){o[r]===void 0||r==o.pause&&(n._status==o.error||n._status==o.ended)||r==o.ready&&n._status==o.playing||(n._status=r)};m.exports=v},{"../../../lib/object":47,"../event/eventtype":77,"./lifecycle":104,"./status":106}],106:[function(S,m,W){m.exports={init:"init",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",error:"error",ended:"ended"}},{}],107:[function(S,m,W){function v(l,o){var t=l.el().style.height,e=l.el().style.width,n=(l.originalLayout={container:{height:t,width:e},video:{width:l.tag.style.width,height:l.tag.style.height}},document.body.clientHeight*(window.devicePixelRatio||1)+"px"),r=document.body.clientWidth+"px";width=o?(height=n,r):(height=t.indexOf("%")?t:t+"px",e.indexOf("%")?e:e+"px"),l.tag.style.width=r,l.tag.style.height=n,l.el().style.height=o?n:height}var h=S("../../lib/ua"),p=S("../../lib/dom");m.exports.isAndroidX5=function(){return h.os.android&&h.is_X5||h.dingTalk()},m.exports.adaptX5Play=function(l){h.os.android&&h.is_X5&&(l._options.x5_type=="h5"&&(l.tag.setAttribute("x5-video-player-type",l._options.x5_type),window.onresize=function(){var o,t;v(l,l._options.x5_fullscreen||l._options.x5_video_position=="center"),(o=l)._x5VideoOrientation=="landscape"&&(o._originalTagWidth=o.tag.style.width,o._originalTagHeight=o.tag.style.height,(t=document.querySelector("#"+o.id()+" .prism-controlbar"))&&parseFloat(t.offsetHeight),o.tag.style.height="100%",o.tag.style.width=window.screen.width+"px")},l.tag.addEventListener("x5videoenterfullscreen",function(){v(l,l._options.x5_fullscreen||l._options.x5_video_position=="center"),l.trigger("x5requestFullScreen")}),l.tag.addEventListener("x5videoexitfullscreen",function(){var o,t;(o=l).originalLayout&&(t=o.originalLayout,o.el().style.height=t.container.height,o.el().style.width=t.container.width,o.tag.style.width=t.video.width,o.tag.style.height=t.video.height),l.trigger("x5cancelFullScreen"),l.fullscreenService.getIsFullScreen()&&l.fullscreenService.cancelFullScreen()}),l.on("requestFullScreen",function(){l._options.x5_video_position=="top"&&p.removeClass(l.tag,"x5-top-left"),h.os.android&&h.is_X5&&l._options.x5LandscapeAsFullScreen&&(l.tag.setAttribute("x5-video-orientation","landscape"),l._x5VideoOrientation="landscape")}),l.on("cancelFullScreen",function(){l._options.x5_video_position=="top"&&p.addClass(l.tag,"x5-top-left"),h.os.android&&h.is_X5&&l._options.x5LandscapeAsFullScreen&&(l.tag.setAttribute("x5-video-orientation","portrait"),v(l,l._options.x5_fullscreen||l._options.x5_video_position=="center"),l._x5VideoOrientation="portrait")})),l._options.x5_fullscreen!==void 0&&l._options.x5_fullscreen&&(l.tag.setAttribute("x5-video-player-fullscreen",l._options.x5_fullscreen),p.addClass(l.tag,"x5-full-screen")),l._options.x5_video_position=="top"&&p.addClass(l.tag,"x5-top-left"),l._options.x5_orientation!==void 0)&&l.tag.setAttribute("x5-video-orientation",l._options.x5_orientation)}},{"../../lib/dom":37,"../../lib/ua":53}],108:[function(S,m,W){var v=S("../../lib/object"),h=S("../../lib/io"),p=S("../../config"),l=S("../../lang/index"),o=S("../../lib/constants"),t=S("../../lib/playerutil"),e=S("../base/event/eventtype"),n="dashinjector.js";m.exports.inject=function(r,s,g,c){var u=c.source;if(!function(y){return!this._dash&&t.isDash(y)&&t.isSupportMSE()}.call(r,u))return console.warn("Should not inject dash player");function f(){this._disposed||(this._disposed=!0,this._destroyDash(),this._superPt&&(this._superPt.dispose.call(this),s.prototype.play=this._superPt.play,s.prototype.pause=this._superPt.pause,s.prototype.initPlay=this._superPt.initPlay,s.prototype.seek=this._superPt.seek,s.prototype.canSeekable=this._superPt.canSeekable))}r._Type=s,r._superType=g,r._superPt=g.prototype,r._disposed=!1,r._dash=null,s.prototype.initPlay=function(){var y=this,d=(this.trigger(e.Private.H5_Loading_Show),performance.now());(function(a,_){var E="aliplayer-dash-min.js",b=this.getOptions(),E=b.dashjsUrl||"https://"+p.domain+p.path+p.h5Version+"/dash/"+E;b.assetPrefix&&(b.assetPrefix,(T=>{throw new TypeError('"'+T+'" is read-only')})("url")),h.loadJS(E,a,_)}).call(this,function(){y.traceLog(n,"got js#"+parseInt(performance.now()-d)+"ms"),function(){var a,_,b,E=!this._dash;this._disposed||(this._destroyDash(),(a=this.getOptions()).vid||(a.isVBR=!0),_={streaming:{retryAttempts:{MPD:a.isLive?a.liveRetry:a.vodRetry}}},_=v.deepMerge(_,a.dashOption),b=dashjs.MediaPlayer().create(),this._dash=b,function(){var T=this,k=this._dash,P=this.getOptions(),w=!1;k.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,function(D){var U,M;w||(w=!0,M=(M=k.getBitrateInfoListFor("video"))==null?void 0:M.map(function(O){return{url:""+o.DASH_QUALITY_PROTOCOL+O.qualityIndex,width:O.width,height:O.height,bitrate:O.bitrate,attrs:{BANDWIDTH:O.bitrate,RESOLUTION:O.width+"x"+O.height}}}),T.trigger(e.Player.LevelsLoaded,{levels:M}),U=k.getCurrentTrackFor("audio"),M=k.getTracksFor("audio").map(function(O){return{id:O.index,language:O.lang,enabled:(U==null?void 0:U.index)===O.index}}),T.trigger(e.Player.AudioTrackUpdated,{audioTracks:M}))}),k.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,function(D){var U,M;D.mediaType==="video"&&(U=T._qualityService.levels||[],M=""+o.DASH_QUALITY_PROTOCOL+D.newQuality,D=U.find(function(O){return O.Url===M}),T.trigger(e.Private.QualityChange,{levelSwitch:!0,url:M,desc:D==null?void 0:D.desc}))}),k.on("bytesAppendedEndFragment",function(D){try{var U,M;D.mediaType==="video"&&(U=D.bufferedRanges.length)&&(M=D.bufferedRanges.end(U-1),D.startTime>M)&&(k.refreshManifest(),T.traceLog(n,"PTS rollback, refresh manifest, expectedStart: "+D.startTime+", resultBufferEnd: "+M),console.warn("PTS rollback, refresh manifest"))}catch(O){console.log("exception",O)}}),k.on(dashjs.MediaPlayer.events.ERROR,function(D){var U=D.error,M=dashjs.MediaPlayer.errors,O=(z=>{var ie,Z,q={};for(ie in z)z.hasOwnProperty(ie)&&(Z=z[ie],q[Z]=ie);return q})(M)[U.code],B=[M.TIME_SYNC_FAILED_ERROR_CODE,M.TIMED_TEXT_ERROR_ID_PARSE_CODE];if(console.log("dash error",D,"code:",O),T.traceLog(n,"dashjs-error::"+O+"#"+U.message+"#"+((D=U.data)==null||(D=D.response)==null?void 0:D.status),!0),!B.includes(U.code)){T._clearTimeout();var j,H,R,L=U.code;switch(L){case M.DOWNLOAD_ERROR_ID_CONTENT_CODE:case M.DOWNLOAD_ERROR_ID_MANIFEST_CODE:case M.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE:case M.DOWNLOAD_ERROR_ID_SIDX_CODE:case M.DOWNLOAD_ERROR_ID_XLINK_CODE:case M.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE:case M.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE:var C=(C=U.data)==null||(C=C.response)==null?void 0:C.status;if(C===404){if(k.isDynamic()&&L===M.DOWNLOAD_ERROR_ID_CONTENT_CODE)return T.traceLog(n,"dashjs::reload mpd because seg 404"),void k.attachSource(P.source);j=o.ErrorCode.NotFoundSourceURL,H=l.get("Error_Not_Found"),R=l.get("Tip_Err_Not_found")}else H=C===403?(j=o.ErrorCode.AuthKeyExpired,l.get("Error_AuthKey_Text")):C===0?(j=o.ErrorCode.RequestDataError,l.get("Error_Play_Text")+","+l.get("Maybe_Cors_Error")):(j=o.ErrorCode.RequestDataError,l.get("Error_Network_Text")+"("+O+"|"+C+")");break;case M.MANIFEST_ERROR_ID_NOSTREAMS_CODE:case M.MANIFEST_ERROR_ID_MULTIPLEXED_CODE:case M.MANIFEST_ERROR_ID_PARSE_CODE:case M.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE:case M.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE:j=o.ErrorCode.LoadedMetadata,H=l.get("Error_Manifest_Decode_Text")+"("+O+")";break;default:j=o.ErrorCode.OtherError,H=l.get("Error_Play_Text")+"("+O+")"}H+="<br>"+U.message,D={mediaId:P.vid||"",mediaAuth:P.mediaAuth||"",error_code:j,error_msg:H,diagnosis_info:R},T.logError(D),T.trigger(e.Player.Error,D),T._dash.reset()}})}.call(this),b.initialize(),b.updateSettings(_),b.setAutoPlay(a.autoplay),b.attachView(this.tag),b.attachSource(a.source),this._initPlayBehavior(),E&&this._executeReadyCallback())}.call(y)},function(){var a={mediaId:c.vid||"",mediaAuth:c.mediaAuth||"",error_code:o.ErrorCode.ModuleLoadError,error_msg:"dash module load error."};y.trigger(e.Player.Error,a)})},Object.defineProperty(s.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return f},set:function(){return f}}),s.prototype._switchLevel=function(y){this.traceLog(n,"switchLevel::"+y);var d=this._dash;y?(y=Number(y.replace(o.DASH_QUALITY_PROTOCOL,"")),d.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1,video:!1}}}}),d.setQualityFor("video",y)):d.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0,video:!0}}}})},s.prototype._switchAudioTrack=function(y){var d=this._dash,a=d.getTracksFor("audio").find(function(_){return _.index===y});a&&d.setCurrentTrack(a)},s.prototype._destroyDash=function(){this._dash&&(this._dash.destroy(),this._dash=null)}}},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/object":47,"../../lib/playerutil":50,"../base/event/eventtype":77}],109:[function(S,m,W){var v=S("../base/player"),h=S("./dashinjector"),p=v.extend({init:function(l,o){o._native=!1,h.inject(this,p,v,o),v.call(this,l,o)}});m.exports=p},{"../base/player":102,"./dashinjector":108}],110:[function(S,m,W){function v(){return(v=Object.assign?Object.assign.bind():function(u){for(var f=1;f<arguments.length;f++){var y,d=arguments[f];for(y in d)!{}.hasOwnProperty.call(d,y)||(u[y]=d[y])}return u}).apply(null,arguments)}var h=S("../../lib/io"),p=S("../../config"),l=S("../../lib/constants"),o=S("../../lib/util"),t=S("../../lib/playerutil"),e=(S("../../lib/dom"),S("../../lang/index")),n=S("../base/event/eventtype"),r=S("../saas/drm"),s=S("../../lib/ua"),g="drminjector.js",c=(()=>{function u(){}var f=u.prototype;return f.destroy=function(){},f.append=function(y){},f.remove=function(y,d){},f.isTextVisible=function(){},f.setTextVisibility=function(y){},u})();m.exports.inject=function(u,f,y,d,a,_,b){var E,T=d.source;function k(B){var j=shaka.util.Error.Code,H="",R=B.data||[];switch(B.code){case j.BAD_HTTP_STATUS:case j.HTTP_ERROR:case j.TIMEOUT:case j.LICENSE_REQUEST_FAILED:H=e.get("Tip_Drm_Request_Err")+P(R);break;case j.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:case j.SESSION_TIMEOUT:window.isSecureContext?(H=e.get("Tip_Drm_Key_System_Unavailable"),R.length&&(H+="<br />"+e.get("Tip_Err_Common_Short")+R)):H=e.get("Tip_Drm_Secure_Context");break;case j.FAILED_TO_CREATE_CDM:window.location.protocol==="file:"&&(H=e.get("Tip_Drm_File_Not_Allowed"));break;case j.HLS_INVALID_PLAYLIST_HIERARCHY:H=e.get("Tip_Drm_Playlist_Hierarchy")}return B=P(R),H||B}function P(B){return e.get("Tip_Err_Common")+B}function w(B){var j=this;this._drm.load(this._options.source,B.startTime).then(function(){if(j.trigger(n.Private.H5_Loading_Hide),B.continuePlay&&(j.play(),B.prevVariant)&&B.prevVariant!==0){for(var H,R=j._drm.getVariantTracks(),L=0;L<R.length;L++)if(R[L].id===B.prevVariant){H=R[L];break}H&&j._drm.selectVariantTrack(H,!0)}}).catch(function(H){U.call(j,H)})}function D(){M();var j=l.ErrorCode.DrmNotSupported,B=e.get("Error_Drm_Not_Supported"),j={mediaId:this._options.vid||"",error_code:j,error_msg:B,diagnosis_info:e.get("Tip_Drm_Unsupported")};this.logError(j),this.trigger(n.Player.Error,j)}function U(B){M();var H=l.ErrorCode.DrmLoadError,j=e.get("Error_Drm_Load"),H={mediaId:this._options.vid||"",error_code:H,error_msg:j+" | "+this._shakaCodeMap[B.code],drm_info:JSON.stringify({cdmData:this._cdmData,licenseData:this._licenseData})};this.logError(H),H.diagnosis_info=k.call(this,B),this.trigger(n.Player.Error,H)}function M(){this._sessionTimer&&(clearTimeout(this._sessionTimer),this._sessionTimer=null)}function O(B,j){j=j.getVariantTracks().find(function(H){return H.active}),console.log("activeTrack",j),B.trigger(n.Private.QualityChange,{levelSwitch:!0,bitrate:j.bandwidth,desc:j.height})}!_&&(d=T,u._drm||!t.isDash(d)&&!t.isHls(d))||(u._isDrm=!0,u._drm=null,u._isLoadedDrm=!1,u._sessionTimer=null,u._isFairPlay=s.IS_MAC_SAFARI||s.IS_IOS,u._fairPlayHandlers={},u._shakaCodeMap={},u._cdmData="",u._licenseData="",console.log("use FairPlay",u._isFairPlay),f.prototype._checkDrmReady=function(){return!(this._drm==null&&!this._isFairPlay&&(console.warn("please invoke this method after ready event"),1))},f.prototype.play=function(B){if(this.traceLog(g,"play::"+B),this._checkDrmReady())return this._isManualPlay=B||!1,B&&this._monitor2.manualPlay(),this.trigger(n.Private.Cover_Hide),this.tag.ended?this.replay():(this.getCurrentTime(),this.tag.paused&&this.tag.play()),this},f.prototype.initPlay=function(B){var j,H,R;function L(C,z){var ie,Z,q,x;C._antiRecord&&(console.log("Manual check before load source"),C._antiRecord.check())||(!shaka.Player.isBrowserSupported()||!(!s.IS_ANDROID||!s.IS_UC&&!s.IS_FIREFOX)?D.call(C):(ie=null,shaka.Player.probeSupport().then(function(F){ie&&(clearTimeout(ie),ie=null),F&&F.drm&&F.drm["com.widevine.alpha"]?C.destroy(x):D.call(C)}),ie=setTimeout(function(){D.call(C)},5e3),Z=!C._drm,q=function(){var F,Y,re;C._drm=new shaka.Player(C.tag),E(C,C._drm),shaka.util.Error.Code.SESSION_TIMEOUT="SESSION_TIMEOUT",C._shakaCodeMap=(F=shaka.util.Error.Code,Y={},Object.keys(F).forEach(function(le){Y[F[le]]=le}),Y),re=C._options.isLive?"https://"+t.getLiveHostByRegion(C._options.region):"https://vod."+C._options.region+".aliyuncs.com",C._drm.configure(v({drm:{servers:{"com.widevine.alpha":re,"com.microsoft.playready":re},retryParameters:{maxAttempts:1}}},C._options.drmOption||{},{textDisplayFactory:function(){return new c}})),C._drm.getNetworkingEngine().registerRequestFilter(function(le,ae){shaka.util.StringUtils;var Q=shaka.util.Uint8ArrayUtils;le==shaka.net.NetworkingEngine.RequestType.LICENSE&&(le=Q.toBase64(new Uint8Array(ae.body)),Q=C._options.isLive?r.getRequestUrl(le,C):r.postData(le,C),C._cdmData=le,ae.uris[0]=Q.url,ae.headers["content-type"]="application/x-www-form-urlencoded",ae.body=Q.data)}),C._drm.getNetworkingEngine().registerResponseFilter(function(le,ae){var Q=shaka.util.StringUtils,oe=shaka.util.Uint8ArrayUtils;le==shaka.net.NetworkingEngine.RequestType.LICENSE&&(le=Q.fromUTF8(ae.data),Q=JSON.parse(le),le=C._options.isLive?Q.Response.B64License:JSON.parse(Q.License).b64License,C._licenseData=le,ae.data=oe.fromBase64(le))}),C._drm.addEventListener("error",function(le){console.log("errorMessage"),console.log(le.detail.code),console.log(le.detail)}),C._drm.load(C._options.source).then(function(){C._initPlayBehavior(z)}).catch(function(le){U.call(C,le)}),M.call(C),C.one(n.Video.CanPlay,function(){M.call(C)}),C._sessionTimer=setTimeout(function(){C._isError||(U.call(C,{code:"SESSION_TIMEOUT"}),C._drm&&C._drm.destroy())},C._player.getOptions().drmSessionTimeout||5e3),a&&a(C._drm),Z&&(C._executeReadyCallback(),C._urls)&&0<C._urls.length&&(C._currentPlayIndex=t.findSelectedStreamLevel(C._urls,C._options.defaultDefinition),re=C._urls[C._currentPlayIndex],C.trigger(n.Private.SourceLoaded,re))},x=function(F){try{q()}catch(Y){console.log(Y)}}))}o.contentProtocolMixed(T)?(M(),(j={mediaId:this._options.vid||"",error_code:l.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=e.get("Request_Block_Text"),this.trigger(n.Player.Error,j)):this._options.accessKeyId&&this._options.accessKeySecret?((H=this)._waitingTimeoutCount=1,this._isFairPlay?(this.trigger(n.Private.H5_Loading_Show),function(C,z){var ie;this._isFairPlay&&((()=>{var Z;return s.IS_IOS?(Z=parseInt(s.os.version),console.log("osVersion",Z),12<=Z):s.IS_MAC_SAFARI?(Z=parseInt(s.browser.version),console.log("browserVersion",Z),12<=Z):void 0})()?((ie=this).destroy(),r.loadCertificate(this,function(){C&&C(),ie._initPlayBehavior(z,ie._options.source),ie._executeReadyCallback()})):D.call(this))}.call(this,a,B)):this._isLoadedDrm&&typeof shaka!="undefined"?L(this,B):(this.trigger(n.Private.H5_Loading_Show),R=performance.now(),function(C,z){var ie="aliplayer-drm-min.js",Z="",Z=p.domain?"https://"+p.domain+p.path+p.h5Version+"/drm/"+ie:"/build/drm/"+ie,q=(this._options.shakaUrl&&(Z=this._options.shakaUrl),this);h.loadJS(Z,function(){shaka.polyfill.installAll(),C.apply(q)},function(x){z&&z(x)})}.call(H,function(){this.traceLog(g,"got js#"+parseInt(performance.now()-R)),this._isLoadedDrm=!0,L(this,B)},function(C){C={mediaId:H._options.vid||"",mediaAuth:H._options.mediaAuth||"",error_code:l.ErrorCode.ModuleLoadError,error_msg:"drm player module load error."+(C?C.message:"")},H.trigger(n.Player.Error,C)}))):(M(),(j={mediaId:this._options.vid||"",error_code:l.ErrorCode.InvalidParameter,error_msg:"No sts params."}).display_msg=e.get("Error_Drm_No_Sts"),this.trigger(n.Player.Error,j))},f.prototype.destroy=function(B){var j;this._drm?(M.call(j=this),this._drm.destroy().then(function(){j._drm=null,typeof B=="function"&&B(j)})):(this._isFairPlay&&this._destroyFairPlay(),typeof B=="function"&&B(this))},f.prototype._destroyFairPlay=function(){r.destroyFairPlay.call(this)},f.prototype.dispose=function(){y.dispose.call(this),this.destroy()},f.prototype._switchLevel=function(B,j){if(j=j||{isAuto:!0},this.trigger(n.Player.LevelSwitch),this._switchedLevel=!0,this._isFairPlay){this._manuallySwitchDrmLevel=!j.isAuto;var H=this.autoplay||this._status!="pause";this._loadByUrlInner(B,this.getCurrentTime(),H)}else if(j.isAuto)this._drm.configure({abr:{enabled:!0}}),O(this._player,this._drm);else{for(var R,L=this._drm.getVariantTracks(),C=0;C<L.length;C++){var z=L[C];if(Number(z.bandwidth)===Number(j.bitrate)&&Number(z.height)===Number(j.resolution.split("x")[1])){R=z;break}}R||console.warn("cannot find target track",j),this._drm.configure({abr:{enabled:!1}}),this._drm.selectVariantTrack(R,!this._options.seamlessHandover)}var ie=this;setTimeout(function(){ie.trigger(n.Player.LevelSwitched),this._switchedLevel=!1},1e3)},f.prototype._getDRMEncryptItem=function(){var B=this._urls;if(B&&0<B.length)for(var j=B.length,H=0;H<j;H++){var R=B[H];if(R.Url==this._options.source&&+R.encryption)return R}return""},f.prototype._getItemBySource=function(){var B=this._urls;if(B&&0<B.length)for(var j=B.length,H=0;H<j;H++){var R=B[H];if(R.Url==this._options.source)return R}return""},E=function(B,j){j.addEventListener("error",function(C){var R,L=B,C=C.detail,ie="Error code:"+C.code+"message:"+C.message,z=(L.traceLog(g,ie,!0),console.log(ie),l.ErrorCode.OtherError),ie=e.get("Error_Play_Text");C.code==shaka.util.Error.Code.EXPIRED?function(){var Z=this,q=(this.trigger(n.Private.H5_Loading_Show),null);this._options.isLive||(q=this.getCurrentTime());var x,F=!this.paused(),Y=this._drm.getConfiguration().abr.enabled;if(!Y){for(var re=this._drm.getVariantTracks(),le=0;le<re.length;le++)if(re[le].active){x=re[le].id;break}}var ae={startTime:q,continuePlay:F,prevVariant:x,isAdaptive:Y};typeof this._options.refreshAccessInfo=="function"?this._options.refreshAccessInfo().then(function(Q){(Q=Q||{}).accessKeyId&&(Z._options.accessKeyId=Q.accessKeyId),Q.securityToken&&(Z._options.securityToken=Q.securityToken),Q.accessKeySecret&&(Z._options.accessKeySecret=Q.accessKeySecret),w.call(Z,ae)}):w.call(Z,ae)}.call(L):(C.code==shaka.util.Error.Code.HTTP_ERROR?(z=l.ErrorCode.NetworkError,ie=e.get("Http_Error")):C.code==shaka.util.Error.Code.TIMEOUT?(z=l.ErrorCode.LoadingTimeout,ie=e.get("Error_Waiting_Timeout_Text")):C.code==shaka.util.Error.Code.LICENSE_REQUEST_FAILED?(z=l.ErrorCode.DrmLicenseRequestFailed,ie=e.get("Error_Drm_License_Request_Failed")):C.Category==shaka.util.Error.NETWORK&&(z=l.ErrorCode.NetworkError,ie=e.get("Error_Network_Text")),M.call(L),setTimeout(function(){L.trigger(n.Private.Play_Btn_Hide)}),L.checkOnline()&&(R=L._drm.drmInfo()||{},R={keyIds:Array.from(R.keyIds||[]),initData:String(((R=(R.initData||[])[0])==null?void 0:R.initData)||[]),cdmData:L._cdmData,licenseData:L._licenseData},R={mediaId:L._options.vid||"",error_code:z,error_msg:C.message,shaka_error:JSON.stringify(C.data||[]),drm_info:JSON.stringify(R)},L.logError(R),R.display_msg=ie+" | "+L._shakaCodeMap[C.code],R.diagnosis_info=k.call(L,C),L.trigger(n.Player.Error,R)))}),j.addEventListener("variantchanged",function(H){console.log("DRM Event: variantchanged",H)}),j.addEventListener("abrstatuschanged",function(H){console.log("DRM Event: abrstatuschanged",H)}),j.addEventListener("drmsessionupdate",function(H){console.log("DRM Event: drmsessionupdate",H),M.call(B)}),j.addEventListener("expirationupdated",function(H){console.log("DRM Event: expirationupdated",H),console.log("Exp:",this.getExpiration())}),j.addEventListener("adaptation",function(H){console.log("adaptation",H),O(B,j)}),j.addEventListener("trackschanged",function(H){console.log("DRM EVENT: trackschanged",j.getTextLanguages(),j.getTextTracks());var R=j.getTextLanguages();R&&R.length&&(R=(L=>{var C={subtitle:"subtitles",caption:"captions"},z=(console.log("Building track config"),L.getManifest().textStreams||[]),ie=(console.log("textStreams",z),L.getTextLanguages()),Z=(console.log("languageList",ie),[]);try{z.forEach(function(q){ie.includes(q.language)&&Z.push({kind:C[q.kind]||q.kind,label:q.label,srclang:q.language,src:Array.from(q.segmentIndex)[0].getUris()[0]})})}catch(q){console.log("error in retrieving text track url: ",q)}return Z})(j),B.trigger(n.Private.TextTrackFounded,{from:"drm",textTracks:R}),B.trigger(n.Private.CCReset))})})}},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/dom":37,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../base/event/eventtype":77,"../saas/drm":120}],111:[function(S,m,W){function v(){v=function(){return L};var R,L={},C=Object.prototype,z=C.hasOwnProperty,oe=typeof Symbol=="function"?Symbol:{},ie=oe.iterator||"@@iterator",Z=oe.asyncIterator||"@@asyncIterator",q=oe.toStringTag||"@@toStringTag";function x(Te,ke,Ce,De){Object.defineProperty(Te,ke,{value:Ce,enumerable:!De,configurable:!De,writable:!De})}try{x({},"")}catch(Te){x=function(ke,Ce,De){return ke[Ce]=De}}function F(Te,$e,Ce,De){var Oe,qe,Ne,Xe,$e=$e&&$e.prototype instanceof le?$e:le,$e=Object.create($e.prototype);return x($e,"_invoke",(Oe=Te,qe=Ce,Ne=new Ye(De||[]),Xe=1,function(ot,Je){if(Xe===3)throw Error("Generator is already running");if(Xe===4){if(ot==="throw")throw Je;return{value:R,done:!0}}for(Ne.method=ot,Ne.arg=Je;;){var He=Ne.delegate;if(He&&(He=function tt(Qe,Me){var Be=Me.method,ue=Qe.i[Be];return ue===R?(Me.delegate=null,Be==="throw"&&Qe.i.return&&(Me.method="return",Me.arg=R,tt(Qe,Me),Me.method==="throw")||Be!=="return"&&(Me.method="throw",Me.arg=new TypeError("The iterator does not provide a '"+Be+"' method")),re):(Be=Y(ue,Qe.i,Me.arg),Be.type==="throw"?(Me.method="throw",Me.arg=Be.arg,Me.delegate=null,re):(ue=Be.arg,ue?ue.done?(Me[Qe.r]=ue.value,Me.next=Qe.n,Me.method!=="return"&&(Me.method="next",Me.arg=R),Me.delegate=null,re):ue:(Me.method="throw",Me.arg=new TypeError("iterator result is not an object"),Me.delegate=null,re)))}(He,Ne),He)){if(He===re)continue;return He}if(Ne.method==="next")Ne.sent=Ne._sent=Ne.arg;else if(Ne.method==="throw"){if(Xe===1)throw Xe=4,Ne.arg;Ne.dispatchException(Ne.arg)}else Ne.method==="return"&&Ne.abrupt("return",Ne.arg);if(Xe=3,He=Y(Oe,qe,Ne),He.type==="normal"){if(Xe=Ne.done?4:2,He.arg===re)continue;return{value:He.arg,done:Ne.done}}He.type==="throw"&&(Xe=4,Ne.method="throw",Ne.arg=He.arg)}}),!0),$e}function Y(Te,ke,Ce){try{return{type:"normal",arg:Te.call(ke,Ce)}}catch(De){return{type:"throw",arg:De}}}L.wrap=F;var re={};function le(){}function ae(){}function Q(){}var oe={},fe=(x(oe,ie,function(){return this}),Object.getPrototypeOf),fe=fe&&fe(fe(it([]))),be=(fe&&fe!==C&&z.call(fe,ie)&&(oe=fe),Q.prototype=le.prototype=Object.create(oe));function Ee(Te){["next","throw","return"].forEach(function(ke){x(Te,ke,function(Ce){return this._invoke(ke,Ce)})})}function Pe(Te,ke){var Ce;x(this,"_invoke",function(De,Oe){function qe(){return new ke(function(Ne,Xe){(function $e(Me,Je,He,tt){var Qe,Me=Y(Te[Me],Te,Je);if(Me.type!=="throw")return(Je=(Qe=Me.arg).value)&&typeof Je=="object"&&z.call(Je,"__await")?ke.resolve(Je.__await).then(function(Be){$e("next",Be,He,tt)},function(Be){$e("throw",Be,He,tt)}):ke.resolve(Je).then(function(Be){Qe.value=Be,He(Qe)},function(Be){return $e("throw",Be,He,tt)});tt(Me.arg)})(De,Oe,Ne,Xe)})}return Ce=Ce?Ce.then(qe,qe):qe()},!0)}function je(Te){this.tryEntries.push(Te)}function ze(Te){var ke=Te[4]||{};ke.type="normal",ke.arg=R,Te[4]=ke}function Ye(Te){this.tryEntries=[[-1]],Te.forEach(je,this),this.reset(!0)}function it(Te){if(Te!=null){var ke,Ce=Te[ie];if(Ce)return Ce.call(Te);if(typeof Te.next=="function")return Te;if(!isNaN(Te.length))return ke=-1,(Ce=function De(){for(;++ke<Te.length;)if(z.call(Te,ke))return De.value=Te[ke],De.done=!1,De;return De.value=R,De.done=!0,De}).next=Ce}throw new TypeError(typeof Te+" is not iterable")}return x(be,"constructor",ae.prototype=Q),x(Q,"constructor",ae),x(Q,q,ae.displayName="GeneratorFunction"),L.isGeneratorFunction=function(Te){return Te=typeof Te=="function"&&Te.constructor,!!Te&&(Te===ae||(Te.displayName||Te.name)==="GeneratorFunction")},L.mark=function(Te){return Object.setPrototypeOf?Object.setPrototypeOf(Te,Q):(Te.__proto__=Q,x(Te,q,"GeneratorFunction")),Te.prototype=Object.create(be),Te},L.awrap=function(Te){return{__await:Te}},Ee(Pe.prototype),x(Pe.prototype,Z,function(){return this}),L.AsyncIterator=Pe,L.async=function(Te,ke,Ce,De,Oe){Oe===void 0&&(Oe=Promise);var qe=new Pe(F(Te,ke,Ce,De),Oe);return L.isGeneratorFunction(ke)?qe:qe.next().then(function(Ne){return Ne.done?Ne.value:qe.next()})},Ee(be),x(be,q,"Generator"),x(be,ie,function(){return this}),x(be,"toString",function(){return"[object Generator]"}),L.keys=function(Te){var ke,Ce=Object(Te),De=[];for(ke in Ce)De.unshift(ke);return function Oe(){for(;De.length;)if((ke=De.pop())in Ce)return Oe.value=ke,Oe.done=!1,Oe;return Oe.done=!0,Oe}},L.values=it,Ye.prototype={constructor:Ye,reset:function(Te){if(this.prev=this.next=0,this.sent=this._sent=R,this.done=!1,this.delegate=null,this.method="next",this.arg=R,this.tryEntries.forEach(ze),!Te)for(var ke in this)ke.charAt(0)==="t"&&z.call(this,ke)&&!isNaN(+ke.slice(1))&&(this[ke]=R)},stop:function(){this.done=!0;var Te=this.tryEntries[0][4];if(Te.type==="throw")throw Te.arg;return this.rval},dispatchException:function(Te){if(this.done)throw Te;var ke=this;function Ce(ot){qe.type="throw",qe.arg=Te,ke.next=ot}for(var De=ke.tryEntries.length-1;0<=De;--De){var Oe=this.tryEntries[De],qe=Oe[4],Ne=this.prev,Xe=Oe[1],$e=Oe[2];if(Oe[0]===-1)return Ce("end"),!1;if(!Xe&&!$e)throw Error("try statement without catch or finally");if(Oe[0]!=null&&Oe[0]<=Ne){if(Ne<Xe)return this.method="next",this.arg=R,Ce(Xe),!0;if(Ne<$e)return Ce($e),!1}}},abrupt:function(Te,ke){for(var Ce=this.tryEntries.length-1;0<=Ce;--Ce){var De=this.tryEntries[Ce];if(-1<De[0]&&De[0]<=this.prev&&this.prev<De[2]){var Oe=De;break}}var qe=(Oe=Oe&&(Te==="break"||Te==="continue")&&Oe[0]<=ke&&ke<=Oe[2]?null:Oe)?Oe[4]:{};return qe.type=Te,qe.arg=ke,Oe?(this.method="next",this.next=Oe[2],re):this.complete(qe)},complete:function(Te,ke){if(Te.type==="throw")throw Te.arg;return Te.type==="break"||Te.type==="continue"?this.next=Te.arg:Te.type==="return"?(this.rval=this.arg=Te.arg,this.method="return",this.next="end"):Te.type==="normal"&&ke&&(this.next=ke),re},finish:function(Te){for(var ke=this.tryEntries.length-1;0<=ke;--ke){var Ce=this.tryEntries[ke];if(Ce[2]===Te)return this.complete(Ce[4],Ce[3]),ze(Ce),re}},catch:function(Te){for(var ke=this.tryEntries.length-1;0<=ke;--ke){var Ce,De,Oe=this.tryEntries[ke];if(Oe[0]===Te)return(Ce=Oe[4]).type==="throw"&&(De=Ce.arg,ze(Oe)),De}throw Error("illegal catch attempt")},delegateYield:function(Te,ke,Ce){return this.delegate={i:it(Te),r:ke,n:Ce},this.method==="next"&&(this.arg=R),re}},L}function h(R,L,C,z,ie,Z,q){try{var x=R[Z](q),F=x.value}catch(Y){return C(Y)}x.done?L(F):Promise.resolve(F).then(z,ie)}function p(R){return function(){var L=this,C=arguments;return new Promise(function(z,ie){var Z=R.apply(L,C);function q(F){h(Z,z,ie,q,x,"next",F)}function x(F){h(Z,z,ie,q,x,"throw",F)}q(void 0)})}}var l=typeof Promise=="undefined"?S("es6-promise").Promise:Promise,o=S("../../lib/io"),t=S("../../config"),e=S("../../lang/index"),n=S("../base/event/eventtype"),r=S("../../lib/constants"),s="drminjectorNg.js",g={LoadJs:1,LoadSource:2,PlayerError:3,SupportError:4,ParamsError:5},c={Widevine:"com.widevine.alpha",FairPlay:"com.apple.fps"},u={},f={};function y(R){return d.apply(this,arguments)}function d(){return(d=p(v().mark(function R(L){var C,z,ie,Z,q=this;return v().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(this._drm)return x.next=3,this._drm.destroy();x.next=4;break;case 3:this._drm=null;case 4:x.prev=4,B.call(this,"mod_shaka_s"),x.next=8;var F=L;return new l(function(Y,re){var le="https://"+t.domain+t.path+t.h5Version+"/drm/aliplayer-drm2-min.js";F!=null&&F.shakaUrl&&(le=F==null?void 0:F.shakaUrl),o.loadJS(le,Y,re)});case 8:B.call(this,"mod_shaka_f"),x.next=15;break;case 11:return x.prev=11,x.t0=x.catch(4),console.log("[load shaka-player error]",x.t0),x.abrupt("return",w.call(this,g.LoadJs,x.t0));case 15:if(shaka.polyfill.installAll(),u=D(shaka.util.Error.Code),f=D(shaka.net.NetworkingEngine.RequestType),shaka.Player.isBrowserSupported()){x.next=20;break}return x.abrupt("return",w.call(this,g.SupportError));case 20:if(window.isSecureContext){x.next=22;break}return x.abrupt("return",w.call(this,g.SupportError,{_code:"no-secure-context"}));case 22:if(ie=(Y=>{var re=null;return(Y=Y||{}).widevine||Y.fairplay||(re={message:e.get("Error_Drm_Params_Missing")}),[Y,re]})(L.drm),z=ie[0],ie=ie[1])return x.abrupt("return",w.call(this,g.ParamsError,ie));x.next=25;break;case 25:return L.vid||(this._options.isVBR=!0),ie=new shaka.Player,P.call(this,ie),this._drm=ie,Z={drm:{servers:((Z={})[c.Widevine]=(C=z.widevine)==null?void 0:C.licenseUrl,Z[c.FairPlay]=(C=z.fairplay)==null?void 0:C.licenseUrl,Z),advanced:((C={})[c.Widevine]={serverCertificateUri:(Z=z.widevine)==null?void 0:Z.certificateUrl},C[c.FairPlay]={serverCertificateUri:(Z=z.fairplay)==null?void 0:Z.certificateUrl,serverCertificate:(Z=z.fairplay)==null?void 0:Z.certificate},C)},autoShowText:1},shaka.util.PlayerConfiguration.mergeConfigObjects(Z,L.drmOption||{}),ie.configure(Z),ie.attach(this.tag),ie.getNetworkingEngine().registerRequestFilter(function(Y,re,le){if((Q=re.drmInfo)!=null&&Q.keySystem&&(q._keySystem=re.drmInfo.keySystem),Y===shaka.net.NetworkingEngine.RequestType.LICENSE){B.call(q,"drm_li_s");var ae=j.call(q);if(ae.licenseHeaders&&Object.keys(ae.licenseHeaders).forEach(function(oe){re.headers[oe]=ae.licenseHeaders[oe]}),typeof ae.licenseRequestFilter=="function")return ae.licenseRequestFilter(re,shaka.util)}else if(Y===shaka.net.NetworkingEngine.RequestType.SERVER_CERTIFICATE){B.call(q,"drm_cer_s");var Q=j.call(q);if(typeof Q.certificateRequestFilter=="function")return Q.certificateRequestFilter(re,shaka.util)}}),ie.getNetworkingEngine().registerResponseFilter(function(Y,re,le){if(Y===shaka.net.NetworkingEngine.RequestType.LICENSE){B.call(q,"drm_li_f"),H.call(q,Y,re);var ae=j.call(q);if(typeof ae.licenseResponseFilter=="function")return ae.licenseResponseFilter(re,shaka.util)}else if(Y===shaka.net.NetworkingEngine.RequestType.SERVER_CERTIFICATE&&(B.call(q,"drm_cer_f"),H.call(q,Y,re),ae=j.call(q),typeof ae.certificateResponseFilter=="function"))return ae.certificateResponseFilter(re,shaka.util)}),x.prev=37,x.next=40,ie.load(L.source);case 40:x.next=46;break;case 42:x.prev=42,x.t1=x.catch(37),console.log("error when load source",x.t1),w.call(this,g.LoadSource,x.t1);case 46:this._initPlayBehavior(),this._executeReadyCallback();case 48:case"end":return x.stop()}},R,this,[[4,11],[37,42]])}))).apply(this,arguments)}function a(R){this.traceLog(s,"play::"+R),R&&(this.trigger(n.Private.ManualPlay),this._monitor2.manualPlay()),this._isManualPlay=!!R,this.tag.ended||this._ended?this.replay():this.tag.paused&&this.tag.play()}function _(){this._switchingDesc=null,this._keySystem=null,this._baseType.dispose.call(this),this._drm&&(this._drm.destroy(),this._drm=null)}function b(R,L){var C,z,ie,Z=this._drm;R?(C=Number(R.split(r.DASH_QUALITY_PROTOCOL)[1]),(R=Z.getVariantTracks().find(function(q){return q.id===C}))&&(Z.configure({abr:{enabled:!1}}),z=!1,ie=this.getOptions().seamlessHandover,Z.selectVariantTrack(R,z=typeof ie=="boolean"?!ie:z),z||(this._switchingDesc=L.desc))):(Z.configure({abr:{enabled:!0}}),this._switchingDesc=null)}function E(){var R=this._drm;if(R)return R.getTextTracks().map(function(L){return{language:L.language,label:L.label,kind:L.kind==="subtitle"?"subtitles":"captions",default:L.active}});console.warn("shaka has not been initialized but _getTextTracks is called")}function T(R){var L=this._drm;L&&(R?(L.setTextTrackVisibility(!0),L.selectTextLanguage(R)):L.setTextTrackVisibility(!1))}function k(R){R&&this._drm.selectAudioLanguage(R),O.call(this)}function P(R){var L=this;R.addEventListener("error",function(C){w.call(L,g.PlayerError,C.detail)}),R.addEventListener("trackschanged",function(){(function(){var C,z,ie,Z=this._drm,q=Z.getAudioLanguages(),x=(C=Z.getVariantTracks())==null?void 0:C.find(function(F){return F.active});x&&(z=[],q.length===1&&q[0]==="und"?z.push({id:"und",language:e.get("Default"),enabled:!0}):q.length&&(ie=Z.getAudioLanguagesAndRoles()||[],q.forEach(function(F){var Y;z.push({id:F,language:((Y=ie.find(function(re){return re.language===F}))==null?void 0:Y.label)||F,enabled:F===x.language})})),this.trigger(n.Player.AudioTrackUpdated,{audioTracks:z}))}).call(L),R.keySystem()===c.FairPlay?L.trigger(n.Player.LevelsLoaded,{levels:[{}]}):(O.call(L),M.call(L,R))}),R.addEventListener("adaptation",function(){R.keySystem()!==c.FairPlay&&M.call(L,R)}),this.tag.addEventListener("resize",function(){L._switchingDesc&&L.trigger(n.Private.Info_Show,{text:e.get("Quality_Change_Result")+"<span>"+L._switchingDesc+"</span>",duration:3e3,align:"lb"})})}function w(R,L){var C=this;if(console.log("to handle error of:",R,L,"this._isError",this._isError),this._isError)this.traceLog(s,"drm extra error ["+R+"]"+L+"}",!0);else{L=L||{};var z={mediaId:this.getOptions().vid||"",error_code:"",error_msg:""};switch(R){case g.LoadJs:z.error_code=r.ErrorCode.ModuleLoadError,z.error_msg="drm player module load error."+((L==null?void 0:L.message)||"");break;case g.LoadSource:case g.PlayerError:z.error_code=r.ErrorCode.DrmLoadError,z.error_msg=e.get("Error_Drm_Load")+" | "+(u[L.code]||"")+" "+(ie=>{var Z="";return Z=ie.code===shaka.util.Error.Code.BAD_HTTP_STATUS?(ie==null||(ie=ie.data)==null?void 0:ie[1])||"":Z})(L),z.diagnosis_info=(ie=>{var Z=shaka.util.Error.Code,q="",x=ie.data||[];switch(ie.code){case Z.BAD_HTTP_STATUS:case Z.HTTP_ERROR:case Z.TIMEOUT:case Z.LICENSE_REQUEST_FAILED:q=e.get("Tip_Drm_Request_Err")+U(x);break;case Z.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:case Z.SESSION_TIMEOUT:window.isSecureContext?(q=e.get("Tip_Drm_Key_System_Unavailable"),x.length&&(q+="<br />"+e.get("Tip_Err_Common_Short")+x)):q=e.get("Tip_Drm_Secure_Context");break;case Z.FAILED_TO_CREATE_CDM:window.location.protocol==="file:"&&(q=e.get("Tip_Drm_File_Not_Allowed"));break;case Z.HLS_INVALID_PLAYLIST_HIERARCHY:q=e.get("Tip_Drm_Playlist_Hierarchy");break;case Z.ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:q=e.get("Tip_Drm_Info_Missing")}return ie=U(x),q||ie})(L),z.shaka_error=L||{},L.code===shaka.util.Error.Code.LICENSE_REQUEST_FAILED&&console.log("LICENSE_REQUEST_FAILED => ",L.data[0]);break;case g.SupportError:z.error_code=r.ErrorCode.DrmNotSupported,L._code==="no-secure-context"?z.error_msg=e.get("Tip_Drm_Secure_Context"):(z.error_msg=e.get("Error_Drm_Not_Supported"),z.diagnosis_info=e.get("Tip_Drm_Unsupported"));break;case g.ParamsError:z.error_code=r.ErrorCode.InvalidParameter,z.error_msg=L.message||""}this.logError(z),this.trigger(n.Player.Error,z),shaka.Player.probeSupport().then(function(ie){C.traceLog(s,"probeSupport::"+JSON.stringify(ie),!0)}).catch(function(ie){C.traceLog(s,"probeSupport::"+ie,!0)})}}function D(R){var L={};return Object.keys(R).forEach(function(C){L[R[C]]=C}),L}function U(R){return e.get("Tip_Err_Common")+R}function M(){var R=(L=this._drm.getVariantTracks())==null?void 0:L.find(function(C){return C.active}),L=(this._qualityService.levels||[]).find(function(C){return C.Url===""+r.DASH_QUALITY_PROTOCOL+R.id});R&&L?this.trigger(n.Private.QualityChange,{levelSwitch:!0,desc:L.desc}):console.warn("no activeTrack or activeDisplayItem found",R,L)}function O(){var R=this._drm,L=R.getVariantTracks(),C=(z=R.getVariantTracks())==null?void 0:z.find(function(ie){return ie.active}),z=(L=L.filter(function(ie){return ie.audioId===C.audioId})).map(function(ie){return{url:""+r.DASH_QUALITY_PROTOCOL+ie.id,width:ie.width,height:ie.height,bitrate:ie.bandwidth,attrs:{BANDWIDTH:ie.bandwidth,RESOLUTION:ie.width+"x"+ie.height}}});this.trigger(n.Player.LevelsLoaded,{levels:z}),this.trigger(n.Private.SelectorGenerateList,{type:"quality"}),R.getConfiguration().abr.enabled||(L=(this._qualityService.levels||[]).find(function(ie){return ie.Url===""+r.DASH_QUALITY_PROTOCOL+C.id}))&&this.trigger(n.Private.SelectorValueChange,{type:"quality",text:L.desc})}function B(R){this.trigger(n.Private.Timeline,{name:R,ts:performance.now()})}function j(){var R={},L=this.getOptions().drm||{},C=this._keySystem||((C=this._drm)==null?void 0:C.keySystem())||"";return C===c.Widevine?R=L.widevine||{}:C===c.FairPlay&&(R=L.fairplay||{}),R}function H(R,L){if((C=this.getOptions())==null||(C=C.drm)==null||!C.disableReportLicense){var C=L.data,L="";if(typeof C=="string")L=C;else if(C instanceof ArrayBuffer)try{L=new TextDecoder().decode(C)}catch(ie){console.log("error in decode license provider response",ie),L="[ArrayBuffer] decode error: "+ie}this.traceLog(s,"DRM-"+f[R]+"-response: "+L,!0)}}m.exports.inject=(()=>{var R=p(v().mark(function L(C,z,ie,Z){var q;return v().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:(q=C)._baseType=ie,q._keySystem=null,q.initPlay=y.bind(q,Z),q.play=a.bind(q),q.dispose=_.bind(q),q._getDrmTextTracks=E.bind(q),q._switchDrmTextTrack=T.bind(q),q._switchLevel=b.bind(q),q._switchAudioTrack=k.bind(q);case 10:case"end":return x.stop()}},L)}));return function(L,C,z,ie){return R.apply(this,arguments)}})(),m.exports.play=a,m.exports._switchLevel=b,m.exports._getTextTracks=E,m.exports._switchTextTrack=T,m.exports._switchAudioTrack=k,m.exports.updateLevelList=O,m.exports.logProviderResponse=H},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../base/event/eventtype":77,"es6-promise":13}],112:[function(S,m,W){var v=S("../base/player"),h=S("./drminjector"),p=S("./drminjectorNg"),l=v.extend({init:function(o,t){t.useDrm2?p.inject(this,l,v.prototype,t):h.inject(this,l,v.prototype,t,function(e){}),t._native=!1,v.call(this,o,t)}});m.exports=l},{"../base/player":102,"./drminjector":110,"./drminjectorNg":111}],113:[function(S,m,W){(function(v){(function(){var h=S("../../lib/io"),p=S("../../config"),l=S("../../lib/constants"),o=S("../../lib/util"),t=S("../../lib/playerutil"),e=S("../../lib/ua"),n=S("../../lib/data"),r=S("../../lang/index"),s=S("../base/event/eventtype"),g="flvinjector.js";m.exports.inject=function(c,u,f,y,d,a){var _,b=y.source,E=y.optionFormat;function T(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyFlv(),this._superPt&&(u.prototype.play=this._superPt.play,u.prototype.pause=this._superPt.pause,u.prototype.initPlay=this._superPt.initPlay,u.prototype.seek=this._superPt.seek,u.prototype.canSeekable=this._superPt.canSeekable))}function k(P){try{for(var w=P.buffered.length,D="Len:"+w+";",U=0;U<w;U++)D+="["+(U+1)+"]"+P.buffered.start(U)+"~"+P.buffered.end(U);return D}catch(M){}}(a||(y=b,a=E,!c._flv&&t.isFlv(y,a)&&t.isSupportFlv()))&&(c._Type=u,c._superType=f,c._superPt=f.prototype,c._disposed=!1,u.prototype._checkFlvReady=function(){return this._flv!=null||(console.warn("please invoke this method after ready event"),!1)},c._isFlv=!0,c._flv=null,c._isLoadedFlv=!1,c._dumpBuffer=null,u.prototype.play=function(P){if(this.traceLog(g,"play::"+P),P&&(this.trigger(s.Private.ManualPlay),this._monitor2.manualPlay()),this._checkFlvReady())return this._isManualPlay=P||!1,this.trigger(s.Private.Cover_Hide),this._options.isLive&&P?this._loadByUrlInner(this._options.source,0,P):this.tag.ended||this._ended?this.replay():(this._seeking==0&&(P=0,this.tag.ended||this._ended||(P=this.getCurrentTime())==0&&(P=-1),P!=-1)&&this.seek(P),this.tag.paused&&(this._hasLoaded||(this._hasLoaded=!0,this._flv.load()),this._flv.play())),this},u.prototype.seek=function(P){if(this._checkFlvReady()){this._seeking=!0;var w=this.getDuration();w<=(P=Math.floor(P))&&(P=w);try{this._flv.currentTime=P}catch(D){console.log(D)}return this}},u.prototype.pause=function(P){if(this._checkFlvReady())return this._isManualPause=P||!1,this._flv.pause(),this},u.prototype.getProgramDateTime=function(){var P;if(this._checkFlvReady())return this._metadata?(P=(P=this._flv.getFirstSample())&&P.pts?P.pts:0,console.log("\u63A8\u6D41\u65F6\u95F4\uFF1A"+this._metadata.NtpTime),console.log("\u9996\u5E27PTS\uFF1A"+P),this._metadata.NtpTime+P):""},u.prototype.initPlay=function(P){var w,D,U;function M(O,B){if(!O._disposed){var j=!O._flv,H=(O._destroyFlv(),O._options.isLive);if(H&&!flvjs.getFeatureList().networkStreamIO)return(z={error_code:l.ErrorCode.FormatNotSupport,error_msg:r.get("Error_Not_Support_Mse_Flv")+"|streamIO(format:flv)"}).display_msg=z.error_msg,void O.trigger(s.Player.Error,z);var R,L={isLive:H,enableWorker:O._options.enableWorker,accurateSeek:!0},C=(e.IS_IE11&&(L.enableWorker=!1),{type:"flv",isLive:H,url:O._options.source});for(R in H?(L.enableStashBuffer=O._options.enableStashBufferForFlv,L.stashInitialSize=O._options.stashInitialSizeForFlv,L.autoCleanupSourceBuffer=!1):L.lazyLoadMaxDuration=600,L.statisticsInfoReportInterval=1e3,O._options.isLive&&(O._options.flvFrameChasing&&(L.flvFrameChasing=O._options.flvFrameChasing),O._options.chasingFirstParagraph&&(L.chasingFirstParagraph=O._options.chasingFirstParagraph),O._options.chasingSecondParagraph&&(L.chasingSecondParagraph=O._options.chasingSecondParagraph),O._options.chasingFirstSpeed&&(L.chasingFirstSpeed=O._options.chasingFirstSpeed),O._options.chasingSecondSpeed)&&(L.chasingSecondSpeed=O._options.chasingSecondSpeed),O._options.flvOption)R=="cors"||R=="hasAudio"||R=="withCredentials"||R=="hasVideo"||R=="type"?C[R]=O._options.flvOption[R]:L[R]=O._options.flvOption[R];flvjs.LoggingControl.enableAll=O._options.debug,O._flv=flvjs.createPlayer(C,L),_(O,O._flv),O._flv.on(flvjs.Events.DUMP_BUFFER,function(Z){var q,x,F;O._options.disableDumpBuffer||O._liveRetryCount===0&&O._vodRetryCount===0&&O._nudgeCount===0&&typeof O._dumpBuffer!="string"&&(O._flvDumpTimer||(O._flvDumpTimer=setTimeout(function(){O._reportDumpBuffer&&O._reportDumpBuffer()},5e3)),Z=new Uint8Array(Z),O._dumpBuffer?O._dumpBuffer=(q=O._dumpBuffer,x=Z,(F=new Uint8Array(q.length+x.length)).set(q),F.set(x,q.length),F):O._dumpBuffer=Z)});var z,ie=o.throttle(function(Z){O.traceLog(g,"dts_adjustment::"+Z.from+"->"+Z.to)},1e3);O._flv.on(flvjs.Events.DTS_ADJUSTMENT,function(Z){ie(Z)}),O._flv.on(flvjs.Events.MEDIA_INFO,function(Z){O._metadata=Z.metadata}),O._flv.on(flvjs.Events.METADATA_ARRIVED,function(Z){Z&&Z.dataContent&&Z.dataContent.length&&O.trigger(s.Private.SeiFrame,{dataContent:Z.dataContent,pts:Z.pts})}),O._flv.on(flvjs.Events.STATISTICS_INFO,function(Z){O.trigger(s.Private.StatisticsInfo,Z)}),O._flv.attachMediaElement(O.tag),O._initPlayBehavior(B)&&((O._options.preload||O._options.autoplay)&&(O._hasLoaded=!0,O._flv.load()),O._options.autoplay&&!O.tag.paused&&O._flv.play(),d&&d(O._flv),j)&&(O._executeReadyCallback(),O._urls)&&0<O._urls.length&&(O._currentPlayIndex=t.findSelectedStreamLevel(O._urls,O._options.defaultDefinition),z=O._urls[O._currentPlayIndex],O._options.source=z.Url,O.trigger(s.Private.SourceLoaded,z))}}e.browser.safari&&this.trigger(s.Private.Snapshot_Hide),o.contentProtocolMixed(b,"",E)?((w={mediaId:this._options.vid||"",error_code:l.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=r.get("Request_Block_Text"),this.trigger(s.Player.Error,w)):(D=this)._isLoadedFlv&&typeof Hls!="undefined"?setTimeout(function(){M(D,P)},1e3):(this.trigger(s.Private.H5_Loading_Show),U=performance.now(),function(O,B,j){var H="aliplayer-flv-min.js",R="",R=p.domain?"https://"+p.domain+p.path+p.h5Version+"/flv/"+H:"/build/flv/"+H,L=(this._options.assetPrefix&&(R=this._options.assetPrefix+"/flv/"+H),JSON.parse(v)&&(R="http://localhost:8000/dist/aliplayer-flv.js"),this);h.loadJS(R,function(){O.apply(L)},function(){j&&j()})}.call(D,function(){this.traceLog(g,"got js#"+parseInt(performance.now()-U)),this._isLoadedFlv=!0,M(this,P)},this._options.debug,function(){var O={mediaId:D._options.vid||"",mediaAuth:D._options.mediaAuth||"",error_code:l.ErrorCode.ModuleLoadError,error_msg:"flv module load error."};D.trigger(s.Player.Error,O)}))},u.prototype._reportDumpBuffer=function(){var P,w;this.__flvDumpTimer&&clearTimeout(this.__flvDumpTimer),this.__flvDumpTimer=null,this._dumpBuffer&&typeof this._dumpBuffer!="string"&&(1048576<this._dumpBuffer.byteLength&&(this._dumpBuffer=this._dumpBuffer.slice(0,1048576)),P=this._dumpBuffer,this._dumpBuffer="REPORTED",performance.now(),P=o.arrayBufferToB64(P),w=n.guid(),this.traceLog(g,"dump::"+w),this.trigger(s.Private.DumpBuffer,{id:w,data:P}))},u.prototype._destroyFlv=function(){try{this._flv&&(this._flv.pause(),this._flv.destroy())}catch(P){console.log(P)}this.loaded=!1,this._hasLoaded=!1,this._flv=null,this._flvDumpTimer&&(clearTimeout(this._flvDumpTimer),this._flvDumpTimer=null),this._dumpBuffer=null},Object.defineProperty(u.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return T},set:function(){return T}}),u.prototype.canSeekable=function(P){var w;if(this._flv)return w=this._flv.mediaInfo,!(!this._flv._isTimepointBuffered(P)&&w&&!w.hasKeyframesIndex)},u.prototype._getbwEstimator=function(){var P;return 1024*((P=this._flv)==null||(P=P.statisticsInfo)==null?void 0:P.speed)*8},_=function(P,w){var D=!1;w.on(flvjs.Events.ERROR,function(U,M,O){var B,j,H,R,L="flvjs-error::"+U+"#"+M+"#"+O.code+"#"+O.msg,C=O.msg==="BodyStreamBuffer was aborted"&&w._config.lazyLoad;if(C){L+="#Maximum buffering duration exceeded, suspend transmuxing task";try{var z=w._msectl._sourceBuffers.video,ie=w._msectl._sourceBuffers.audio;L+="#Video buffer:"+k(z)+"#Audio buffer:"+k(ie)}catch(Z){}}P.traceLog(g,L),P._reportDumpBuffer&&P._reportDumpBuffer(),U===flvjs.ErrorTypes.BUFFER_FULL||(P._flv.unload(),C)||P._isError||(B=l.ErrorCode.OtherError,j=r.get("Error_Play_Text"),H=null,M==flvjs.ErrorDetails.NETWORK_EXCEPTION?!(z=P.getOptions().source)||z.toLowerCase().indexOf("http://")!=0&&z.toLowerCase().indexOf("https://")!=0?(B=l.ErrorCode.InvalidSourceURL,j=r.get("Error_Invalidate_Source_Widthout_Protocal"),D=!0):j=navigator.onLine?(B=l.ErrorCode.RequestDataError,r.get("Maybe_Cors_Error")):(B=l.ErrorCode.NetworkError,r.get("Error_Network_Text")):M==flvjs.ErrorDetails.NETWORK_STATUS_CODE_INVALID?O.code=="404"?(B=l.ErrorCode.NotFoundSourceURL,j=r.get("Error_Not_Found"),H=r.get("Tip_Err_Not_found")):O.code=="403"?(B=l.ErrorCode.AuthKeyExpired,j=r.get("Error_AuthKey_Text"),D=!0):(B=l.ErrorCode.NetworkError,j=r.get("Error_Network_Text")):M==flvjs.ErrorDetails.NETWORK_TIMEOUT?(B=l.ErrorCode.LoadingTimeout,j=r.get("Error_Waiting_Timeout_Text")):M==flvjs.ErrorDetails.MEDIA_FORMAT_UNSUPPORTED||M==flvjs.ErrorDetails.MEDIA_CODEC_UNSUPPORTED?(B=l.ErrorCode.FormatNotSupport,j=r.get("Error_H5_Not_Support_Text")+"|codec(format:flv)",D=!0):M===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&(ie=P.tag.error)&&(B=l.VideoErrorCode[ie.code],j=ie.code+" || "+ie.message),L=function(){var Z;setTimeout(function(){P.trigger(s.Private.Play_Btn_Hide)}),P.checkOnline()&&(Z={mediaId:P._options&&P._options.vid?P._options.vid:"",error_code:B,error_msg:j,diagnosis_info:H},P.logError(Z),Z.display_msg=j,p.cityBrain&&(P.flv=null),P.trigger(s.Player.Error,Z))},P._options&&P._options.isLive&&!D?(R=P._options).liveRetry>P._liveRetryCount?(P._liveRetryCount==0&&P.trigger(s.Player.OnM3u8Retry),U=R.liveRetryInterval+R.liveRetryStep*P._liveRetryCount,P._liveRetryCount++,setTimeout(function(){P._isError||P._liveRetryTimer||P._loadByUrlInner(R.source)},1e3*U)):(P.trigger(s.Player.LiveStreamStop),L()):M===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&O.code===11&&P.getCurrentTime()<P.getDuration()?(P._flv.unload(),P._flv.load(),P._flv.detachMediaElement(),P._flv.attachMediaElement(P.tag)):D?(P._flv.unload(),L()):P._reloadForVod()||L())})})}}).call(this)}).call(this,"false")},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/data":35,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../base/event/eventtype":77}],114:[function(S,m,W){var v=S("../base/player"),h=S("./flvinjector"),p=v.extend({init:function(l,o){h.inject(this,p,v,o,function(t){}),o._native=!1,v.call(this,l,o)}});m.exports=p},{"../base/player":102,"./flvinjector":113}],115:[function(S,m,W){(function(v){(function(){function h(){return(h=Object.assign?Object.assign.bind():function(b){for(var E=1;E<arguments.length;E++){var T,k=arguments[E];for(T in k)!{}.hasOwnProperty.call(k,T)||(b[T]=k[T])}return b}).apply(null,arguments)}var p,l=S("../../lib/object"),o=S("../../lib/io"),t=S("../../config"),e=S("../../lib/constants"),n=S("../../lib/util"),r=S("../../lib/playerutil"),s=S("../../lib/ua"),g=S("../../lang/index"),c=S("../base/event/eventtype"),u="hlsinjector.js";function f(){this&&this._hls&&(this._hls.stopLoad(),this._hls.destroy(),this._hls=null)}function y(b){this.trigger(c.Private.Timeline,{name:b,ts:performance.now()})}function d(b,E){return E<b.maxNumRetry}var a={};function _(b,E){E.frag.level===this.currentLevel&&(this.off(p.Events.FRAG_BUFFERED,_),this.media.currentTime=this.media.currentTime+.01)}m.exports.inject=function(b,E,T,k,P,w){b._hls2=!1;var D,U,M,O=k.source,B=k.optionFormat;((P||"").length||w||(w=O,D=k.useHlsPluginForSafari,k=k.useHlsPlugOnMobile,U=B,!b._hls&&r.isHls(w,U)&&(!r.canPlayHls()||r.isSafariUsedHlsPlugin(D)||k&&r.isUsedHlsPluginOnMobile())))&&(b._Type=E,b._superType=T,b._superPt=T.prototype,b._disposed=!1,b._isHls=!0,b._hls=null,b._isLoadedHls=!1,b._stopLoadAsPaused=!0,b._yekced_saved=P,a.seek||(a.seek=T.prototype.seek),a.dispose||(a.dispose=T.prototype.dispose),b.initPlay=function(j){var H,R;function L(C,z){if(!C._disposed){if(C._antiRecord&&(console.log("Manual check before load source"),C._antiRecord.check()))return;var ie,Z=!C._hls,q=(C._destroyHls(),{xhrSetup:function(F,Y){F.withCredentials=C._options.withCredentials||!1}}),x=(C._hls2||(x=C._options.loadingTimeOut||C._options.hlsLoadingTimeOut)&&(q.manifestLoadingTimeOut=x,q.levelLoadingTimeOut=x,q.fragLoadingTimeOut=x),C._hls2&&(q.manifestLoadPolicy=h({},p.DefaultConfig.manifestLoadPolicy),q.playlistLoadPolicy=h({},p.DefaultConfig.playlistLoadPolicy),q.fragLoadPolicy=h({},p.DefaultConfig.fragLoadPolicy),x=C._options.isLive?C._options.liveRetry:C._options.vodRetry,q.manifestLoadPolicy.default.errorRetry.maxNumRetry=x,C._options.isLive&&(q.manifestLoadPolicy.default.errorRetry.shouldRetry=d),q.manifestLoadPolicy.default.timeoutRetry.maxNumRetry=x,q.playlistLoadPolicy.default.errorRetry.maxNumRetry=x,C._options.isLive&&(q.playlistLoadPolicy.default.errorRetry.shouldRetry=d),q.playlistLoadPolicy.default.timeoutRetry.maxNumRetry=x,q.fragLoadPolicy.default.maxLoadTimeMs=2e4,q.fragLoadPolicy.default.errorRetry.shouldRetry=d,(x=C._options.hlsOption||{}).manifestLoadPolicy&&(q.manifestLoadPolicy=l.deepMerge(q.manifestLoadPolicy,x.manifestLoadPolicy),delete x.manifestLoadPolicy),x.playlistLoadPolicy&&(q.playlistLoadPolicy=l.deepMerge(q.playlistLoadPolicy,x.playlistLoadPolicy),delete x.playlistLoadPolicy),x.fragLoadPolicy&&(q.fragLoadPolicy=l.deepMerge(q.fragLoadPolicy,x.fragLoadPolicy),delete x.fragLoadPolicy),C._options.isLive)&&!s.IS_IE11&&(q.backBufferLength=12,q.liveDurationInfinity=!0),C._options.isLive&&(C._options.hlsFrameChasing&&(q.hlsFrameChasing=C._options.hlsFrameChasing),C._options.chasingFirstParagraph&&(q.chasingFirstParagraph=C._options.chasingFirstParagraph),C._options.chasingSecondParagraph&&(q.chasingSecondParagraph=C._options.chasingSecondParagraph),C._options.chasingFirstSpeed&&(q.chasingFirstSpeed=C._options.chasingFirstSpeed),C._options.chasingSecondSpeed)&&(q.chasingSecondSpeed=C._options.chasingSecondSpeed),C._options.defaultBandwidth&&(q.defaultBandwidth=C._options.defaultBandwidth),C._options.hlsBandWidthUpCacheTime&&(q.abrBandWidthUpCacheTime=C._options.hlsBandWidthUpCacheTime),C._options.seamlessHandover&&(q.seamlessHandover=C._options.seamlessHandover),C._options.liveSyncDurationCount&&(q.liveSyncDurationCount=C._options.liveSyncDurationCount),C._options.nudgeMaxRetry&&(q.nudgeMaxRetry=C._options.nudgeMaxRetry),C._options.maxMaxBufferLength&&(q.maxMaxBufferLength=C._options.maxMaxBufferLength),C._options.maxBufferSize&&(q.maxBufferSize=C._options.maxBufferSize),C._options.fragLoadingRetryDelay&&(q.fragLoadingRetryDelay=C._options.fragLoadingRetryDelay),C._options.maxBufferLength&&(q.maxBufferLength=C._options.maxBufferLength),C._options.accessKeyId&&(q.accessKeyId=C._options.accessKeyId),C._options.accessKeySecret&&(q.accessKeySecret=C._options.accessKeySecret),C._options.securityToken&&(q.securityToken=C._options.securityToken),C._options.app&&(q.app=C._options.app),C._options.stream&&(q.stream=C._options.stream),C._options.domain&&(q.domain=C._options.domain),C._options.regionId&&(q.regionId=C._options.regionId),C._yekced_saved&&(C._hls2?q._vpk=C._yekced_saved:q._yekcedxx=C._yekced_saved),q.enableWorker=C._options.enableWorker,q.debug=C._options.debug,C._stopLoadAsPaused=C._options.hlsOption.stopLoadAsPaused,C._getPlayStartTime()+C._posOffset);for(ie in x&&(q.startPosition=x,console.log("hls.js startPosition => ",x)),C._options.hlsOption)q[ie]=C._options.hlsOption[ie];s.IS_IE11&&(q.enableWorker=!1),C._hls=new p(q),M(C,C._hls),C._loadSourced=!1,C._hls.attachMedia(C.tag),C._hls.on(p.Events.INIT_PTS_FOUND,function(F,Y){C._initPTS=Y.initPTS}),C._hls.on(p.Events.FRAG_LOADING,function(){y.call(C,"frag_s")}),C._hls.on(p.Events.FRAG_LOADED,function(){y.call(C,"frag_f")}),C._hls.on(p.Events.FRAG_PARSED,function(){y.call(C,"frag_parsed")}),C._hls.on(p.Events.FRAG_PARSED,function(F,re){var re=(re==null?void 0:re.frag)||{},le=re.elementaryStreams||{},ae="Frag(sn"+re.sn+"): "+((ae=re.startPTS)==null?void 0:ae.toFixed(3))+" -> "+((ae=re.endPTS)==null?void 0:ae.toFixed(3))+"(v:"+((ae=le.video)==null||(ae=ae.startPTS)==null?void 0:ae.toFixed(3))+"/"+((ae=le.video)==null||(ae=ae.endPTS)==null?void 0:ae.toFixed(3))+";a:"+((ae=le.audio)==null||(ae=ae.startPTS)==null?void 0:ae.toFixed(3))+"/"+((ae=le.audio)==null||(ae=ae.endPTS)==null?void 0:ae.toFixed(3))+"); Duration: "+((le=re.duration)==null?void 0:le.toFixed(3));C.trackLogFragBuffer&&(C.trackLogFragBuffer.push(ae),10<C.trackLogFragBuffer.length)&&C.trackLogFragBuffer.shift()}),C._hls.on(p.Events.FRAG_PARSING_USERDATA,function(F,Y){Y&&Y.dataContent&&Y.dataContent.length?C.trigger(c.Private.SeiFrame,{dataContent:Y.dataContent,pts:Y.pts}):Y.samples.forEach(function(re){C.trigger(c.Private.SeiFrame,{dataContent:re.userDataBytes,dataContentString:re.userData,pts:re.pts,uuid:re.uuid})})}),C._hls.on(p.Events.MEDIA_ATTACHED,function(){var F;C._hls.on(p.Events.MANIFEST_PARSED,function(){C._initPlayBehavior(z||C._loadSourced)}),C._hls.on(p.Events.AUDIO_TRACKS_UPDATED,function(Y,re){C.trigger(c.Player.AudioTrackUpdated,re)}),C._hls.on(p.Events.MANIFEST_LOADED,function(Y,re){C.trigger(c.Player.LevelsLoaded,re)}),C._hls.on(p.Events.LEVEL_SWITCHED,function(Y,re){if(C._qualityService){for(var le=C._hls.levels[re.level].url,ae=C._qualityService.levels,Q="",oe="",fe=0;fe<ae.length;fe++)if(ae[fe].Url==le){oe=ae[fe].desc,Q=ae[fe].bitrate;break}(oe||Q)&&C.trigger(c.Private.QualityChange,{levelSwitch:!0,url:le,bitrate:Q,desc:oe})}}),C._hls.on(p.Events.AUDIO_TRACK_SWITCH,function(Y,re){C.trigger(c.Player.AudioTrackSwitch,re),setTimeout(function(){C.trigger(c.Player.AudioTrackSwitched,re)},1e3)}),(C._options.autoplay||C._options.preload||z)&&(C._loadSourced=!0,C._levels&&1<C._levels.length?(C._hls.trigger(p.Events.MANIFEST_LOADING,{}),C._hls.trigger(p.Events.MANIFEST_LOADED,{levels:C._levels})):C._hls.loadSource(C._options.source||"__INVALID__")),Z?(C._executeReadyCallback(),C._urls&&0<C._urls.length&&(C._currentPlayIndex=r.findSelectedStreamLevel(C._urls,C._options.defaultDefinition),F=C._urls[C._currentPlayIndex],C._options.source=F.Url,C.trigger(c.Private.SourceLoaded,F))):C.trigger(c.Private.H5_Loading_Show)})}}this.trigger(c.Private.H5_Loading_Show),n.contentProtocolMixed(O,"",B)?(H=this.getOptions()||{},(H={mediaId:H.vid||"",mediaAuth:H.mediaAuth||"",error_code:e.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=g.get("Request_Block_Text"),this.trigger(c.Player.Error,H)):(R=this)._isLoadedHls&&p!==void 0?L(this,j):(this.trigger(c.Private.H5_Loading_Show),this._getHlsVersion(function(C){var z=performance.now();(function(ie,Z,q){var x="aliplayer-hls-min.js",F=((Z=Z||{}).hls2&&(x="aliplayer-hls2-min.js"),Z.enableHlsH265&&(x="aliplayer-hls2-hevc-min.js"),""),F=t.domain?"https://"+t.domain+t.path+t.h5Version+"/hls/"+x:"/build/hls/"+x,Y=(Z.assetPrefix&&(F=Z.assetPrefix+"/hls/"+x),JSON.parse(v)&&(F="http://localhost:8080/dist/aliplayer-hls2.js"),y.call(this,"mod_hls_s"),this);o.loadJS(F,function(){y.call(Y,"mod_hls_f"),p=window.AliHls||window.Hls,ie.apply(Y)},function(){q&&q()})}).call(R,function(){R.traceLog(u,"got js#"+parseInt(performance.now()-z)),R._isLoadedHls=!0,L(R,j)},{debug:R._options.debug,hls2:R._hls2,assetPrefix:R._options.assetPrefix,enableHlsH265:R._options.enableHlsH265},function(){var ie={mediaId:R._options.vid||"",mediaAuth:R._options.mediaAuth||"",error_code:e.ErrorCode.ModuleLoadError,error_msg:"hls module load error."};R.trigger(c.Player.Error,ie)})}),this.on("error",f))}.bind(b),b.seek=function(j){if(this._checkHlsReady()){try{a.seek.call(this,j),this.tag.paused&&this._stopLoadAsPaused&&this._hls.startLoad(j)}catch(H){console.log(H)}return this}}.bind(b),b.pause=function(j){if(this.tag){if(!this._checkHlsReady())return;this.tag.pause(),this._stopLoadAsPaused&&this._hls.stopLoad()}return this._isManualPause=j||!1,this}.bind(b),b.play=function(j){if(this.traceLog(u,"play::"+j),j&&(this.trigger(c.Private.ManualPlay),this._monitor2.manualPlay()),this._checkHlsReady())return this._isManualPlay=j||!1,this.trigger(c.Private.Cover_Hide),this._options.autoplay||this._options.preload||this._loadSourced||(this._loadSourced=!0,this._hls.loadSource(this._options.source)),this.tag.ended||this._ended?this.replay():this.tag.paused&&(this.tag.play(),this._stopLoadAsPaused)&&(j=this.getCurrentTime(),this._hls.startLoad(j)),this}.bind(b),b.stop=function(){if(this._checkHlsReady())return this.tag.setAttribute("src",null),this._hls.stopLoad(),this}.bind(b),b.dispose=function(){this._disposed||(this._disposed=!0,a.dispose.call(this),this._destroyHls())}.bind(b),b.getCurrentPDT=function(){var j,H,R;if(this._checkHlsReady())return this._hls.currentLevel==-1?"":this._hls.playingDate?this._hls.playingDate.getTime():(H=this._hls.streamController.fragPlaying||{},(j=H.pdt)?(H=1e3*H.startPTS,R=1e3*this.getCurrentTime(),j+(R-H)):0)}.bind(b),b.getProgramDateTime=function(){if(this._checkHlsReady()){if(this._hls.currentLevel==-1)return"";var j=this._hls.currentLevel,j=this._hls.levels[j].details;return j&&(j=j.programDateTime,j)?new Date(j).valueOf():0}}.bind(b),b._checkHlsReady=function(){return this._hls!=null||(console.warn("please invoke this method after ready event"),!1)}.bind(b),b._getHlsVersion=function(j){this._options.useHls2===!0?(this._hls2=!0,j()):this._options.useHls2===!1&&j()}.bind(b),b._getbwEstimator=function(){var j=NaN;{var H;this._hls&&(H=this._hls.abrController._bwEstimator,j=H?H.getEstimate():this._hls.bandwidthEstimate)}return j}.bind(b),b._destroyHls=function(){this._hls&&this._hls.destroy(),this._hls=null,this.trackLogFragBuffer=[]}.bind(b),b._switchLevel=function(j){for(var H=this,R=(this.traceLog(u,"switchLevel::"+j),this.trigger(c.Player.LevelSwitch),this._hls.levels),L=!0,C=0;C<R.length;C++)if(R[C].url==j||R[C].url[0]==j){L=!1,this._hls2&&this._options.seamlessHandover?(this._hls.loadLevel=C,console.log("Seamlessly set nextLevel to",C)):(this._hls.on(p.Events.FRAG_BUFFERED,_),this._hls.currentLevel=C,console.log("Immediately set currentLevel to",C));break}L&&(this._hls.on(p.Events.FRAG_BUFFERED,_),this._hls.currentLevel=-1),this._switchedLevel=!0,setTimeout(function(){H.trigger(c.Player.LevelSwitched),H._switchedLevel=!1},1e3)}.bind(b),M=function(j,H){H.on(p.Events.MANIFEST_LOADING,function(){y.call(j,"mani_s")}),H.on(p.Events.MANIFEST_LOADED,function(){y.call(j,"mani_f")}),H.on(p.Events.DEFAULT_BANDWIDTH,function(R,L){j.trigger(c.Player.DefaultBandWidth,{width:L.width,height:L.height,bitrate:L.bitrate})}),H.on(p.Events.ERROR,function(R,L){var C="hlsjs-error::"+L.type+"#"+L.details+"#"+((C=L.networkDetails)==null?void 0:C.status)+"#"+L.reason+"#bw:"+(j._getbwEstimator()/8/1024).toFixed(2)+"KB";if(L.details==="manifestParsingError")try{C+="#"+L.networkDetails.getResponseHeader("Content-Type")+"#"+L.networkDetails.getResponseHeader("Content-Length")}catch(oe){}else if(L.details==="fragLoadError"||L.details==="fragLoadTimeOut")C+="#"+L.frag.url+"#retry:"+((re=L.errorAction)==null?void 0:re.retryCount);else if(L.details==="internalException")try{C+="#"+L.event+"#"+((Z=L.error)==null?void 0:Z.message)+"#"+((ie=L.error)==null?void 0:ie.stack)}catch(oe){}L.details!=="internalException"&&(C+="#"+L.error);try{C+="#"+(j==null||(ae=j.trackLogFragBuffer)==null?void 0:ae.toString())}catch(oe){}if(j.traceLog(u,C,!0),j._options&&L.details!=p.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&j._seeking!=1&&L.fatal!=0){j._clearTimeout();var z,ie,Z,q=e.ErrorCode.LoadedMetadata,x=g.get("Error_Play_Text"),F=!1,Y=null,re=!1,le=(L.details==p.ErrorDetails.MANIFEST_LOAD_ERROR||L.details==p.ErrorDetails.LEVEL_LOAD_ERROR?(F=!0,Z=L.networkDetails,z=Number(Z.status),j.liveShiftSerivce&&j.liveShiftSerivce.isLiveShiftPlaying()&&z===404?(q=e.ErrorCode.NotFoundSourceURL,x=g.get("Error_Liveshift_M3U8_Not_Found_Text"),re=!0):z===404?(q=e.ErrorCode.NotFoundSourceURL,x=g.get("Error_Not_Found"),Y=g.get("Tip_Err_Not_found")):z===403?(ie=r.parseHttpHeaders(Z)["x-tengine-error"])&&-1<e.RegionBlockMessages.indexOf(ie)?(q=e.ErrorCode.RegionBlock,x=g.get("Error_Region_Block_Text"),Y=g.get("Tip_Err_Blocked")):(q=e.ErrorCode.AuthKeyExpired,x=g.get("Error_AuthKey_Text")):x=z===0&&navigator.onLine?(q=e.ErrorCode.RequestDataError,x+"\uFF0C"+g.get("Maybe_Cors_Error")):g.get("Error_Load_M3U8_Failed_Text")):L.details==p.ErrorDetails.MANIFEST_LOAD_TIMEOUT||L.details==p.ErrorDetails.LEVEL_LOAD_TIMEOUT?(F=!0,x=g.get("Error_Load_M3U8_Timeout_Text")):L.details==p.ErrorDetails.MANIFEST_PARSING_ERROR||L.details==p.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR?(F=!0,x=g.get("Error_M3U8_Decode_Text")):L.type==p.ErrorTypes.NETWORK_ERROR?(q=e.ErrorCode.NetworkError,x=g.get("Error_Network_Text")):L.type!=p.ErrorTypes.MUX_ERROR&&L.type!=p.ErrorTypes.MEDIA_ERROR||(q=e.ErrorCode.PlayDataDecode,x=g.get("Error_TX_Decode_Text")),x=x+"("+L.details+")",function(){var oe;setTimeout(function(){j.trigger(c.Private.Play_Btn_Hide)}),j.checkOnline()&&(oe={mediaId:(oe=j.getOptions()||{}).vid||"",mediaAuth:oe.mediaAuth||"",error_code:q,error_msg:L.details,diagnosis_info:Y},j.logError(oe),oe.display_msg=x,j.trigger(c.Player.Error,oe))}),ae=function(){j._liveErrorHandle&&clearTimeout(j._liveErrorHandle),H.stopLoad(),j.trigger(c.Player.LiveStreamStop),j._liveErrorHandle=setTimeout(le,500)},Q=j._options;if(Q.isLive&&re)ae();else if(j._hls2){if(F&&Q.isLive)if(Q.hlsOption.progressive){if(Q.liveRetry>j._liveRetryCount)return j._liveRetryCount==0&&j.trigger(c.Player.OnM3u8Retry),j.trigger(c.Private.H5_Loading_Show),j._hls.stopLoad(),j._liveRetryCount++,void setTimeout(function(){j.traceLog(u,"retry when live error in progressive mode#"+j._liveRetryCount),j._hls.loadSource(Q.source)},1e3*j._liveRetryCount)}else((C=L.errorAction)==null?void 0:C.retryCount)===0&&j.trigger(c.Player.OnM3u8Retry);L.fatal&&ae()}else Q.isLive?Q.liveRetry>j._liveRetryCount?(j._liveRetryCount==0&&j.trigger(c.Player.OnM3u8Retry),Z=Q.liveRetryInterval+Q.liveRetryStep*j._liveRetryCount,j._liveRetryCount++,j.trigger(c.Private.H5_Loading_Show),setTimeout(function(){F&&j._loadByUrlInner(j._options.source,0,!0)},1e3*Z)):ae():(F&&-1<[403,404].indexOf(z)||!j._reloadForVod())&&le()}})})}}).call(this)}).call(this,"false")},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/object":47,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../base/event/eventtype":77}],116:[function(S,m,W){var v=S("../base/player"),h=S("./hlsinjector"),p=v.extend({init:function(l,o){o._native=!1,h.inject(this,p,v,o),v.call(this,l,o)}});m.exports=p},{"../base/player":102,"./hlsinjector":115}],117:[function(S,m,W){var v=["extraInfo"];function h(){return(h=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var _,b=arguments[a];for(_ in b)!{}.hasOwnProperty.call(b,_)||(d[_]=b[_])}return d}).apply(null,arguments)}var p=typeof Promise=="undefined"?S("es6-promise").Promise:Promise,l=S("../../lib/io"),o=S("../../config"),t=S("../../lib/constants"),e=S("../../lang/index"),n=S("../base/event/eventtype"),r=S("../../lib/ua"),s=S("../base/event/eventtype"),g=S("../../lib/playerutil"),c="rtsinjector.js";function u(d){var a,_,b,E,T=this._options;T.rtsFallback&&window.Aliplayer?((a=T.rtsFallbackSource)||((_=String(T.rtsFallbackType||"").toUpperCase())&&!["HLS","FLV"].includes(_)&&(console.warn("invalid rtsFallbackType:",T.rtsFallbackType,", will use flv -> hls as fallback"),_=""),_=_||(g.isSupportFlv()?"FLV":"HLS"),E=T.source,b=!E.includes("@subvideo=no"),E=!E.includes("@subaudio=no"),E=(b={enableVideo:b,enableAudio:E}).enableVideo,b=b.enableAudio,_==="FLV"?(T.flvOption=T.flvOption||{},b||(T.flvOption.hasAudio=!1),E||(T.flvOption.hasVideo=!1)):_!=="HLS"||b||(T.mute=!0),a=((k,w)=>{var w=w==="FLV"?"flv":"m3u8",D=window.location.protocol,D=(-1<["http:","https:"].indexOf(D)?D:"https:")+"//";return(k=k.replace("artc://",D).replace("?","."+w+"?").replace("@subvideo=no","").replace("@subaudio=no","")).includes("?")||(k+="."+w),k.includes("auth_key")&&(k+="&rts_degrade=on"),k})(T.source,_)),E={reason:d,fallbackUrl:a},this.trigger(n.Player.RtsFallback,E),this._monitor2.rtsFallback(E),this.loadByUrl(a)):(this.trigger(n.Player.Error,d),this.logError(d))}function f(d){var a=this,_=(this.trigger(n.Private.H5_Loading_Show),this.trigger(n.Private.Play_Btn_Hide),this._options),b=new y(a,d);return a._rts.subscribe(_.source,h({retryTimes:_.rtsFallback?1:void 0,mediaTimeout:_.rtsLoadDataTimeout},_.rtsOption||{})).then(function(E){return b.preProcess(),a.tag.srcObject=null,E.play(a.tag),r.IS_IOS&&Number(r.IOS_VERSION)<=14&&a.one(s.Player.TimeUpdate,function(){setTimeout(function(){a.tag.pause(),a.tag.play()},200)}),!0}).catch(function(E){return a.traceLog(c,"subError::"+JSON.stringify(E)),!1})}m.exports.inject=function(d,a,_,b,E,T){function k(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyRts())}d._Type=a,d._superType=_,d._superPt=_.prototype,d._disposed=!1,a.prototype._checkRtsReady=function(){return this._rts!=null||(console.warn("please invoke this method after ready event"),!1)},d._isRts=!0,d._rts=null,d._isLoadedRts=!1,d.bind_rtsErrorEventHandler=null,d.bind_rtsReconnectEventHandler=null,a.prototype.play=function(P){if(this.traceLog(c,"play::"+P),P&&(this.trigger(n.Private.ManualPlay),this._monitor2.manualPlay()),this._checkRtsReady()&&(this._isManualPlay=P||!1,this.paused()))return this.trigger(n.Private.Cover_Hide),this.trigger(n.Private.Play_Btn_Hide),f.call(this),this},a.prototype.seek=function(P){},a.prototype.setSpeed=function(P){},a.prototype.stop=function(){return this._rts&&this._rts.unsubscribe(),this},Object.defineProperty(a.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return k},set:function(){return k}}),a.prototype._destroyRts=function(){this._rts&&(this.stop(),this._rts.off("onError",this.bind_rtsErrorEventHandler),this._rts.off("reconnect",this.bind_rtsReconnectEventHandler)),this._rts=null},a.prototype.initPlay=function(P){var w,D=this;function U(M,O){var B;M._disposed||(B=!M._rts,M._destroyRts(),M._rts=new AliRTS.createClient({customReporter:function(j){if(Number(j.msgid)===126){var H={};try{H=JSON.parse(j.args)}catch(R){H={}}H.tcid&&M._rts&&(M._rts.traceid=H.tcid,M.traceLog(c,"tcid::"+H.tcid,!0),M.trigger(n.Player.RtsTraceId,{traceId:H.tcid,source:M._options.source}))}}}),M._checkRtsSupport(function(j){(function(H){var R=this._rtsErrorEventHandler.bind(this),R=(this.bind_rtsErrorEventHandler=R,H.on("onError",R),this._rtsReconnectEventHandler.bind(this));this.bind_rtsReconnectEventHandler=R,H.on("reconnect",R)}).call(M,M._rts),M._options.autoplay?f.call(M).then(function(H){H&&M._initPlayBehavior(O)}):M._initPlayBehavior(O),B&&M._executeReadyCallback()},function(j){console.log("[RTS isSupport error]",j);var H=null,R=null;switch(Number(j.errorCode)){case 10110:H=t.ErrorCode.RtsNotSupportWebRtc,R=e.get("Rts_Err_Not_Support_Webrtc");break;case 10111:H=t.ErrorCode.RtsBrowserNotSupport,R=e.get("Rts_Err_Browser_Not_Support");break;case 10112:H=t.ErrorCode.RtsBrowserVersionTooLow,R=e.get("Rts_Err_Browser_Version_Too_Low");break;case 10113:H=t.ErrorCode.RtsNotSupportH264,R=e.get("Rts_Err_Not_Support_H264");break;case 10114:H=t.ErrorCode.RtsCreateOfferError,R=e.get("Rts_Err_Create_Offer_Error")}return u.call(M,{error_code:H,error_msg:R}),!1}))}this._isLoadedRts?U(this,P):(this.trigger(n.Private.H5_Loading_Show),w=performance.now(),function(M,O,B){var H="",j=this._options,H="https://g.alicdn.com/apsara-media-box/imp-web-rts-sdk/"+(j.rtsVersion||o.rtsVersion)+"/aliyun-rts-sdk.js",R=(j.assetPrefix&&(H=j.assetPrefix+"/rts/aliyun-rts-sdk.js"),j.rtsSdkUrl&&(H=j.rtsSdkUrl),this);l.loadJS(H,function(){M.apply(R)},function(){B&&B()})}.call(D,function(){this.traceLog(c,"got js#"+parseInt(performance.now()-w)),this._isLoadedRts=!0,U(this,P)},this._options.debug,function(){var M={error_code:t.ErrorCode.ModuleLoadError,error_msg:"rts module load error."};D.trigger(n.Player.Error,M)}))},a.prototype.getStats=function(){return this._rts&&this._rts.getTransportStats?p.all([this._rts.getTransportStats(),this._rts.getRemoteVideoStats(),this._rts.getRemoteAudioStats()]).then(function(U){var w=U[0],D=U[1],U=U[2];return{rtt:w.rtt,bytesReceived:w.bytesReceived,framesDecoded:D.framesDecoded,packetsLost:(D.packetsLost||0)+(U.packetsLost||0),packetsReceived:(D.packetsReceived||0)+(U.packetsReceived||0),timestamp:w.timestamp||Date.now()}}).catch(function(P){return console.log("ERR in RTS getstats: ",P),{}}):p.resolve()},a.prototype._checkRtsSupport=function(P,w){this._options.skipRtsSupportCheck?P():this._rts.isSupport({isReceiveVideo:!0}).then(P).catch(w)},a.prototype._rtsErrorEventHandler=function(P){console.log("RTS Error:",P),P.extraInfo;var w=((R,L)=>{if(R==null)return{};var C,z={};for(C in R)if({}.hasOwnProperty.call(R,C)){if(L.indexOf(C)!==-1)continue;z[C]=R[C]}return z})(P,v),D=(this.traceLog(c,"rtsError::"+JSON.stringify(w)),null),U=null,M=null;switch(Number(P.errorCode)){case 10201:return;case 10101:D=t.ErrorCode.RtsSignalError,U=e.get("Rts_Err_Http_Signal_Error");break;case 10114:D=t.ErrorCode.RtsCreateOfferError,U=e.get("Rts_Err_Create_Offer_Error");break;case 10202:D=t.ErrorCode.RtsPlayUrlError,U=e.get("Rts_Err_Play_Url_Error");break;case 10203:D=t.ErrorCode.RtsSubscribeNonthing,U=e.get("Rts_Err_Subscribe_Nonthing");break;case 10205:var O=(O=P.extraInfo)==null?void 0:O.response;if((O==null?void 0:O.status)===403){var B=O.headers["x-tengine-error"];if(B&&-1<t.RegionBlockMessages.indexOf(B)){D=t.ErrorCode.RegionBlock,U=e.get("Error_Region_Block_Text"),M=e.get("Tip_Err_Blocked");break}D=t.ErrorCode.AuthKeyExpired,U=e.get("Error_AuthKey_Text")}else M=(O==null?void 0:O.status)===404?(D=t.ErrorCode.NotFoundSourceURL,U=e.get("Error_Not_Found"),e.get("Tip_Err_Not_found")):(D=t.ErrorCode.RtsHttpRequestFaild,U=e.get("Rts_Err_Http_Request_Failed"),e.get("Tip_Err_Rts_Http_Failed"));break;case 10206:D=t.ErrorCode.RtsHttpAnswerFaild,U=e.get("Rts_Err_Http_Answer_Failed");break;case 10207:D=t.ErrorCode.RtsPlayFailedError;try{var j,H=(j=P.message.match(/after (\d+) ms/))==null?void 0:j[1]}catch(R){}U=e.get("Rts_Err_Play_Failed")+", "+(H?H*P.extraInfo.retryTimes/1e3+e.get("Rts_Err_No_Data_For"):P.message);break;case 12e3:D=t.ErrorCode.RtsPeerConnectionUnknown,U=e.get("Rts_Err_PeerConnection_Unknown")}w={error_code:D,error_msg:U,diagnosis_info:M,tcid:this._rts.traceid},function(R){var L=this;L.pause(),setTimeout(function(){L.trigger(n.Private.Play_Btn_Hide)}),L.checkOnline()&&u.call(this,R)}.call(this,w)},a.prototype._rtsReconnectEventHandler=function(P){var w=this;this.traceLog(c,"rts auto reconnect::"+P.retryTimes+"#"+JSON.stringify(P.reason)),this.waiting=!0,this._TimeUpdateStamp=0,this.trigger(n.Private.H5_Loading_Show),this.trigger(n.Private.Play_Btn_Hide),this._options.autoplay&&this.one(s.Player.AutoPlayPrevented,function(){w.trigger(n.Private.Play_Btn_Hide),w.trigger(n.Private.H5_Loading_Show)}),P.retryTimes===1&&this.trigger(n.Player.OnM3u8Retry),this.trigger(n.Private.Retry,{type:"rts",source:this._options.source})}};var y=(()=>{function d(a,_){(this.isRetry=_)&&(this.isApple=r.IS_IOS||r.IS_SAFARI,this.player=a)}return d.prototype.preProcess=function(){var a,_,b;this.isRetry&&this.isApple&&(a=this.player.getVolume(),_=this.player.muted(),a)&&!_&&((b=this.player.tag).volume=0,this.player.one("canplay",function(){b.volume=a}))},d})()},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/ua":53,"../base/event/eventtype":77,"es6-promise":13}],118:[function(S,m,W){var v=S("../base/player"),h=S("./rtsinjector"),p=v.extend({init:function(l,o){o.isLive&&(o._native=!1,h.inject(this,p,v,o),v.call(this,l,o))}});m.exports=p},{"../base/player":102,"./rtsinjector":117}],119:[function(h,m,W){var v=h("../../lib/constants"),h=h("../../lib/oo").extend({init:function(p){this.player=p,this.tickhandle=null}});h.prototype.tick=function(p,l){var o=this;this.tickhandle=setTimeout(function(){o.player&&o.player.trigger(v.AuthKeyExpiredEvent),l&&l()},1e3*p)},h.prototype.clearTick=function(p){this.tickhandle&&clearTimeout(this.tickhandle)},m.exports=h},{"../../lib/constants":33,"../../lib/oo":48}],120:[function(S,m,W){function v(y,d,a){var b=o.randomUUID(),_="https://mts."+y.domainRegion+".aliyuncs.com/?",b={AccessKeyId:y.accessId,Action:"GetLicense",MediaId:y.vid,LicenseUrl:_,data:y.data,SecurityToken:y.stsToken,Format:"JSON",Type:y.encryptionType,Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:b};y.header&&(b.Header=y.header),_+="Signature="+o.AliyunEncodeURI(o.makeChangeSiga(b,y.accessSecret,"POST")),y=o.makeUTF8sort(b,"=","&"),h.post(_,y,function(E){E?(E=JSON.parse(E),d&&(E=E.License,d(E))):a&&a(t.createError("MPS\u83B7\u53D6License\u5931\u8D25"))},function(E){if(a){var T={Code:"",Message:r.get("Error_MTS_Fetch_Urls_Text")};try{T=JSON.parse(E)}catch(k){}a({Code:l.ErrorCode.ServerAPIError,Message:T.Code+"|"+T.Message,sri:T.RequestId||""})}})}var h=S("../../lib/io"),p=(S("../../lib/ua"),S("../../lib/bufferbase64")),l=S("../../lib/constants"),o=S("./signature"),t=S("./util"),e=S("../../lib/url"),n=S("../../lib/playerutil"),r=S("../../lang/index"),s=S("../base/event/eventtype");function g(y){window.console.error("The license request failed.")}function c(y){window.console.error("A decryption key error was encountered"),window.console.error("A decryption key error was encountered",y)}function u(y){window.console.log("Decryption key was added to session.")}function f(y,d,a){a.addEventListener(y,function(){d(arguments[0])},!1)}m.exports.requestLicenseKey=function(y){var d=y;return d._options.vid&&(d.__vid=d._options.vid),function(a,_){var b,E,T=d._options,k=d._getDRMEncryptItem();k&&(b={vid:d.__vid,accessId:T.accId,accessSecret:T.accSecret,stsToken:T.stsToken,domainRegion:T.domainRegion,authInfo:T.authInfo,encryptionType:k.encryptionType},k.encryptionType==l.EncryptionType.Widevine?b.data=p.encode(a.message):k.encryptionType==l.EncryptionType.PlayReady&&(T=p.unpackPlayReady(a.message),b.data=T.changange,T.header)&&(b.header=JSON.stringify(T.header)),console.log(b.data),a=d.__licenseKeys,E=d.__vid+k.Url,a&&a[E],v(b,function(P){d.__licenseKeys||(d.__licenseKeys={}),10<b.data.length&&(d.__licenseKeys[E]=P),P=p.decode(P),_(P)},function(P){P={mediaId:d.__vid,error_code:P.Code,error_msg:P.Message},d.logError(P),d.trigger("error",P)}))}},m.exports.loadCertificate=function(P,k){var a,_,b,E=new XMLHttpRequest,T=(E.addEventListener("load",function(w,M){var U,M=M.target;if(M.status!==200){var B=l.ErrorCode.DrmLicenseRequestFailed,O=r.get("Error_Drm_License_Request_Failed"),B={mediaId:this._options.vid||"",error_code:B,error_msg:M.response};player.logError(B),B.display_msg=O,player.trigger(s.Player.Error,B)}else{try{U=this._options.isLive?JSON.parse(M.response).Response.B64ServCert:JSON.parse(JSON.parse(M.response).DRMCertInfo).b64ServCert}catch(j){console.log(j)}O=o.base64DecodeUint8Array(U),B=function(j,L){var R=L.target,L=L.initData,C=o.arrayToString(L).split("skd://")[1].split("?")[0],z=o.stringToArray(C);if(L=((ie,Z,q)=>{typeof Z=="string"&&(Z=stringToArray(Z));var x=0,F=new ArrayBuffer(ie.byteLength+4+Z.byteLength+4+q.byteLength),Y=new DataView(F);return new Uint8Array(F,0,ie.byteLength).set(ie),x+=ie.byteLength,Y.setUint32(x,Z.byteLength,!0),x+=4,(ie=new Uint16Array(F,x,Z.length)).set(Z),x+=ie.byteLength,Y.setUint32(x,q.byteLength,!0),x+=4,new Uint8Array(F,x,q.byteLength).set(q),new Uint8Array(F,0,F.byteLength)})(L,z,j),R.webkitKeys||((()=>{if(!WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4"))throw"Key System not supported";keySystem="com.apple.fps.1_0"})(),R.webkitSetMediaKeys(new WebKitMediaKeys(keySystem))),!R.webkitKeys)throw"Could not create MediaKeys";if(z=R.webkitKeys.createSession("video/mp4",L),!z)throw"Could not create key session";z.contentId=C,f("webkitkeymessage",function(F){var Z=this,q=F.target,ae=F.message,x=new XMLHttpRequest,F=(F.sessionId,x.responseType="text",x.session=q,x.addEventListener("load",function(oe){oe=oe.target,fe=this._options.isLive?JSON.parse(oe.response).Response.B64License:JSON.parse(JSON.parse(oe.response).License).b64License;var fe=o.base64DecodeUint8Array(fe),fe=o.Uint8ArrayToString(fe);fe.substr(0,5)==="<ckc>"&&fe.substr(-6)==="</ckc>"&&(fe=fe.slice(5,-6)),fe=o.base64DecodeUint8Array(fe),oe.session.update(fe)}.bind(this),!1),x.addEventListener("error",g,!1),btoa("spc="+o.base64EncodeUint8Array(ae)+"&assetId="+encodeURIComponent(q.contentId))),Y={Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:o.ISODateString(new Date),SignatureNonce:o.randomUUID(),AccessKeyId:Z._options.accessKeyId,SecurityToken:Z._options.securityToken,CertId:Z._options.certId};Z._options.isLive?(Y.RegionId=Z._options.region,Y.Action="DescribeDRMLicense",Y.Version="2016-11-01",Y.CdmData=F,Y.Type="fairplay",Y.Domain=e.parseUrl(Z._options.source).hostname):(Y.region=Z._options.region,Y.Action="GetDRMLicense",Y.Version="2017-03-21",Y.VideoId=Z._options.vid,Y.CDMData=F,Y.DRMType="FairPlay");var re,le,ae="Signature="+o.AliyunEncodeURI(o.makeChangeSiga(Y,Z._options.accessKeySecret,"POST"));q=Z._options.isLive?"https://"+n.getLiveHostByRegion(Z._options.region)+"/?"+ae:"https://vod."+Z._options.region+".aliyuncs.com/?"+ae;for(le in x.open("POST",q,!0),x.setRequestHeader("Content-type","application/x-www-form-urlencoded"),Y){var Q;Y.hasOwnProperty(le)&&(Q=Y[le],re=re?re+"&"+o.AliyunEncodeURI(le)+"="+o.AliyunEncodeURI(Q):o.AliyunEncodeURI(le)+"="+o.AliyunEncodeURI(Q))}x.send(re)}.bind(this),z),f("webkitkeyadded",u,z),f("webkitkeyerror",c,z)}.bind(this,O),M=(this._fairPlayHandlers.onNeedKey=B,function(j){window.console.error("A video playback error occurred")}.bind(this)),this._fairPlayHandlers.onError=M,this.tag.addEventListener("webkitneedkey",B,!1),this.tag.addEventListener("error",M,!1),this.tag.src=this._options.source}w&&w()}.bind(P,k),!1),E.addEventListener("error",function(w){window.console.error("Failed to retrieve the server certificate.")}.bind(P),!1),{Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:o.ISODateString(new Date),SignatureNonce:o.randomUUID(),AccessKeyId:P._options.accessKeyId,SecurityToken:P._options.securityToken,CertId:P._options.certId}),k=(P._options.isLive?(T.RegionId=P._options.region,T.Action="DescribeDRMCertificate",T.Version="2016-11-01"):(T.region=P._options.region,T.Action="GetDRMCertInfo",T.Version="2017-03-21",T.VideoId=P._options.vid),"Signature="+o.AliyunEncodeURI(o.makeChangeSiga(T,P._options.accessKeySecret,"POST"))),P=P._options.isLive?"https://"+n.getLiveHostByRegion(P._options.region)+"/?"+k:"https://vod."+P._options.region+".aliyuncs.com/?"+k;for(a in E.open("POST",P,!0),E.setRequestHeader("Content-type","application/x-www-form-urlencoded"),T)T.hasOwnProperty(a)&&(_=T[a],b=b?b+"&"+o.AliyunEncodeURI(a)+"="+o.AliyunEncodeURI(_):o.AliyunEncodeURI(a)+"="+o.AliyunEncodeURI(_),console.log(_));E.send(b)},m.exports.getRequestUrl=function(a,d){var a={AccessKeyId:d._options.accessKeyId,Format:"JSON",Version:"2016-11-01",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:o.ISODateString(new Date),SignatureNonce:o.randomUUID(),SecurityToken:d._options.securityToken,RegionId:d._options.region,Action:"DescribeDRMLicense",Type:"widevine",CdmData:a,Domain:e.parseUrl(d._options.source).hostname},_=(d._options.widevineCertId&&(a.CertId=d._options.widevineCertId),"Signature="+o.AliyunEncodeURI(o.makeChangeSiga(a,d._options.accessKeySecret,"POST")));return{url:"https://"+n.getLiveHostByRegion(d._options.region)+"/?"+_,data:o.makeUTF8sort(a,"=","&"),jsonData:o.makeUTF8sort(a,"=","&","json")}},m.exports.postData=function(_,d){var a=o.randomUUID(),a={AccessKeyId:d._options.accessKeyId,VideoId:d._options.vid,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:a,SecurityToken:d._options.securityToken,region:d._options.region,Action:"GetDRMLicense",DRMType:"Widevine",CDMData:_},_=(d._options.widevineCertId&&(a.CertId=d._options.widevineCertId),"Signature="+o.AliyunEncodeURI(o.makeChangeSiga(a,d._options.accessKeySecret,"POST")));return{url:"https://vod."+d._options.region+".aliyuncs.com/?"+_,data:o.makeUTF8sort(a,"=","&"),jsonData:o.makeUTF8sort(a,"=","&","json")}},m.exports.destroyFairPlay=function(){this._fairPlayHandlers.onNeedKey&&this.tag.removeEventListener("webkitneedkey",this._fairPlayHandlers.onNeedKey),this._fairPlayHandlers.onError&&this.tag.removeEventListener("error",this._fairPlayHandlers.onError),this._fairPlayHandlers={}}},{"../../lang/index":28,"../../lib/bufferbase64":30,"../../lib/constants":33,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/url":54,"../base/event/eventtype":77,"./signature":126,"./util":127}],121:[function(S,m,W){var v=S("../../lib/io"),h=S("../../lib/constants"),p=S("../../lib/data"),l=S("./util");m.exports.getDataByAuthInfo=function(o,t,e,n){o={playAuth:o.playAuth,requestId:o.requestId},v.get("https://api.h5video.shop/api/page/getMediaPlayInfo"+(r=>(r.requestId=p.guid(),Object.keys(r).reduce(function(s,g){return s+(s?"&":"?")+g+"="+encodeURIComponent(r[g])},"")))(o),function(r){if(r)if(r=JSON.parse(r),r.httpStatusCode!==200)n&&n({Code:h.ErrorCode.ServerAPIError,Message:r.httpStatusCode+"|"+r.code,sri:r.requestId});else{for(var s=r.data.PlayInfoList,g=[],c=s.length-1;0<=c;--c)s[c].Definition==="AUTO"&&(g=[s.splice(c,1)[0]]);var u,f=null;(f=(f=g.length===0?l.objectPlayerMessageSort(s,t):l.objectPlayerMessageSort(g)).map(function(y){return y.format==="m3u8"&&(y.Url=y.Url+"&_ext=.m3u8"),y}))&&e&&(u=r.data.VideoBase||{},e({videoId:u.VideoId,userId:u.UserId,requestId:r.requestId,urls:f,encryptUrlArr:[],thumbnailUrl:"",coverUrl:u.CoverURL,playInfoAry:s,textTracks:r.data.SubtitlesList}))}else n&&n(l.createError("\u8F7BSaaS\u670D\u52A1\u83B7\u53D6\u6570\u636E\u5931\u8D25"))},function(r){r&&typeof r=="string"&&-1<r.indexOf("Invalid CORS request")?n&&n({Code:h.ErrorCode.ServerAPIError,Message:r}):n&&n(l.createError("\u8F7BSaaS\u670D\u52A1\u83B7\u53D6\u6570\u636E\u5931\u8D25"))})}},{"../../lib/constants":33,"../../lib/data":35,"../../lib/io":45,"./util":127}],122:[function(l,m,W){var v=l("./saasplayer"),h=l("./light"),p=l("../base/event/eventtype"),l=v.extend({init:function(o,t){v.call(this,o,t),this.service=h,this.loadByLightSaas()}});l.prototype.loadByLightSaas=function(o){var t=this._options,e={playAuth:t.mediaAuth,defaultDefinition:t.defaultDefinition};this.log("STARTFETCHDATA",{it:"lightSaasPlayAuth",pa:{playAuth:t.mediaAuth}}),this.loadData(e,o)},l.prototype.replayByMediaAuth=function(o){this.trigger(p.Private.Error_Hide),this.tag&&(this.tag.pause(),this.tag.removeAttribute("src"),this.tag.load()),this.setTextTracks([]),this.trigger(p.Private.UserTrackReset),this._options.source="",this._options.mediaAuth=o,this._isError=!1,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.loadByLightSaas(!0)},m.exports=l},{"../base/event/eventtype":77,"./light":121,"./saasplayer":125}],123:[function(S,m,W){var v=S("../../lib/io"),h=S("../../lib/constants"),p=S("./signature"),l=S("./util"),o=S("../../lang/index"),t=S("../../lib/ua"),e=function(r,s){for(var g="",c=(r.sort(function(a,_){return a=parseInt(a.bitrate),_=parseInt(_.bitrate),s=="desc"?_<a?-1:a<_?1:void 0:a<_?-1:_<a?1:void 0}),r.length),u=0;u<c;u++){var f=r[u],y=h.QualityLevels[f.definition],d="",d=y===void 0?f.bitrate:g==y?y+f.bitrate:y;f.desc=d,g=y}},n=function(r,s){for(var g="",c=(r.sort(function(a,_){return a=parseInt(a.width),_=parseInt(_.width),s=="desc"?_<a?-1:a<_?1:void 0:a<_?-1:_<a?1:void 0}),r.length),u=0;u<c;u++){var f=r[u],y=h.QualityLevels[f.definition],d="",d=y===void 0?"":g==y?y+f.height:y;f.desc=d,g=y}};m.exports.getDataByAuthInfo=function(f,s,g,c){p.returnUTCDate(),p.randomUUID();var u=p.randomUUID(),u={AccessKeyId:f.accessId,Action:"PlayInfo",MediaId:f.vid,Formats:f.format,AuthInfo:f.authInfo,AuthTimeout:f.authTimeout||h.AuthKeyExpired,IncludeSnapshotList:f.includeSnapshotList,Rand:f.rand,SecurityToken:f.stsToken,Format:"JSON",Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Terminal:t.IS_CHROME?"Chrome":t.IS_EDGE?"Edge":t.IS_IE11?"IE":t.IS_SAFARI?"Safari":t.IS_FIREFOX?"Firefox":"",SignatureNonce:u},u=(f.hlsUriToken&&(f.MtsHlsUriToken=f.hlsUriToken),f.playConfig&&(u.PlayConfig=JSON.stringify(f.playConfig)),p.makeUTF8sort(u,"=","&")+"&Signature="+p.AliyunEncodeURI(p.makeChangeSiga(u,f.accessSecret))),f="https://mts."+f.domainRegion+".aliyuncs.com/?"+u;v.get(f,function(y){var d,a,_;y?(d=(y=JSON.parse(y)).PlayInfoList.PlayInfo,a="",(_=y.SnapshotList?y.SnapshotList.Snapshot:[])&&0<_.length&&(a=_[0].Url),_=((b,E)=>{for(var T=[],k=[],P=[],w=[],D=b.length-1;0<=D;D--){var U=b[D];(U.format=="mp4"?k:U.format=="mp3"?P:U.format=="m3u8"?T:w).push(U)}return 0<P.length?(e(P,E),P):0<k.length?(n(k,E),k):0<T.length?(n(T,E),T):(n(w,E),w)})(d,s),g&&g({requestId:y.RequestId,urls:_,thumbnailUrl:a})):c&&c(l.createError("MPS\u83B7\u53D6\u53D6\u6570\u5931\u8D25"))},function(y){if(c){var d={Code:"",Message:o.get("Error_MTS_Fetch_Urls_Text")};try{d=JSON.parse(y)}catch(a){}c({Code:h.ErrorCode.ServerAPIError,Message:d.Code+"|"+d.Message,sri:d.RequestId||""})}})}},{"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/ua":53,"./signature":126,"./util":127}],124:[function(p,m,W){var v=p("./saasplayer"),h=(p("../../lib/constants"),p("./mts")),p=v.extend({init:function(l,o){v.call(this,l,o),this.service=h,this.loadByMts()}});p.prototype.loadByMts=function(l){var o={vid:this._options.vid,accessId:this._options.accId,accessSecret:this._options.accSecret,stsToken:this._options.stsToken,domainRegion:this._options.domainRegion,authInfo:this._options.authInfo,format:this._options.format,includeSnapshotList:this._options.includeSnapshotList||!1,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,hlsUriToken:this._options.hlsUriToken,playConfig:this._options.playConfig};this.loadData(o,l)},p.prototype.replayByVidAndAuthInfo=function(l,o,t,e,n,r){this.trigger("error_hide"),this._options.source="",this._isError=!1,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.reloadNewVideoInfo(l,o,t,e,n,r)},p.prototype.reloadNewVideoInfo=function(l,o,t,e,n,r){if(this.trigger("error_hide"),this._options.source="",l&&(this._options.vid=l,this._options.accId=o,this._options.accessSecret=t,this._options.stsToken=e,this._options.domainRegion=r,this._options.authInfo=n),!(this._options.vid&&this._options.accId&&this._options.accessSecret&&this._options.stsToken&&this._options.domainRegion&&this._options.authInfo))throw new Error("\u9700\u8981\u63D0\u4F9Bvid\u3001accId\u3001accessSecret\u3001stsToken\u3001domainRegion\u548CauthInfo\u53C2\u6570");this.log("STARTFETCHDATA",{it:"mps",pa:{vid:l}}),this.loadByMts(!0)},m.exports=p},{"../../lib/constants":33,"./mts":123,"./saasplayer":125}],125:[function(S,m,W){var v=S("../base/player"),h=S("../audio/audioplayer"),p=S("../../lib/io"),l=S("../../lib/constants"),o=S("./signature"),t=S("./authkeyexpiredhandle"),e=S("../hls/hlsinjector"),n=S("../flv/flvinjector"),r=S("../drm/drminjector"),s=S("../sw/swinjector"),g=S("../../lang/index"),c=S("../../lib/ua"),u=S("../../config"),f=S("../../lib/playerutil"),y=S("../base/event/eventtype"),d=S("../../protected/anti-injector-protected"),a=v.extend({init:function(E,T){c.IS_PC&&d(T,this),this._authKeyExpiredHandle=new t(this),v.prototype._videoCreateEl||(v.prototype._videoCreateEl=v.prototype.createEl),T.format=="mp3"?(T.height="auto",T.mediaType="audio",v.prototype.createEl=h.prototype.createEl,h.call(this,E,T),a.prototype.play=v.prototype.play,a.prototype.pause=v.prototype.pause,a.prototype.initPlay=v.prototype.initPlay,a.prototype.replay=v.prototype.replay,a.prototype.stop=v.prototype.stop,a.prototype.seek=v.prototype.seek):(v.prototype.createEl=v.prototype._videoCreateEl,T._native=!1,v.call(this,E,T))}});function _(){var E,T=!1;return Number(this._options.encryptType)!==1?(E={error_code:l.ErrorCode.InvalidParameter,error_msg:g.get("Error_Not_Support_encrypt_Text")},this.logError(E),this.trigger("error",E),!0):T}function b(){var E=f.checkSecuritSupport();if(E)return this._mtsError_message(this,{Code:l.ErrorCode.EncrptyVideoNotSupport,Message:E,display_msg:E},""),!0}a.prototype.loadData=function(E,T){var k,P,w;this._options.encryptType!=1?this._loadData(E,T):(k="aliplayer-vod-min.js",P="",P=u.domain?"https://"+u.domain+u.path+u.h5Version+"/hls/"+k:"/build/hls/"+k,this.trigger(y.Private.Timeline,{name:"mod_rand_s",ts:performance.now()}),w=this,p.loadJS(P,function(){w.trigger(y.Private.Timeline,{name:"mod_rand_f",ts:performance.now()}),w._loadData(E,T)}))},a.prototype._loadData=function(E,T){var k,P=new Date().getTime(),w=this;this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._authKeyExpiredHandle.clearTick(),E.format!=""&&E.format!="m3u8"||this._options.encryptType!=1?E.rand=o.randomUUID():(k=_rtsneg(w._vdnct6f===3?E.vid:void 0),E.rand=_dnaRekam(k,w._vdnct6f)),this._options.thumbnailUrl&&(E.thumbnailUrl=this._options.thumbnailUrl),this.trigger(y.Private.H5_Loading_Show),this.service.getDataByAuthInfo.call(this,E,this._options.qualitySort,function(D){if(w.trigger(y.Private.PlayInfoLoaded,D),D.userId&&(w._options.from=D.userId),D.videoId&&w._monitor&&w._monitor.updateLightSaasVideoId(D.videoId),D.textTracks&&D.textTracks.length&&(U=f.unqiueTextTracks(D.textTracks),w.trigger(y.Private.TextTrackFounded,{from:"saas",textTracks:U})),D.urls&&D.urls.length==0)w._mtsError_message(w,{Code:l.ErrorCode.URLsIsEmpty,Message:g.get("Error_Vod_URL_Is_Empty_Text")+(E.format?"(format:"+E.format+")":"")},"");else{w.log("COMPLETEFETCHDATA",{cost:new Date().getTime()-P,mi:JSON.stringify((L=>{for(var C=[],z=0;z<L.length;z++)C.push({width:L[z].width,height:L[z].height,definition:L[z].definition,format:L[z].format,encryptionType:L[z].encryptionType,duration:L[z].duration});return C})(D.urls))}),w._urls=D.urls,w._currentPlayIndex=f.findSelectedStreamLevel(w._urls,E.defaultDefinition);var U=(M=D.urls[w._currentPlayIndex]).Url;if(w._vodDuration=M.duration||0,w._options.source=U,w.encType="",w.trigger(y.Private.PREPARE,M.definition),w.UI.cover&&D.coverUrl&&!w._options.cover&&w.setCover(D.coverUrl),f.isHls(U))if(D&&D.playInfoAry&&0<D.playInfoAry.length&&D.playInfoAry[0].EncryptType=="Widevine-FairPlay")r.inject(w,a,v.prototype,w._options);else{if(D.encryptUrlArr&&0<D.encryptUrlArr.length){for(var M,O=[],B=!1,j=0;j<D.encryptUrlArr.length;++j)if((M=D.encryptUrlArr[j]).encryptionType===l.EncryptionType.Private){if(_.call(w))return;if(B||b.call(w))return void(B=!0);var H=_yekced(k,M.rand,M.plaintext);O.push({url:M.Url,secData:H})}}else if(O="",M.encryptionType==l.EncryptionType.Private){if(_.call(w)||b.call(w))return;w.encType=M.encryptionType,O=_yekced(k,M.rand,M.plaintext)}var R=c.IS_IOS&&parseFloat(c.IOS_FULL_VERSION)<17.1;(O&&(w._options.useSW||R)?s:(w._hls&&(w._hls.destroy(),w._hls=null),e)).inject(w,a,v,w._options,O)}else f.isFlv(U)?n.inject(w,a,v,w._options):f.isDash(U)?(console.log("isDash"),r.inject(w,a,v,w._options)):w._player._executeReadyCallback();w._authKeyExpiredHandle.tick(l.AuthKeyRefreshExpired),w.trigger(y.Private.SourceLoaded,M),w._monitor2.vodSelectUrl(M),w.initPlay(T),w.trigger(y.Private.ChangeURL,{from:"saas"}),D.thumbnailUrl&&w._thumbnailService.get(D.thumbnailUrl),R=w._player._isFlv,U=-1<w._player.getOptions().source.indexOf("mp4"),w._player.encType==1||R||U||(c.IS_IOS||c.IS_MAC_SAFARI||c.IS_X5||c.IS_EDGE)&&(w._player._executeReadyCallback(),w._urls.length)&&w.trigger(y.Private.SourceLoaded,M)}},function(D){var U;-1<((U=D.Message)==null?void 0:U.indexOf('The specified parameter "Rand" is not valid'))&&_.call(w)||w._mtsError_message(w,D,"")})},a.prototype._changeStream=function(E,T){this._urls.length>E&&(this._loadByUrlInner(this._urls[E].Url,this.getCurrentTime(),!0),this._currentPlayIndex=E,this.trigger(y.Private.QualityChange,T||g.get("Quality_Change_Fail_Switch_Text")))},a.prototype._getLowerQualityLevel=function(){if(this._urls.length!=0&&this._currentPlayIndex!=-1){if(this.options().qualitySort=="asc"){if(0<this._currentPlayIndex)return{item:this._urls[this._currentPlayIndex-1],index:this._currentPlayIndex-1}}else if(this._currentPlayIndex<this._urls.length-1)return{item:this._urls[this._currentPlayIndex+1],index:this._currentPlayIndex+1}}return""},a.prototype._mtsError_message=function(E,T,k){E._serverRequestId=T.sri,E.trigger(y.Private.H5_Loading_Hide),T.Code=T.Code||T.code,T.Message=T.Message||T.message;var P=T.Code||"OTHER_ERR_CODE",w=T.Message||"OTHER_ERR_MSG",D=(l.ErrorCode.ServerAPIError,T.display_msg||""),U=(-1<w.indexOf("InvalidParameter.Rand")||-1<w.indexOf('"Rand" is not valid.')?(l.ErrorCode.EncrptyVideoNotSupport,D=g.get("Error_Encrypt_Fetch_Failed_Text")):-1<w.indexOf("SecurityToken.Expired")?(l.ErrorCode.AuthKeyExpired,D=g.get("Error_Playauth_Expired_Text")):-1<w.indexOf("InvalidVideo.NoneStream")?(l.ErrorCode.URLsIsEmpty,D=g.get("Error_Fetch_NotStream")+"("+E._options.format+"|"+E._options.definition+")"):-1<w.indexOf("DataNotFound")&&(l.ErrorCode.MediaNotFound,D=g.get("Error_Fetch_Media_Not_Found")),E._options.vid||""),U=(E._options.from,{mediaId:U,mediaAuth:E._options.mediaAuth||"",error_code:P,error_msg:w});T.sri&&(U.sri=T.sri),E.logError(U),U.display_msg=D&&D===w?D:(D||g.get("Error_Vod_Fetch_Urls_Text"))+"</br>"+w,E.trigger("error",U),console.log("PrismPlayer Error: "+k+"! error_msg :"+w+";")},m.exports=a},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/ua":53,"../../protected/anti-injector-protected":142,"../audio/audioplayer":75,"../base/event/eventtype":77,"../base/player":102,"../drm/drminjector":110,"../flv/flvinjector":113,"../hls/hlsinjector":115,"../sw/swinjector":140,"./authkeyexpiredhandle":119,"./signature":126}],126:[function(S,m,W){var v=S("crypto-js/hmac-sha1"),h=S("crypto-js/enc-base64"),p=S("crypto-js/enc-utf8");m.exports.randomUUID=function(){for(var l=[],o="0123456789abcdef",t=0;t<36;t++)l[t]=o.substr(Math.floor(16*Math.random()),1);return l[14]="4",l[19]=o.substr(3&l[19]|8,1),l[8]=l[13]=l[18]=l[23]="-",l.join("")},m.exports.returnUTCDate=function(){var s=new Date,l=s.getUTCFullYear(),o=s.getUTCMonth(),t=s.getUTCDate(),e=s.getUTCHours(),n=s.getUTCMinutes(),r=s.getUTCSeconds(),s=s.getUTCMilliseconds();return Date.UTC(l,o,t,e,n,r,s)},m.exports.AliyunEncodeURI=function(l){return l=encodeURIComponent(l),l=(l=(l=l.replace("+","%2B")).replace("*","%2A")).replace("%7E","~")},m.exports.makesort=function(l,o,t){if(!l)throw new Error("PrismPlayer Error: vid should not be null!");var e=[];for(g in l)e.push(g);for(var n=e.sort(),r="",s=n.length,g=0;g<s;g++)r==""?r=n[g]+o+l[n[g]]:r+=t+n[g]+o+l[n[g]];return r},m.exports.makeUTF8sort=function(l,o,t){if(!l)throw new Error("PrismPlayer Error: vid should not be null!");var e=[];for(g in l)e.push(g);for(var n=e.sort(),r="",s=n.length,g=0;g<s;g++){var c=m.exports.AliyunEncodeURI(n[g]),u=m.exports.AliyunEncodeURI(l[n[g]]);r==""?r=c+o+u:r+=t+c+o+u}return r},m.exports.makeChangeSiga=function(l,o,t){if(l)return h.stringify(v((t=t||"GET")+"&"+m.exports.AliyunEncodeURI("/")+"&"+m.exports.AliyunEncodeURI(m.exports.makeUTF8sort(l,"=","&")),o+"&"));throw new Error("PrismPlayer Error: vid should not be null!")},m.exports.ISODateString=function(l){function o(t){return t<10?"0"+t:t}return l.getUTCFullYear()+"-"+o(l.getUTCMonth()+1)+"-"+o(l.getUTCDate())+"T"+o(l.getUTCHours())+":"+o(l.getUTCMinutes())+":"+o(l.getUTCSeconds())+"Z"},m.exports.encPlayAuth=function(l){if(l=p.stringify(h.parse(l)))return JSON.parse(l);throw new Error("playuth\u53C2\u6570\u89E3\u6790\u4E3A\u7A7A")},m.exports.encRsa=function(){},m.exports.stringToArray=function(l){for(var o=new ArrayBuffer(2*l.length),t=new Uint16Array(o),e=0,n=l.length;e<n;e++)t[e]=l.charCodeAt(e);return t},m.exports.Uint8ArrayToString=function(l){for(var o="",t=0;t<l.length;t++)o+=String.fromCharCode(l[t]);return o},m.exports.arrayToString=function(l){return l=new Uint16Array(l.buffer),String.fromCharCode.apply(null,l)},m.exports.base64DecodeUint8Array=function(l){var o=window.atob(l),t=o.length,e=new Uint8Array(new ArrayBuffer(t));for(i=0;i<t;i++)e[i]=o.charCodeAt(i);return e},m.exports.base64EncodeUint8Array=function(l){for(var o,t,e,n,r,s,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",u=0;u<l.length;)e=(o=l[u++])>>2,n=(3&o)<<4|(o=u<l.length?l[u++]:Number.NaN)>>4,r=(15&o)<<2|(t=u<l.length?l[u++]:Number.NaN)>>6,s=63&t,isNaN(o)?r=s=64:isNaN(t)&&(s=64),c+=g.charAt(e)+g.charAt(n)+g.charAt(r)+g.charAt(s);return c}},{"crypto-js/enc-base64":8,"crypto-js/enc-utf8":9,"crypto-js/hmac-sha1":10}],127:[function(S,m,W){var v=S("../../lib/constants");m.exports.createError=function(h,p){return{requestId:"",code:p||"",message:h}},m.exports.getItem=function(h){var p={};return p.width=h.Width,p.height=h.Height,p.definition=h.Definition,p.Url=h.PlayURL,p.format=h.Format,p.desc=v.QualityLevels[p.definition],p.encryptionType=v.VodEncryptionType[h.EncryptType],p.plaintext=h.Plaintext,p.rand=h.Rand,p.encrypt=h.Encrypt,p.duration=h.Duration,p.bitrate=h.Bitrate,p},m.exports.objectPlayerMessageSort=function(h,p){for(var l=[],o=[],t=[],e=[],n=h.length-1;0<=n;n--){var r=h[n],r=m.exports.getItem(r);(r.format=="mp4"?o:r.format=="mp3"?t:r.format=="m3u8"?l:e).push(r)}var s=[],s=0<t.length?t:0<o.length?o:0<l.length?l:e;return p=="asc"&&s.reverse(),s}},{"../../lib/constants":33}],128:[function(S,m,W){var v=S("../../lib/io"),h=S("../../lib/constants"),p=S("./signature"),l=S("./util"),o=S("../../config"),t=S("../../lang/index"),e=S("../base/event/eventtype"),n="saas/vod.js",r={MAIN:"main",BACKUP:"backup"},s=function(f){return(f||"").split("?")[0]},g={type:r.MAIN,time:0};function c(f,y,d,a){var _=this,b=function(T){var k=p.randomUUID(),k={AccessKeyId:T.accessId,Action:"GetPlayInfo",VideoId:T.vid,Formats:T.format,AuthTimeout:T.authTimeout||h.AuthKeyExpired,Rand:T.rand,SecurityToken:T.stsToken,StreamType:T.mediaType,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:k,PlayerVersion:o.h5Version,Channel:"HTML5"};return T.definition==="AUTO"?k.ResultType="Multiple":T.definition&&(k.Definition=T.definition),T.authInfo&&(k.AuthInfo=T.authInfo),T.outputType&&(k.OutputType=T.outputType),T.playConfig&&(k.PlayConfig=JSON.stringify(T.playConfig)),T.reAuthInfo&&(k.ReAuthInfo=JSON.stringify(T.reAuthInfo)),k=p.makeUTF8sort(k,"=","&")+"&Signature="+p.AliyunEncodeURI(p.makeChangeSiga(k,T.accessSecret)),"https://vod"+(this._useBackupVodDomain?"-product":"")+"."+T.domainRegion+".aliyuncs.com/?"+k}.call(this,f),E=performance.now();g.time===0&&this.trigger(e.Private.Timeline,{name:"vod_s",ts:E}),v.get.call(this,b,function(T){u.call(_,b,{status:200}),function(k,P,w,D,U){if(this.trigger(e.Private.Timeline,{name:"vod_f",ts:performance.now()}),this.traceLog(n,"Vod request ok."+k),g={type:r.MAIN,time:0},k){for(var M,k=JSON.parse(k),O=(this._monitor2.vodMediaInfo(k),""),B=k.VideoBase.ThumbnailList,j=(B&&B.Thumbnail&&0<B.Thumbnail.length?O=B.Thumbnail[0].URL:P.thumbnailUrl&&(O=String(P.thumbnailUrl)),k.PlayInfoList.PlayInfo),H=[],R=[],L=j.length-1;0<=L;--L)j[L].Definition==="AUTO"?(this.getOptions().isVBR=!0,M=j.splice(L,1)[0],H=[M]):j[L].Encrypt===1&&R.push(j[L]);B=null,R=H.length===0?(B=l.objectPlayerMessageSort(j,w),[]):(B=l.objectPlayerMessageSort(H),l.objectPlayerMessageSort(R)),B&&D&&D({requestId:k.RequestId,urls:B,encryptUrlArr:R,thumbnailUrl:O,coverUrl:k.VideoBase.CoverURL,playInfoAry:j})}else U&&U(l.createError("\u70B9\u64AD\u670D\u52A1\u83B7\u53D6\u6570\u636E\u5931\u8D25"))}.call(_,T,f,y,d,a)},function(T,k,P){if((D=(w=P).status)===0||500<=D&&D<=599&&(w.responseText||"").indexOf("RequestId")===-1){if(D={url:s(b),status:P.status,response:P.responseText,retryType:g.type,retryTime:g.time},_.trigger(e.Private.VodRequestException,D),_._monitor2.vodRequestFatalError(D),5e3<performance.now()-E&&(g.type===r.MAIN?g.time=1:g.type===r.BACKUP&&(g.time=2)),g.type===r.MAIN)return g.time<1?(g.time++,void setTimeout(function(){c.call(_,f,y,d,a)},200)):(g.type=r.BACKUP,g.time=1,void setTimeout(function(){_._useBackupVodDomain=!0,c.call(_,f,y,d,a)},200));if(g.type===r.BACKUP){if(g.time<2)return g.time++,void setTimeout(function(){c.call(_,f,y,d,a)},200);_&&(_._useBackupVodDomain=!1)}}else u.call(_,b,P);var w,D;(function(U,M){if(this.traceLog(n,"Vod request error::"+U),g={type:r.MAIN,time:0},M){var O={Code:"",Message:t.get("Error_Vod_Fetch_Urls_Text")};try{O=JSON.parse(U)}catch(B){}M({Code:h.ErrorCode.ServerAPIError,Message:O.Code+"|"+O.Message,sri:O.RequestId||""})}}).call(_,T,a)},void 0,void 0,5e3)}function u(f,y){g.time!==0&&(this._useBackupVodDomain=!0,f={url:s(f),status:y==null?void 0:y.status,response:(y==null?void 0:y.status)!==200?y==null?void 0:y.responseText:"",retryType:g.type,retryTime:g.time},this.trigger(e.Private.VodRequestExceptionResume,f),this._monitor2.vodRequestFatalErrorResume(f))}m.exports.getDataByAuthInfo=c},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../base/event/eventtype":77,"./signature":126,"./util":127}],129:[function(n,m,W){var v=n("./saasplayer"),h=n("../../lib/constants"),p=n("./vod"),l=n("./signature"),o=n("../../lib/io"),t=n("../../config"),e=n("../base/event/eventtype"),n=v.extend({init:function(r,s){v.call(this,r,s),this.service=p,this.loadByVod()}});n.prototype.loadByVod=function(r){var s,g,c;typeof _apesrap!="undefined"?this._loadByVod(r):(typeof globalThis!="object"&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__),s="aliplayer-vod-p-min.js",g="",g=t.domain?"https://"+t.domain+t.path+t.h5Version+"/hls/"+s:"/build/hls/"+s,this.trigger(e.Private.Timeline,{name:"mod_pa_s",ts:performance.now()}),c=this,o.loadJS(g,function(){c.trigger(e.Private.Timeline,{name:"mod_pa_f",ts:performance.now()}),c._loadByVod(r)}))},n.prototype._loadByVod=function(r){var s="",g="",c="",u="",f="";if(this._options.accessKeyId&&this._options.accessKeySecret)s=this._options.accessKeyId,g=this._options.accessKeySecret,c=this._options.securityToken,u=this._options.region,this.log("STARTFETCHDATA",{it:"sts",pa:{vid:this._options.vid}});else{try{var y=_apesrap(this._options.playauth,this._options.vid),d=(this._vdnct6f=y.v,y.value),a=l.encPlayAuth(d),s=a.AccessKeyId,g=a.AccessKeySecret,c=a.SecurityToken,u=a.Region,f=a.AuthInfo}catch(_){return console.log("e",_),y={Code:h.ErrorCode.PlayauthDecode,Message:"playauth decoded failed.",displayMessage:"playauth\u89E3\u6790\u9519\u8BEF"},void this._mtsError_message(this,y,d)}this._options.from=a.CustomerId||"",this.log("STARTFETCHDATA",{it:"playAuth",pa:{vid:this._options.vid}})}this._loadByVodBySTS(s,g,c,u,f,r)},n.prototype.replayByVidAndPlayAuth=function(r,s){this.trigger("error_hide"),this.setTextTracks([]),this.trigger(e.Private.UserTrackReset),this._options.source="",this._options.vid=r,this._options.playauth=s,this._options._userOptions.vid=r,this._options._userOptions.playauth=s,this._isError=!1,this._options.cover="",this._vodRetryCount=0,this._posOffset=this._getSubVideoConfig().start||0,this._monitor2.playAbort("replayByVidAndPlayAuth",r),this._monitor&&(this._monitor.reportPlayAbort("replayByVidAndPlayAuth"),this._monitor.reset(),this._monitor.startHeartBeat()),this._clearTimeout(),this.loadByVod(!0)},n.prototype.updateSourcesByVidAndPlayAuth=function(r,s){var g,c,u;typeof _apesrap!="undefined"?this._updateSourcesByVidAndPlayAuth(r,s):(g="aliplayer-vod-p-min.js",c="",c=t.domain?"https://"+t.domain+t.path+t.h5Version+"/hls/"+g:"/build/hls/"+g,u=this,o.loadJS(c,function(){u._updateSourcesByVidAndPlayAuth(r,s)}))},n.prototype._updateSourcesByVidAndPlayAuth=function(r,s){if(r!=this._options.vid)console.log("\u4E0D\u80FD\u66F4\u65B0\u5730\u5740\uFF0Cvid\u548C\u64AD\u653E\u4E2D\u7684\u4E0D\u4E00\u81F4");else{this._options.vid=r,this._options.playauth=s;try{var g=_apesrap(this._options.playauth,this._options.vid),c=(this._vdnct6f=g.v,g.value),u=l.encPlayAuth(c)}catch(d){return void console.log("playauth\u89E3\u6790\u9519\u8BEF")}var s={vid:r,accessId:u.AccessKeyId,accessSecret:u.AccessKeySecret,stsToken:u.SecurityToken,domainRegion:u.Region,authInfo:u.AuthInfo,playDomain:u.PlayDomain,format:this._options.format,mediaType:this._options.mediaType},f=(this._authKeyExpiredHandle.clearTick(),this);this.service.loadData(s,this._options.qualitySort,function(d){f._serverRequestId=d.requestId,d.urls.length!=0&&(f._urls=d.urls),f._authKeyExpiredHandle.tick(h.AuthKeyRefreshExpired)},function(d){console.log(d)})}},n.prototype.reloaduserPlayInfoAndVidRequestMts=function(r,s){this.replayByVidAndPlayAuth(r,s,accessSecret)},n.prototype._loadByVodBySTS=function(r,s,g,c,u,f){r={vid:this._options.vid,accessId:r,accessSecret:s,stsToken:g,authInfo:u,domainRegion:c,format:this._options.format,mediaType:this._options.mediaType,definition:this._options.definition,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,outputType:this._options.outputType,playConfig:this._options.playConfig,reAuthInfo:this._options.reAuthInfo},this.loadData(r,f)},m.exports=n},{"../../config":19,"../../lib/constants":33,"../../lib/io":45,"../base/event/eventtype":77,"./saasplayer":125,"./signature":126,"./vod":128}],130:[function(S,m,W){function v(p){this._player=p,this._video=p.tag;var l=this;this._isCreated=!1,this._canPlayTriggered=!1,this._defaultTrack="",p.on(h.Private.ChangeURL,function(){l._isCreated=!1,l._canPlayTriggered=!1,l._defaultTrack=""}),p.on(h.Player.CanPlay,function(){var o;l._player._drm||l._canPlayTriggered||((o=l._getTracks())&&(l._isCreated=!0,l._player._options.isVBR||l._hls||(p.trigger(h.Player.AudioTrackReady,o),l._notifyDefaultValue(o))),l._canPlayTriggered=!0)}),p.on(h.Player.AudioTrackUpdated,function(o){l._isCreated||(o=l._getTracks(o.paramData.audioTracks))&&(l._isCreated=!0,p.trigger(h.Player.AudioTrackReady,o),l._notifyDefaultValue(o))})}var h=S("../base/event/eventtype");v.prototype._notifyDefaultValue=function(p){!this._defaultTrack&&0<p.length&&(this._defaultTrack=p[0]),this._defaultTrack&&this._player.trigger(h.Private.SelectorUpdateList,{type:"audio",text:this._defaultTrack.text})},v.prototype.support=function(){return!!this._video.audioTracks},v.prototype._getTracks=function(p){if(!this.support()&&!p)return null;for(var l=[],o=(p=!this._video||!this._video.audioTracks||p&&p.length!=0?p:this._video.audioTracks)?p.length:0,t=0;t<o;t++){var e=p[t],n={value:e.id,text:e.label||e.name||e.language};(e.default||e.enabled)&&(this._defaultTrack=n),l.push(n)}return l},v.prototype.switch=function(p){if(this._player._hls)this._player._hls.audioTrack=+p;else if(this._player._switchAudioTrack)this._player._switchAudioTrack(p);else for(var l=this._video.audioTracks?this._video.audioTracks.length:0,o=0;o<l;o++){var t=this._video.audioTracks[o];t.id==p?t.enabled=!0:t.enabled=!1}},v.prototype.dispose=function(){this._player=null},m.exports=v},{"../base/event/eventtype":77}],131:[function(S,m,W){function v(n){this._video=n.tag,this._player=n,this._isCreated=!1,this._backupCC="",this.tracks=[],this._defaultTrack="",this._currentValue="",this._switchTimer=null,this._storedTracks=[];var r=this,s=(n.on(h.Player.LevelsLoaded,function(g){n.getOptions().useDrm2||(l.IS_MAC_SAFARI||l.IS_IOS)&&(g&&g.paramData&&g.paramData.subtitles&&g.paramData.subtitles.length?r._storedTracks=g.paramData.subtitles||[]:r._resotreTracks())}),n.on(h.Private.SafariDrmLevelSwitch,function(){r._resotreTracks()}),n.on(h.Private.ChangeURL,function(g){g&&g.paramData&&g.paramData.from==="saas"||(r._disabledTracks(),r._isCreated=!1,r._defaultTrack="",r._backupCC="")}),n.on(h.Private.VttClearTracks,function(){r.switch("off"),r._disabledTracks(),r._isCreated=!1,r._defaultTrack={value:"off",text:"Off"},r.tracks=[r._defaultTrack],n.trigger(h.Private.SelectorGenerateList,{type:"cc"}),n.trigger(h.Private.CCStateChanged,{value:"off",lang:""})}),n.on(h.Player.CanPlay,function(){r._isCreated||(r.tracks=r._getTracks(),n.trigger(h.Player.TextTrackReady,r.tracks),n.trigger(h.Private.CCReset)),r._isCreated&&!r._player._setDefaultCC||!r._defaultTrack||(n.trigger(h.Private.SelectorUpdateList,{type:"cc",text:r._defaultTrack.text}),r.switch(r._defaultTrack.value),r._player._setDefaultCC=!1,r._isCreated=!0)}),l.os.ios&&parseFloat(l.os.version)<=15.1&&p.addCssByStyle("video::-webkit-media-text-track-container{position: relative; top: -44px !important;}"),n.getOptions().controlBarVisibility==="always"&&p.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}"),e.throttle(function(){n._vttBroker&&n._vttBroker.enabled||p.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}")},100)),s=(n.on(h.Private.ShowBar,s),e.throttle(function(){n._vttBroker&&n._vttBroker.enabled||p.addCssByStyle("video::-webkit-media-text-track-container{transform: none;}")},100));n.on(h.Private.HideBar,s),n.on(h.Private.CCReset,function(){r._updateSelectorList()})}var h=S("../base/event/eventtype"),p=(S("../../lib/event"),S("../../lib/dom")),l=S("../../lib/ua"),o=S("../../lib/cookie"),t=S("../../lib/constants"),e=S("../../ui/component/util");v.prototype._adaptiveCueStype=function(){var n,r=-10;l.IS_SAFARI?(r=-65,(n=this._player.fullscreenService)&&n.getIsFullScreen()&&(r=-95)):l.IS_MOBILE&&(r=-30),p.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY("+r+"px) !important;}")},v.prototype.close=function(){for(var n=this.getTextTracks(),r=n.length,s=0;s<r;s++){var g=n[s];g.mode!="expired"&&(g.mode=="showing"&&(this._backupCC=g),g.mode="disabled",this._player._switchDrmTextTrack)&&this._player._switchDrmTextTrack()}this._player.trigger(h.Private.VttHide)},v.prototype.open=function(){var n,r,s;return!this.tracks||this.tracks.length<2||(r=this._backupCC?this._backupCC.language:"",s=this._backupCC?this._backupCC.label:"",this.tracks.forEach(function(g){r===g.value&&(n=!0)}),(r=n?r:s="")||(r=this.tracks[1].value,s=this.tracks[1].text),this.switch(r)),{label:s,language:r}},v.prototype.getCurrentSubtitle=function(){return this._currentValue},v.prototype._getTracks=function(){for(var n=this.getTextTracks(),r=n.length,s=(this._defaultTrack={value:"off",text:"Off"},[this._defaultTrack]),g=o.get(t.SelectedCC),c="",u=!1,f=0;f<r;f++){var y,d=n[f];d.mode=="expired"||d.kind!="subtitles"&&d.kind!="captions"||(y={value:d.language,text:d.label},d.default&&(this._defaultTrack=y,u=!0),y.value==g&&(c=y),s.push(y))}return!u&&c&&(this._defaultTrack=c),s},v.prototype._disabledTracks=function(){for(var n=this.getTextTracks(),r=n.length,s=0;s<r;s++)n[s].mode="expired"},v.prototype.switch=function(n){var r=this._player;if(this.close(),n!="off")for(var s=this.getTextTracks(),g=s.length,c=0;c<g;c++){var u=s[c];u.language===n&&u.mode!="expired"&&(r._switchDrmTextTrack&&r._switchDrmTextTrack(n),s[c].mode="showing",r.trigger(h.Private.VttSwitchTrack,u.language))}else this.close();this._currentValue=n,r.trigger(h.Private.CCChanged,n)},v.prototype.updateUI=function(n){var r=this._player,s="on",g="";g=n?(this.tracks.find(function(c){return c.value===n})||{}).text||"":(s="off","Off"),r.trigger(h.Private.CCChanged,s),r.trigger(h.Private.CCStateChanged,{value:s,lang:g})},v.prototype.dispose=function(){this._player=null,this._switchTimer&&(clearTimeout(this._switchTimer),this._switchTimer=null)},v.prototype._patchSafariTracks=function(){var n=this;if(l.IS_MAC_SAFARI||l.IS_IOS){if(!(this._video&&this._video.textTracks&&this._video.textTracks.length)){var r=!1;if(r=this._video.textTracks&&this._video.textTracks.length?!0:r)return;for(var s=0;s<this._storedTracks.length;s++){var g=this._storedTracks[s],c=g.vttUrl,u=document.createElement("track");u.src=c,u.kind="subtitles",u.label=g.name,u.srclang=g.lang,this._video.appendChild(u)}}this._switchTimer&&clearTimeout(this._switchTimer),this._switchTimer=setTimeout(function(){var f=n.getCurrentSubtitle();f&&f!=="off"&&n.switch(f)},1e3)}},v.prototype.getTextTracks=function(){var n=this._player,r=n.tag;return n._vttBroker&&n._vttBroker.enabled&&n.getTextTracks?n.getTextTracks()||[]:n._getDrmTextTracks?n._getDrmTextTracks()||[]:r&&r.textTracks||[]},v.prototype._updateSelectorList=function(){var n=this._player;this.tracks=this._getTracks(),n.trigger(h.Private.SelectorGenerateList,{type:"cc",value:"Off"})},v.prototype._resotreTracks=function(){this._patchSafariTracks(),this.tracks=this._getTracks(),this._player.trigger(h.Player.TextTrackReady,this.tracks)},m.exports=v},{"../../lib/constants":33,"../../lib/cookie":34,"../../lib/dom":37,"../../lib/event":38,"../../lib/ua":53,"../../ui/component/util":173,"../base/event/eventtype":77}],132:[function(S,m,W){var v=S("../../lib/playerutil");m.exports=[{service:S("./ccservice"),name:"_ccService",condition:!0},{service:S("./audiotrackservice"),name:"_audioTrackService"},{service:S("./qualityservice"),name:"_qualityService"},{service:S("./fullscreenservice"),name:"fullscreenService",condition:function(){return!0}},{service:S("./liveshiftservice"),name:"_liveshiftService",condition:function(){var h=this.options();return v.isLiveShift(h)}},{service:S("./thumbnailservice"),name:"_thumbnailService",condition:function(){return!0}},{service:S("./progressmarkerservice"),name:"_progressMarkerService",condition:function(){return!0}}]},{"../../lib/playerutil":50,"./audiotrackservice":130,"./ccservice":131,"./fullscreenservice":133,"./liveshiftservice":134,"./progressmarkerservice":135,"./qualityservice":136,"./thumbnailservice":137}],133:[function(S,m,W){function v(r){var s=this,g=(this.isFullWindow=!1,this.isFullScreen=!1,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer=null,this._player=r,this),c=t;this._fullscreenChanged=function(u){var f;g._player!=null&&(u.target||u.srcElement)===(u=g._player.el())&&(f=document[c.fullscreenElement],g.isFullScreen=f===u,(g.isFullScreenChanged=!0)===g.isFullScreen?g._player.trigger(o.Player.RequestFullScreen):g._player.trigger(o.Player.CancelFullScreen))},c&&l.on(document,c.eventName,this._fullscreenChanged),l.on(r.tag,"webkitendfullscreen",function(u){u=u.target||u.srcElement,r&&r.tag===u&&(s.isFullScreenChanged=!0,s.isFullScreen=!1,s._player.trigger(o.Player.CancelFullScreen),s._player.trigger(o.Private.Play_Btn_Show))})}var h=S("../../lib/ua"),p=S("../../lib/dom"),l=S("../../lib/event"),o=S("../base/event/eventtype"),t=(S("../base/x5play"),S("../../lang/index"),(()=>{p.createEl("div");var r={},s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullScreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitfullScreen"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitIsFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","mozFullScreen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","MSFullScreen"]],g=!1;if(!(g=h.IS_IOS&&(r.requestFn="webkitEnterFullscreen",r.cancelFn="webkitExitFullscreen",r.fullscreenElement="webkitFullscreenElement",r.eventName="webkitfullscreenchange",r.isFullScreen="webkitDisplayingFullscreen",document[r.requestFn])?!0:g)){for(var c=0;c<5;c++)if(s[c][1]in document){r.requestFn=s[c][0],r.cancelFn=s[c][1],r.fullscreenElement=s[c][2],r.eventName=s[c][4],r.isFullScreen=s[c][6];break}"requestFullscreen"in document?r.requestFn="requestFullscreen":"webkitRequestFullscreen"in document?r.requestFn="webkitRequestFullscreen":"webkitRequestFullScreen"in document?r.requestFn="webkitRequestFullScreen":"webkitEnterFullscreen"in document?r.requestFn="webkitEnterFullscreen":"mozRequestFullScreen"in document?r.requestFn="mozRequestFullScreen":"msRequestFullscreen"in document&&(r.requestFn="msRequestFullscreen"),"fullscreenchange"in document?r.eventName="fullscreenchange":"webkitfullscreenchange"in document||"webkitfullscreenchange"in document||"webkitfullscreenchange"in document?r.eventName="webkitfullscreenchange":"mozfullscreenchange"in document?r.eventName="mozfullscreenchange":"MSFullscreenChange"in document&&(r.eventName="MSFullscreenChange"),"fullScreen"in document?r.isFullScreen="fullScreen":"webkitfullScreen"in document?r.isFullScreen="webkitfullScreen":"webkitIsFullScreen"in document?r.isFullScreen="webkitIsFullScreen":"webkitDisplayingFullscreen"in document?r.isFullScreen="webkitDisplayingFullscreen":"mozFullScreen"in document?r.isFullScreen="mozFullScreen":"mozfullScreen"in document?r.isFullScreen="mozfullScreen":"MSFullScreen"in document&&(r.isFullScreen="MSFullScreen"),"fullscreenElement"in document?r.fullscreenElement="fullscreenElement":"webkitFullscreenElement"in document?r.fullscreenElement="webkitFullscreenElement":"webkitFullScreenElement"in document?r.fullscreenElement="webkitFullScreenElement":"mozFullScreenElement"in document?r.fullscreenElement="mozFullScreenElement":"msFullscreenElement"in document?r.fullscreenElement="msFullscreenElement":"MSFullscreenElement"in document&&(r.fullscreenElement="MSFullscreenElement")}return r.requestFn?r:null})()),e=(v.prototype.requestFullScreen=function(){var r=t,s=this._player.el(),g=this;if(h.IS_IOS){var c=this._player._splayer;if(!c||c.renderType!==2){s=this._player.tag,c&&c.renderType!==2&&(s=this._player.el().querySelector("video"));try{var u=s[r.requestFn]();u&&typeof u.catch=="function"&&u.catch(function(y){console.log(y)}),g._player.trigger(o.Player.RequestFullScreen)}catch(y){console.log(y)}return this}this._player._options.enableMockFullscreen=!0}if(this.isFullScreen=!0,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer||clearTimeout(this._cancelFullScreenTimer),g=this,r&&!this._player._options.enableMockFullscreen)try{var f=s[r.requestFn]();f&&typeof f.catch=="function"&&f.catch(function(y){console.log(y)}),this._requestFullScreenTimer=setTimeout(function(){g.isFullScreenChanged||(e.apply(g),g._player.trigger(o.Player.RequestFullScreen)),g._requestFullScreenTimer=null},1e3)}catch(y){console.log(y)}else e.apply(g),this._player.trigger(o.Player.RequestFullScreen);return this._player},v.prototype.cancelFullScreen=function(){var r=t,s=(this.isFullScreen=!1,this.isFullScreenChanged=!1,this._cancelFullScreenTimer=null,this._requestFullScreenTimer||clearTimeout(this._requestFullScreenTimer),this);if(r&&!this._player._options.enableMockFullscreen){try{var g=document[r.cancelFn]();g&&typeof g.catch=="function"&&g.catch(function(c){console.log(c)})}catch(c){console.log(c)}s._cancelFullScreenTimer=setTimeout(function(){s.isFullScreenChanged||(n.apply(s),s._player.trigger(o.Player.CancelFullScreen)),s._cancelFullScreenTimer=null},500)}else n.apply(s),this._player.trigger(o.Player.CancelFullScreen);return this._player.tag.paused||this._player.trigger(o.Player.Play),this._player},v.prototype.getIsFullScreen=function(){return this.isFullScreen},v.prototype.dispose=function(){this._player=null,t&&l.off(document,t.eventName,this._fullscreenChanged)},function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",p.addClass(document.getElementsByTagName("body")[0],"prism-full-window")}),n=function(){this.isFullWindow=!1,document.documentElement.style.overflow=this.docOrigOverflow,p.removeClass(document.getElementsByTagName("body")[0],"prism-full-window")};m.exports=v},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/ua":53,"../base/event/eventtype":77,"../base/x5play":107}],134:[function(S,m,W){function v(c,u){var f;if(c)return c=new Date(c),f=(u=new Date(u)).valueOf()/1e3-c.valueOf()/1e3,{start:c,end:u,endDisplay:o.extractTime(u),totalTime:f}}function h(c,u){u&&(c.currentTimestamp=u,c.currentTime=o.convertToDate(u),c.currentTimeDisplay=o.extractTime(c.currentTime),c.liveShiftStart=c.liveTimeRange.start,c.liveShiftEnd=c.liveTimeRange.end,c.liveShiftStartDisplay=o.extractTime(c.liveShiftStart),c.liveShiftEndDisplay=o.extractTime(c.liveShiftEnd),c.availableLiveShiftTime=u-c.liveShiftStart.valueOf()/1e3,c.timestampStart=o.convertToTimestamp(c.liveShiftStart),c.timestampEnd,o.convertToTimestamp(c.liveShiftEnd))}function p(c){function u(){var y=c._options.source;this._originalPlayUrl=y,this._liveShiftUrl=c._options.liveTimeShiftUrl,this.liveTimeRange=v(c._options.liveStartTime,c._options.liveOverTime),this.availableLiveShiftTime=0,this.seekTime=-1}this._player=c,this._isLiveShiftPlaying=!1;var f=this;u.call(this),c.liveShiftSerivce={setLiveTimeRange:function(y,d){f.setLiveTimeRange(y,d)},queryLiveShift:function(y,d,a){f.queryLiveShift(y,d,a)},isLiveShiftPlaying:function(){return f._isLiveShiftPlaying}},c.on(g.Private.ChangeURL,function(){u.call(f)})}var l=S("../../lib/io"),o=S("../../lib/util"),t=S("../../lib/playerutil"),e=S("../../lang/index"),n=S("../flv/flvinjector"),r=S("../hls/hlsinjector"),s=S("../../lib/constants"),g=S("../base/event/eventtype");S("../../lib/url"),p.prototype.validate=function(){return!(this.liveTimeRange.start>=this.liveTimeRange.end)},p.prototype.switchToLive=function(){this.seekTime=-1;var c=this._originalPlayUrl,u=this._player._options.liveShiftSource,f=this._player._options.source;t.isHls(f)&&t.isFlv(c)&&u&&t.isHls(u)&&(this._player._hls&&this._player._destroyHls(),f=this._player._superType,u=this._player._Type,this._player._options._autoplay=!0,n.inject(this._player,u,f,this._player._options,"",!0)),this._player._loadByUrlInner(c,null,!0),this._isLiveShiftPlaying=!1,this._player.trigger(g.Private.LiveShiftSwitchToLive)},p.prototype.getBaseTime=function(){return this.liveShiftStartDisplay,this.seekTime==-1?o.parseTime(this.currentTimeDisplay):o.parseTime(this.liveShiftStartDisplay)+this.seekTime},p.prototype.getSourceUrl=function(c,u){var f=this._originalPlayUrl;return this.availableLiveShiftTime<c||(this._isLiveShiftPlaying=!0,c=parseInt(c),f=(f=this._switchLiveShiftPlayer(u))&&this._cleanUrl(f),u=parseInt(this.currentTimestamp)-c,(f=f.indexOf("?")==-1?f+"?lhs_start_unix_s_0="+u:f+"&lhs_start_unix_s_0="+u).indexOf("aliyunols=on")===-1&&(f+="&aliyunols=on"),f.indexOf("continue=on")===-1&&(f+="&continue=on")),f},p.prototype._cleanUrl=function(c){var u;return c.indexOf("?")===-1?c:(c=(c=(u=c.split("?"))[1])&&((c=c.replace(/&?lhs_start_unix_s_0=[0-9]*/g,"")).indexOf("&")===0?c.replace("&",""):c))?u[0]+"?"+c:u[0]},p.prototype._switchLiveShiftPlayer=function(c){var u,f=this._originalPlayUrl,y=this._player._options.liveShiftSource,d=this._player._options.source;if(t.isHls(d))f=d;else if(t.isFlv(f)&&y&&t.isHls(y))return this._player._flv&&this._player._destroyFlv(),d=this._player._superType,u=this._player._Type,this._player._options._autoplay=!0,r.inject(this._player,u,d,this._player._options,"",!0),y;return f},p.prototype.getTimeline=function(c,u){var f;this._player.trigger(g.Private.LiveShiftQueryCompleted),this._liveShiftUrl?(f=this).queryLiveShift(this._liveShiftUrl,function(y){y?(y=y).retCode==0?(h(f,y.content.current),c&&c()):u({Code:s.ErrorCode.ServerAPIError,Message:y.retCode+"|"+y.description+"|"+y.content}):console.log("\u83B7\u53D6\u76F4\u64AD\u65F6\u79FB\u6570\u636E\u5931\u8D25")},function(y){if(u&&y){var d={};if(y){if(typeof y=="string"&&-1<y.indexOf("403 Forbidden"))d.Code=s.ErrorCode.AuthKeyExpired,d.Message="Query liveshift failed:"+e.get("Error_AuthKey_Text");else{var a,d=y;try{a=JSON.parse(y)}catch(b){}a&&(d.Code=s.ErrorCode.ServerAPIError,d.Message=a.retCode+"|"+a.description+"|"+a.content)}u(d)}}}):(h(this,new Date().valueOf()/1e3),c&&c())},p.prototype.start=function(c,u){var f=this,y=function(){f._loopHandler&&clearTimeout(f._loopHandler),f._loopHandler=setTimeout(function(){f.getTimeline(function(){},u),y()},c)};f.getTimeline(function(d){f._localLiveTimeHandler||f.tickLocalLiveTime()},u),y()},p.prototype.tickLocalLiveTime=function(){function c(){u._localLiveTimeHandler=setTimeout(function(){u.currentTimestamp++,h(u,u.currentTimestamp),u._player.trigger(g.Private.LiveShiftQueryCompleted),c()},1e3)}var u=this;c()},p.prototype.setLiveTimeRange=function(c,u){c=c||this._player._options.liveStartTime,u=u||this._player._options.liveOverTime,this.liveTimeRange=v(c,u),h(this,this.currentTimestamp),this._player.trigger(g.Private.LiveShiftQueryCompleted)},p.prototype.queryLiveShift=function(c,u,f){l.get(c,function(y){var d;y?(d=JSON.parse(y)).retCode==0?u&&u(d):f&&f(d):f&&f(y)},function(y){f&&f(y)})},p.prototype.stop=function(c){this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null)},p.prototype.dispose=function(){this.stop(),this._localLiveTimeHandler&&(clearTimeout(this._localLiveTimeHandler),this._localLiveTimeHandler=null),this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null),this._player=null},m.exports=p},{"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/url":54,"../../lib/util":55,"../base/event/eventtype":77,"../flv/flvinjector":113,"../hls/hlsinjector":115}],135:[function(S,m,W){function v(o){function t(){var n=document.querySelector("#"+o.id()+" .prism-progress-marker");if(n){n.innerHTML="";var r=e._player.getDuration();if(0<r){for(var s=0;s<e.progressMarkers.length;s++){var g,c=e.progressMarkers[s];c.offset!==void 0&&c.offset!==""&&(c=document.createElement("div"),p.addClass(c,"prism-marker-dot"),g=e.progressMarkers[s].offset/r,c.style.left=100*g+"%",n.appendChild(c),g=((f,y)=>function(){e._player.trigger(h.Private.MarkerTextShow,{left:f,progressMarker:y})})(g,e.progressMarkers[s]),l.on(c,"mouseover",g),l.on(c,"mouseout",function(f){e._player.trigger(h.Private.MarkerTextHide)}),l.on(c,"touchstart",g),l.on(c,"mousemove",function(f){f.preventDefault()}),l.on(c,"touchmove",function(f){f.preventDefault()}))}var u=document.querySelector("#"+e._player.id()+" .prism-progress-cursor");e._player.on(u,"click",function(f){for(var y=e._player.getCurrentTime(),d=0;d<e.progressMarkers.length;d++){var a,_=e.progressMarkers[d];_&&y-1<_.offset&&_.offset<y+1&&(a=_.offset/r*100+"%",e._player.trigger(h.Private.MarkerTextShow,{left:a,progressMarker:_}))}})}}}this.progressMarkers=[],this._player=o;var e=this;o.on(h.Private.ProgressMarkerLoaded,function(n){n=n.paramData,n&&0<n.length&&(e.progressMarkers=n)}),o.on(h.Private.ProgressMarkerChanged,function(n){n=n.paramData,n&&0<n.length&&(e.progressMarkers=n,t())}),o.on(h.Video.LoadedMetadata,t)}var h=S("../base/event/eventtype"),p=(S("../../lang/index"),S("../../lib/hls/hlsparse"),S("../../lib/object"),S("../../lib/dom")),l=S("../../lib/event");S("../../lib/playerutil"),v.prototype.dispose=function(){this._player=null,this.progressMarkers=[]},m.exports=v},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/hls/hlsparse":43,"../../lib/object":47,"../../lib/playerutil":50,"../base/event/eventtype":77}],136:[function(S,m,W){function v(){return(v=Object.assign?Object.assign.bind():function(s){for(var g=1;g<arguments.length;g++){var c,u=arguments[g];for(c in u)!{}.hasOwnProperty.call(u,c)||(s[c]=u[c])}return s}).apply(null,arguments)}function h(s){this.levels=[],this.drmUrl={},this._player=s;var g=this;s.on(p.Private.PlayInfoLoaded,function(c){for(var u=c.paramData.encryptUrlArr||[],f=[],y=0;y<u.length;y++){var d=u[y];d.encryptionType===n.VodEncryptionType["Widevine-FairPlay"]&&f.push(d)}g.drmUrl=f}),s.on(p.Player.LevelsLoaded,function(c){if(0<g.levels.length&&(g.levels=[]),(c=c.paramData)&&c.levels){for(var u,f=c.levels.length-1;-1<f;f--){var y,d=c.levels[f];d.url&&0<d.url.length&&d.attrs&&d.attrs.BANDWIDTH&&(y=d.url,t.isArray(y)&&(y=y[0]),y={Url:y=!s._hls&&s._options.isVBR&&s._options.isDrm&&s._options.vid?r.call(g,d):y,desc:Math.min(d.width,d.height),bitrate:d.bitrate,resolution:d.attrs.RESOLUTION,bandwidth:d.attrs.BANDWIDTH},g.levels.push(y))}s._options.definition==="AUTO"&&(s._urls=[],Object.assign(s._urls,this.levels)),g.levels.sort(function(a,_){return(a.bitrate||a.desc)-(_.bitrate||_.desc)}),g.levels=((a,_)=>typeof _=="function"?a.map(function(b){return v({},b,{desc:_({bandwidth:Number(b.bandwidth),bitrate:Number(b.bitrate),width:Number(b.resolution.split("x")[0]),height:Number(b.resolution.split("x")[1])})})}):a.map(function(b){return v({},b,{desc:b.desc+"p@"+parseInt(b.bitrate/1e3)+"k"})}))(g.levels,s._options.bitrateDisplayHandler),(g.levels&&0<g.levels.length||s._drm&&s._options.useDrm2)&&this._player._options.isVBR&&(u=l.get("Auto"),g.levels.push({Url:c.url,desc:u}),s.trigger(p.Private.SelectorUpdateList,{type:"quality",text:u}))}}),s.on(p.Video.LoadStart,function(){var c,u,f;s._options&&(c=s._options.source,u=s._options.isVBR,f=s._options.useDrm2,!s._hls)&&c&&e.isHls(c)&&(s._manuallySwitchDrmLevel?(s._manuallySwitchDrmLevel=!1,s.trigger(p.Private.SafariDrmLevelSwitch)):(u||s._drm&&!f)&&g.loadLevels(c))})}var p=S("../base/event/eventtype"),l=S("../../lang/index"),o=S("../../lib/hls/hlsparse"),t=S("../../lib/object"),e=S("../../lib/playerutil"),n=S("../../lib/constants");function r(s){for(var g,c=this.drmUrl,u=0;u<this.drmUrl.length;u++)if(Number(s.height)===Number(c[u].height)){g=c[u].Url;break}return g}(h.prototype={loadLevels:function(s){var g=new o,c=this;g.load(s,function(u){var f;(f=u.subtitles)!=null&&f.forEach(function(y){g.loadMediaPlaylist({url:y.url},function(d){d=d.fragments[0],d&&(y.vttUrl=g.resolve(d.relurl,d.baseurl))},function(d){console.log("parse vtt url error: ",d)})}),c._player._created?c._player.trigger(p.Player.LevelsLoaded,u):c._player.one(p.Private.Created,function(){c._player.trigger(p.Player.LevelsLoaded,u)})})}}).dispose=function(){this._player=null},m.exports=h},{"../../lang/index":28,"../../lib/constants":33,"../../lib/hls/hlsparse":43,"../../lib/object":47,"../../lib/playerutil":50,"../base/event/eventtype":77}],137:[function(S,m,W){function v(t){this._player=t,this.cues=[],this.baseUrl="";var e=this;t.on(o.Private.ChangeURL,function(){e.cues=[],e.baseUrl=""})}var h=S("../../lib/io"),p=S("../../lib/url"),l=S("../../lib/vtt/thumbnailvtt"),o=S("../base/event/eventtype");(v.prototype={get:function(t){var e,n,r,s=this;this.baseUrl=(e=t,n="",(r=p.parseUrl(e))&&(r=r.segments)&&0<r.length&&(r=r[r.length-1],n=e.split("?")[0].replace(r,"")),n),h.get(t,function(g){g&&l.parse(g,function(c){s.cues=c,s._player.trigger(o.Private.ThumbnailLoaded,c)})},function(g){console.log(g)})},findAvailableCue:function(t){for(var e=this.cues.length,n=0;n<e;n++){var r=this.cues[n];if(r.startTime<=t&&t<r.endTime)return r}return null},makeUrl:function(t){return t=t.indexOf("://")==-1?this.baseUrl+t:t}}).dispose=function(){this._player=null},m.exports=v},{"../../lib/io":45,"../../lib/url":54,"../../lib/vtt/thumbnailvtt":56,"../base/event/eventtype":77}],138:[function(S,m,W){function v(){return(v=Object.assign?Object.assign.bind():function(_){for(var b=1;b<arguments.length;b++){var E,T=arguments[b];for(E in T)!{}.hasOwnProperty.call(T,E)||(_[E]=T[E])}return _}).apply(null,arguments)}var h=S("../base/player"),p=S("./splayerinjector"),l=S("../flv/flvinjector"),o=S("../hls/hlsinjector"),t=S("../../lib/playerutil"),e=S("../base/event/eventtype"),n=S("../../lib/constants"),r=S("../../lib/codec-probe"),s=S("../../lib/ua"),g=n.USER_EVENT_NAME,c=t.isH265Codec,u=t.isH266Codec,f=t.getVideoTrack,y={},d={codecCost:0,decoderCost:0},a=h.extend({init:function(_,b){var E,T=this,k=(this._options=b,t.isFlv(b.source,b.format)),P=t.isHls(b.source,b.format),w=this._extraMultiSources(),D={};function U(){k?(l.inject(this,a,h,b),b._native=!1):P&&!t.canPlayHls()&&(o.inject(this,a,h,b),b._native=!1),h.call(this,_,b),this._monitor&&this._monitor.updateH265ProbeInfo(v({},d,y)),O.call(this),y.codecTag&&p.reportH265PlayInfo.call(this,{renderType:"native",codecTag:y.codecTag})}function M(){b._native=!1,p.inject(this,a,h,b,y),h.call(this,_,b),this._monitor&&this._monitor.updateH265ProbeInfo(v({},d,y,{waitRenderType:!0})),O.call(this)}function O(){var B,j,H=this,R=D,L=this[g];L&&(R=Object.assign({},D,L),B=Object.keys(D),j=Object.keys(L),B.forEach(function(C){-1<j.indexOf(C)&&(R[C]=D[C].concat(L[C]))})),Object.keys(R).forEach(function(C){R[C].forEach(function(z){z.binded||h.prototype.on.call(H,C,z)})})}D[e.Player.Ready]=[function(){T._setupSourceList(w),T.trigger(e.Private.SelectorGenerateList,{type:"quality"})}],b.from==="zhihu"||b.forceH265||b.forceH266?M.call(this):s.IS_ANDROID&&s.dingTalk()&&!k?U.call(this):(E=performance.now(),r(b.source,b,function(H){d.codecCost+=performance.now()-E;var j,H=f(H.tracks),R=(H||{}).codecTag||((R=(H||{}).codec)==null?void 0:R.split(".")[0]);y.codecTag=R,H&&c(R)?(j=performance.now(),k||P&&!t.canPlayHls()?(d.decoderCost+=performance.now()-j,M.call(T)):t.shouldUseBasePlayer({codecTag:R,url:b.source},function(L){d.decoderCost+=performance.now()-j,(L?U:M).call(T)})):(H&&u(R)?M:U).call(T)},function(B){console.log("error in demuxer, fallback to basePlayer",B),d.codecCost+=performance.now()-E,U.call(T),p.checkProtocol.call(T,b.source)}))}});m.exports=a},{"../../lib/codec-probe":31,"../../lib/constants":33,"../../lib/playerutil":50,"../../lib/ua":53,"../base/event/eventtype":77,"../base/player":102,"../flv/flvinjector":113,"../hls/hlsinjector":115,"./splayerinjector":139}],139:[function(S,m,W){function v(){return(v=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var _,b=arguments[a];for(_ in b)!{}.hasOwnProperty.call(b,_)||(d[_]=b[_])}return d}).apply(null,arguments)}var h=S("../../lib/io"),p=S("../base/event/eventtype"),l=S("../base/event/eventmanager"),o=(S("../../lib/event"),S("../../lib/util")),t=S("../../lib/dom"),e=S("../../lib/playerutil"),n=S("../../lib/constants"),r=S("../../lang/index"),s="splayerinjector.js";function g(d){var a=this._options,_=(f.call(this),function(){e.isVideoTag(this.tag)&&(l.offVideoAll(this),this.tag.parentNode&&this.tag.parentNode.removeChild(this.tag),this.tag=null)}.call(this),Videox.Videox),b=a.splayerWasmDomain,b=(!b&&a.assetPrefix&&(b=a.assetPrefix+"/splayer"),new _(v({container:this._el,wasmDomain:b,progressive:!0,skipFrame:_.DiscardType.NONE,loop:a.rePlay,controls:!1,muted:!1,threads:a.h265Threads,simd:a.h265Simd,autoplay:a.autoplay||a._autoplay,live:a.isLive,poster:a.cover||void 0,src:a.source,trackOptions:{disable:!0},preload:a.preload?"auto":"none",timeout:1e3*a.waitingTimeout},a.splayerOptions||{}))),E=(a.debug&&(b.setLogLevel(_.LogLevel.LOG),b.setLogPrintLevel(_.LogLevel.LOG)),this._splayer=b,(this.tag=b).play),T=this;this.tag.play=function(){T._monitor&&T._monitor.reportStartPlay(),E.call(this)},function(){var k,P=this,w=document.createElement("video");for(k in w)(D=>{P.tag[D]||D.indexOf("on")===0||typeof w[D]!="function"||(P.tag[D]=function(){console.warn("Function ["+D+"] is called on splayer, which should be a mistake."),w[D].apply(w,arguments)})})(k)}.call(this),function(k){var P=this,w=(l.onAll(this),this._splayer);w.addEventListener("error",function(D){var U,M,O,H=Videox.Videox,B=(D||{}).detail,j=Number((B||{}).code),H=H.ErrorCode;switch(this.traceLog(s,"splayer-error::"+j,!0),j){case H.WASM_NOT_SUPPORTED:case H.CANVAS_NOT_SUPPORTED:case H.AUDIOCONTEXT_NOT_SUPPORTED:case H.WORKER_NOT_SUPPORTED:case H.WEBGL_NOT_SUPPORTED:U=n.ErrorCode.SplayerEnvCheckError,M=r.get("Splayer_Err_Env_Check")+" | "+c(B);break;case H.DECODE:U=n.ErrorCode.SplayerDecodeError,M=r.get("Splayer_Err_Decode")+" | "+c(B);break;case H.NETWORK:U=n.ErrorCode.NetworkError,M=r.get("Error_Network_Text")+" | "+c(B);var R=(B.origin||{}).response;R?(R=R.status)===404?(U=n.ErrorCode.NotFoundSourceURL,M=r.get("Error_Not_Found")+" | "+c(B),O=r.get("Tip_Err_Not_found")):R===403&&(U=n.ErrorCode.AuthKeyExpired,M=r.get("Error_AuthKey_Text")+" | "+c(B)):navigator.onLine&&(U=n.ErrorCode.RequestDataError,M=M+"\uFF0C"+r.get("Maybe_Cors_Error"));break;case H.PARSER:U=n.ErrorCode.SplayerParserNotFound,M=r.get("Splayer_Err_Parser_Not_Found")+" | "+c(B);break;default:U=n.ErrorCode.OtherError,M="(SP)"+r.get("Error_Play_Text")+" | "+c(B)}if(O=O||r.get("Tip_Err_Splayer")+'<a href="https://help.aliyun.com/zh/vod/developer-reference/advanced-features-3#section-j4v-zwt-641" target="_blank">'+r.get("Tip_Err_Splayer_Doc")+"</a>",!(U===n.ErrorCode.NetworkError&&this._reloadForVod())){try{this.pause()}catch(L){}j={error_code:U,error_msg:M,diagnosis_info:O},j.error_code!==null&&j.error_msg!==null&&(this.logError(j),this.trigger(p.Player.Error,j)),y.call(this,{splayer:!0})}}.bind(this)),w.addEventListener("decoderoverload",function(D){D=D.detail,delete D.shouldWarn,P.trigger(p.Player.H265DecoderOverload,D)}),w.addEventListener("loadedsupportinfo",function(U){var U=U.detail||{},M=U.detail||{},O=w.controller.options||{};w.renderType=U.renderer,y.call(P,{renderer:U.renderer,wasmThreads:M.wasmThreads&&O.threads,wasmThreadsOption:O.threads,simd:M.simd&&O.simd,simdOption:O.simd,codecTag:w.controller.videoTrack&&w.controller.videoTrack.codecTag||w.controller.videoTrack&&((U=w.controller.videoTrack.codec)==null?void 0:U.split(".")[0]),splayer:!0})}),(this._options.autoplay||this._options._autoplay)&&(w.once("canplay",function(){w.paused&&P._autoplayFailedHandler()}),w.once("timeupdate",function(){P.trigger(p.Player.Play)}),this._monitor)&&this._monitor.reportStartPlay(),w.on("playing",function(){P._monitor&&P._monitor.reportPlaying()}),w.on("timeupdate",function(){P._monitor&&P._monitor.reportPlaying()})}.call(this,d)}function c(a){var a=a=a===void 0?{}:a,_=a.code,b=Videox.Videox.ErrorCode,E="";return E=_?E+_+(": "+(a.message||b[_])):E}function u(d){return!o.contentProtocolMixed(d,"alwaysCheck")||((d={mediaId:this._options.vid||"",error_code:n.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=r.get("Request_Block_Text"),this.logError(d),this.trigger(p.Player.Error,d),!1)}function f(){this._splayer&&(this._splayer.destroy(),this._splayer=null)}function y(d){var a;d===void 0&&(d={}),!this._h265InfoReported&&(this._h265InfoReported=!0,a={0:"native",1:"mse",2:"wasm"},delete(d=v({codecTag:(this._probeInfo||{}).codecTag||d.codecTag,renderType:d.renderType||a[d.renderer]},d)).renderer,d.renderType!==a[2]&&(delete d.simd,delete d.simdOption,delete d.wasmThreads,delete d.wasmThreadsOption),this._splayerRenderType=d.renderType,a=d.codecTag)&&(e.isH265Codec(a)?this.trigger(p.Player.H265PlayInfo,d):e.isH266Codec(a)&&this.trigger(p.Player.H266PlayInfo,d))}m.exports.checkProtocol=u,m.exports.reportH265PlayInfo=y,m.exports.inject=function(d,a,_,b,E){function T(P,w){this._superPt.setPlayerSize.call(this,P,w),P=this._el.querySelector("canvas"),P&&(w=this._el.offsetWidth/this._el.offsetHeight,P.offsetWidth/P.offsetHeight<w?(P.style.height="100%",P.style.width="initial"):(P.style.width="100%",P.style.height="initial"))}function k(){this._disposed||(this._superPt&&(this._superPt.dispose.call(this),a.prototype.replay=this._superPt.replay,a.prototype.setPlayerSize=this._superPt.setPlayerSize,a.prototype._setTransform=this._superPt._setTransform,a.prototype.initPlay=this._superPt.initPlay),f.call(this),this._Type=null,this._superType=null,this._superPt=null,this._disposed=!0,this._splayerLoaded=!1,this._h265InfoReported=!1,this._splayerRenderType=null)}d._Type=a,d._superType=_,d._superPt=_.prototype,d._disposed=!1,d._splayer=null,d._splayerLoaded=!1,d._probeInfo=E,d._splayerRenderType=null,a.prototype.initPlay=function(P){var w=this;this.trigger(p.Private.H5_Loading_Show),u.call(this,this._options.source)&&(this._splayerLoaded?g.call(this,P):function(D,U){var M=this._options,O=M.splayerUrl||"https://g.alicdn.com/apsara-media-components/amcom-splayer/0.7.8/dist/index.js";!M.splayerUrl&&M.assetPrefix&&(O=M.assetPrefix+"/splayer/index.js"),h.loadJS(O,D.bind(this),function(){U&&U()})}.call(this,function(){this._splayerLoaded=!0,g.call(this,P),w._executeReadyCallback()},function(){var D={mediaId:w._options.vid||"",mediaAuth:w._options.mediaAuth||"",error_code:n.ErrorCode.ModuleLoadError,error_msg:"splayer module load error."};w.trigger(p.Player.Error,D)}))},a.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this._splayer.load(),this._splayer.play(),this},Object.defineProperty(a.prototype,"setPlayerSize",{enumerable:!0,configurable:!0,get:function(){return T},set:function(){return T}}),a.prototype._setTransform=function(){var P=this._player.el(),w=this._splayerRenderType==="wasm",P=w?P.querySelector("canvas"):P.querySelector("video"),w=(this._transformProp||(this._transformProp=t.getTransformName(P)),w?"":" translate(-50%, -50%)");this._rotate&&(w+=" rotate("+this._rotate+"deg)"),this._image&&(this._image=="vertical"?w+=" scaleY(-1)":this._image=="horizon"&&(w+=" scaleX(-1)")),P.style[this._transformProp]=w},Object.defineProperty(a.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return k},set:function(){return k}})}},{"../../lang/index":28,"../../lib/constants":33,"../../lib/dom":37,"../../lib/event":38,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/util":55,"../base/event/eventmanager":76,"../base/event/eventtype":77}],140:[function(S,m,W){function v(_,b){var E,T=typeof Symbol!="undefined"&&_[Symbol.iterator]||_["@@iterator"];if(T)return(T=T.call(_)).next.bind(T);if(Array.isArray(_)||(T=((k,P)=>{var w;if(k)return typeof k=="string"?h(k,P):(w=(w={}.toString.call(k).slice(8,-1))==="Object"&&k.constructor?k.constructor.name:w)==="Map"||w==="Set"?Array.from(k):w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?h(k,P):void 0})(_))||b&&_&&typeof _.length=="number")return T&&(_=T),E=0,function(){return E>=_.length?{done:!0}:{done:!1,value:_[E++]}};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(_,b){(b==null||b>_.length)&&(b=_.length);for(var E=0,T=Array(b);E<b;E++)T[E]=_[E];return T}var p=typeof Promise=="undefined"?S("es6-promise").Promise:Promise,l=S("../../lib/io"),o=S("../../config"),t=S("../../lang/index"),e=S("../../lib/ua"),n=S("../base/event/eventtype"),r=S("../../lib/constants"),s=r.PLAYER_SCOPE,g=r.SW_MSG_EVT,c=r.DM_MSG_EVT,u=r.ErrorCode,f=S("./tsremuxer").TSRemuxer,y="swinjector.js";function d(_){_={mediaId:this._options.vid||"",error_code:_.code,error_msg:_.msg,diagnosis_info:_.info},this.trigger(n.Player.Error,_)}function a(_){return _.split("?")[0].split("#")[0]}m.exports.inject=function(_,b,E,T,k){_.swPlayer=!0,_.firstBuild=!0,_.sw=null,_.tsDemuxerWorker=null,_.tsRemuxer=null,_.preloadError=!1,_.fetchHasResult=!1,_._initServiceWorker=new p(function(O){setTimeout(O,1e3),"serviceWorker"in navigator?navigator.serviceWorker.getRegistrations().then(function(B){if(!B.length)return console.log("No serviceWorker registrations found."),O();for(var j,H=[],R=v(B);!(j=R()).done;)(()=>{var L=j.value,C=L.unregister().then(function(z){console.log(z?"Successfully unregistered":"Failed to unregister",`ServiceWorkerRegistration
`+(L.installing?"  .installing.scriptURL = "+L.installing.scriptURL+`
`:"")+(L.waiting?"  .waiting.scriptURL = "+L.waiting.scriptURL+`
`:"")+(L.active?"  .active.scriptURL = "+L.active.scriptURL+`
`:"")+"  .scope: "+L.scope+`
`)});H.push(C)})();p.all(H).then(O).catch(O)}).catch(function(B){console.log("clear sw error",B),O()}):O()}).then(function(O){var B=this;return new p(function(j){var H=(L=>{if(!L)return t.get("Error_SW_ScriptURL_Empty");if((L=String(L)).indexOf("https")!==0&&L.indexOf("localhost")===-1&&L.indexOf("127.0.0.1")===-1)return t.get("Error_SW_ScriptURL_Https");try{C=new URL(L)}catch(z){return t.get("Error_SW_ScriptURL_ILlegal","",{detail:z})}(L=a(location.href).split("/")).pop();var L=L.join("/"),C=((C=a(C.href).split("/")).pop(),C.join("/"));return L!==C?t.get("Error_SW_ScriptURL_Scope","",{scope1:C,scope2:L}):void 0})(O.swScriptURL);if(H)return B.preloadError=!0,d.call(B,{code:u.ModuleLoadError,msg:H});"serviceWorker"in navigator?(navigator.serviceWorker.register(O.swScriptURL,{scope:"./"}).then(function(R){B.traceLog(y,"sw registered"),R=R.active||R.waiting||R.installing,R.postMessage({scope:s,name:g.SETUP}),B.sw=R}).catch(function(R){B.preloadError=!0,d.call(B,{code:u.ModuleLoadError,msg:t.get("Error_SW_Register_Failed")+"("+R+")",info:t.get("Tip_SW_Register")})}),navigator.serviceWorker.addEventListener("controllerchange",function(R){R.target.controller.scriptURL!==O.swScriptURL&&d.call(B,{code:u.ModuleLoadError,msg:t.get("Error_SW_Conflict"),info:"controlled by "+R.target.controller.scriptURL})}),navigator.serviceWorker.addEventListener("message",function(R){var L;if((C=R.data)&&C.scope===s){var C=R.data.name;switch(console.log("[MESSAGE FROM SW]["+C+"]",(Z=>{var q;try{q=/[0-9]+\.ts/.exec(Z)[0]}catch(x){}return q})((L=R.data.payload)==null?void 0:L.url),R.data.payload),C){case g.SETUP_ACK:j(),B.traceLog(y,"sw ack");var z=(z=R.data.payload)==null?void 0:z.version;z!==o.h5Version&&(B.preloadError=!0,d.call(B,{code:u.ModuleLoadError,msg:t.get("Error_SW_Version_Not_Match","",{swVersion:z,playerVersion:o.h5Version})}));break;case g.ENC_SEGMENT:var ie=R.data.payload;B._getDemuxer.then(function(){B.tsDemuxerWorker&&B.tsDemuxerWorker.postMessage({name:c.DEMUX,payload:{buffer:ie.buffer,url:ie.url,playlistUrl:ie.playlistUrl}})});break;case g.ABORT_SEGMENT:B.tsDemuxerWorker&&B.tsDemuxerWorker.postMessage({name:c.FLUSH}),B.tsRemuxer&&B.tsRemuxer.flush()}}})):(B.preloadError=!0,H=location.protocol==="http:"?t.get("Error_SW_Https_required"):t.get("UseChromeForVodEncription")+"(SW not found)",d.call(B,{code:u.EncrptyVideoNotSupport,msg:H}))})}.call(_,T));var P,w,D=performance.now(),U=(_._getDemuxer=(P=T,new p(function(O,B){var j="aliplayer-hls2-demuxer-min.js",H="https://"+o.domain+o.path+o.h5Version+"/hls/"+j;P.assetPrefix&&(H=P.assetPrefix+"/hls/"+j),l.loadJS(H,O,B)}).then(function(){_.traceLog(y,"got demuxer#"+parseInt(performance.now()-D)),window.AliDemuxerWorker&&(_.tsDemuxerWorker=window.AliDemuxerWorker.injectWorker().worker,_.tsDemuxerWorker.postMessage({name:c.SETUP,payload:{key:k,debug:T.debug}}),_.tsDemuxerWorker.addEventListener("message",function(O){var B=O.data;switch(B.name){case c.RESULT:if(_.tsRemuxer)try{_.tsRemuxer.remux(B.payload.demuxResult)}catch(j){_.traceLog(y,"remux error: "+j.message+", "+j.stack+"}")}break;case c.DISPOSED:_.tsDemuxerWorker&&(_.tsDemuxerWorker.terminate(),_.tsDemuxerWorker=null);break;case c.ERROR:_.traceLog(y,"demuxer error:  "+B.payload.reason)}}),_.tsDemuxerWorker.addEventListener("error",function(O){_.traceLog(y,"demuxer uncaught error: "+O.message)}))}).catch(function(O){_.preloadError=!0,d.call(_,{code:u.ModuleLoadError,msg:"ts-demuxer module load error"})})),performance.now());function M(){this.swPlayer=!1,this.preloadError=!1,this.fetchHasResult=!1,this.tsDemuxerWorker&&this.tsDemuxerWorker.postMessage({name:c.DISPOSE}),this.tsRemuxer&&(this.tsRemuxer.destroy(),this.tsRemuxer=null);var O=E.prototype;O&&(O.dispose.call(this),b.prototype.initPlay=O.initPlay),this.sw&&(this.sw.postMessage({scope:s,name:g.DISPOSE}),this.sw=null)}_._getRemuxer=(w=T,new p(function(O,B){var j,H="aliplayer-remuxer-min.js",R="https://"+o.domain+o.path+o.h5Version+"/hls/"+H;w.assetPrefix&&(R=w.assetPrefix+"/hls/"+H),e.IS_IOS&&Number(e.IOS_VERSION)<=14?(j="https://"+o.domain+o.path+o.h5Version+"/hls/aliplayer-remuxer-polyfill.js",w.assetPrefix&&(R=w.assetPrefix+"/hls/"+H),l.loadJS(j,function(){l.loadJS(R,O,B)},B)):l.loadJS(R,O,B)}).then(function(){_.traceLog(y,"got remuxer#"+parseInt(performance.now()-U)),window.LibMux&&(_.tsRemuxer=new f({onResult:function(O){_.sw.postMessage({scope:s,name:g.DEC_SEGMENT,payload:{buffer:O.data.buffer,url:O.id}},[O.data.buffer])}}))}).catch(function(){_.preloadError=!0,d.call(_,{code:u.ModuleLoadError,msg:"ts-remuxer module load error"})})),b.prototype.initPlay=function(){var O=this;p.all([this._getDemuxer,this._getRemuxer,this._initServiceWorker]).then(function(){O.trigger(n.Private.H5_Loading_Show),l.get(T.source,function(B){var j;_.fetchHasResult=!0,O.preloadError||(B=((H,R)=>{var L,C=-1<R.indexOf("EXT-X-STREAM-INF");if(R=R.replace(/#EXT-X-KEY:.*\n?/g,""),H=H.match(/^(.*)\/[^\/]*$/))return L=H[1],H=C?/(#EXT-X-STREAM-INF:[^\n]+\n)([^\n]+)/g:/(#EXTINF:[^\n]+\n)([^\n]+)/g,R=R.replace(H,function(z,ie,Z){return""+ie+L+"/"+Z+(-1<Z.indexOf("?")?"&":"?")+"_s=enc"});console.warn("no match base url found.")})(T.source,B),j="",j=e.IS_IOS?"data:application/x-mpegurl;base64,"+btoa(B):(B=new Blob([B],{type:"application/vnd.apple.mpegurl"}),URL.createObjectURL(B)),O.tag.src=j,O._initPlayBehavior(),O.firstBuild&&(O.firstBuild=!1,O._executeReadyCallback()))},function(B,j){if(console.log("fetch m3u8 error",B,j),O.traceLog(y,"fetch m3u8 error "+j+"-"+B),!_.fetchHasResult&&(_.fetchHasResult=!0,!O.preloadError)){var H,R;switch(j){case 403:H=u.AuthKeyExpired,R=t.get("Error_AuthKey_Text");break;case 404:H=u.NotFoundSourceURL,R=t.get("Error_Not_Found");break;default:H=u.RequestDataError,R=t.get("Error_Load_M3U8_Failed_Text")}d.call(O,{code:H,msg:R})}})})},Object.defineProperty(b.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return M},set:function(){return M}})}},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/ua":53,"../base/event/eventtype":77,"./tsremuxer":141,"es6-promise":13}],141:[function(S,m,W){m.exports.TSRemuxer=(()=>{function v(p){this.mux=null;var l=window.LibMux;console.log("LibMux ->",l),this.mux=new l({outputFormat:2,hasVideo:!0,hasAudio:!0,onResult:function(o){console.log("remux result -> ",o),p.onResult(o)}})}var h=v.prototype;return h.remux=function(p){this.mux.remuxTS({id:p.id,videoTrack:p.videoTrack,audioTrack:p.audioTrack})},h.flush=function(){this.mux.flush()},h.destroy=function(){this.mux.destroy()},v})()},{}],142:[function(require,module,exports){(function _SkeinEnclosedFunction($jsskein_array_102,$jsskein_array_103,$jsskein_array_104){function kl5f8(){function S(g){var c=window[$jsskein_array_102[10]];return $jsskein_array_103[2],$jsskein_array_104[0],c[g]=function(){}}for(var m=1;m!==void 0;){var W=3&m>>2;switch(3&m){case 0:switch(W){case 0:m=s?5:9;continue;case 1:s++,m=8;continue;case 2:m=s<n[$jsskein_array_103[1]]?0:2;continue}continue;case 1:switch(W){case 0:$jsskein_array_103[2],m=window?10:6;continue;case 1:var v=n[$jsskein_array_102[7]](s),h=~(~(v&~p)&~(~v&p)),p=v;r+=$jsskein_array_104[10][$jsskein_array_103[9]](h),m=4;continue;case 2:v=$jsskein_array_103[8],p=parseInt($jsskein_array_104[9],$jsskein_array_102[6])+v,m=5;continue}continue;case 2:switch(W){case 0:l[o]($jsskein_array_102[8],$jsskein_array_102[9],t,$jsskein_array_103[10],$jsskein_array_103[11],$jsskein_array_103[12],e,r),l[$jsskein_array_102[11]](S),m=6;continue;case 1:m=void 0;continue;case 2:var l=[],o=$jsskein_array_103[3];o+=$jsskein_array_103[4];var t=(t=$jsskein_array_104[6])[$jsskein_array_103[5]]($jsskein_array_103[6])[$jsskein_array_102[3]]()[$jsskein_array_104[7]]($jsskein_array_103[6]),e=$jsskein_array_102[4],n=(e=(e+=$jsskein_array_104[8])+$jsskein_array_102[5],$jsskein_array_103[7]),r=$jsskein_array_103[6],p=$jsskein_array_103[2],s=$jsskein_array_104[0];m=8;continue}continue}}}function gas4s8(){for(var NEXTBB24=3;NEXTBB24!==void 0;){var $jsskein_indexLevel106_0=1&NEXTBB24,$jsskein_indexLevel106_1_Base=NEXTBB24>>1,$jsskein_indexLevel106_1=1&$jsskein_indexLevel106_1_Base;switch($jsskein_indexLevel106_0){case 0:switch($jsskein_indexLevel106_1){case 0:eval(fs56j57),NEXTBB24=1;continue;case 1:NEXTBB24=void 0;continue}continue;case 1:switch($jsskein_indexLevel106_1){case 0:NEXTBB24=$jsskein_array_103[13]?0:2;continue;case 1:NEXTBB24=1;continue}continue}}}function n5fg6f(player){function _SkeinIIFE31(){function cl48s87(isOpen){for(var NEXTBB34=10;NEXTBB34!==void 0;){var $jsskein_indexLevel107_0=3&NEXTBB34,$jsskein_indexLevel107_1_Base=NEXTBB34>>2,$jsskein_indexLevel107_1=3&$jsskein_indexLevel107_1_Base;switch($jsskein_indexLevel107_0){case 0:switch($jsskein_indexLevel107_1){case 0:kl5f8(),player[$jsskein_array_104[23]](),gas4s8(),NEXTBB34=6;continue;case 1:$jsskein_simplify_tmp31=Aliplayer[$jsskein_decrypt_variable62_ret],$jsskein_simplify_tmp31=$jsskein_array_103[11]===$jsskein_simplify_tmp31,NEXTBB34=$jsskein_simplify_tmp31?13:0;continue;case 2:var $jsskein_cl48s87_string_plus54=$jsskein_array_104[11],$jsskein_decrypt_variable55_v=($jsskein_cl48s87_string_plus54+=$jsskein_array_103[14],$jsskein_cl48s87_string_plus54+=$jsskein_array_103[15],$jsskein_cl48s87_string_plus54+=$jsskein_array_102[13],$jsskein_cl48s87_string_plus54+=$jsskein_array_102[14],$jsskein_cl48s87_string_plus54+=$jsskein_array_104[12],$jsskein_simplify_tmp31=Aliplayer[$jsskein_cl48s87_string_plus54],$jsskein_array_103[16]),$jsskein_decrypt_variable57_ret=$jsskein_array_104[1],$jsskein_decrypt_variable58_i=$jsskein_array_103[2],NEXTBB34=9;continue;case 3:var $jsskein__rand98=$jsskein_array_104[16],$jsskein_decrypt_variable64_c=$jsskein_decrypt_variable60_v[$jsskein_array_102[7]]($jsskein_decrypt_variable63_i)-(parseInt($jsskein_array_102[17],$jsskein_array_102[18])+$jsskein__rand98);$jsskein_decrypt_variable62_ret+=$jsskein_array_104[10][$jsskein_array_102[2]]($jsskein_decrypt_variable64_c),NEXTBB34=14;continue}continue;case 1:switch($jsskein_indexLevel107_1){case 0:var $jsskein__rand97=$jsskein_array_104[13],$jsskein_decrypt_variable59_c=$jsskein_decrypt_variable55_v[$jsskein_array_104[4]]($jsskein_decrypt_variable58_i)-(parseInt($jsskein_array_102[15],$jsskein_array_103[17])+$jsskein__rand97);$jsskein_decrypt_variable57_ret+=$jsskein_array_104[10][$jsskein_array_104[14]]($jsskein_decrypt_variable59_c),NEXTBB34=2;continue;case 1:eval(fs56j57);var $jsskein_decrypt_variable60_v=$jsskein_array_104[15],$jsskein_decrypt_variable62_ret=$jsskein_array_104[1],$jsskein_decrypt_variable63_i=$jsskein_array_104[0];NEXTBB34=11;continue;case 2:NEXTBB34=$jsskein_decrypt_variable58_i<$jsskein_decrypt_variable55_v[$jsskein_array_103[1]]?1:7;continue;case 3:var $jsskein_cl48s87_string_plus65=$jsskein_array_104[17],$jsskein_cl48s87_string_plus66=($jsskein_cl48s87_string_plus65+=$jsskein_array_102[19],$jsskein_cl48s87_string_plus65+=$jsskein_array_104[18],$jsskein_cl48s87_string_plus65+=$jsskein_array_102[20],$jsskein_cl48s87_string_plus65+=$jsskein_array_103[18],$jsskein_cl48s87_string_plus65+=$jsskein_array_102[21],devtoolsDetector[$jsskein_cl48s87_string_plus65](cl48s87),$jsskein_array_102[22]);$jsskein_cl48s87_string_plus66+=$jsskein_array_102[23],$jsskein_cl48s87_string_plus66+=$jsskein_array_102[24],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[19],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[20],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[21],$jsskein_cl48s87_string_plus66=$jsskein_cl48s87_string_plus66[$jsskein_array_102[25]]($jsskein_array_104[1])[$jsskein_array_104[22]]()[$jsskein_array_104[7]]($jsskein_array_102[26]),devtoolsDetector[$jsskein_cl48s87_string_plus66]($jsskein_array_104[0]),devtoolsDetector[$jsskein_array_102[27]](),NEXTBB34=6;continue}continue;case 2:switch($jsskein_indexLevel107_1){case 0:$jsskein_decrypt_variable58_i++,NEXTBB34=9;continue;case 1:NEXTBB34=void 0;continue;case 2:var $jsskein_simplify_tmp31=$jsskein_array_102[12],$jsskein_cl48s87_var14=isOpen;NEXTBB34=$jsskein_cl48s87_var14?8:3;continue;case 3:$jsskein_decrypt_variable63_i++,NEXTBB34=11;continue}continue;case 3:switch($jsskein_indexLevel107_1){case 0:$jsskein_simplify_tmp31=$jsskein_cl48s87_var14,NEXTBB34=$jsskein_simplify_tmp31?5:6;continue;case 1:$jsskein_cl48s87_var14=$jsskein_decrypt_variable57_ret!==$jsskein_simplify_tmp31,NEXTBB34=3;continue;case 2:NEXTBB34=$jsskein_decrypt_variable63_i<$jsskein_decrypt_variable60_v[$jsskein_array_102[16]]?12:4;continue}continue}}}for(var NEXTBB32=0;NEXTBB32!==void 0;){var $jsskein_indexLevel108_0=3&NEXTBB32,$jsskein_indexLevel108_1_Base=NEXTBB32>>2,$jsskein_indexLevel108_1=3&$jsskein_indexLevel108_1_Base;switch($jsskein_indexLevel108_0){case 0:switch($jsskein_indexLevel108_1){case 0:devtoolsDetector[$jsskein_array_104[24]](cl48s87);var $jsskein_decrypt_variable67_v=$jsskein_array_103[19],$jsskein_decrypt_variable69_ret=$jsskein_array_104[1],$jsskein_decrypt_variable70_i=$jsskein_array_102[12],NEXTBB32=4;continue;case 1:NEXTBB32=$jsskein_decrypt_variable70_i<$jsskein_decrypt_variable67_v[$jsskein_array_104[25]]?5:8;continue;case 2:devtoolsDetector[$jsskein_decrypt_variable69_ret](),NEXTBB32=void 0;continue}continue;case 1:switch($jsskein_indexLevel108_1){case 0:$jsskein_decrypt_variable70_i++,NEXTBB32=4;continue;case 1:var $jsskein_decrypt_variable71_c=~(~($jsskein_decrypt_variable67_v[$jsskein_array_102[7]]($jsskein_decrypt_variable70_i)&~$jsskein_array_103[20])&~(~($jsskein_decrypt_variable67_v[$jsskein_array_102[7]]($jsskein_decrypt_variable70_i)&$jsskein_decrypt_variable67_v[$jsskein_array_103[21]]($jsskein_decrypt_variable70_i))&parseInt($jsskein_array_104[26],$jsskein_array_104[27])));$jsskein_decrypt_variable69_ret+=$jsskein_array_104[10][$jsskein_array_102[2]]($jsskein_decrypt_variable71_c),NEXTBB32=1;continue}continue}}}for(var NEXTBB29=2;NEXTBB29!==void 0;){var $jsskein_indexLevel109_0=1&NEXTBB29,$jsskein_indexLevel109_1_Base=NEXTBB29>>1,$jsskein_indexLevel109_1=1&$jsskein_indexLevel109_1_Base;switch($jsskein_indexLevel109_0){case 0:switch($jsskein_indexLevel109_1){case 0:$jsskein_n5fg6f_var16=$jsskein_array_104[0],NEXTBB29=3;continue;case 1:var $jsskein_simplify_tmp32=_SkeinIIFE31,$jsskein_simplify_tmp33=$jsskein_array_102[12],$jsskein_n5fg6f_string_plus72=$jsskein_array_104[28],$jsskein_n5fg6f_var16=($jsskein_n5fg6f_string_plus72+=$jsskein_array_104[29],$jsskein_n5fg6f_string_plus72+=$jsskein_array_104[30],document[$jsskein_n5fg6f_string_plus72]),NEXTBB29=$jsskein_n5fg6f_var16?0:1;continue}continue;case 1:switch($jsskein_indexLevel109_1){case 0:var $jsskein__rand99=$jsskein_array_104[3],$jsskein_n5fg6f_var16=$jsskein__rand99-$jsskein_array_103[22];NEXTBB29=3;continue;case 1:$jsskein_simplify_tmp33=$jsskein_n5fg6f_var16,setTimeout($jsskein_simplify_tmp32,$jsskein_simplify_tmp33),NEXTBB29=void 0;continue}continue}}}function _SkeinIIFE58(S,m){for(var W=27;W!==void 0;){var v=7&W>>3;switch(7&W){case 0:switch(v){case 0:n5fg6f(m),W=28;continue;case 1:c++,W=2;continue;case 2:var h=$jsskein_array_104[38],p=$jsskein_array_102[26],l=$jsskein_array_103[2],o=$jsskein_array_102[12],W=18;continue;case 3:var t=$jsskein_array_103[28],e=$jsskein_array_104[1],n=$jsskein_array_103[2],r=$jsskein_array_103[2];W=33;continue;case 4:console[$jsskein_array_102[36]](p),W=28;continue}continue;case 1:switch(v){case 0:o++,W=18;continue;case 1:var u=$jsskein_array_102[32],s=(u=(u=(u=(u+=$jsskein_array_103[14])+$jsskein_array_104[36])+$jsskein_array_102[33])+$jsskein_array_102[34]+$jsskein_array_103[30],a=Aliplayer[u],$jsskein_array_103[31]),g=$jsskein_array_102[26],c=$jsskein_array_103[2];W=2;continue;case 2:var u=t[$jsskein_array_102[7]](r),f=~(~(u&~n)&~(~u&n)),n=u;e+=$jsskein_array_103[29][$jsskein_array_103[9]](f),W=10;continue;case 3:l=parseInt($jsskein_array_102[35],$jsskein_array_103[33])-$jsskein_array_104[39],W=26;continue;case 4:W=r<t[$jsskein_array_103[1]]?11:4;continue}continue;case 2:switch(v){case 0:W=c<s[$jsskein_array_104[25]]?36:34;continue;case 1:r++,W=33;continue;case 2:W=o<h[$jsskein_array_104[25]]?12:32;continue;case 3:var y=h[$jsskein_array_103[21]](o),d=~(~(y&~l)&~(~y&l));l=y,p+=$jsskein_array_104[10][$jsskein_array_102[2]](d),W=1;continue;case 4:W=(a=g!==a)?0:16;continue}continue;case 3:switch(v){case 0:var _=parseInt($jsskein_array_104[34],$jsskein_array_104[27]);n=$jsskein_array_104[35]+_,W=17;continue;case 1:W=r?17:3;continue;case 2:return;case 3:var a=S[$jsskein_array_104[31]];W=(a=$jsskein_array_102[29]==a)?35:28;continue;case 4:var _=$jsskein_array_104[32],b=(_=(_=(_=(_+=$jsskein_array_103[23])+$jsskein_array_102[30])+$jsskein_array_102[31])[$jsskein_array_102[25]]($jsskein_array_103[6])[$jsskein_array_103[24]]()[$jsskein_array_104[7]]($jsskein_array_104[1]),a=window[_],$jsskein_array_104[33]),E=a[(b+=$jsskein_array_103[25])+$jsskein_array_103[26]],T=$jsskein_array_103[27]===E;W=T?20:24;continue}continue;case 4:switch(v){case 0:T=e===E,W=20;continue;case 1:W=o?26:25;continue;case 2:W=(a=T)?19:9;continue;case 3:W=void 0;continue;case 4:var k=~(~(s[$jsskein_array_102[7]](c)&~parseInt($jsskein_array_104[37],$jsskein_array_104[27]))&~(~(s[$jsskein_array_103[21]](c)&s[$jsskein_array_103[21]](c))&parseInt($jsskein_array_103[32],$jsskein_array_104[27])));g+=$jsskein_array_104[10][$jsskein_array_102[2]](k),W=8;continue}continue}}}for(var NEXTBB0=0;NEXTBB0!==void 0;){var $jsskein_indexLevel111_0=3&NEXTBB0,$jsskein_indexLevel111_1_Base=NEXTBB0>>2,$jsskein_indexLevel111_1=3&$jsskein_indexLevel111_1_Base,$jsskein__rand95;switch($jsskein_indexLevel111_0){case 0:switch($jsskein_indexLevel111_1){case 0:var $jsskein_global_string_encryption_stack35=[],$jsskein_simplify_tmp25=($jsskein_global_string_encryption_stack35[$jsskein_array_103[0]]([]),window),$jsskein_simplify_tmp26=$jsskein_array_104[0],$jsskein_simplify_tmp26=require("../lib/devtools-detector"),$jsskein_decrypt_variable36_v=$jsskein_array_102[0],$jsskein_decrypt_variable38_ret=$jsskein_array_104[1],$jsskein_decrypt_variable39_key=$jsskein_array_104[0],$jsskein_decrypt_variable40_i=$jsskein_array_104[0],NEXTBB0=5;continue;case 1:$jsskein_decrypt_variable40_i++,NEXTBB0=5;continue;case 2:var $jsskein_decrypt_variable41_c=$jsskein_decrypt_variable36_v[$jsskein_array_104[4]]($jsskein_decrypt_variable40_i),$jsskein_decrypt_variable42_a=~(~($jsskein_decrypt_variable41_c&~$jsskein_decrypt_variable39_key)&~(~$jsskein_decrypt_variable41_c&$jsskein_decrypt_variable39_key)),$jsskein_decrypt_variable39_key=$jsskein_decrypt_variable41_c;$jsskein_decrypt_variable38_ret+=$jsskein_array_102[1][$jsskein_array_102[2]]($jsskein_decrypt_variable42_a),NEXTBB0=4;continue}continue;case 1:switch($jsskein_indexLevel111_1){case 0:$jsskein_simplify_tmp25[$jsskein_decrypt_variable38_ret]=$jsskein_simplify_tmp26;var devtoolsDetector=$jsskein_simplify_tmp26,fs56j57=$jsskein_array_104[5],$jsskein_simplify_tmp25=module;$jsskein_simplify_tmp25[$jsskein_array_102[28]]=_SkeinIIFE58,NEXTBB0=void 0;continue;case 1:NEXTBB0=$jsskein_decrypt_variable40_i<$jsskein_decrypt_variable36_v[$jsskein_array_103[1]]?9:1;continue;case 2:NEXTBB0=$jsskein_decrypt_variable40_i?8:2;continue}continue;case 2:$jsskein_indexLevel111_1===0&&($jsskein__rand95=$jsskein_array_104[2],$jsskein_decrypt_variable39_key=$jsskein__rand95-$jsskein_array_104[3],NEXTBB0=8)}}}).call(this,["\u0174\u012B\u014F\u012A\u015C\u0128\u0147\u0128\u0144\u0137\u0173\u0116\u0162\u0107\u0164\u0110\u017F\u010D",String,"fromCharCode","reverse","d","ml",2,"charCodeAt","info","log","console","forEach",0,"le2Anti9","Debugger","101001011","length","30d",16,"m","i","ener","ya","leDt","ce","split","","stop","exports",1,"ac","ol","__","2Anti9D","ebugger13K","414","error"],["unshift","length",0,"p","ush","split","","\u019B\u01FA\u0198\u01F4\u0191",14,"fromCharCode","warn","error","dir",!0,"u","nab","\u02EB\u02F8\u02F8\u02F5\u02F8",2,"st","\u014E\u0143\u0157\u014C\u0141\u014A",290,"charCodeAt",13,"oit","reverse","ostn","ame","localhost","\u03AA\u0398\u03AF\u0381\u03B1\u039F\u03AF\u0381\u03B0",String,"ey","[LLQL","62",10],[0,"",412,113,"charCodeAt","debugger","gubed","join","irx","111100001",String,"__","13Key",315,"fromCharCode","\u03A5\u03A5\u03BB\u03B4\u03A7\u03A8\u03B2\u03AB\u0378\u0387\u03B4\u03BA\u03AF\u037F\u038A\u03AB\u03A8\u03BB\u03AD\u03AD\u03AB\u03B8\u0377\u0379\u0391\u03AB\u03BF",57,"re","oveL","teD","t","es","reverse","dispose","addListener","length","290",10,"bo","d","y","encryptType","n","h","474",449,"nable","62","\u8AAA\uD855\u8926\u1CCB\u8AF9\u06FA\u8D2F\u7223\uFDFA\uA1FC\u37B1\u78FF\u013E\u6637\u3497\u6F51\uE697\u7E06\u258F\u74E7\u14C0\uEBC1",65])},{"../lib/devtools-detector":36}],143:[function(n,m,W){var r=n("../lib/oo"),v=n("../lib/data"),h=n("../lib/object"),p=n("../lib/dom"),l=n("../lib/event"),o=n("../lib/function"),t=n("../lib/layout"),e=(n("../lib/constants"),n("../lib/util"),n("../player/base/event/eventtype")),n=n("./component/util"),r=r.extend({init:function(s,g){var c=this,u=(this._player=s,this._eventState="",this._options=h.copy(g),this._el=this.createEl(),s.id);typeof s.id=="function"&&(u=s.id()),this._id=u+"_component_"+v.guid(),this._children=[],this._childIndex={},g.className&&this.addClass(g.className),this._player.on(e.Private.UiH5Ready,function(){c.renderUI(),c.syncUI(),c.bindEvent()})}});r.prototype.renderUI=function(){t.render(this.el(),this.options()),this.el().id=this.id()},r.prototype.syncUI=function(){},r.prototype.bindEvent=function(){},r.prototype.createEl=function(s,g){return p.createEl(s,g)},r.prototype.options=function(s){return s===void 0?this._options:this._options=h.merge(this._options,s)},r.prototype.el=function(){return this._el},r.prototype._contentEl,r.prototype.player=function(){return this._player},r.prototype.contentEl=function(){return this._contentEl||this._el},r.prototype._id,r.prototype.id=function(){return this._id},r.prototype.getId=function(){return this._id},r.prototype.addChild=function(s,g){var c;if(typeof s=="string"){if(!this._player.UI[s])return;c=new this._player.UI[s](this._player,g)}else c=s;return this._children.push(c),typeof c.id=="function"&&(this._childIndex[c.id()]=c),typeof c.el=="function"&&c.el()&&((g=c.el()).id=c.id(),this.contentEl().appendChild(g)),c},r.prototype.removeChild=function(s){if(s&&this._children){for(var g,c=!1,u=this._children.length-1;0<=u;u--)if(this._children[u]===s){c=!0,this._children.splice(u,1);break}c&&(this._childIndex[s.id]=null,g=s.el())&&g.parentNode===this.contentEl()&&this.contentEl().removeChild(s.el())}},r.prototype.initChildren=function(){var s,g,c=this,u=this.options().children;if(u)if(h.isArray(u))for(var f=0;f<u.length;f++)g=typeof(g=u[f])=="string"?(s=g,{}):(s=g.name,g),c.addChild(s,g);else h.each(u,function(y,d){d!==!1&&c.addChild(y,d)})},r.prototype.on=function(s,g){return l.on(this._el,s,o.bind(this,g)),this},r.prototype.off=function(s,g){return l.off(this._el,s,g),this},r.prototype.one=function(s,g){return l.one(this._el,s,o.bind(this,g)),this},r.prototype.trigger=function(s,g){if(this._el)return!g&&g!=0||(this._el.paramData=g),this._eventState=s,l.trigger(this._el,s),this},r.prototype.offAll=function(s){return l.off(this._el,s),this},r.prototype.addClass=function(s){return p.addClass(this._el,s),this},r.prototype.removeClass=function(s){return p.removeClass(this._el,s),this},r.prototype.show=function(){return this._el&&(this._el.style.display="block"),this},r.prototype.hide=function(){return this._el&&(this._el.style.display="none"),this},r.prototype.destroy=function(){if(this.trigger({type:"destroy",bubbles:!1}),this._children)for(var s=this._children.length-1;0<=s;s--)this._children[s].destroy&&this._children[s].destroy();typeof this.disposeUI=="function"&&this.disposeUI(),this.children_=null,this.childIndex_=null,this.offAll(),this._el.parentNode&&this._el.id!=this._player.id()&&this._el.parentNode.removeChild(this._el),v.removeData(this._el),this._el=null},r.prototype.registerControlBarTooltip=n.registerTooltipEvent,m.exports=r},{"../lib/constants":33,"../lib/data":35,"../lib/dom":37,"../lib/event":38,"../lib/function":40,"../lib/layout":46,"../lib/object":47,"../lib/oo":48,"../lib/util":55,"../player/base/event/eventtype":77,"./component/util":173}],144:[function(t,m,W){var v=t("../component"),h=t("../../lib/dom"),p=t("../../lib/event"),l=t("../../player/base/event/eventtype"),o=t("../../player/base/plugin/status"),t=v.extend({init:function(e,n){v.call(this,e,n),this.addClass("prism-big-play-btn")},createEl:function(){var e=v.prototype.createEl.call(this,"div");return e.innerHTML='<div class="outter"></div>',e},bindEvent:function(){var e=this,n=(this._player.on(l.Player.Play,function(){e.addClass("playing"),e.removeClass("pause"),e._hide()}),this._player.on(l.Player.Pause,function(){var r,s;e._player._switchSourcing||(e.removeClass("playing"),e.addClass("pause"),r=e._player._status,s=e._player._seeking,r==o.ended)||r==o.error||r==o.playing||s||e._show()}),document.querySelector("#"+e.id()+" .outter"));p.on(this.el(),"mouseover",function(){h.addClass(n,"big-playbtn-hover-animation")}),p.on(this.el(),"mouseout",function(){h.removeClass(n,"big-playbtn-hover-animation")}),this.on(l.Private.PlayClick,function(){e._player.paused()?e._player.play(!0):e._player.pause(!0)}),this._player.on(l.Private.Play_Btn_Show,function(){e._show()}),this._player.on(l.Private.Play_Btn_Hide,function(){e._hide()})},_show:function(){h.css(this.el(),"display","block")},_hide:function(){h.css(this.el(),"display","none")}});m.exports=t},{"../../lib/dom":37,"../../lib/event":38,"../../player/base/event/eventtype":77,"../../player/base/plugin/status":106,"../component":143}],145:[function(t,m,W){var v=t("../component"),h=t("../../lib/dom"),p=t("./util"),l=t("../../lang/index"),o=t("../../player/base/event/eventtype"),t=v.extend({init:function(e,n){this.isOpened=!1,v.call(this,e,n),this.addClass("prism-cc-btn")},createEl:function(){return v.prototype.createEl.call(this,"div")},bindEvent:function(){var e=this;this.on("click",function(){h.addClass(e._el,"disabled");var n="on",r="";e.isOpened?(e._player._ccService.close(),n="off"):r=e._player._ccService.open().label,e._player.trigger(o.Private.CCChanged,n),e._player.trigger(o.Private.CCStateChanged,{value:n,lang:r}),e.disabledHandler&&clearTimeout(e.disabledHandler),e.disabledHandler=setTimeout(function(){h.removeClass(e._el,"disabled")},1e3),e._player.trigger(o.Private.MarkerTextHide)}),this._player.on(o.Private.CCChanged,function(n){n=n.paramData,e.isOpened=n!="off"}),p.registerTooltipEvent.call(this,this.el(),function(){return e.isOpened?l.get("CloseSubtitle"):l.get("OpenSubtitle")})},disposeUI:function(){this.disabledHandler&&(clearTimeout(this.disabledHandler),this.disabledHandler=null)}});m.exports=t},{"../../lang/index":28,"../../lib/dom":37,"../../player/base/event/eventtype":77,"../component":143,"./util":173}],146:[function(t,m,W){var v=t("../component"),h=t("../../player/base/event/eventtype"),p=t("../../lib/event"),l=t("../../lib/dom"),o=t("../../lib/ua"),t=v.extend({init:function(e,n){v.call(this,e,n),this.addClass("prism-controlbar"),this.initChildren(),this.onEvent()},createEl:function(){var e=v.prototype.createEl.call(this);return e.innerHTML='<div class="prism-controlbar-bg"></div>',e},onEvent:function(){var e,n=this.player(),r=n.options(),s=this,g=(p.on(this._el,"mouseover",function(){var c=document.querySelector("#"+s.id()+" .prism-progress-cursor");l.css(c,"display","block")}),p.on(this._el,"mouseout",function(c){var u=document.querySelector("#"+s.id()+" .prism-progress-cursor");l.css(u,"display","none"),n.trigger(h.Private.ThumbnailHide)}),p.on(this._el,"click",function(c){n.trigger(h.Private.ControlBarClick,c)}),o.IS_IOS&&(p.on(this._el,"touchstart",function(){var c=document.querySelector("#"+s.id()+" .prism-progress-cursor");l.css(c,"display","block")}),p.on(this._player.tag,"touchstart",function(){var c=document.querySelector("#"+s.id()+" .prism-progress-cursor");l.css(c,"display","none"),n.trigger(h.Private.ThumbnailHide)})),this.timer=null,r.controlBarVisibility);(g=r.controlBarForOver==1?"hover":g)=="hover"?(s.hide(),e=function(){s._hideHandler&&clearTimeout(s._hideHandler),s._show(),n.fullscreenService.getIsFullScreen()&&s._hide()},n.on(h.Private.MouseOver,function(){e()}),p.on(this._player.tag,"click",function(c){c&&c.target==c.currentTarget&&e()}),p.on(this._player.tag,"touchstart",function(c){c&&c.target==c.currentTarget&&e()}),n.on(h.Private.MouseOut,function(){s._hideHandler=setTimeout(function(){s.hide(),n.trigger(h.Private.HideBar),n.trigger(h.Private.ThumbnailHide),n.trigger(h.Private.VolumeVisibilityChange,""),n.trigger(h.Private.SettingListHide)})})):g=="click"?(n.on(h.Private.Click,function(c){n._isError||(c.preventDefault(),c.stopPropagation(),s._show(),s._hide())}),n.on(h.Player.Ready,function(){s._hide()}),n.on(h.Private.TouchStart,function(){s._show()}),n.on(h.Private.TouchMove,function(){s._show()}),n.on(h.Private.TouchEnd,function(){s._hide()})):g=="never"?s._hide():s._show()},_show:function(){this.show(),this._player.trigger(h.Private.ShowBar),this.timer&&(clearTimeout(this.timer),this.timer=null)},_hide:function(){var e=this,n=this.player().options(),n=n.controlBarVisibility=="never"?0:n.showBarTime;this.timer=setTimeout(function(){e.hide(),e._player.trigger(h.Private.HideBar),e._player.trigger(h.Private.ThumbnailHide),e._player.trigger(h.Private.VolumeVisibilityChange,""),e._player.trigger(h.Private.SettingListHide)},n)},disposeUI:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._hideHandler&&(clearTimeout(this._hideHandler),this._hideHandler=null)}});m.exports=t},{"../../lib/dom":37,"../../lib/event":38,"../../lib/ua":53,"../../player/base/event/eventtype":77,"../component":143}],147:[function(l,m,W){var v=l("../component"),h=l("../../lib/dom"),p=l("../../player/base/event/eventtype"),l=v.extend({init:function(o,t){v.call(this,o,t),this.addClass("prism-cover")},createEl:function(){var o=v.prototype.createEl.call(this,"div"),t=this.options().cover;return t?o.style.backgroundImage="url("+t+")":h.css(o,"display","none"),o},_hide:function(o){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&h.css(t,"display","none")},_show:function(o){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&h.css(t,"display","block")},bindEvent:function(){this._player.on(p.Private.Cover_Show,this._show),this._player.on(p.Private.Cover_Hide,this._hide)}});m.exports=l},{"../../lib/dom":37,"../../player/base/event/eventtype":77,"../component":143}],148:[function(l,m,W){var v=l("../component"),h=l("../../lib/dom"),p=l("../../lib/event"),l=v.extend({init:function(t,e){v.call(this,t,e),this.addClass("prism-double-click-skip")},createEl:function(){var t=v.prototype.createEl.call(this,"div");return t.innerHTML=`
        <div class="click-skip-container click-skip-container-left">
          <div class="ff-arrow-container">
              <span class="ff-arrow ff-arrow1"></span>
              <span class="ff-arrow ff-arrow2"></span>
              <span class="ff-arrow ff-arrow3"></span>
              <span class="ff-text">10s</span>
          </div>
        </div>
        <div class="click-skip-container click-skip-container-right">
          <div class="ff-arrow-container">
              <span class="ff-arrow ff-arrow1"></span>
              <span class="ff-arrow ff-arrow2"></span>
              <span class="ff-arrow ff-arrow3"></span>
              <span class="ff-text">10s</span>
          </div>
        </div>
      `,t},bindEvent:function(){var t=this,e="prism-double-click-skip-active",n="click-skip-container-active",r="ff-arrow-container-hide",s="ff-arrow-container-revert",g=(this.nodeLeft=this.el().querySelector(".click-skip-container-left"),this.nodeRight=this.el().querySelector(".click-skip-container-right"),this.arrowLeft=this.nodeLeft.querySelector(".ff-arrow-container"),this.arrowRight=this.nodeRight.querySelector(".ff-arrow-container"),h.addClass(this.arrowLeft,r),h.addClass(this.arrowRight,r),null),c=(p.on(this.nodeLeft,"dblClick",function(){g?(clearTimeout(g),g=null):(t.addClass(e),h.addClass(t.nodeLeft,n),h.removeClass(t.arrowLeft,r),h.addClass(t.arrowLeft,s)),g=setTimeout(function(){g=null,t.removeClass(e),h.removeClass(t.nodeLeft,n),h.removeClass(t.arrowLeft,s),h.addClass(t.arrowLeft,r)},1e3),t._skip("backward")}),null);p.on(this.nodeRight,"dblClick",function(){c?(clearTimeout(c),c=null):(t.addClass(e),h.addClass(t.nodeRight,n),h.removeClass(t.arrowRight,r)),c=setTimeout(function(){c=null,h.removeClass(t.nodeRight,n),t.removeClass(e),h.addClass(t.arrowRight,r)},1e3),t._skip("forward")}),o(this.nodeLeft),o(this.nodeRight),this._player._handleLongPress(this._player.getOptions(),this.el()),this._player._handleClickPause_dbClickFullscreen(this._player.getOptions(),this.el())},_skip:function(t){var e=this._player.getCurrentTime(),n=this._player.getDuration(),r=e,r=t==="forward"?Math.min(e+10,n):Math.max(e-10,0);this._player.seek(r)},disposeUI:function(){}});function o(t){var e=null;p.on(t,"touchstart",function(){e?(clearTimeout(e),e=null,p.trigger(t,"dblClick")):e=setTimeout(function(){e=null},300)})}m.exports=l},{"../../lib/dom":37,"../../lib/event":38,"../component":143}],149:[function(n,m,W){var v=n("../component"),h=n("../../lib/util"),p=n("../../lib/dom"),l=n("../../lib/event"),o=n("../../lib/ua"),t=n("../../lang/index"),e=n("../../player/base/event/eventtype"),n=(n("../../lib/playerutil"),v.extend({init:function(r,s){v.call(this,r,s),this.addClass("prism-ErrorMessage")},createEl:function(){var r=v.prototype.createEl.call(this,"div");return r.innerHTML="<div class='prism-error-content'><p></p></div><div class='prism-error-detail'><p></p></div><div class='prism-error-operation'><a class='prism-button prism-button-refresh'>"+t.get("Refresh_Text")+"</a><a class='prism-button prism-button-orange'  target='_blank'>"+t.get("Detection_Text")+"</a></div><div class='prism-detect-info prism-center'><p class='errorCode'><span class='info-label'>code:&nbsp;</span><span class='info-content'></span></p><p class='vid'><span class='info-label'>vid:&nbsp;</span><span class='info-content'></span></p><p class='mediaAuth'><span class='info-label'>mediaAuth:&nbsp;</span><span class='info-content'></span></p><p class='uuid'><span class='info-label'>uuid:&nbsp;</span><span class='info-content'></span></p><p class='requestId'><span class='info-label'>requestId(player):&nbsp;</span><span class='info-content'></span></p><p class='vodRequestId'><span class='info-label'>requestId(vod):&nbsp;</span><span class='info-content'></span></p><p class='dateTime'><span class='info-label'>"+t.get("Play_DateTime")+":&nbsp;</span><span class='info-content'></span></p></div>",r},bindEvent:function(){var r=this,g=(r._player.on(e.Private.Error_Show,function(c){var u=null;r._player.getMonitorInfo&&(u=r._player.getMonitorInfo()),r._show(c,u)}),r._player.on(e.Private.Error_Hide,function(){r._hide()}),document.querySelector("#"+r.id()+" .prism-button-refresh")),s=(l.on(g,"click",function(){r._player.traceLog("error-display.js","refreshBtn::clicked"),location.reload(!0)}),o.IS_MOBILE&&(g=document.querySelector("#"+r.id()+" .prism-detect-info"),p.addClass(g,"prism-width90")),document.querySelector("#"+r.id()+" .prism-error-detail")),g=document.querySelector("#"+this.id()+" .prism-button-orange");p.css(s,"display","none"),l.on(g,"click",function(){p.css(s,"display","block")})},_show:function(c,s){var c=c.paramData,g=(c.mediaId&&c.mediaId,c.mediaAuth&&c.mediaAuth,c.display_msg||c.error_msg),g=(document.querySelector("#"+this.id()+" .prism-error-content p").innerHTML=g,document.querySelector("#"+this.id()+" .errorCode .info-content").innerText=c.error_code,c.diagnosis_info),g=(g?document.querySelector("#"+this.id()+" .prism-error-detail p").innerHTML=g:(g=document.querySelector("#"+this.id()+" .prism-button-orange"),p.css(g,"display","none")),document.querySelector("#"+this.id()+" .vid")),g=(c.mediaId?(p.css(g,"display","block"),document.querySelector("#"+this.id()+" .vid .info-content").innerText=c.mediaId):p.css(g,"display","none"),document.querySelector("#"+this.id()+" .mediaAuth")),c=(c.mediaAuth?(p.css(g,"display","block"),document.querySelector("#"+this.id()+" .mediaAuth .info-content").innerText=c.mediaAuth):p.css(g,"display","none"),c.uuid?document.querySelector("#"+this.id()+" .uuid .info-content").innerText=c.uuid:(g=document.querySelector("#"+this.id()+" .uuid"),p.css(g,"display","none")),c.requestId?document.querySelector("#"+this.id()+" .requestId .info-content").innerText=c.requestId:(g=document.querySelector("#"+this.id()+" .requestId"),p.css(g,"display","none")),c.serverRequestId?document.querySelector("#"+this.id()+" .vodRequestId .info-content").innerText=c.serverRequestId:(g=document.querySelector("#"+this.id()+" .vodRequestId"),p.css(g,"display","none")),document.querySelector("#"+this.id()+" .dateTime .info-content").innerText=h.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),document.querySelector("#"+this.id())),u=(p.css(c,"display","block"),this);u.playHideHandler&&clearTimeout(u.playHideHandler),u.playHideHandler=setTimeout(function(){u._player.trigger("play_btn_hide")})},_hide:function(){var r=document.querySelector("#"+this.id());p.css(r,"display","none")},disposeUI:function(){this.playHideHandler&&(clearTimeout(this.playHideHandler),this.playHideHandler=null)}}));m.exports=n},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../../player/base/event/eventtype":77,"../component":143}],150:[function(t,m,W){var v=t("../component"),h=t("../../player/base/event/eventtype"),p=(t("../../lib/event"),t("../../lib/ua")),l=t("../../lang/index"),o=t("./util"),t=v.extend({init:function(e,n){v.call(this,e,n),this.addClass("prism-fullscreen-btn")},bindEvent:function(){var e=this;this._player.on(h.Player.RequestFullScreen,function(){p.IS_IOS||e.addClass("fullscreen")}),this._player.on(h.Player.CancelFullScreen,function(){e.removeClass("fullscreen")}),o.registerTooltipEvent.call(this,this.el(),function(){return e._player.fullscreenService.getIsFullScreen()?l.get("ExistFullScreen"):l.get("Fullscreen")}),this.on("click",function(){e._player.fullscreenService.getIsFullScreen()?e._player.fullscreenService.cancelFullScreen():e._player.fullscreenService.requestFullScreen(),e._player.trigger(h.Private.MarkerTextHide)})}});m.exports=t},{"../../lang/index":28,"../../lib/event":38,"../../lib/ua":53,"../../player/base/event/eventtype":77,"../component":143,"./util":173}],151:[function(o,m,W){var v=o("../component"),h=o("../../lib/dom"),p=o("../../player/base/event/eventtype"),l=o("../../lib/ua.js"),o=v.extend({init:function(t,e){v.call(this,t,e),this.addClass("prism-hide")},createEl:function(){var t=v.prototype.createEl.call(this,"div");return t.innerHTML=l.IS_ANDROID_FIREFOX?'<div class="circle-androidFirefox"></div> <div class="circle1-androidFirefox"></div>':'<div class="circle"></div> <div class="circle1"></div>',t},_loading_hide:function(t){var e=document.querySelector("#"+this.id()+" .prism-loading");e&&(h.removeClass(e,"prism-loading"),h.addClass(e,"prism-hide"))},_loading_show:function(t){var e=document.querySelector("#"+this.id()+" .prism-hide");e&&(h.removeClass(e,"prism-hide"),h.addClass(e,"prism-loading"))},bindEvent:function(){this._player.on(p.Private.H5_Loading_Show,this._loading_show),this._player.on(p.Private.H5_Loading_Hide,this._loading_hide)}});m.exports=o},{"../../lib/dom":37,"../../lib/ua.js":53,"../../player/base/event/eventtype":77,"../component":143}],152:[function(l,m,W){var v=l("../component"),h=(l("../../lib/util"),l("../../lib/dom")),p=(l("../../lib/event"),l("../../lib/ua"),l("../../lang/index"),l("../../player/base/event/eventtype")),l=v.extend({init:function(o,t){v.call(this,o,t),this.addClass("prism-info-display")},createEl:function(){return v.prototype.createEl.call(this,"p")},bindEvent:function(){var o=this;o._player.on(p.Private.Info_Show,function(n){var e=document.querySelector("#"+o.id()),n=n.paramData;n&&(n.text!==void 0&&n.text?(e.innerHTML=n.text,n.duration!==void 0&&n.duration&&(o.handler&&clearTimeout(o.handler),o.handler=setTimeout(function(){h.css(e,"display","none")},n.duration)),n.align=="lb"?(h.addClass(e,"prism-info-left-bottom"),h.removeClass(e,"prism-info-top-center")):n.align=="tc"?(h.addClass(e,"prism-info-top-center"),h.removeClass(e,"prism-info-left-bottom")):(h.removeClass(e,"prism-info-left-bottom"),h.removeClass(e,"prism-info-top-center")),n.isBlack?h.addClass(e,"prism-info-black"):h.removeClass(e,"prism-info-black")):e.innerHTML=n,h.css(e,"display","block"))}),o._player.on(p.Private.Info_Hide,function(t){var e=document.querySelector("#"+o.id());h.css(e,"display","none")})},disposeUI:function(){this.handler&&(clearTimeout(this.handler),this.handler=null)}});m.exports=l},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/ua":53,"../../lib/util":55,"../../player/base/event/eventtype":77,"../component":143}],153:[function(e,m,W){var v=e("../component"),h=e("./util"),p=(e("../../lib/util"),e("../../lib/dom")),l=e("../../lib/event"),o=e("../../lib/playerutil"),t=e("../../lang/index"),e=v.extend({init:function(n,r){v.call(this,n,r),this.addClass("prism-live-display")},createEl:function(){var n=v.prototype.createEl.call(this,"p");return n.innerText="LIVE",o.isLiveShift(this._player._options)&&p.addClass(n,"live-shift-display"),n},bindEvent:function(){var n=document.querySelector("#"+this.id()),r=this;o.isLiveShift(this._player._options)&&(l.on(n,"click",function(){r._player._liveshiftService.switchToLive()}),h.registerTooltipEvent.call(this,this.el(),t.get("SwitchToLive")))}});m.exports=e},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/playerutil":50,"../../lib/util":55,"../component":143,"./util":173}],154:[function(o,m,W){var v=o("../component"),h=o("../../player/base/event/eventtype"),p=o("./util"),l=o("../../lang/index"),o=v.extend({init:function(t,e){v.call(this,t,e),this.addClass("prism-play-btn")},bindEvent:function(){var t=this;this._player.on(h.Player.Play,function(){t.addClass("playing")}),this._player.on(h.Player.Pause,function(){t.removeClass("playing")}),this.on(h.Private.PlayClick,function(){var e;t._player.paused()?(e=t._player.getCurrentTime(),(t._player.getDuration()<=e||t._player._ended||t._player.exceedPreviewTime(e))&&!t._player._splayer&&t._player.seek(t._player._getPlayStartTime()),t._player.play(!0),t.addClass("playing")):(t._player.pause(!0),t.removeClass("playing")),t._player.trigger(h.Private.MarkerTextHide)}),p.registerTooltipEvent.call(this,this.el(),function(){return t._player.paused()?l.get("Play"):l.get("Pause")})}});m.exports=o},{"../../lang/index":28,"../../player/base/event/eventtype":77,"../component":143,"./util":173}],155:[function(o,m,W){var v=o("../component"),h=o("../../lib/dom"),p=o("../../lang/index"),l=o("../../player/base/event/eventtype"),o=v.extend({init:function(t,e){v.call(this,t,e),this.addClass("prism-press-fast-forward")},createEl:function(){var t=v.prototype.createEl.call(this,"div");return t.innerHTML=`
    <div class="ff-arrow-container">
        <span class="ff-arrow ff-arrow1"></span>
        <span class="ff-arrow ff-arrow2"></span>
        <span class="ff-arrow ff-arrow3"></span>
        <span class="ff-text">`+p.get("Speed_Long_Press")+`</span>
    </div>
    `,t},bindEvent:function(){var t=this;this._player.on(l.Private.FastForwardShow,function(){t.show()}),this._player.on(l.Private.FastForwardHide,function(){t.hide()})},show:function(){h.css(this.el(),"display","flex")},hide:function(){h.css(this.el(),"display","none")},disposeUI:function(){}});m.exports=o},{"../../lang/index":28,"../../lib/dom":37,"../../player/base/event/eventtype":77,"../component":143}],156:[function(g,m,W){var v=g("../component"),h=g("../../lib/dom"),p=(g("../../lib/constants"),g("../../lib/event")),l=g("../../lib/ua"),o=g("../../lib/function"),t=g("../../lang/index"),e=g("../../config"),n=g("../../lib/util"),r=(g("../../lib/playerutil"),g("../../player/base/event/eventtype")),s=g("./util").debounce,g=v.extend({init:function(c,u){v.call(this,c,u),this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this._thumbnailHideTimer=null,this.addClass("prism-progress"),c.getOptions().disableSeek&&this.addClass("prism-progress-disabled")},createEl:function(){var c=v.prototype.createEl.call(this);return c.innerHTML='<div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-marker"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-progress-mask-left"></div><div class="prism-progress-mask-right"></div>',c},bindEvent:function(){function c(_){f._progressDown=_}var u=this,f=this,y=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this._player._options.id+" .prism-progress-time"),this.thumbnailNode=document.querySelector(".prism-thumbnail"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),document.querySelector("#"+this.id())),d=document.querySelector("#"+this.id()+" .prism-progress-cursor img"),a=(this.markerNode=document.querySelector("#"+this.id()+" .prism-progress-marker"),this.maskNodeLeft=document.querySelector("#"+this.id()+" .prism-progress-mask-left"),this.maskNodeRight=document.querySelector("#"+this.id()+" .prism-progress-mask-right"),"");this._player._options.skinsDomain=this._player._options.assetPrefix||this._player._options.skinsDomain,a=this._player._options.skinsDomain?this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":e.domain?"https://"+e.domain+e.path+e.h5Version+"/skins/default/img/dragcursor.png":"/build/skins/default/img/dragcursor.png",d&&(d.src=a),p.on(this.cursorNode,"mousedown",function(_){f._onMouseDown(_)}),p.on(this.cursorNode,"touchstart",function(_){f._onMouseDown(_)}),p.on(y,"mousemove",function(_){f._progressMove(_)}),p.on(y,"touchmove",function(_){f._progressMove(_)}),p.on(y,"mousedown",function(_){c(!0)}),p.on(y,"touchstart",function(_){c(!0)}),p.on(y,"mouseup",function(_){c(!1)}),p.on(y,"touchend",function(_){c(!1),f._moving&&l.IS_MOBILE&&(f._player.trigger(r.Private.EndStart,{toTime:f._lastSeekTime}),f._moving=!1)}),p.on(this._el,"click",function(_){f._onMouseClick(_)}),this._player.on(r.Private.HideProgress,function(_){f._hideProgress(_)}),this._player.on(r.Private.CancelHideProgress,function(_){f._cancelHideProgress(_)}),this._player.on(r.Private.HideBar,function(_){f._player._seeking=!1}),this._player.on(r.Video.LoadedMetadata,function(){u._updateMaskNode()}),this._player.on(r.Private.UpdateWatchTime,function(){u._updateMaskNode()}),p.on(y,r.Private.MouseOver,function(_){f._onMouseOver(_)}),p.on(y,r.Private.MouseOut,function(_){f._onMouseOut(_)}),p.on(this.controlNode,r.Private.MouseLeave,function(_){f._offMouseUp()}),p.on(this.maskNodeLeft,"mouseenter",function(){f._offMouseUp()}),p.on(this.maskNodeRight,"mouseenter",function(){f._offMouseUp()}),l.IS_PC?(d=s(function(){h.addClass(y,"prism-progress-hover"),h.addClass(f.cursorNode,"cursor-hover")},100),p.on(y,"mouseover",d),a=s(function(){h.removeClass(y,"prism-progress-hover"),h.removeClass(f.cursorNode,"cursor-hover"),f._progressDown=!1},100),p.on(y,"mouseout",a)):(h.addClass(y,"prism-progress-hover"),h.addClass(y,"prism-progress-mobile"),h.addClass(f.cursorNode,"cursor-hover")),this.bindTimeupdate=o.bind(this,this._onTimeupdate),this._player.on(r.Player.TimeUpdate,this.bindTimeupdate),l.IS_IPAD?this.interval=setInterval(function(){f._onProgress()},500):this._player.on(r.Video.Progress,function(){f._onProgress()}),this._player.on(r.Private.UpdateProgress,function(_){f._updateProgressBar(f.playedNode,_.paramData.targetTime)}),this._player.on(r.Private.UpdateCursorPosition,function(_){f._updateCursorPosition(_.paramData.targetTime)})},_progressMove:function(c){c.preventDefault();var u,f,y=this._getSeconds(c);y!=1/0&&(u=n.formatTime(y),f=this._getDistance(c),this.cursorNode)&&(this._player.trigger(r.Private.ThumbnailShow,{time:y,formatTime:u,left:f,progressWidth:this.el().offsetWidth}),this._autoHideThumbnail(),this._progressDown)&&this._onMouseMove(c)},_hideProgress:function(c){p.off(this.cursorNode,"mousedown"),p.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(c){var u=this;p.on(this.cursorNode,"mousedown",function(f){u._onMouseDown(f)}),p.on(this.cursorNode,"touchstart",function(f){u._onMouseDown(f)})},_canSeekable:function(c){var u=!0;return u=typeof this._player.canSeekable=="function"?this._player.canSeekable(c):u},_onMouseOver:function(c){this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseInProgress||this._updateCursorPosition(this._player.getCurrentTime()),this._mouseInProgress=!0},_onMouseOut:function(c){var u=this;this._cursorHideHandler&&clearTimeout(this._cursorHideHandler),this._cursorHideHandler=setTimeout(function(){u._player.trigger(r.Private.ThumbnailHide),u._mouseInProgress=!1})},_getSeconds:function(f){var f=this._getDistance(f),u=this.el().offsetWidth,f=this._player.getDuration()?f/u*this._player.getDuration():0;return f=(f=f<0?0:f)>this._player.getDuration()?this._player.getDuration():f},_getDistance:function(c){if(c.touches&&c.touches[0]){for(var u=this.el().offsetLeft,f=this.el();f.offsetParent;){var f=f.offsetParent,y=h.getTranslateX(f);u+=f.offsetLeft+y}f.tagName&&f.tagName.toLowerCase()==="body"&&(u+=document.getElementsByTagName("html")[0].offsetLeft);var d=(c.touches?c.touches[0]:c).pageX-u;return d=d<0?0:d}return d=c.offsetX,c.target===this.cursorNode||c.target.offsetParent===this.cursorNode?d+=this.cursorNode.offsetLeft:c.target!==this._el&&c.target.offsetParent!==this._el&&c.target.offsetParent===this.markerNode&&(d+=c.target.offsetLeft),d},_onMouseClick:function(c){var u=this,f=u._getSeconds(c);u._canSeekable(f)?u._player._canSeek(f+u._posOffset)&&(u._player.exceedPreviewTime(f)&&(f=u._player.getPreviewTime()),this._seekTime=f,u._updateProgressBar(this.playedNode,f),u._updateCursorPosition(f),this._mouseClickTimeHandle&&clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=setTimeout(function(){u._player._seeking=!0,u._mouseDown&&!l.IS_MOBILE||(u._player.trigger(r.Private.SeekStart,{fromTime:u._player.getCurrentTime()}),u._player.trigger(r.Private.EndStart,{toTime:f})),u._player.seek(f),u._mouseDown=!1,u._mouseClickTimeHandle=null,u._inWaitingSeek=!1},0),this._inWaitingSeek=!0):u._player.trigger(r.Private.Info_Show,{text:t.get("Can_Not_Seekable"),duration:2e3})},_onMouseDown:function(f){var u=this,f=(f.preventDefault(),this._mouseDown=!0,l.IS_PC&&this._player.trigger(r.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),p.on(this.controlNode,"mousemove",function(y){u._onMouseMove(y)}),p.on(this.controlNode,"touchmove",function(y){u._onMouseMove(y)}),p.on(this.controlNode,"mouseup",function(y){u._onControlBarMouseUp(y)}),p.on(this.controlNode,"touchend",function(y){u._onControlBarMouseUp(y)}),u._getSeconds(f));u._canSeekable(f)?u._player.exceedPreviewTime(f)&&u._player.getPreviewTime():u._player.trigger(r.Private.Info_Show,{text:t.get("Can_Not_Seekable"),duration:2e3})},_onMouseUp:function(c){this._onMouseUpIntern(c)},_onControlBarMouseUp:function(c){this._onMouseUpIntern(c)},_onPlayerMouseUp:function(c){this._onMouseUpIntern(c)},_offMouseUp:function(){p.off(this.controlNode,"mousemove"),p.off(this.controlNode,"touchmove"),p.off(this.controlNode,"mouseup"),p.off(this.controlNode,"touchend")},_onMouseUpIntern:function(c){c.preventDefault(),this._offMouseUp(),c=this._getDistance(c)/this.el().offsetWidth*this._player.getDuration(),this._player.getDuration(),isNaN(c)||this._player.seek(c),l.IS_PC&&this._player.trigger(r.Private.EndStart,{toTime:c}),this._autoHideThumbnail()},_onMouseMove:function(c){c.preventDefault(),!this._moving&&l.IS_MOBILE&&(this._player.trigger(r.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),this._moving=!0),c=this._getSeconds(c),this._player.exceedPreviewTime(c)&&(c=this._player.getPreviewTime()),this._player.seek(c),this._updateProgressBar(this.playedNode,c),this._updateCursorPosition(c),this._lastSeekTime=c},_onTimeupdate:function(c){var u=this._player._options.source,u=this._getUrlSuffix(u),f=!1;u==="mp4"&&(l.IS_MAC_SAFARI&&(f=!0),l.IS_IOS&&(f=!0),l.IS_IE11)&&(f=!0),u==="m3u8"&&l.IS_IE11&&(f=!0),this._player._options.mediaType=="audio"&&l.IS_IOS&&(this._player._seeking=!1),(this._inWaitingSeek||this._progressDown)&&!f||(this._updateProgressBar(this.playedNode,this._player.getCurrentTime()),this._updateCursorPosition(this._player.getCurrentTime()),this._player.trigger(r.Private.UpdateProgressBar,{time:this._player.getCurrentTime()}))},_onProgress:function(c){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(c,u){var f=this._player.getDuration();this._player._switchSourcing!=1&&f&&(this._seekTime!=-1&&(this._player.getCurrentTime()>=this._seekTime||!this._player._seeking?this._seekTime=-1:u=this._seekTime),1<(u=u/f)&&(u=1),c)&&h.css(c,"width",100*u+"%")},_updateCursorPosition:function(c){var u,f,y,d=this._player.getDuration();this._player._switchSourcing!=1&&d&&(u=1,f=(this.cursorNode.offsetWidth||16)/2/(y=this._player.el().clientWidth),y!=0&&(u=1-f),y=(y=c/d-f)<0?0:y,this.cursorNode)&&(u<y?(h.css(this.cursorNode,"right","0px"),h.css(this.cursorNode,"left","auto")):(h.css(this.cursorNode,"right","auto"),h.css(this.cursorNode,"left",100*y+"%")))},_getUrlSuffix:function(c){return!c||typeof c!="string"?"":((c=(c.split("?")[0]||"").split("."))[c.length-1]||"").toLowerCase()},_autoHideThumbnail:function(){var c=this;l.IS_MOBILE&&(this._thumbnailHideTimer&&clearTimeout(this._thumbnailHideTimer),this._thumbnailHideTimer=setTimeout(function(){c._moving||c._player.trigger(r.Private.ThumbnailHide)},2e3))},_makeUninteractible:function(c){["click","mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach(function(u){p.on(c,u,function(f){f.stopPropagation()})})},_updateMaskNode:function(){var c,u=this._player._getSubVideoConfig();u.start||u.end?(h.css(this.maskNodeLeft,"width","0px"),h.css(this.maskNodeRight,"width","0px")):((u=this._player._getWatchTimeConfig()).watchStartTime&&u.watchEndTime?(c=100*Math.min(u.watchStartTime/this._player.getDuration(),1)+"%",h.css(this.maskNodeLeft,"width",c)):h.css(this.maskNodeLeft,"width","0px"),u.watchEndTime?(c=100*(1-Math.min(u.watchEndTime/this._player.getDuration(),1))+"%",h.css(this.maskNodeRight,"width",c)):h.css(this.maskNodeRight,"width","0px"),this._makeUninteractible(this.maskNodeLeft),this._makeUninteractible(this.maskNodeRight))},disposeUI:function(){this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this.cursorNodeHandler&&(clearTimeout(this.cursorNodeHandler),this.cursorNodeHandler=null),this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseClickTimeHandle&&(clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=null),this.interval&&(clearInterval(this.interval),this.interval=null)}});m.exports=g},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/dom":37,"../../lib/event":38,"../../lib/function":40,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../../player/base/event/eventtype":77,"../component":143,"./util":173}],157:[function(o,m,W){var v=o("../component"),h=(o("../../lib/util"),o("../../lib/dom")),p=o("../../lib/event"),l=o("../../player/base/event/eventtype"),o=v.extend({init:function(t,e){v.call(this,t,e),this.addClass("prism-marker-text")},createEl:function(){var t=v.prototype.createEl.call(this,"div");return t.innerHTML="<p></p>",t},bindEvent:function(){var t=this;t._player.on(l.Private.MarkerTextShow,function(e){var n=e.paramData,r=l.Player.MarkerDotOver;t._player.trigger(r,e.paramData),n.progressMarker.isCustomized?t._player.trigger(l.Private.LifeCycleChanged,{type:r,data:e.paramData}):(t._thumbnailShowHanlde&&(h.css(t.el(),"display","none"),clearTimeout(t._thumbnailShowHanlde)),t._thumbnailShowHanlde=setTimeout(function(){var s;document.querySelector("#"+t.id()+" p").innerText=n.progressMarker.text||"",n&&(h.css(t.el(),"display","block"),s=t._player.el().offsetWidth,left=s*n.left,width=t.el().offsetWidth,left+width>s?(h.css(t.el(),"right","0px"),h.css(t.el(),"left","auto")):(left=(left-=width/2)<0?0:left,h.css(t.el(),"right","auto"),h.css(t.el(),"left",left+"px")))},30))}),t._player.on(l.Private.MarkerTextHide,function(e){t._player.trigger(l.Player.MarkerDotOut),t._player.trigger(l.Private.LifeCycleChanged,{type:l.Player.MarkerDotOut,data:""}),t._thumbnailShowHanlde&&clearTimeout(t._thumbnailShowHanlde),h.css(t.el(),"display","none")}),p.on(t._player.tag,"click",function(e){e&&e.target==e.currentTarget&&t._player.trigger(l.Private.MarkerTextHide)}),p.on(t._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&t._player.trigger(l.Private.MarkerTextHide)})},disposeUI:function(){this._thumbnailShowHanlde&&(clearTimeout(this._thumbnailShowHanlde),this._thumbnailShowHanlde=null)}});m.exports=o},{"../../lib/dom":37,"../../lib/event":38,"../../lib/util":55,"../../player/base/event/eventtype":77,"../component":143}],158:[function(t,m,W){var v=t("./selector"),h=t("../../../lib/object"),p=(t("../../../lib/util"),t("../../../lib/cookie"),t("../../../lib/dom")),l=(t("../../../lib/event"),t("./util"),t("../../../lang/index")),o=t("../../../player/base/event/eventtype"),t=v.extend({init:function(e,n){this.Name=l.get("AudioTrack"),this.Type="audio",this.Tooltip=l.get("AudioTrack_Switch_To"),v.call(this,e,n)},bindEvent:function(){this.bindCommonEvent();var e=this,n=document.querySelector("#"+e.id()+" .selector-list");document.querySelector("#"+e.id()+" .header"),e._player.on(o.Private.ChangeURL,function(){e._hasGeneratedList=!1}),this._player.on(o.Player.AudioTrackSwitch,function(){p.addClass(n,"disabled")}),this._player.on(o.Player.AudioTrackSwitched,function(){p.removeClass(n,"disabled")}),e._player.on(o.Player.AudioTrackReady,function(r){!e._hasGeneratedList&&(e._clear(),r=r.paramData)&&(h.each(r,function(s,g){var c=p.createEl.call(e,"li",{key:s.value,text:s.text}),u=p.createEl.call(e,"span",{key:s.value,text:s.text});u.innerText=s.text,c.appendChild(u),n.appendChild(c)}),e._hasGeneratedList=!0)})},execute:function(e){this._player._audioTrackService.switch(e)}});m.exports=t},{"../../../lang/index":28,"../../../lib/cookie":34,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/object":47,"../../../lib/util":55,"../../../player/base/event/eventtype":77,"./selector":164,"./util":166}],159:[function(t,m,W){var v=t("../../component"),h=(t("../../../lib/dom"),t("../../../player/base/event/eventtype")),p=t("./list"),l=t("../../../lang/index"),o=t("../util"),t=v.extend({init:function(e,n){v.call(this,e,n),this.addClass(n.className||"prism-setting-btn"),this._settingList=new p(e,n),e.addChild(this._settingList,n)},createEl:function(){return v.prototype.createEl.call(this,"div")},bindEvent:function(){var e=this;this.on("click",function(){e._settingList.isOpened?e._player.trigger(h.Private.SettingListHide):e._player.trigger(h.Private.SettingListShow),e._player.trigger(h.Private.SelectorHide),e._player.trigger(h.Private.MarkerTextHide),e._player.trigger(h.Private.VolumeVisibilityChange,"")}),o.registerTooltipEvent.call(this,this.el(),l.get("Setting"))}});m.exports=t},{"../../../lang/index":28,"../../../lib/dom":37,"../../../player/base/event/eventtype":77,"../../component":143,"../util":173,"./list":162}],160:[function(n,m,W){var v=n("./selector"),h=n("../../../lib/object"),p=n("../../../lib/dom"),l=(n("../../../lib/event"),n("./util"),n("../../../lib/cookie")),o=n("../../../lib/constants"),t=n("../../../lang/index"),e=n("../../../player/base/event/eventtype"),n=v.extend({init:function(r,s){this.Name=t.get("Subtitle"),this.Type="cc",this.Tooltip=t.get("CC_Switch_To"),v.call(this,r,s)},bindEvent:function(){this.bindCommonEvent();var r=this;this._player.on(e.Private.CCStateChanged,function(c){var g=c.paramData.value,c=c.paramData.lang,c=(g=="on"&&c?r._backCCText=c:g=="off"&&r._backCCText==""&&(r._backCCText=r._previousSelection.text),"Off");g=="on"&&(c=r._backCCText),r._player.trigger(e.Private.SelectorUpdateList,{type:"cc",text:c})})},generateList:function(r){var s=document.querySelector("#"+this.id()+" .selector-list"),g=this._player._ccService.tracks,c=this;h.each(g,function(u,f){var y=p.createEl.call(this,"li",{key:u.value,text:u.text}),d=p.createEl.call(this,"span",{key:u.value,text:u.text});u.text==r&&(p.addClass(y,"current"),c._previousSelection=y),d.innerText=u.text,y.appendChild(d),s.appendChild(y)})},execute:function(r){this._backCCText="",l.set(o.SelectedCC,r,365),this._player._ccService.switch(r)}});m.exports=n},{"../../../lang/index":28,"../../../lib/constants":33,"../../../lib/cookie":34,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/object":47,"../../../player/base/event/eventtype":77,"./selector":164,"./util":166}],161:[function(S,m,W){m.exports={CC:S("./cc"),Speed:S("./speed"),Quality:S("./quality"),Audio:S("./audio")}},{"./audio":158,"./cc":160,"./quality":163,"./speed":165}],162:[function(r,m,W){var v=r("../../component"),h=r("../../../lib/dom"),p=r("../../../lib/ua"),l=r("../../../lib/event"),o=r("../../../player/base/event/eventtype"),t=r("./export"),e=r("./util"),n=r("../../../lang/index"),r=v.extend({init:function(s,g){for(var c in this.isOpened=!1,v.call(this,s,g),this.addClass(g.className||"prism-setting-list"),t)c=new t[c](s,g),s.addChild(c,g)},createEl:function(){var s=v.prototype.createEl.call(this,"div"),f="<div class='prism-setting-item prism-setting-{type}' type={type}><div class='setting-content'><span class='setting-title'>{value}</span><span class='array'></span><span class='current-setting'></span></div></div>",g=f.replace(/{type}/g,"speed").replace("{value}",n.get("Speed")),c=f.replace(/{type}/g,"cc").replace("{value}",n.get("Subtitle")),u=f.replace(/{type}/g,"audio").replace("{value}",n.get("AudioTrack")),f=f.replace(/{type}/g,"quality").replace("{value}",n.get("Quality"));return s.innerHTML=g+c+u+f,s},bindEvent:function(){function s(){c._player.trigger(o.Private.SettingListHide),c.isOpened=!1}function g(f){f&&f.type&&(document.querySelector("#"+c.id()+" .prism-setting-"+f.type+" .current-setting").innerText=f.text||"")}var c=this,u=(this._player.on(o.Private.SettingListShow,function(f){c.isOpened=!0,f=f.paramData,g(f),h.css(c.el(),"display","block")}),this._player.on(o.Private.UpdateToSettingList,function(f){f=f.paramData,g(f)}),this._player.on(o.Private.SelectorUpdateList,function(f){f=f.paramData,g(f),c._player.trigger(o.Private.SelectorValueChange,f)}),this._player.on(o.Private.SettingListHide,function(){c.isOpened=!1,h.css(c.el(),"display","none")}),l.on(this.el(),"click",function(y){c._player.trigger(o.Private.SettingListHide);var y=y.srcElement||y.target;(y=e.findItemElementForList(y))&&(y=y.getAttribute("type"),c._player.trigger(o.Private.SelectorShow,{type:y}))}),p.IS_MOBILE?"touchleave":"mouseleave");l.on(this.el(),u,function(){s()}),l.on(this._player.tag,"click",function(f){f&&f.target==f.currentTarget&&s()}),l.on(this._player.tag,"touchstart",function(f){f&&f.target==f.currentTarget&&s()}),this._player.on(o.Private.QualityChange,function(a){var y,d,a=a.paramData;a.levelSwitch&&(y=document.querySelector("#"+c.id()+" .prism-setting-quality .current-setting"),d=n.get("Auto"),a=a.desc,-1<y.innerText.indexOf(d))&&(a&&-1<String(a).indexOf("(")?d=d+"-"+a:d+=a?"("+a+")":"",y.innerText=d)})}});m.exports=r},{"../../../lang/index":28,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/ua":53,"../../../player/base/event/eventtype":77,"../../component":143,"./export":161,"./util":166}],163:[function(n,m,W){var v=n("./selector"),h=n("../../../lib/object"),p=(n("../../../lib/util"),n("../../../lib/cookie")),l=n("../../../lib/dom"),o=(n("../../../lib/event"),n("../../../lib/constants")),t=n("../../../lang/index"),e=n("../../../player/base/event/eventtype"),n=v.extend({init:function(r,s){this.Name=t.get("Quality"),this.Type="quality",this.Tooltip=t.get("Quality_Switch_To"),v.call(this,r,s),this._isMasterLevel=!1},showTip:function(r,s){this._player.trigger(e.Private.Info_Show,{text:r,duration:s,align:"lb"})},bindEvent:function(){this.bindCommonEvent();var r=this,s=(this._player.on(e.Private.QualityChange,function(g){var c,u,f=0<r._player._urls.length?r._player._urls:r._player._qualityService.levels;(data=g.paramData).levelSwitch?(c=data.desc||data.bitrate,r._autoSWitchDesc=c,r._updateText(c)):0<r._player._currentPlayIndex&&(r._autoSWitchDesc="",u=f[(c=r._player._currentPlayIndex)-1].desc,f=f[c].desc,r.showTip(u+g.paramData+f,1e3),r._player.trigger(e.Private.SelectorValueChange,{type:r.Type,text:f}))}),document.querySelector("#"+r.id()+" .selector-list"));this._player.on(e.Player.LevelSwitch,function(){l.addClass(s,"disabled")}),this._player.on(e.Player.LevelSwitched,function(){l.removeClass(s,"disabled")})},generateList:function(r){var s,g=this._player._urls,c=this._player._currentPlayIndex,u=this._player._qualityService.levels,f=(0<u.length&&(this._isMasterLevel=!0,this._player._options.isVBR)&&(c=(g=u).length-1),document.querySelector("#"+this.id()+" .selector-list"));0<g.length&&(s=this,h.each(g,function(y,d){var a,_;(y.desc||y.bitrate)&&(a=l.createEl.call(this,"li",{key:y.Url,index:d,text:y.desc||y.bitrate}),_=l.createEl.call(this,"span",{key:y.Url,index:d,text:y.desc||y.bitrate}),d==c&&(l.addClass(a,"current"),s._previousSelection=a),_.innerText=y.desc||y.bitrate,a.appendChild(_),f.appendChild(a))})),this._autoSWitchDesc&&this._updateText(this._autoSWitchDesc)},execute:function(r){if(this._player._switchSourcing=!0,this._isMasterLevel){for(var s,g=this._player._qualityService.levels,c=0;c<g.length;c++)g[c].Url==r&&g[c].desc!=t.get("Auto")&&(s=g[c],this._resetAutoText());this._player._switchLevel?this._player._switchLevel(r,s):(u=this._player.autoplay||this._player._status!="pause",this._player._loadByUrlInner(r,this._player.getCurrentTime(),u))}else{for(var u,f=this._player._urls.length,y=this._player._currentPlayIndex,d=-1,c=0;c<f;c++)if(this._player._urls[c].Url==r){d=this._player._currentPlayIndex=c,p.set(o.SelectedStreamLevel,this._player._urls[c].definition,365);break}y!=d&&-1<d&&(y=this._player.getCurrentTime(),u=this._player.autoplay||this._player._status!="pause",this._player.autoplay||y!=0||(u=!1),this._player._switchLevel&&!this._player._options.isLive&&this._player._options.isVBR?this._player._switchLevel(r):this._player._loadByUrlInner(r,y,u))}var a=this;setTimeout(function(){a._player._switchSourcing=!1})},_updateText:function(r){var s=document.querySelector("#"+this.id()+" .selector-list .current"),g=document.querySelector("#"+this.id()+" .selector-list .current span"),c=t.get("Auto");g&&g.innerText&&-1<g.innerText.indexOf(c)&&(r&&-1<String(r).indexOf("(")?c=c+"-"+r:c+=r?"("+r+")":"",g.innerText=c,s)&&(s.text=c)},_resetAutoText:function(){for(var r=t.get("Auto"),s=document.querySelectorAll("#"+this.id()+" .selector-list li"),g=0;g<s.length;g++){var c=s[g],u=c.querySelector("span");if(-1<u.innerText.indexOf(r)){u.innerText=r,c.text=r;break}}}});m.exports=n},{"../../../lang/index":28,"../../../lib/constants":33,"../../../lib/cookie":34,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/object":47,"../../../lib/util":55,"../../../player/base/event/eventtype":77,"./selector":164}],164:[function(e,m,W){var v=e("../../component"),h=(e("../../../lib/object"),e("../../../lib/util"),e("../../../lib/ua")),p=(e("../../../lib/cookie"),e("../../../lib/dom")),l=e("../../../lib/event"),o=e("./util"),t=(e("../../../lang/index"),e("../../../player/base/event/eventtype")),e=v.extend({init:function(n,r){this._hasGeneratedList=!1,this._previousSelection=null,this._backupSelector="",v.call(this,n,r),this.className=r.className||"prism-"+this.Type+"-selector prism-setting-selector",this.addClass(this.className)},createEl:function(){var n=v.prototype.createEl.call(this,"div");return n.innerHTML='<div class="header"><div class="left-array"></div><span>'+this.Name+'</span></div><ul class="selector-list"></ul>',n},bindEvent:function(){this.bindCommonEvent()},bindCommonEvent:function(){var n=this,r=document.querySelector("#"+n.id()+" .selector-list"),c=document.querySelector("#"+n.id()+" .header");function s(){n._hasGeneratedList||(n._clear(),n.generateList(n._backupSelector),n._backupSelector="",n._hasGeneratedList=!0)}this._player.on(t.Private.ChangeURL,function(){n._hasGeneratedList=!1}),l.on(c,"click",function(){n._player.trigger(t.Private.SelectorHide),n._player.trigger(t.Private.SettingListShow,{type:n.Type,text:n._previousSelection?n._previousSelection.text:""})}),l.on(r,"click",function(f){var f=f.srcElement||f.target,y=f.key,d=f.text;n._player.traceLog("selector.js","selector::click#"+n.Name+"#"+n.Type+"#"+d+"#"+y),n._player.trigger(t.Player.SettingSelected,{name:n.Name,type:n.Type,text:d,key:y}),d!==void 0&&(n._previousSelection&&p.removeClass(n._previousSelection,"current"),n._previousSelection=o.findliElementForSelector(f),p.addClass(n._previousSelection,"current"),n.execute&&n.execute(y),f=n.Tooltip+"<span>"+d+"</span>",n._player.trigger(t.Private.Info_Show,{text:f,duration:3e3,align:"lb"}))}),n._player.on(t.Private.SelectorHide,function(){g()}),n._player.on(t.Private.SelectorValueChange,function(u){var f=u.paramData;if(f&&f.type==n.Type){var y=document.querySelectorAll("#"+n.id()+" .selector-list li");if(y){for(var d=y.length,a=(d==0&&(n._backupSelector=f.text),-1),_=0;_<d;_++)if(y[_].text==f.text){a=_;break}n._previousSelection&&(p.removeClass(n._previousSelection,"current"),n._previousSelection=null),a!==-1?(p.addClass(y[a],"current"),n._previousSelection=y[a]):n._previousSelection||console.warn("UI Not Sync: No Such Option '"+f.text+"' in '"+f.type+"'")}}}),n._player.on(t.Private.SettingListShow,function(){s()}),n._player.on(t.Private.SelectorGenerateList,function(y){var f=y.paramData&&y.paramData.type,y=y.paramData&&y.paramData.value;f===n.Type&&(n._hasGeneratedList=!1,y&&(n._backupSelector=y),s())}),n._player.on(t.Private.SelectorShow,function(u){(u=u.paramData).type==n.Type&&(u=document.querySelector("#"+n._player.id()+" .prism-"+u.type+"-selector"),n._hasGeneratedList||s(),p.css(u,"display","block"))});var g=function(){p.css(n.el(),"display","none"),n._player.trigger(t.Private.UpdateToSettingList,{type:n.Type,text:n._previousSelection?n._previousSelection.text:""})},c=h.IS_MOBILE?"touchleave":"mouseleave";l.on(this.el(),c,function(){g()}),l.on(this._player.tag,"click",function(u){u&&u.target==u.currentTarget&&g()}),l.on(this._player.tag,"touchstart",function(u){u&&u.target==u.currentTarget&&g()})},setSelected:function(n){},generateList:function(){},_clear:function(){document.querySelector("#"+this.id()+" .selector-list").innerHTML=""}});m.exports=e},{"../../../lang/index":28,"../../../lib/cookie":34,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/object":47,"../../../lib/ua":53,"../../../lib/util":55,"../../../player/base/event/eventtype":77,"../../component":143,"./util":166}],165:[function(e,m,W){var v=e("./selector"),h=e("../../../lib/object"),p=(e("../../../lib/util"),e("../../../lib/cookie"),e("../../../lib/dom")),l=(e("../../../lib/event"),e("./util"),e("../../../lib/constants")),o=e("../../../lang/index"),t=e("../../../player/base/event/eventtype"),e=v.extend({init:function(n,r){var s=this;this.Name=o.get("Speed"),this.Type="speed",this.Tooltip=o.get("Speed_Switch_To"),this.speedPreStore=1,this.listGenerated=!1,v.call(this,n,r),this._player.on(t.Private.PlaybackRateChanged,function(g){s.speedPreStore=g.paramData,s.listGenerated&&s._player.trigger(t.Private.SelectorUpdateList,{type:"speed",text:g.paramData})})},generateList:function(){var n=document.querySelector("#"+this.id()+" .selector-list"),r=this._player._options.speedLevels,r=this.verifySpeedLevels(r)?r:l.SpeedLevels,s=this;h.each(r,function(g,c){var u=p.createEl.call(this,"li",{key:g.key,text:g.text}),f=p.createEl.call(this,"span",{key:g.key,text:g.text});f.innerText=g.text,g.key==s.speedPreStore&&(p.addClass(u,"current"),s._previousSelection=u),u.appendChild(f),n.appendChild(u)}),this.listGenerated=!0},execute:function(n){this._player.setSpeed(n,!1)},verifySpeedLevels:function(n){var r=0;if(n&&n.length)try{n.forEach(function(s){typeof s.key=="number"&&s.key==s.key&&0<=s.key&&r++})}catch(s){return!1}return n&&r===n.length}});m.exports=e},{"../../../lang/index":28,"../../../lib/constants":33,"../../../lib/cookie":34,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/object":47,"../../../lib/util":55,"../../../player/base/event/eventtype":77,"./selector":164,"./util":166}],166:[function(S,m,W){m.exports.findliElementForSelector=function(v){var h;return v&&v.tagName.toLowerCase()!="li"?(h=v.parentElement)&&h.tagName.toLowerCase()=="li"?h:null:v},m.exports.findliElementByKey=function(v,h){return document.querySelectors(v),null},m.exports.findItemElementForList=function(v){var h;return!v||-1<v.className.indexOf("prism-setting-item")||(h=v.parentElement)&&(v=m.exports.findItemElementForList(h)),v}},{}],167:[function(t,m,W){var v=t("../component"),h=t("../../lib/dom"),p=t("../../lang/index"),l=t("../../player/base/event/eventtype"),o=t("./util"),t=v.extend({init:function(e,n){v.call(this,e,n),this.addClass("prism-snapshot-btn")},createEl:function(){return v.prototype.createEl.call(this,"div")},bindEvent:function(){var e=this,n=this._player;n.on(l.Private.Snapshot_Hide,function(){h.css(e._el,"display","none")}),o.registerTooltipEvent.call(this,this.el(),p.get("Snapshot")),this.on("click",function(){e.trigger(l.Player.Snapshoting),e.trigger(l.Player.Snapshoted,n.takeSnapshot())})}});m.exports=t},{"../../lang/index":28,"../../lib/dom":37,"../../player/base/event/eventtype":77,"../component":143,"./util":173}],168:[function(h,m,W){var v=h("../component"),h=(h("../../lib/dom"),h("../../player/base/event/eventtype"),v.extend({init:function(p,l){v.call(this,p,l),this.addClass("prism-text-overlay")},createEl:function(){return v.prototype.createEl.call(this,"div")},_hide:function(p){},_show:function(p){},bindEvent:function(){}}));m.exports=h},{"../../lib/dom":37,"../../player/base/event/eventtype":77,"../component":143}],169:[function(t,m,W){var v=t("../component"),h=(t("../../lib/util"),t("../../lib/dom")),p=t("../../lib/event"),l=(t("../../lib/ua"),t("../../lang/index"),t("../../player/base/event/eventtype")),o=t("./util"),t=v.extend({init:function(e,n){v.call(this,e,n),this.addClass("prism-thumbnail")},createEl:function(){var e=v.prototype.createEl.call(this,"div");return e.innerHTML="<img></img><span></span>",e},bindEvent:function(){var e=this,n=(p.on(this._el,"mousemove",function(r){r.preventDefault()}),p.on(this._el,"touchmove",function(r){r.preventDefault()}),e._player.on(l.Private.ThumbnailLoaded,function(u){var s,g,c,u=u.paramData;u&&0<u.length&&(s=e._player._thumbnailService.makeUrl(u[0].text),e._player.log("THUMBNAILSTART",{tu:encodeURIComponent(s)}),g=new Date().getTime(),u[0].isBig?(h.css(e.el(),"background","url("+s+")"),h.css(e.el(),"width",u[0].w+"px"),h.css(e.el(),"height",u[0].h+"px"),e._player.log("THUMBNAILCOMPLETE",{ftt:new Date().getTime()-g})):((c=document.querySelector("#"+e.id()+" img")).onload=function(){var f=c.width,y=c.height;h.css(e.el(),"width",f+"px"),h.css(e.el(),"height",y+"px"),e._player.log("THUMBNAILCOMPLETE",{ftt:new Date().getTime()-g})},c.src=s))}),o.throttle(function(f){var s,g,c,f=f[0],u=document.querySelector("#"+e.id()+" span"),f=f.paramData;u.innerText=f.formatTime,f&&((s=e._player._thumbnailService.findAvailableCue(f.time))?s.isBig?(g=e._player._thumbnailService.makeUrl(s.text),h.css(e.el(),"background","url("+g+")"),s.w,s.h,c=-1*s.x+"px "+-1*s.y+"px",h.css(e.el(),"background-position",c)):(c=document.querySelector("#"+e.id()+" img"),g=e._player._thumbnailService.makeUrl(s.text),c.src!=g&&(c.src=g)):(h.css(e.el(),"border","none"),h.css(u,"left","0px")),h.css(e.el(),"display","block"),c=0,g=(s?e.el():u).offsetWidth,c=f.left+g>f.progressWidth?f.left-g:(c=f.left-g/2)<0?0:c,h.css(e.el(),"left",c+"px"))},30));e._player.on(l.Private.ThumbnailShow,n),e._player.on(l.Private.ThumbnailHide,function(r){h.css(e.el(),"display","none")})},_createSamllThumbnail:function(){},disposeUI:function(){}});m.exports=t},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/ua":53,"../../lib/util":55,"../../player/base/event/eventtype":77,"../component":143,"./util":173}],170:[function(l,m,W){var v=l("../component"),h=l("../../lib/util"),p=l("../../player/base/event/eventtype"),l=v.extend({init:function(o,t){v.call(this,o,t),this.addClass("prism-time-display")},createEl:function(){var o=v.prototype.createEl.call(this,"div");return o.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="duration">00:00</span>',o},bindEvent:function(){var o=this;this._player.on(p.Video.DurationChange,function(){var t=h.formatTime(o._player.getDisplayDuration());t?(document.querySelector("#"+o.id()+" .time-bound").style.display="inline",document.querySelector("#"+o.id()+" .duration").style.display="inline",document.querySelector("#"+o.id()+" .duration").innerText=t):(document.querySelector("#"+o.id()+" .duration").style.display="none",document.querySelector("#"+o.id()+" .time-bound").style.display="none")}),this._player.on(p.Video.TimeUpdate,function(){var t=o._player.getCurrentTime(),t=h.formatTime(t);document.querySelector("#"+o.id()+" .current-time")&&(t?(document.querySelector("#"+o.id()+" .current-time").style.display="inline",document.querySelector("#"+o.id()+" .current-time").innerText=t):document.querySelector("#"+o.id()+" .current-time").style.display="none")})}});m.exports=l},{"../../lib/util":55,"../../player/base/event/eventtype":77,"../component":143}],171:[function(l,m,W){var v=l("../component"),h=l("../../lib/dom"),p=l("../../player/base/event/eventtype"),l=v.extend({init:function(o,t){v.call(this,o,t),this.addClass("prism-tooltip")},createEl:function(){var o=v.prototype.createEl.call(this,"p");return o.innerText="\u63D0\u793A\u4FE1\u606F",o},bindEvent:function(){var o=this;o._player.on(p.Private.TooltipShow,function(n){var e=document.querySelector("#"+o.id()),n=n.paramData,r=(e.innerText=n.text,h.css(e,"display","block"),e.offsetWidth),s=document.querySelector("#"+o._player.id()+" .prism-controlbar");s&&(s=s.offsetWidth,n.left+r>s?h.css(e,"left",s-r+"px"):h.css(e,"left",n.left-(r-n.width)/2+"px"))}),o._player.on(p.Private.TooltipHide,function(t){var e=document.querySelector("#"+o.id());h.css(e,"display","none")})}});m.exports=l},{"../../lib/dom":37,"../../player/base/event/eventtype":77,"../component":143}],172:[function(t,m,W){var v=t("../component"),h=t("../../lib/dom"),p=t("../../lib/event"),l=t("../../lang/index"),o=t("../../player/base/event/eventtype"),t=v.extend({init:function(e,n){v.call(this,e,n),this.addClass("prism-unmute-btn")},createEl:function(){var e=v.prototype.createEl.call(this,"div");return e.innerText=l.get("Click_To_Unmute"),e},bindEvent:function(){var e=this;this._player.on(o.Private.MutedAutoplay,function(){var n;(n=e._player.getOptions().autoplayPolicy)!=null&&n.showUnmuteBtn&&e._show()}),this._player.on(o.Private.HideUnmuteButton,function(){e._hide()}),p.on(this.el(),"click",function(){e._player.unMute(!0),e._hide()})},_show:function(){h.css(this.el(),"display","block")},_hide:function(){h.css(this.el(),"display","none")}});m.exports=t},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../player/base/event/eventtype":77,"../component":143}],173:[function(S,m,W){var v=S("../../lib/event"),h=S("../../player/base/event/eventtype");m.exports.registerTooltipEvent=function(p,l){function o(){t._controlbarTooltipHandler&&(clearTimeout(t._controlbarTooltipHandler),t._controlbarTooltipHandler=null)}var t=this;v.on(this.el(),"mouseover",function(e){o(),t._controlbarTooltipHandler=setTimeout(function(){t._player.trigger(h.Private.TooltipHide)},4e3);var n=t.el().offsetLeft,r=t.el().offsetWidth,s=l;typeof l=="function"&&(s=l.call(this)),t._player.trigger(h.Private.TooltipShow,{left:n,width:r,text:s})}),v.on(this.el(),"mouseout",function(){o(),t._player.trigger(h.Private.TooltipHide)})},m.exports.throttle=function(p,l){var o=Date.now();return function(){var t=arguments,e=Date.now();l<=e-o&&(p(t),o=e)}},m.exports.debounce=function(p,l){var o;return function(){var t=this,e=arguments;clearTimeout(o),o=setTimeout(function(){p.apply(t,e)},l)}}},{"../../lib/event":38,"../../player/base/event/eventtype":77}],174:[function(n,m,W){var v=n("../component"),h=n("../../lib/dom"),p=n("../../lib/event"),l=n("../../player/base/event/eventtype"),o=n("./util"),t=n("../../lang/index"),e=n("./volumecontrol"),n=v.extend({init:function(r,s){v.call(this,r,s),this.addClass("prism-volume");var g=new e(r,s);r.addChild(g,s),this.volumeControl=g},createEl:function(){var r=v.prototype.createEl.call(this,"div");return r.innerHTML='<div class="volume-icon"><div class="short-horizontal"></div><div class="long-horizontal"></div></div>',r},bindEvent:function(){var r=this,s=r._player,g=(this.icon=document.querySelector("#"+r.id()+"  .volume-icon"),o.registerTooltipEvent.call(this,this.el(),function(){return r._player.muted()||r._player.getVolume()==0?t.get("Muted"):t.get("Volume")}),p.on(this.icon,"click",function(u){var f;r.volumeControl._shown?s.muted()?s.unMute():s.mute():(f=r.el().offsetLeft,r._player.trigger(l.Private.SettingListHide),r._player.trigger(l.Private.SelectorHide),r._player.trigger(l.Private.VolumeVisibilityChange,f),r._player.trigger(l.Private.MarkerTextHide))}),document.querySelector("#"+r.id()+"  .long-horizontal")),c=document.querySelector("#"+r.id()+"  .short-horizontal");p.on(this.el(),"mouseover",function(){h.removeClass(g,"volume-hover-animation"),setTimeout(function(){h.addClass(g,"volume-hover-animation")}),setTimeout(function(){h.removeClass(g,"volume-hover-animation"),h.addClass(c,"volume-hover-animation"),setTimeout(function(){h.removeClass(c,"volume-hover-animation"),h.addClass(g,"volume-hover-animation")},300)},300)}),p.on(window,"resize",function(){var u;r.volumeControl._shown&&(u=r.el().offsetLeft,r._player.trigger(l.Private.VolumeUpdatePosition,u))})}});m.exports=n},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../player/base/event/eventtype":77,"../component":143,"./util":173,"./volumecontrol":175}],175:[function(o,m,W){var v=o("../component"),h=o("../../lib/dom"),p=o("../../lib/event"),l=o("../../player/base/event/eventtype"),o=(o("./util"),o("../../lang/index"),v.extend({init:function(t,e){v.call(this,t,e),this.addClass("prism-volume-control"),this._shown=!1},createEl:function(){var t=v.prototype.createEl.call(this,"div");return t.innerHTML='<div class="volume-range"><div class="volume-value"></div><div class="volume-cursor"></div></div>',t},bindEvent:function(){var t=this;this.icon=document.querySelector("#"+t._player.id()+"  .volume-icon"),this.control=document.querySelector("#"+t.id()),this.volumnValue=document.querySelector("#"+t.id()+"  .volume-value"),this.volumnRange=document.querySelector("#"+t.id()+"  .volume-range"),this.volumnCursor=document.querySelector("#"+t.id()+"  .volume-cursor"),this._player.on(l.Private.VolumeVisibilityChange,function(r){var n,r=r.paramData;!t._shown&&r?(n=t._player.getVolume(),t._setVolumnUI(n),h.css(t.control,"display","block"),r&&t._updatePosition(r),t._shown=!0):t._hide()}),this._player.on(l.Private.VolumeUpdatePosition,function(e){e=e.paramData,t._shown&&t._updatePosition(e)}),this._player.on(l.Private.ControlBarClick,function(e){h.hasClass(e.paramData.target,"prism-controlbar-bg")&&t._hide()}),p.on(this.volumnRange,"click",function(e){e=h.getPointerPosition(t.volumnRange,e).y,e<0||1<e||(t._setVolumnUI(e=1<(e=e<0?0:e)?1:e),t._setMuteUI(e),t._player.setVolume(e))}),p.on(this._player.tag,"click",function(e){e&&e.target==e.currentTarget&&t._hide()}),p.on(this._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&t._hide()}),p.on(this.volumnCursor,"mousedown",function(e){t._onMouseDown(e)}),p.on(this.volumnCursor,"touchstart",function(e){t._onMouseDown(e)}),this._player.on(l.Private.VolumnChanged,function(e){e=e.paramData,-1<e&&t._setVolumnUI(e),t._setMuteUI(e)}),p.on(this.control,"mouseleave",function(){t._offEvent(),t._hide()}),p.on(this.control,"mouseover",function(){h.addClass(t.control,"hover")}),t._rangeBottom=t._getBottom()},_getBottom:function(){var t;return window.getComputedStyle?(t=window.getComputedStyle(this.volumnRange,null).getPropertyValue("bottom"),parseFloat(t)):26},_onMouseDown:function(t){var e=this;t.preventDefault(),p.on(this.control,"mousemove",function(n){e._onMouseMove(n)}),p.on(this.control,"touchmove",function(n){e._onMouseMove(n)}),p.on(this._player.tag,"mouseup",function(n){e._onMouseUp(n)}),p.on(this._player.tag,"touchend",function(n){e._onMouseUp(n)}),p.on(this.control,"mouseup",function(n){e._onMouseUp(n)}),p.on(this.control,"touchend",function(n){e._onMouseUp(n)})},_onMouseUp:function(t){t.preventDefault(),this._offEvent(),this.volumnRange.offsetHeight&&(t=(this.volumnValue.offsetHeight/this.volumnRange.offsetHeight).toFixed(2),this._player.setVolume(t),this._setMuteUI(t))},_onMouseMove:function(t){t.preventDefault(),t=h.getPointerPosition(this.volumnRange,t).y,t<0||1<t||this._setVolumnUI(t=1<(t=t<0?0:t)?1:t)},_getPosition:function(t){for(var e=this.volumnRange,n=0;e=e.offsetParent;)n+=e.offsetTop;var r=this.volumnRange.offsetHeight,s=this.volumnCursor.offsetHeight,g=(t.touches?t.touches[0]:t).pageY;return(r-((g=r<g-n?t.clientY:g)-n)+s)/this.volumnRange.offsetHeight},_offEvent:function(){p.off(this._player.tag,"mouseup"),p.off(this._player.tag,"touchend"),p.off(this.control,"mousemove"),p.off(this.control,"touchmove"),p.off(this.control,"mouseup"),p.off(this.control,"touchend")},_setMuteUI:function(t){isNaN(t)||(t==0||t==-1?h.addClass(this.icon,"mute"):h.removeClass(this.icon,"mute"))},_setVolumnUI:function(t){isNaN(t)||(h.css(this.volumnValue,"height",100*t+"%"),h.css(this.volumnCursor,"bottom",100*(t=t==1?.99:t)+"%"))},_hide:function(){h.css(this.control,"display","none"),this._shown=!1},_updatePosition:function(t){h.css(this.control,"left",t-5+"px")}}));m.exports=o},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../player/base/event/eventtype":77,"../component":143,"./util":173}],176:[function(S,m,W){m.exports={H5Loading:S("./component/h5-loading"),bigPlayButton:S("./component/big-play-button"),unmuteButton:S("./component/unmute-button"),controlBar:S("./component/controlbar"),progress:S("./component/progress"),playButton:S("./component/play-button"),liveDisplay:S("./component/live-display"),timeDisplay:S("./component/time-display"),fullScreenButton:S("./component/fullscreen-button"),volume:S("./component/volume"),snapshot:S("./component/snapshot"),errorDisplay:S("./component/error-display"),infoDisplay:S("./component/info-display"),liveShiftProgress:S("../commonui/liveshiftprogress"),liveShiftTimeDisplay:S("../commonui/livetimedisplay"),setting:S("./component/setting/button"),subtitle:S("./component/cc-button"),thumbnail:S("./component/thumbnail"),tooltip:S("./component/tooltip")}},{"../commonui/liveshiftprogress":17,"../commonui/livetimedisplay":18,"./component/big-play-button":144,"./component/cc-button":145,"./component/controlbar":146,"./component/error-display":149,"./component/fullscreen-button":150,"./component/h5-loading":151,"./component/info-display":152,"./component/live-display":153,"./component/play-button":154,"./component/progress":156,"./component/setting/button":159,"./component/snapshot":167,"./component/thumbnail":169,"./component/time-display":170,"./component/tooltip":171,"./component/unmute-button":172,"./component/volume":174}]},{},[20])(20)})},75251:function(S,m,W){"use strict";var v;var h=W(67294),p=Symbol.for("react.element"),l=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,t=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,e={key:!0,ref:!0,__self:!0,__source:!0};function n(r,s,g){var c,u={},f=null,y=null;g!==void 0&&(f=""+g),s.key!==void 0&&(f=""+s.key),s.ref!==void 0&&(y=s.ref);for(c in s)o.call(s,c)&&!e.hasOwnProperty(c)&&(u[c]=s[c]);if(r&&r.defaultProps)for(c in s=r.defaultProps,s)u[c]===void 0&&(u[c]=s[c]);return{$$typeof:p,type:r,key:f,ref:y,props:u,_owner:t.current}}v=l,m.jsx=n,m.jsxs=n},85893:function(S,m,W){"use strict";S.exports=W(75251)},37923:function(S){function m(W,v){(v==null||v>W.length)&&(v=W.length);for(var h=0,p=new Array(v);h<v;h++)p[h]=W[h];return p}S.exports=m,S.exports.__esModule=!0,S.exports.default=S.exports},82187:function(S){function m(W){if(Array.isArray(W))return W}S.exports=m,S.exports.__esModule=!0,S.exports.default=S.exports},73964:function(S){function m(W,v){var h=W==null?null:typeof Symbol!="undefined"&&W[Symbol.iterator]||W["@@iterator"];if(h!=null){var p,l,o,t,e=[],n=!0,r=!1;try{if(o=(h=h.call(W)).next,v===0){if(Object(h)!==h)return;n=!1}else for(;!(n=(p=o.call(h)).done)&&(e.push(p.value),e.length!==v);n=!0);}catch(s){r=!0,l=s}finally{try{if(!n&&h.return!=null&&(t=h.return(),Object(t)!==t))return}finally{if(r)throw l}}return e}}S.exports=m,S.exports.__esModule=!0,S.exports.default=S.exports},69094:function(S){function m(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}S.exports=m,S.exports.__esModule=!0,S.exports.default=S.exports},5574:function(S,m,W){var v=W(82187),h=W(73964),p=W(96263),l=W(69094);function o(t,e){return v(t)||h(t,e)||p(t,e)||l()}S.exports=o,S.exports.__esModule=!0,S.exports.default=S.exports},96263:function(S,m,W){var v=W(37923);function h(p,l){if(p){if(typeof p=="string")return v(p,l);var o=Object.prototype.toString.call(p).slice(8,-1);if(o==="Object"&&p.constructor&&(o=p.constructor.name),o==="Map"||o==="Set")return Array.from(p);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return v(p,l)}}S.exports=h,S.exports.__esModule=!0,S.exports.default=S.exports}}]);
